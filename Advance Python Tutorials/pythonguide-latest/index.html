

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Advance Python Tutorials documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
        <script type="text/javascript" src="_static/copybutton.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  <link rel="stylesheet" href="_static/_static/css/theme.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" /> 

<!-- RTD Extra Head -->

<!-- 
Always link to the latest version, as canonical.
http://docs.readthedocs.org/en/latest/canonical.html
-->
<link rel="canonical" href="https://pythonguide.readthedocs.io/en/latest/" />

<link rel="stylesheet" href="https://assets.readthedocs.org/static/css/readthedocs-doc-embed.css" type="text/css" />

<script type="text/javascript" src="_static/readthedocs-data.js"></script>

<!-- Add page-specific data, which must exist in the page js, not global -->
<script type="text/javascript">
READTHEDOCS_DATA['page'] = "index"
</script>

<script type="text/javascript" src="https://assets.readthedocs.org/static/javascript/readthedocs-analytics.js"></script>

<!-- end RTD <extrahead> -->
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html#document-index" class="icon icon-home"> Advance Python Tutorials
          

          
          </a>

          
            
            
            
              <div class="version">
                latest
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
            
              <!-- Local TOC -->
              <div class="local-toc"><p class="caption"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-python/review">1. Python review</a><ul>
<li class="toctree-l2"><a class="reference internal" href="index.html#introduction">1.1. Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#download-and-installation">1.2. Download and Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#basics">1.3. Basics</a><ul>
<li class="toctree-l3"><a class="reference internal" href="index.html#run-code-from-python-shell">1.3.1. Run code from Python shell (&gt;&gt;&gt;)</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#running-python-files">1.3.2. Running Python Files</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#variables">1.3.3. Variables</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#built-in-object-types">1.3.4. Built-in object types</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#numbers">1.3.5. Numbers</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#string">1.3.6. String</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#list">1.3.7. List</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#tuple">1.3.8. Tuple</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#dictionary">1.3.9. Dictionary</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="index.html#number-conversion">1.4. Number conversion</a><ul>
<li class="toctree-l3"><a class="reference internal" href="index.html#direct-conversion">1.4.1. Direct conversion</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#zfill">1.4.2. zfill</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="index.html#control-structure">1.5. Control structure</a><ul>
<li class="toctree-l3"><a class="reference internal" href="index.html#if-else">1.5.1. if-else</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#while-loop">1.5.2. While loop</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#for-loop">1.5.3. For loop</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="index.html#function">1.6. Function</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#numpy-scipy-and-matplotlib">1.7. Numpy, Scipy and Matplotlib</a><ul>
<li class="toctree-l3"><a class="reference internal" href="index.html#arrays">1.7.1. Arrays</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="index.html#good-practices">1.8. Good practices</a><ul>
<li class="toctree-l3"><a class="reference internal" href="index.html#avoid-range-command">1.8.1. Avoid range command</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#enumerate">1.8.2. Enumerate</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#loop-in-sorted-order">1.8.3. Loop in sorted order</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#loop-over-keys">1.8.4. Loop over keys</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#loop-over-keys-and-values">1.8.5. Loop over keys and values</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#create-dictionaries-from-lists">1.8.6. Create dictionaries from lists</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#looping-and-modifying-the-list-simultaneously">1.8.7. Looping and modifying the list simultaneously</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#check-items-in-the-list">1.8.8. Check items in the list</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#unpacking">1.8.9. Unpacking</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#update-variables">1.8.10. Update variables</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="index.html#object-oriented-programming">1.9. Object oriented programming</a><ul>
<li class="toctree-l3"><a class="reference internal" href="index.html#class-and-object">1.9.1. Class and object</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#create-class-and-object">1.9.2. Create class and object</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#inheritance">1.9.3. Inheritance</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#polymorphism">1.9.4. Polymorphism</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#abstract-class-and-method">1.9.5. Abstract class and method</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#public-and-private-attribute">1.9.6. Public and private attribute</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#class-attribute">1.9.7. Class Attribute</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#special-methods">1.9.8. Special methods</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="index.html#conclusion">1.10. Conclusion</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-python/package">2. Virtual environment, Package and Distribution</a><ul>
<li class="toctree-l2"><a class="reference internal" href="index.html#anadconda-virtual-environment">2.1. Anadconda virtual environment</a><ul>
<li class="toctree-l3"><a class="reference internal" href="index.html#installation">2.1.1. Installation</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#creating-virtual-environment">2.1.2. Creating virtual environment</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#other-commands">2.1.3. Other commands</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="index.html#virtual-environment-using-virtualenv-and-virtualenvw">2.2. Virtual environment using virtualenv and virtualenvw</a><ul>
<li class="toctree-l3"><a class="reference internal" href="index.html#install-virtualenv-and-virtualenvwrapper">2.2.1. Install virtualenv and virtualenvwrapper</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#modify-bashrc">2.2.2. Modify .bashrc</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#create-virtualenv">2.2.3. Create virtualenv</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="index.html#packages">2.3. Packages</a><ul>
<li class="toctree-l3"><a class="reference internal" href="index.html#location-of-installed-packages">2.3.1. Location of installed packages</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#create-files">2.3.2. Create files</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#id1">2.3.3. Packages</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#globally-available-package">2.3.4. Globally available package</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#init-file">2.3.5. __init__ file</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#all-in-init-file">2.3.6. __all__ in __init__ file</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="index.html#distribute-the-package">2.4. Distribute the package</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#conclusion">2.5. Conclusion</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-python/debug">3. Debugging</a><ul>
<li class="toctree-l2"><a class="reference internal" href="index.html#introdution">3.1. Introdution</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#first-code">3.2. First code</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#reading-input-from-command-line">3.3. Reading input from command line</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#id1">3.4. Debugging</a><ul>
<li class="toctree-l3"><a class="reference internal" href="index.html#run-script-and-go-to-python-shell">3.4.1. Run script and go to Python shell</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#python-debugger-pdb">3.4.2. Python debugger (pdb)</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="index.html#underscore-operator">3.5. Underscore operator (_)</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#conclusion">3.6. Conclusion</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-python/print">4. Print statement</a><ul>
<li class="toctree-l2"><a class="reference internal" href="index.html#introduction">4.1. Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#expansion-calculation">4.2. Expansion calculation</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#print-the-expansion">4.3. Print the expansion</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#formatted-output">4.4. Formatted output</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#saving-results-in-file">4.5. Saving results in file</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#alter-the-printing-sequence">4.6. Alter the printing sequence</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#conclusion">4.7. Conclusion</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-python/csv">5. CSV module</a><ul>
<li class="toctree-l2"><a class="reference internal" href="index.html#introduction">5.1. Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#basic-file-operations">5.2. Basic file operations</a><ul>
<li class="toctree-l3"><a class="reference internal" href="index.html#open-and-close-the-files">5.2.1. Open and close the files</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#with-open-statement">5.2.2. with - open statement</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="index.html#strings-operations">5.3. Strings operations</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#perform-calculations">5.4. Perform calculations</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#problem-with-current-method">5.5. Problem with current method</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#id1">5.6. CSV module</a><ul>
<li class="toctree-l3"><a class="reference internal" href="index.html#csv-reader">5.6.1. csv.reader</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#csv-dictreader">5.6.2. csv.DictReader</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="index.html#conclusion">5.7. Conclusion</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-python/function">6. Functions</a><ul>
<li class="toctree-l2"><a class="reference internal" href="index.html#docstring">6.1. docstring</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#types-of-docstring">6.2. types of docstring</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#convert-previous-code-into-function">6.3. Convert previous code into function</a><ul>
<li class="toctree-l3"><a class="reference internal" href="index.html#conversion">6.3.1. Conversion</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#debugging">6.3.2. Debugging</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="index.html#glob-module">6.4. glob module</a><ul>
<li class="toctree-l3"><a class="reference internal" href="index.html#price-calculation-on-files-using-glob">6.4.1. Price calculation on files using ‘glob’</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-python/datatypes">7. Data types and objects</a><ul>
<li class="toctree-l2"><a class="reference internal" href="index.html#introduction">7.1. Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#index-0">7.2. Identity and type</a><ul>
<li class="toctree-l3"><a class="reference internal" href="index.html#is-operator">7.2.1. ‘is’ operator</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#comparing-objects">7.2.2. Comparing objects</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#isinstance">7.2.3. isinstance</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="index.html#reference-count-and-garbage-collection">7.3. Reference count and garbage collection</a><ul>
<li class="toctree-l3"><a class="reference internal" href="index.html#getrefcount">7.3.1. getrefcount</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#garbage-collection">7.3.2. Garbage collection</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#shallow-and-deep-copy">7.3.3. Shallow and deep copy</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="index.html#first-class-object">7.4. First class object</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#builtin-types-for-representing-data">7.5. Builtin types for representing data</a><ul>
<li class="toctree-l3"><a class="reference internal" href="index.html#none">7.5.1. None</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#numbers">7.5.2. Numbers</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#sequences">7.5.3. Sequences</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#list">7.5.4. List</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#strings">7.5.5. Strings</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#mapping-types">7.5.6. Mapping types</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#set-types">7.5.7. Set types</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="index.html#builtin-types-for-representing-program-structure">7.6. Builtin types for representing program structure</a><ul>
<li class="toctree-l3"><a class="reference internal" href="index.html#callable-types">7.6.1. Callable types</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#class-types-and-instances">7.6.2. Class, types and instances</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#modules">7.6.3. Modules</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="index.html#special-methods">7.7. Special methods</a><ul>
<li class="toctree-l3"><a class="reference internal" href="index.html#object-creation-and-destruction">7.7.1. Object creation and destruction</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#string-representation">7.7.2. String representation</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#type-checking">7.7.3. Type checking</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#attribute-access">7.7.4. Attribute access</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#descriptors">7.7.5. Descriptors</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#sequence-and-mapping-methods">7.7.6. Sequence and mapping methods</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#iteration">7.7.7. Iteration</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#callable-interface">7.7.8. Callable interface</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#context-management-protocol">7.7.9. Context management protocol</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#object-inspection-and-dir">7.7.10. Object inspection and dir()</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-python/exception">8. Exception handling</a><ul>
<li class="toctree-l2"><a class="reference internal" href="index.html#introduction">8.1. Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#try-except-block">8.2. try-except block</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#report-error">8.3. Report error</a><ul>
<li class="toctree-l3"><a class="reference internal" href="index.html#type-of-error">8.3.1. Type of error</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#location-of-error">8.3.2. Location of error</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="index.html#catch-all-error-bad-practice">8.4. Catch all error (bad practice)</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#silencing-error">8.5. Silencing error</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#list-of-exception-in-python">8.6. List of Exception in Python</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#conclusion">8.7. Conclusion</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-python/datamine">9. Data mining</a><ul>
<li class="toctree-l2"><a class="reference internal" href="index.html#building-data-structure-from-file">9.1. Building data structure from file</a><ul>
<li class="toctree-l3"><a class="reference internal" href="index.html#save-and-read-data-in-list">9.1.1. Save and read data in list</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#save-and-read-data-in-dictionary">9.1.2. Save and read data in Dictionary</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="index.html#list-comprehension">9.2. List comprehension</a><ul>
<li class="toctree-l3"><a class="reference internal" href="index.html#basic-method-for-extraction">9.2.1. Basic method for extraction</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#list-comprehension-for-extraction">9.2.2. List comprehension for extraction</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#lambda-operator">9.2.3. Lambda operator</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#basis-method-for-sorting">9.2.4. Basis method for sorting</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#id1">9.2.5. Lambda operator</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="index.html#find-and-arrange-gold-rings">9.3. Find and arrange Gold rings</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#conclusion">9.4. Conclusion</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-python/oops">10. Object oriented programming</a><ul>
<li class="toctree-l2"><a class="reference internal" href="index.html#pythonic-style">10.1. Pythonic style</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#simple-data-structure-to-classes">10.2. Simple data structure to Classes</a><ul>
<li class="toctree-l3"><a class="reference internal" href="index.html#instance-variable">10.2.1. Instance variable</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#object-of-class">10.2.2. Object of class</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#class-variable-and-initialization">10.2.3. Class variable and initialization</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="index.html#shipping-product-and-agile-methodology">10.3. Shipping product and Agile methodology</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#attribute-access">10.4. Attribute access</a><ul>
<li class="toctree-l3"><a class="reference internal" href="index.html#get-set-and-del">10.4.1. get, set and del</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#getattr-setattr-and-delattr">10.4.2. getattr, setattr and delattr</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="index.html#users">10.5. Users</a><ul>
<li class="toctree-l3"><a class="reference internal" href="index.html#average-area">10.5.1. Average area</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#table-formatting">10.5.2. Table formatting</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="index.html#requirement-perimeter-method">10.6. Requirement : perimeter method</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#no-data-hiding-in-python">10.7. No data hiding in Python</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#inheritance-overview">10.8. Inheritance overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#new-user-making-boxes">10.9. New user : making boxes</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#rewrite-table-formatter-using-inheritance">10.10. Rewrite table formatter using Inheritance</a><ul>
<li class="toctree-l3"><a class="reference internal" href="index.html#abstract-class">10.10.1. Abstract class</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#csv-format">10.10.2. csv format</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="index.html#advance-inheritance">10.11. Advance inheritance</a><ul>
<li class="toctree-l3"><a class="reference internal" href="index.html#printing-outputs-to-files">10.11.1. Printing outputs to files</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#mixin-multiple-inheritance">10.11.2. Mixin : multiple inheritance</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#put-quotes-around-data">10.11.3. Put quotes around data</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#put-quotes-using-mixin">10.11.4. Put quotes using Mixin</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="index.html#conclusion">10.12. Conclusion</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-python/property">11. Methods and &#64;property</a><ul>
<li class="toctree-l2"><a class="reference internal" href="index.html#introduction">11.1. Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#methods-staticmethod-and-classmethod">11.2. Methods, staticmethod and classmethod</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#research-organization">11.3. Research organization</a><ul>
<li class="toctree-l3"><a class="reference internal" href="index.html#multiple-constructor-using-classmethod">11.3.1. Multiple constructor using ‘classmethod’</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#additional-methods-using-staticmethod">11.3.2. Additional methods using ‘staticmethod’</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="index.html#micro-managing">11.4. Micro-managing</a><ul>
<li class="toctree-l3"><a class="reference internal" href="index.html#wrong-solution">11.4.1. Wrong Solution</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#correct-solution">11.4.2. Correct solution</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="index.html#private-attributes-are-not-for-privatizing-the-attributes">11.5. Private attributes are not for privatizing the attributes</a><ul>
<li class="toctree-l3"><a class="reference internal" href="index.html#same-local-copy-in-child-and-parent-class">11.5.1. Same local copy in child and parent class</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#use-perimeter-instead-of-perimeter-to-solve-the-problem">11.5.2. Use ‘__perimeter’ instead of ‘_perimeter’ to solve the problem</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="index.html#property">11.6. &#64;property</a><ul>
<li class="toctree-l3"><a class="reference internal" href="index.html#managing-attributes">11.6.1. Managing attributes</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#calling-method-as-attribute">11.6.2. Calling method as attribute</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#requirement-from-research-organization">11.6.3. Requirement from research organization</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-python/decorator">12. Decorator and Descriptors</a><ul>
<li class="toctree-l2"><a class="reference internal" href="index.html#decorators">12.1. Decorators</a><ul>
<li class="toctree-l3"><a class="reference internal" href="index.html#function-inside-the-function-and-decorator">12.1.1. Function inside the function and Decorator</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#decorator-without-arguments">12.1.2. Decorator without arguments</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#decorators-with-arguments">12.1.3. Decorators with arguments</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#dry-decorator-with-arguments">12.1.4. DRY decorator with arguments</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#decorators-inside-the-class">12.1.5. Decorators inside the class</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#conclusion">12.1.6. Conclusion</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="index.html#descriptors">12.2. Descriptors</a><ul>
<li class="toctree-l3"><a class="reference internal" href="index.html#problems-with-property">12.2.1. Problems with &#64;property</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#data-descriptors">12.2.2. Data Descriptors</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#non-data-descriptor">12.2.3. non-data descriptor</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#getattribute-breaks-the-descriptor-usage">12.2.4. __getattribute__ breaks the descriptor usage</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#use-more-than-one-instance-for-testing">12.2.5. Use more than one instance for testing</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#examples">12.2.6. Examples</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#id1">12.2.7. Conclusion</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-python/moreex">13. More examples</a><ul>
<li class="toctree-l2"><a class="reference internal" href="index.html#generalized-attribute-validation">13.1. Generalized attribute validation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="index.html#function">13.1.1. Function</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#decorators">13.1.2. Decorators</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#property">13.1.3. &#64;property</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#descriptors">13.1.4. Descriptors</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#generalized-validation">13.1.5. Generalized validation</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#summary">13.1.6. Summary</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="index.html#inheritance-with-super">13.2. Inheritance with Super</a><ul>
<li class="toctree-l3"><a class="reference internal" href="index.html#super-child-before-parent">13.2.1. Super : child before parent</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#inherit-init">13.2.2. Inherit __init__</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#inherit-init-of-multiple-classes">13.2.3. Inherit __init__ of multiple classes</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#math-problem">13.2.4. Math Problem</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#conclusion">13.2.5. Conclusion</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="index.html#generators">13.3. Generators</a><ul>
<li class="toctree-l3"><a class="reference internal" href="index.html#feed-iterations">13.3.1. Feed iterations</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#receive-values">13.3.2. Receive values</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#send-and-receive-values">13.3.3. Send and receive values</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#return-values-in-generator">13.3.4. Return values in generator</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#yield-from-command">13.3.5. ‘yield from’ command</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-python/unix">14. Unix commands</a><ul>
<li class="toctree-l2"><a class="reference internal" href="index.html#introduction">14.1. Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#argparse">14.2. ‘argparse’</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#find">14.3. find</a><ul>
<li class="toctree-l3"><a class="reference internal" href="index.html#command-details">14.3.1. Command details</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#python-implementation">14.3.2. Python implementation</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="index.html#grep">14.4. grep</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#cat">14.5. cat</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-python/caffeenv">15. Caffe installation in Ubuntu 16.04</a><ul>
<li class="toctree-l2"><a class="reference internal" href="index.html#prerequisite">15.1. Prerequisite</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#install-packages">15.2. Install packages</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#create-virtualenv">15.3. Create virtualenv</a><ul>
<li class="toctree-l3"><a class="reference internal" href="index.html#install-virtualenv">15.3.1. Install virtualenv</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#modify-bashrc">15.3.2. Modify .bashrc</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#id1">15.3.3. Create virtualenv</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="index.html#install-opencv">15.4. Install OpenCV</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#install-caffe">15.5. Install Caffe</a></li>
</ul>
</li>
</ul>
</div>
            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html#document-index">Advance Python Tutorials</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html#document-index">Docs</a> &raquo;</li>
        
      <li>Advance Python Tutorials  documentation</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            
              <a href="https://bitbucket.org/pythondsp/pythonguide/src/master/doc/source/index.rst?mode=view" class="fa fa-bitbucket"> Edit on Bitbucket</a>
            
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="python-tutorials">
<h1>Python Tutorials<a class="headerlink" href="#python-tutorials" title="Permalink to this headline">¶</a></h1>
<div class="toctree-wrapper compound">
<span id="document-python/review"></span><div class="section" id="python-review">
<h2>Python review<a class="headerlink" href="#python-review" title="Permalink to this headline">¶</a></h2>
<div class="section" id="introduction">
<h3>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h3>
<p>Python is the programming language which can be used for various purposes e.g. web design, mathematical modeling, creating documents and game designs etc. In this chapter, we will review some of the basic features of Python. Then, from next chapter we will write some good coding styles with advance features of Python.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This chapter presents a short review of Python along with some good coding practices. Actual tutorial begins from next chapter. If you have basic knowledge of Python and OOPs then you can skip this chapter.</p>
</div>
</div>
<div class="section" id="download-and-installation">
<h3>Download and Installation<a class="headerlink" href="#download-and-installation" title="Permalink to this headline">¶</a></h3>
<p>We will use Python 3 in this tutorial. Also, these codes may not run in Python 2.x (e.g. 2.7 or 2.9 etc.) versions.</p>
<p>Further, there are several useful libraries available for Python. For example, Numpy and Scipy libraries contain various mathematical functions which are very useful in simulations. Matplotlib library is required to plot results and save these in various formats e.g. PDF, JPEG or PS etc. Lastly, SPYDER environment is very helpful for storing the results obtained by the simulations. Also, SPYDER can save data as ‘.mat’ file, which can be used by MATLAB software as well. All these topics are briefly discussed in this tutorial.</p>
<p>For installation, simplest option is to download and install <a class="reference external" href="https://www.continuum.io/downloads">Anaconda</a> software, as it contains various useful Python libraries (including the libraries which are mentioned in above paragraph)</p>
</div>
<div class="section" id="basics">
<h3>Basics<a class="headerlink" href="#basics" title="Permalink to this headline">¶</a></h3>
<p>In this section, ‘print’ command is used to show the code execution in Python. In Python, code can be run in two ways, i.e. through ‘Python shell’ or ‘by executing the Python files’, which are discussed next.</p>
<div class="section" id="run-code-from-python-shell">
<h4>Run code from Python shell (&gt;&gt;&gt;)<a class="headerlink" href="#run-code-from-python-shell" title="Permalink to this headline">¶</a></h4>
<p>Go to terminal/command-prompt and type Python as shown in <a class="reference internal" href="#py-ch1-helloworld"><span class="std std-numref">Listing 1.1</span></a>. This command will start the Python shell with three ‘greater than’ signs i.e. &gt;&gt;&gt;. Now, we can write our first command i.e. <strong>print(‘Hello World’)</strong>, which prints the ‘Hello World’ on the screen as shown in the listing. Further in line 4, two placeholder ‘%s’ are used, which are replaced by the two words i.e. World and Python as shown in line 5. Also, After executing the command, &gt;&gt;&gt; appear again, which indicates that Python shell is ready to get more commands.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>Choose correct command to open Python3</p>
<div class="last highlight-text notranslate"><div class="highlight"><pre><span></span>$ python   (Linux)

or

$ python3    (Linux)

or

C:\&gt;python   (in windows)
</pre></div>
</div>
</div>
<div class="literal-block-wrapper docutils container" id="py-ch1-helloworld">
<div class="code-block-caption"><span class="caption-text">Hello World</span><a class="headerlink" href="#py-ch1-helloworld" title="Permalink to this code">¶</a></div>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span><span class="p">(</span><span class="s2">&quot;Hello World&quot;</span><span class="p">)</span>
<span class="go">Hello World</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span><span class="p">(</span><span class="s2">&quot;Hello </span><span class="si">%s</span><span class="s2">, simulation can be done using </span><span class="si">%s</span><span class="s2">.&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="s2">&quot;World&quot;</span><span class="p">,</span> <span class="s2">&quot;Python&quot;</span><span class="p">))</span>
<span class="go">Hello World, simulation can be done using Python.</span>
<span class="go">&gt;&gt;&gt;</span>
</pre></div>
</td></tr></table></div>
</div>
</div>
<div class="section" id="running-python-files">
<h4>Running Python Files<a class="headerlink" href="#running-python-files" title="Permalink to this headline">¶</a></h4>
<p>We can also save the code in Python file with extension ‘.py’; which can be run from Python shell. For example, let a file ‘hello.py’ is saved in the folder name as ‘PythonCodes’ at C: drive. Content of the ‘hello.py’ is shown in <a class="reference internal" href="#py-ch1-helloworldfile"><span class="std std-numref">Listing 1.2</span></a>. ‘#’ in the file is used for comments (which increases the readability of the code), and has no effect in the execution of the code.  To run the  ‘hello.py’, we need to locate the folder ‘PythonCodes’ (where we saved the hello.py file) and then execute the file as shown in <a class="reference internal" href="#py-ch1-runfile"><span class="std std-numref">Listing 1.3</span></a>.</p>
<p>Note that Python codes work on indentations i.e. each block of code is defined by the line indentation (or spaces). Any wrong space will result in the error which can be seen by uncommenting the line 6 <a class="reference internal" href="#py-ch1-helloworldfile"><span class="std std-numref">Listing 1.2</span></a>,</p>
<div class="literal-block-wrapper docutils container" id="py-ch1-helloworldfile">
<div class="code-block-caption"><span class="caption-text">hello.py</span><a class="headerlink" href="#py-ch1-helloworldfile" title="Permalink to this code">¶</a></div>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1"># hello.py: prints &quot;Hello World&quot;</span>
<span class="c1"># save this file to any location e.g. C:\&gt;PythonCodes</span>
<span class="k">print</span><span class="p">(</span><span class="s2">&quot;Hello World&quot;</span><span class="p">)</span>

<span class="c1">## following line will be error because of extra space in the beginning</span>
<span class="c1">#   print(&quot;Hello World with spaces is error&quot;) # error</span>
</pre></div>
</td></tr></table></div>
</div>
<div class="literal-block-wrapper docutils container" id="py-ch1-runfile">
<div class="code-block-caption"><span class="caption-text">Run hello.py</span><a class="headerlink" href="#py-ch1-runfile" title="Permalink to this code">¶</a></div>
<div class="highlight-text notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="highlight"><pre><span></span>$ python hello.py
Hello World
</pre></div>
</td></tr></table></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Since this method stores the code which can be used later, therefore this method is used throughout the tutorial. Please read the comments in the Listings to understand the codes completely.</p>
</div>
</div>
<div class="section" id="variables">
<h4>Variables<a class="headerlink" href="#variables" title="Permalink to this headline">¶</a></h4>
<p>Variables are used to store some data as shown in <a class="reference internal" href="#py-ch1-variableex"><span class="std std-numref">Listing 1.4</span></a>. Here, two variables a and b are defined  in line 3 and 4 respective, which store the values 3 and 6 respectively. Then various operations are performed on those variables.</p>
<div class="literal-block-wrapper docutils container" id="py-ch1-variableex">
<div class="code-block-caption"><span class="caption-text">Variables</span><a class="headerlink" href="#py-ch1-variableex" title="Permalink to this code">¶</a></div>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">#variableEx.py: a and b are the variables</span>
<span class="c1"># which stores 3 and 5 respectively</span>
<span class="n">a</span><span class="o">=</span><span class="mi">3</span>
<span class="n">b</span><span class="o">=</span><span class="mi">6</span>

<span class="c1"># following line will add value of a i.e. 3 with 6</span>
<span class="k">print</span><span class="p">(</span><span class="n">a</span><span class="o">+</span><span class="mi">6</span><span class="p">)</span> <span class="c1"># 9</span>

<span class="c1"># following line will perform (3+5)/2</span>
<span class="k">print</span><span class="p">((</span><span class="n">a</span><span class="o">+</span><span class="n">b</span><span class="p">)</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span> <span class="c1"># 4.5</span>

<span class="c1"># following line will perform (3+5)/2</span>
<span class="c1"># and then display the interger value only</span>
<span class="k">print</span><span class="p">(</span><span class="nb">int</span><span class="p">((</span><span class="n">a</span><span class="o">+</span><span class="n">b</span><span class="p">)</span><span class="o">/</span><span class="mi">2</span><span class="p">))</span> <span class="c1"># 4</span>
</pre></div>
</td></tr></table></div>
</div>
</div>
<div class="section" id="built-in-object-types">
<h4>Built-in object types<a class="headerlink" href="#built-in-object-types" title="Permalink to this headline">¶</a></h4>
<p><a class="reference internal" href="#tbl-buildinobjecttypes"><span class="std std-numref">Table 1.1</span></a> shows the various built-in object types available in Python. Various operations can be performed on these object depending on their types e.g. add operations can be performed on number-object-type, or collection of data (e.g. username-password-email) can be created using list-object-type etc. All these object types are discussed in this section.</p>
<span id="tbl-buildinobjecttypes"></span><table border="1" class="docutils" id="id2">
<caption><span class="caption-text">Built-in object types</span><a class="headerlink" href="#id2" title="Permalink to this table">¶</a></caption>
<colgroup>
<col width="24%" />
<col width="76%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Object type</th>
<th class="head">Exmaple</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Number</td>
<td>“3.14, 5, 3+j2”</td>
</tr>
<tr class="row-odd"><td>String</td>
<td>” ‘Python’,  ‘make your code’”</td>
</tr>
<tr class="row-even"><td>List</td>
<td>“[1, ‘username’, ‘password’, ‘email’]”</td>
</tr>
<tr class="row-odd"><td>Tuple</td>
<td>“(1, ‘username’, ‘password’, ‘email’)”</td>
</tr>
<tr class="row-even"><td>Dictionary</td>
<td>“{‘subject’:Python, ‘subjectCode’:1234}”</td>
</tr>
<tr class="row-odd"><td>File</td>
<td>“text=opern(‘Python’, ‘r’).read()”</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="numbers">
<h4>Numbers<a class="headerlink" href="#numbers" title="Permalink to this headline">¶</a></h4>
<p>Python supports various number types i.e. integer, float (decimal numbers), octal, hexadecimal and complex numbers as shown in <a class="reference internal" href="#py-ch1-numformat"><span class="std std-numref">Listing 1.5</span></a>. The list also shows the method by which one format can be converted to another format.</p>
<div class="literal-block-wrapper docutils container" id="py-ch1-numformat">
<div class="code-block-caption"><span class="caption-text">Number formats</span><a class="headerlink" href="#py-ch1-numformat" title="Permalink to this code">¶</a></div>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">#numFormat.py</span>
<span class="n">a</span> <span class="o">=</span> <span class="mi">11</span> <span class="c1">#integer</span>
<span class="k">print</span><span class="p">(</span><span class="nb">hex</span><span class="p">(</span><span class="n">a</span><span class="p">))</span> <span class="c1">#0xb</span>

<span class="n">b</span> <span class="o">=</span> <span class="mf">3.2</span> <span class="c1"># float(decimal)</span>
<span class="c1">## print(oct(b)) # error: can&#39;t convert float to oct or hex.</span>
<span class="c1"># integer can be converted, therefore first convert float to int</span>
<span class="c1"># and then to hex/oct</span>
<span class="k">print</span><span class="p">(</span><span class="nb">oct</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">b</span><span class="p">)))</span> <span class="c1">#0o3</span>

<span class="n">d</span> <span class="o">=</span> <span class="mh">0X1A</span> <span class="c1"># hexadecimal: &#39;0X&#39; is used before number i.e. 1A</span>
<span class="k">print</span><span class="p">(</span><span class="n">d</span><span class="p">)</span> <span class="c1"># 26</span>

<span class="c1">#add hex and float</span>
<span class="k">print</span><span class="p">(</span><span class="n">b</span><span class="o">+</span><span class="n">d</span><span class="p">)</span> <span class="c1">#29.2</span>

<span class="n">c</span> <span class="o">=</span> <span class="mi">0</span><span class="n">o17</span> <span class="c1"># octal: &#39;0o&#39; is used before number i.e. 17</span>
<span class="c1"># print command shows the integer value</span>
<span class="k">print</span><span class="p">(</span><span class="n">c</span><span class="p">)</span> <span class="c1"># 15</span>
<span class="c1">#to see octal form use `oct&#39;</span>
<span class="k">print</span><span class="p">(</span><span class="nb">oct</span><span class="p">(</span><span class="n">c</span><span class="p">))</span> <span class="c1">#0o17</span>

<span class="n">e</span> <span class="o">=</span> <span class="mi">3</span><span class="o">+</span><span class="mi">2j</span> <span class="c1"># imagenary</span>
<span class="k">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span> <span class="c1">#(3+2j)</span>
<span class="k">print</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">e</span><span class="p">))</span> <span class="c1">#3.6055512754639896</span>
<span class="c1"># round above value upto 2 decimal</span>
<span class="n">r</span><span class="o">=</span><span class="nb">round</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">e</span><span class="p">),</span><span class="mi">2</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">r</span><span class="p">)</span> <span class="c1">#3.61</span>
</pre></div>
</td></tr></table></div>
</div>
</div>
<div class="section" id="string">
<h4>String<a class="headerlink" href="#string" title="Permalink to this headline">¶</a></h4>
<p>String can be very useful for displaying some output messages on the screen as shown <a class="reference internal" href="#py-ch1-strex"><span class="std std-numref">Listing 1.6</span></a>. Here messages are displayed on screen (using ‘input’ command) to get inputs from user and finally output is shown using %s placeholder (see line 26 for better understand of %s).</p>
<div class="literal-block-wrapper docutils container" id="py-ch1-strex">
<div class="code-block-caption"><span class="caption-text">Strings</span><a class="headerlink" href="#py-ch1-strex" title="Permalink to this code">¶</a></div>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">#strEx.py</span>
<span class="n">firstName</span> <span class="o">=</span> <span class="s2">&quot;Meher&quot;</span> <span class="c1">#firstName is variable of string type</span>
<span class="k">print</span><span class="p">(</span><span class="n">firstName</span><span class="p">)</span> <span class="c1"># Meher</span>
<span class="n">fullName</span> <span class="o">=</span> <span class="s2">&quot;Meher Krishna Patel&quot;</span>
<span class="k">print</span><span class="p">(</span><span class="n">fullName</span><span class="p">)</span> <span class="c1"># Meher Krishna Patel</span>

<span class="c1">#input is used to take input from user</span>
<span class="n">score1</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s2">&quot;Enter the score 1: &quot;</span><span class="p">)</span>  <span class="c1">#enter some value e.g. 12</span>
<span class="n">score2</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s2">&quot;Enter the score 2: &quot;</span><span class="p">)</span>  <span class="c1">#enter some value e.g. 36</span>
<span class="n">totalString</span> <span class="o">=</span> <span class="n">score1</span> <span class="o">+</span> <span class="n">score2</span> <span class="c1"># add score1 and score2</span>
<span class="n">messageString</span> <span class="o">=</span> <span class="s2">&quot;Total score is </span><span class="si">%s</span><span class="s2">&quot;</span>
<span class="c1">#in below print, totalstring will be assinge to %s of messageString</span>
<span class="k">print</span><span class="p">(</span><span class="n">messageString</span> <span class="o">%</span> <span class="n">totalString</span><span class="p">)</span>  <span class="c1"># 1236 (undesired result)</span>

<span class="c1">#score1 and score2 are saved as string above</span>
<span class="c1">#first we need to convert these into integers as below</span>
<span class="n">totalInt</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">score1</span><span class="p">)</span> <span class="o">+</span> <span class="nb">int</span><span class="p">(</span><span class="n">score2</span><span class="p">)</span><span class="c1"># add score1 and score2</span>
<span class="n">messageString</span> <span class="o">=</span> <span class="s2">&quot;Total score is </span><span class="si">%s</span><span class="s2">&quot;</span>
<span class="k">print</span><span class="p">(</span><span class="n">messageString</span> <span class="o">%</span> <span class="n">totalInt</span><span class="p">)</span>  <span class="c1"># 48</span>

<span class="c1">#change the input as integer immediately</span>
<span class="n">score1</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="nb">input</span><span class="p">(</span><span class="s2">&quot;Enter the score 1: &quot;</span><span class="p">))</span>  <span class="c1">#enter some value e.g. 12</span>
<span class="n">score2</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="nb">input</span><span class="p">(</span><span class="s2">&quot;Enter the score 2: &quot;</span><span class="p">))</span> <span class="c1">#enter some value e.g. 36</span>
<span class="n">total</span> <span class="o">=</span> <span class="n">score1</span> <span class="o">+</span> <span class="n">score2</span> <span class="c1"># add score1 and score2</span>
<span class="n">messageString</span> <span class="o">=</span> <span class="s2">&quot;score1(</span><span class="si">%s</span><span class="s2">) + score2[</span><span class="si">%s</span><span class="s2">] =  </span><span class="si">%s</span><span class="s2">&quot;</span>
<span class="k">print</span><span class="p">(</span><span class="n">messageString</span> <span class="o">%</span> <span class="p">(</span><span class="n">score1</span><span class="p">,</span> <span class="n">score2</span><span class="p">,</span> <span class="n">total</span><span class="p">))</span> <span class="c1">#score1(12) + score2[36] =  48</span>
</pre></div>
</td></tr></table></div>
</div>
</div>
<div class="section" id="list">
<h4>List<a class="headerlink" href="#list" title="Permalink to this headline">¶</a></h4>
<p>Variables can store only one data, whereas list can be used to store a collection of data of different types. A list contains items separated by commas, and enclosed within the square brackets [ ]. <a class="reference internal" href="#py-ch1-listex"><span class="std std-numref">Listing 1.7</span></a> defines a list along with access to it’s elements.</p>
<div class="literal-block-wrapper docutils container" id="py-ch1-listex">
<div class="code-block-caption"><span class="caption-text">List</span><a class="headerlink" href="#py-ch1-listex" title="Permalink to this code">¶</a></div>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">#listEx.py</span>
<span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="mi">24</span><span class="p">,</span> <span class="s2">&quot;as it is&quot;</span><span class="p">,</span> <span class="s2">&quot;abc&quot;</span><span class="p">,</span> <span class="mi">2</span><span class="o">+</span><span class="mi">2j</span><span class="p">]</span>
<span class="c1"># index start with 0</span>
<span class="c1"># i.e. location of number 24 is &#39;0&#39; in the list</span>
<span class="k">print</span><span class="p">(</span><span class="n">a</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="c1"># 24</span>
<span class="k">print</span><span class="p">(</span><span class="n">a</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span> <span class="c1"># abc</span>

<span class="c1">#replace &#39;abc&#39; with &#39;xyz&#39;</span>
<span class="n">a</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">=</span><span class="s1">&#39;xyz&#39;</span>
<span class="k">print</span><span class="p">(</span><span class="n">a</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span> <span class="c1"># xyz</span>

<span class="c1"># Add 20 at the end of list</span>
<span class="n">a</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">a</span><span class="p">)</span> <span class="c1"># [24, &#39;as it is&#39;, &#39;abc&#39;, (2+2j), 20]</span>
</pre></div>
</td></tr></table></div>
</div>
</div>
<div class="section" id="tuple">
<h4>Tuple<a class="headerlink" href="#tuple" title="Permalink to this headline">¶</a></h4>
<p>A tuple is similar to the list. A tuple consists of values separated by commas as shown in <a class="reference internal" href="#py-ch1-tupleex"><span class="std std-numref">Listing 1.8</span></a>. Tuple can be considered as ‘read-only’ list because it’s values and size can not be changed after defining it.</p>
<div class="literal-block-wrapper docutils container" id="py-ch1-tupleex">
<div class="code-block-caption"><span class="caption-text">Tuple</span><a class="headerlink" href="#py-ch1-tupleex" title="Permalink to this code">¶</a></div>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">#tupleEx.py</span>
<span class="n">a</span> <span class="o">=</span> <span class="mi">24</span><span class="p">,</span> <span class="s2">&quot;as it is&quot;</span><span class="p">,</span> <span class="s2">&quot;abc&quot;</span><span class="p">,</span> <span class="mi">2</span><span class="o">+</span><span class="mi">2j</span>

<span class="c1">## some times () brackets are used to define tuple as shown below</span>
<span class="c1">#a = (24, &quot;as it is&quot;, &quot;abc&quot;, 2+2j)</span>

<span class="c1"># index start with 0</span>
<span class="c1"># i.e. location of number 24 is &#39;0&#39; in the list</span>
<span class="k">print</span><span class="p">(</span><span class="n">a</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="c1"># 24</span>
<span class="k">print</span><span class="p">(</span><span class="n">a</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span> <span class="c1"># abc</span>

<span class="c1">##Following lines will give error,</span>

<span class="c1">##as value can be changed in tuple</span>
<span class="c1">#a[2]=&#39;xyz&#39; # error</span>

<span class="c1">##as size of the tuple can not be changed</span>
<span class="c1"># a.append(20) # error</span>
</pre></div>
</td></tr></table></div>
</div>
</div>
<div class="section" id="dictionary">
<h4>Dictionary<a class="headerlink" href="#dictionary" title="Permalink to this headline">¶</a></h4>
<p>Dictionary can be seen as unordered list with key-value pairs. In the other works, since list’s elements are ordered therefore it’s elements can be access through index as shown in <a class="reference internal" href="#py-ch1-listex"><span class="std std-numref">Listing 1.7</span></a>. On the other hand, location of the elements of the dictionary get changed after defining it, therefore key-value pairs are required, and the values can be accessed using keys as shown in <a class="reference internal" href="#py-ch1-dictex"><span class="std std-numref">Listing 1.9</span></a>.</p>
<div class="literal-block-wrapper docutils container" id="py-ch1-dictex">
<div class="code-block-caption"><span class="caption-text">Dictionary</span><a class="headerlink" href="#py-ch1-dictex" title="Permalink to this code">¶</a></div>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">#dictEx.py</span>
<span class="n">myDict</span> <span class="o">=</span> <span class="p">{}</span>         <span class="c1"># define new dictionary</span>
<span class="n">myDict</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;one&quot;</span>  <span class="c1"># 1 is called key; &quot;one&quot; is called value</span>
<span class="n">myDict</span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;alphabet&quot;</span>

<span class="k">print</span><span class="p">(</span><span class="n">myDict</span><span class="p">)</span>            <span class="c1"># {1: &#39;one&#39;, &#39;a&#39;: &#39;alphabet&#39;}</span>
<span class="k">print</span><span class="p">(</span><span class="n">myDict</span><span class="o">.</span><span class="n">items</span><span class="p">())</span>  <span class="c1"># dict_items([(1, &#39;one&#39;), (&#39;a&#39;, &#39;alphabet&#39;)])</span>
<span class="k">print</span><span class="p">(</span><span class="n">myDict</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>   <span class="c1"># dict_keys([1, &#39;a&#39;])</span>
<span class="k">print</span><span class="p">(</span><span class="n">myDict</span><span class="o">.</span><span class="n">values</span><span class="p">())</span> <span class="c1"># dict_values([&#39;one&#39;, &#39;alphabet&#39;])</span>

<span class="k">print</span><span class="p">(</span><span class="n">myDict</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="c1">#one</span>
<span class="k">print</span><span class="p">(</span><span class="n">myDict</span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">])</span> <span class="c1"># alphabet</span>

<span class="c1"># add key-value while creating the dictionary</span>
<span class="n">subjectDict</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;py&#39;</span><span class="p">:</span> <span class="s1">&#39;Python&#39;</span><span class="p">,</span> <span class="s1">&#39;np&#39;</span><span class="p">:</span> <span class="s1">&#39;Numpy&#39;</span><span class="p">,</span> <span class="s1">&#39;sp&#39;</span><span class="p">:</span><span class="s1">&#39;Scipy&#39;</span><span class="p">}</span>
<span class="k">print</span><span class="p">(</span><span class="n">subjectDict</span><span class="p">)</span> <span class="c1"># {&#39;py&#39;: &#39;Python&#39;, &#39;sp&#39;: &#39;Scipy&#39;, &#39;np&#39;: &#39;Numpy&#39;}</span>
</pre></div>
</td></tr></table></div>
</div>
</div>
</div>
<div class="section" id="number-conversion">
<h3>Number conversion<a class="headerlink" href="#number-conversion" title="Permalink to this headline">¶</a></h3>
<p>Following are the patterns to convert the numbers in different formats.</p>
<div class="section" id="direct-conversion">
<h4>Direct conversion<a class="headerlink" href="#direct-conversion" title="Permalink to this headline">¶</a></h4>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># decimal to binary conversion with 6 places</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span><span class="p">(</span><span class="s1">&#39;{:06b}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="mi">10</span><span class="p">))</span>
<span class="go">001010</span>

<span class="gp">&gt;&gt;&gt; </span><span class="c1"># if &#39;6b&#39; is used instead of &#39;06b&#39;, then initial 0 will not be displayed.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span><span class="p">(</span><span class="s1">&#39;{:6b}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="mi">10</span><span class="p">))</span>
<span class="go">  1010</span>

<span class="gp">&gt;&gt;&gt; </span><span class="c1"># decimal to hex conversion with 6 places</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span><span class="p">(</span><span class="s1">&#39;{:06x}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="mi">10</span><span class="p">))</span>
<span class="go">00000a</span>

<span class="gp">&gt;&gt;&gt; </span><span class="c1"># binary to hexadecimal with 3 places</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span><span class="p">(</span><span class="s1">&#39;{:03x}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="mb">0b1111</span><span class="p">))</span>
<span class="go">00f</span>
</pre></div>
</div>
</div>
<div class="section" id="zfill">
<h4>zfill<a class="headerlink" href="#zfill" title="Permalink to this headline">¶</a></h4>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># {:b} = binary</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span><span class="p">(</span><span class="s2">&quot;{:b}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span><span class="o">.</span><span class="n">zfill</span><span class="p">(</span><span class="mi">15</span><span class="p">))</span>  <span class="c1"># number = 10, total places = 15</span>
<span class="go">000000000001010</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="mi">10</span>

<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span><span class="p">(</span><span class="s2">&quot;{:b}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="o">.</span><span class="n">zfill</span><span class="p">(</span><span class="mi">15</span><span class="p">))</span>  <span class="c1"># number = x, total places = 15</span>
<span class="go">000000000001010</span>

<span class="gp">&gt;&gt;&gt; </span><span class="c1"># {:x} = hexadecimal</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span><span class="p">(</span><span class="s2">&quot;{:x}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="o">.</span><span class="n">zfill</span><span class="p">(</span><span class="mi">15</span><span class="p">))</span>  <span class="c1"># number = x, total places = 15</span>
<span class="go">00000000000000a</span>

<span class="gp">&gt;&gt;&gt; </span><span class="c1"># {:o} = octal</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span><span class="p">(</span><span class="s2">&quot;{:o}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="o">.</span><span class="n">zfill</span><span class="p">(</span><span class="mi">15</span><span class="p">))</span>  <span class="c1"># number = x, total places = 15</span>
<span class="go">000000000000012</span>


<span class="gp">&gt;&gt;&gt; </span><span class="c1"># {:d} = decimal, 0x11 = 17</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span><span class="p">(</span><span class="s2">&quot;{:d}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="o">.</span><span class="n">zfill</span><span class="p">(</span><span class="mh">0x11</span><span class="p">))</span>  <span class="c1"># number = x, total places = 17</span>
<span class="go">00000000000000010</span>

<span class="gp">&gt;&gt;&gt; </span><span class="c1"># {:d} = decimal, 0b11 = 3</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span><span class="p">(</span><span class="s2">&quot;{:d}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="o">.</span><span class="n">zfill</span><span class="p">(</span><span class="mb">0b11</span><span class="p">))</span>  <span class="c1"># number = x, total places = 3</span>
<span class="go">010</span>

<span class="gp">&gt;&gt;&gt; </span><span class="c1"># {:d} = decimal, 0o11 = 9</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span><span class="p">(</span><span class="s2">&quot;{:d}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="o">.</span><span class="n">zfill</span><span class="p">(</span><span class="mi">0</span><span class="n">o11</span><span class="p">))</span>  <span class="c1"># number = x, total places = 9</span>
<span class="go">000000010</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="control-structure">
<h3>Control structure<a class="headerlink" href="#control-structure" title="Permalink to this headline">¶</a></h3>
<p>In this section, various simple Python codes are shown to explain the control structures  available in Python.</p>
<div class="section" id="if-else">
<h4>if-else<a class="headerlink" href="#if-else" title="Permalink to this headline">¶</a></h4>
<p><em>‘If-else’</em> statements are used to define different actions for different conditions. Symbols for such conditions are given in <a class="reference internal" href="#tbl-conditionsymbol"><span class="std std-numref">Table 1.2</span></a>, which can be used as shown in <a class="reference internal" href="#py-ch1-ifonly"><span class="std std-numref">Listing 1.11</span></a>. Three examples are shown in this section for three types of statements i.e. <em>if</em>, <em>if-else</em> and <em>if-elif-else</em>.</p>
<span id="tbl-conditionsymbol"></span><table border="1" class="docutils" id="id3">
<caption><span class="caption-text">Symbols for conditions</span><a class="headerlink" href="#id3" title="Permalink to this table">¶</a></caption>
<colgroup>
<col width="69%" />
<col width="31%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Condition</th>
<th class="head">Symbol</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>equal</td>
<td>==</td>
</tr>
<tr class="row-odd"><td>not equal</td>
<td>!=</td>
</tr>
<tr class="row-even"><td>greater</td>
<td>&gt;</td>
</tr>
<tr class="row-odd"><td>smaller</td>
<td>&lt;</td>
</tr>
<tr class="row-even"><td>greater or equal</td>
<td>&gt;=</td>
</tr>
<tr class="row-odd"><td>smaller or equal</td>
<td>&lt;=</td>
</tr>
</tbody>
</table>
<div class="section" id="if-statement">
<h5>If statement<a class="headerlink" href="#if-statement" title="Permalink to this headline">¶</a></h5>
<p>In this section, only if statement is used to check the even and odd number.</p>
<p><a class="reference internal" href="#py-ch1-ifex"><span class="std std-numref">Listing 1.10</span></a> checks whether the number stored in variable ‘x’ is even or not.</p>
<div class="literal-block-wrapper docutils container" id="py-ch1-ifex">
<div class="code-block-caption"><span class="caption-text">If statement</span><a class="headerlink" href="#py-ch1-ifex" title="Permalink to this code">¶</a></div>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">#ifEx.py</span>
<span class="n">x</span> <span class="o">=</span> <span class="mi">2</span>
<span class="c1"># brackets are not necessary (used for clarity of the code)</span>
<span class="k">if</span> <span class="p">(</span><span class="n">x</span><span class="o">%</span><span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span><span class="p">):</span> <span class="c1"># % sign gives the value of the remainder e.g. 5%3 = 2</span>
    <span class="c1">#if above condition is true, only then following line will execute</span>
    <span class="k">print</span><span class="p">(</span><span class="s1">&#39;Number is even.&#39;</span><span class="p">)</span>

<span class="c1">#this line will execute always as it is not inside &#39;if&#39;</span>
<span class="k">print</span><span class="p">(</span><span class="s1">&#39;Bye Bye&#39;</span><span class="p">)</span>

<span class="sd">&#39;&#39;&#39;</span>
<span class="sd">Number is even.</span>
<span class="sd">Bye Bye</span>
<span class="sd">&#39;&#39;&#39;</span>

<span class="sd">&#39;&#39;&#39;</span>
<span class="sd">if you put x = 3, then output will be,</span>
<span class="sd">Bye Bye</span>
<span class="sd">i.e. Number is even will not be printed as &#39;if&#39; condition is not satisfied.</span>
<span class="sd">&#39;&#39;&#39;</span>
</pre></div>
</td></tr></table></div>
</div>
<p><strong>Explanation</strong> <a class="reference internal" href="#py-ch1-ifex"><span class="std std-numref">Listing 1.10</span></a></p>
<blockquote>
<div><p>An if statement is made up of the ‘if’ keyword, followed by the condition and colon (:) at the end, as shown in line 4. Also, the line 6 is indented which means it will execute only if the condition in line 4 is satisfied (see <a class="reference internal" href="#py-ch1-ifelsenested"><span class="std std-numref">Listing 1.13</span></a> for better understanding of indentation). Last print statement has no indentation, therefore it is not the part of the ‘if’ statement and will execute all the time. You can check it by changing the value of ‘x’ to 3 in line 2. Three quotes (in line 11 and 14) are used to comment more than one lines in the code, e.g. ‘’’ results here ‘’’ is used at the end of the code (see line 11-20) which contain the results of the code.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Note that, the comments inside the ‘’’ is known as ‘Docstrings’, which are displayed when help command is used. Therefore, do not use it for multiline comments. It is better to use # at each line.</p>
</div>
</div></blockquote>
</div>
<div class="section" id="multiple-if-statements">
<h5>Multiple If statements<a class="headerlink" href="#multiple-if-statements" title="Permalink to this headline">¶</a></h5>
<p><a class="reference internal" href="#py-ch1-ifonly"><span class="std std-numref">Listing 1.11</span></a> checks the <strong>even and odd</strong> numbers using ‘if’ statements. Since there are two conditions (even and odd), therefore two ‘if’ statements are used to check the conditions as shown in <a class="reference internal" href="#py-ch1-ifonly"><span class="std std-numref">Listing 1.11</span></a>. Finally output is shown as the comments at the end of the code.</p>
<div class="literal-block-wrapper docutils container" id="py-ch1-ifonly">
<div class="code-block-caption"><span class="caption-text">Multiple If statements</span><a class="headerlink" href="#py-ch1-ifonly" title="Permalink to this code">¶</a></div>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">#ifOnly.py: uses multiple if to check even and odd nubmer</span>

<span class="c1"># &quot;input&quot; command takes input as string</span>
<span class="c1"># int is used for type conversion</span>
<span class="n">x</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Enter the number:</span><span class="se">\t</span><span class="s1">&#39;</span><span class="p">))</span> <span class="c1">#\t is used for tab in the output</span>

<span class="c1"># % is used to calculate remainder</span>
<span class="k">if</span> <span class="n">x</span><span class="o">%</span><span class="mi">2</span><span class="o">==</span><span class="mi">0</span><span class="p">:</span>
    <span class="k">print</span> <span class="p">(</span><span class="s2">&quot;Number is even&quot;</span><span class="p">)</span>
<span class="k">if</span> <span class="n">x</span><span class="o">%</span><span class="mi">2</span><span class="o">!=</span><span class="mi">0</span><span class="p">:</span>
    <span class="k">print</span> <span class="p">(</span><span class="s2">&quot;Number is odd&quot;</span><span class="p">)</span>

<span class="sd">&#39;&#39;&#39;</span>
<span class="sd">Output-1st run:</span>
<span class="sd">Enter the number:   10</span>
<span class="sd">Number is even</span>

<span class="sd">Output-2nd run:</span>
<span class="sd">Enter the number:   15</span>
<span class="sd">Number is odd</span>
<span class="sd">&#39;&#39;&#39;</span>
</pre></div>
</td></tr></table></div>
</div>
<p><strong>Explanation</strong> <a class="reference internal" href="#py-ch1-ifonly"><span class="std std-numref">Listing 1.11</span></a></p>
<blockquote>
<div>This code demonstrate that one can use multiple ‘if’ conditions in codes. In this code, value of ‘x’ is taken from using line 5 in the code. ‘int’ is used in this line because ‘input’ command takes the value as string and it should be changed to integer value for mathematical operations on it.</div></blockquote>
</div>
<div class="section" id="ex-ifelse1">
<span id="id1"></span><h5>If-else<a class="headerlink" href="#ex-ifelse1" title="Permalink to this headline">¶</a></h5>
<p>As we know that a number can not be even and odd at the same time. In such cases we can use ‘if-else’ statement.</p>
<p>Code in <a class="reference internal" href="#py-ch1-ifonly"><span class="std std-numref">Listing 1.11</span></a> can be written using If-else statement as show in <a class="reference internal" href="#py-ch1-ifelse1"><span class="std std-numref">Listing 1.12</span></a>.</p>
<div class="literal-block-wrapper docutils container" id="py-ch1-ifelse1">
<div class="code-block-caption"><span class="caption-text">If-else statement</span><a class="headerlink" href="#py-ch1-ifelse1" title="Permalink to this code">¶</a></div>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1"># ifelse1.py: use if-else to check even and odd nubmer</span>

<span class="c1"># &quot;input&quot; command takes input as string</span>
<span class="n">x</span><span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Enter the number:</span><span class="se">\t</span><span class="s1">&#39;</span><span class="p">))</span>

<span class="c1"># % is used to calculate remainder</span>
<span class="k">if</span> <span class="n">x</span><span class="o">%</span><span class="mi">2</span><span class="o">==</span><span class="mi">0</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Number is even&quot;</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Number is odd&quot;</span><span class="p">)</span>

<span class="sd">&#39;&#39;&#39;</span>
<span class="sd">Output-1st run:</span>
<span class="sd">Enter the number:   10</span>
<span class="sd">Number is even</span>

<span class="sd">Output-2nd run:</span>
<span class="sd">Enter the number:   15</span>
<span class="sd">Number is odd</span>
<span class="sd">&#39;&#39;&#39;</span>
</pre></div>
</td></tr></table></div>
</div>
<p><strong>Explanation</strong> <a class="reference internal" href="#py-ch1-ifelse1"><span class="std std-numref">Listing 1.12</span></a></p>
<blockquote>
<div>Line 4 takes the input from the user. After that remainder is checked in line 7. If condition is true i.e. remainder is zero, then line 8 will be executed; otherwise print command inside ‘else’ statement (line 10) will be executed.</div></blockquote>
</div>
<div class="section" id="if-elif-else">
<h5>If-elif-else<a class="headerlink" href="#if-elif-else" title="Permalink to this headline">¶</a></h5>
<p>In previous case, there were two contions which are implemented using if-else statement. If there are more than two conditions then ‘elif’ block can be used as shown in next example. Further, ‘If-elif-else’ block can contain any number of ‘elif’ blocks between one ‘if’ and one ‘else’ block.</p>
<p><a class="reference internal" href="#py-ch1-ifelsenested"><span class="std std-numref">Listing 1.13</span></a> checks whether the number is divisible by 2 and 3, using nested ‘if-else’ statement.</p>
<div class="literal-block-wrapper docutils container" id="py-ch1-ifelsenested">
<div class="code-block-caption"><span class="caption-text">If-elif-else statement</span><a class="headerlink" href="#py-ch1-ifelsenested" title="Permalink to this code">¶</a></div>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">#elif.py: checks divisibility with 2 and 3</span>

<span class="c1"># &quot;int(input())&quot; command takes input as number</span>
<span class="n">x</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Enter the number:</span><span class="se">\t</span><span class="s1">&#39;</span><span class="p">))</span>

<span class="c1"># % is used to calculate remainder</span>
<span class="k">if</span> <span class="n">x</span><span class="o">%</span><span class="mi">2</span><span class="o">==</span><span class="mi">0</span><span class="p">:</span> <span class="c1">#check divisibility with 2</span>
    <span class="k">if</span> <span class="n">x</span><span class="o">%</span><span class="mi">3</span><span class="o">==</span><span class="mi">0</span><span class="p">:</span> <span class="c1"># if x%2=0, then check this line</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Number is divisible by 2 and 3&quot;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Number is divisible by 2 only&quot;</span><span class="p">)</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;x%3= &quot;</span><span class="p">,</span> <span class="n">x</span><span class="o">%</span><span class="mi">3</span><span class="p">)</span>
<span class="k">elif</span> <span class="n">x</span><span class="o">%</span><span class="mi">3</span><span class="o">==</span><span class="mi">0</span><span class="p">:</span> <span class="c1">#check this if x%2 is not zero</span>
    <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Number is divisible by 3 only&quot;</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Number is not divisible by 2 and 3&quot;</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="s2">&quot;x%2= &quot;</span><span class="p">,</span> <span class="n">x</span><span class="o">%</span><span class="mi">2</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="s2">&quot;x%3= &quot;</span><span class="p">,</span> <span class="n">x</span><span class="o">%</span><span class="mi">3</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s2">&quot;Thank you&quot;</span><span class="p">)</span>

<span class="sd">&#39;&#39;&#39;</span>
<span class="sd">output 1:</span>
<span class="sd">Enter the number:   12</span>
<span class="sd">Number is divisible by 2 and 3</span>
<span class="sd">Thank you</span>

<span class="sd">output 2:</span>
<span class="sd">Enter the number:   8</span>
<span class="sd">Number is divisible by 2 only</span>
<span class="sd">x%3=  2</span>
<span class="sd">Thank you</span>

<span class="sd">output 3:</span>
<span class="sd">Enter the number:   7</span>
<span class="sd">Number is not divisible by 2 and 3</span>
<span class="sd">x%2=  1</span>
<span class="sd">x%3=  1</span>
<span class="sd">Thank you</span>

<span class="sd">output 4:</span>
<span class="sd">Enter the number:   15</span>
<span class="sd">Number is divisible by 3 only</span>
<span class="sd">Thank you</span>
<span class="sd">&#39;&#39;&#39;</span>
</pre></div>
</td></tr></table></div>
</div>
<p><strong>Explanation</strong> <a class="reference internal" href="#py-ch1-ifelsenested"><span class="std std-numref">Listing 1.13</span></a></p>
<blockquote>
<div><p>Let’s discuss the indentation first. First look at the indentation at lines ‘7’ and ‘8’. Since line ‘8’ is shifted by one indentation after line ‘7’, therefore it belongs to line ‘7’, which represents that Python-interpreter will go to line ‘8’ only if line ‘7’ is true. Similarly, print statements at line ‘11’ and ‘12’ are indented with respect to line ‘10’, therefore both the print statement will be executed when Python-interpreter reaches to ‘else’ condition.</p>
<p>Now we will see the output for ‘x=12’. For ‘x=12’,  ‘if’ statement is satisfied at line ‘7’, therefore Python-interpreter will go to line ‘8’, where the divisibility of the number is checked with number ‘3’. The number is divisible by ‘3’ also, hence corresponding print statement is executed as shown in line ‘24’. After this, Python-interpreter will exit from the ‘if-else’ statements and reached to line ‘19’ and output at line ‘25’ will be printed.</p>
<p>Lets consider the input ‘x=7’. In this case number is not divisible by ‘2’ and ‘3’. Therefore Python-interpreter will reached to line ‘15’. Since lines ‘16’, ‘17’ and ‘18’ are indented with respect to line ‘15’, hence all the three line will be printed as shown in line ‘35-37’ . Finally, Python-interpreter will reach to line ‘19’ and print this line also.</p>
<p>Lastly, use 15 as the input number. Since it is not divided by 2, it will go to elif statement and corresponding print statement will be executed.</p>
<p>Since there are three conditions in this example. therefore ‘elif’ statement is used. Remember that ‘if-else’ can contain only one ‘if’ and one ‘else’ statement , but there is no such restriction of ‘elif’ statement. Hence, if there higher number of conditions, then we can increase the number of ‘elif’ statement.</p>
</div></blockquote>
<p><a class="reference internal" href="#py-ch1-ifelsenested"><span class="std std-numref">Listing 1.13</span></a> can be written as <a class="reference internal" href="#py-ch1-ifelsenested2"><span class="std std-numref">Listing 1.14</span></a> and <a class="reference internal" href="#py-ch1-ifelsenested3"><span class="std std-numref">Listing 1.15</span></a> as well. Here  ‘or’ and ‘and’ keywords are used to verify the conditions. The ‘and’ keyword considers the statement as true, if and only if, all the conditions are true in the statement; whereas ‘or’ keyword considers the statement as true, if any of the conditions are true in the statement.</p>
<div class="literal-block-wrapper docutils container" id="py-ch1-ifelsenested2">
<div class="code-block-caption"><span class="caption-text">‘and’ logic</span><a class="headerlink" href="#py-ch1-ifelsenested2" title="Permalink to this code">¶</a></div>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">#andLogic.py: check divisibility with 2 and 3</span>
<span class="n">x</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Enter the number:</span><span class="se">\t</span><span class="s1">&#39;</span><span class="p">))</span>

<span class="k">if</span> <span class="n">x</span><span class="o">%</span><span class="mi">2</span><span class="o">==</span><span class="mi">0</span> <span class="ow">and</span> <span class="n">x</span><span class="o">%</span><span class="mi">3</span><span class="o">==</span><span class="mi">0</span><span class="p">:</span> <span class="c1">#check divisibility with both 2 and 3</span>
    <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Number is divisible by 2 and 3&quot;</span><span class="p">)</span>
<span class="k">elif</span> <span class="n">x</span><span class="o">%</span><span class="mi">2</span><span class="o">==</span><span class="mi">0</span><span class="p">:</span> <span class="c1">#check this if x%2 is not zero</span>
    <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Number is divisible by 2 only&quot;</span><span class="p">)</span>
<span class="k">elif</span> <span class="n">x</span><span class="o">%</span><span class="mi">3</span><span class="o">==</span><span class="mi">0</span><span class="p">:</span> <span class="c1">#check this if x%3 is not zero</span>
    <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Number is divisible by 3 only&quot;</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Number is not divisible by 2 and 3&quot;</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="s2">&quot;x%2= &quot;</span><span class="p">,</span> <span class="n">x</span><span class="o">%</span><span class="mi">2</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="s2">&quot;x%3= &quot;</span><span class="p">,</span> <span class="n">x</span><span class="o">%</span><span class="mi">3</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s2">&quot;Thank you&quot;</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
</div>
<div class="literal-block-wrapper docutils container" id="py-ch1-ifelsenested3">
<div class="code-block-caption"><span class="caption-text">‘and’ and ‘or’ logic</span><a class="headerlink" href="#py-ch1-ifelsenested3" title="Permalink to this code">¶</a></div>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">#orLogic.py: check divisibility with 2 and 3</span>
<span class="n">x</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Enter the number:</span><span class="se">\t</span><span class="s1">&#39;</span><span class="p">))</span>

<span class="c1"># % is used to calculate remainder</span>
<span class="k">if</span> <span class="n">x</span><span class="o">%</span><span class="mi">2</span><span class="o">==</span><span class="mi">0</span> <span class="ow">or</span> <span class="n">x</span><span class="o">%</span><span class="mi">3</span><span class="o">==</span><span class="mi">0</span><span class="p">:</span> <span class="c1">#check divisibility with 2 or 3</span>
    <span class="k">if</span> <span class="n">x</span><span class="o">%</span><span class="mi">2</span><span class="o">==</span><span class="mi">0</span> <span class="ow">and</span> <span class="n">x</span><span class="o">%</span><span class="mi">3</span><span class="o">==</span><span class="mi">0</span><span class="p">:</span> <span class="c1">#check if divided by both 2 and 3</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Number is divisible by 2 and 3&quot;</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">x</span><span class="o">%</span><span class="mi">2</span><span class="o">==</span><span class="mi">0</span><span class="p">:</span> <span class="c1">#check this if x%2 is not zero</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Number is divisible by 2 only&quot;</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">x</span><span class="o">%</span><span class="mi">3</span><span class="o">==</span><span class="mi">0</span><span class="p">:</span> <span class="c1">#check this if x%3 is not zero</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Number is divisible by 3 only&quot;</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Number is not divisible by 2 and 3&quot;</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="s2">&quot;x%2= &quot;</span><span class="p">,</span> <span class="n">x</span><span class="o">%</span><span class="mi">2</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="s2">&quot;x%3= &quot;</span><span class="p">,</span> <span class="n">x</span><span class="o">%</span><span class="mi">3</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s2">&quot;Thank you&quot;</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
</div>
</div>
</div>
<div class="section" id="while-loop">
<h4>While loop<a class="headerlink" href="#while-loop" title="Permalink to this headline">¶</a></h4>
<p>‘While’ loop is used for recursive action, and the loop repeat itself until a certain condition is satisfied.</p>
<p><a class="reference internal" href="#py-ch1-whileexample1"><span class="std std-numref">Listing 1.16</span></a> uses ‘while’ loop to print numbers 1 to 5. For printing numbers upto 5, value of initial number should be increased by 1 at each iteration, as shown in line 7.</p>
<div class="literal-block-wrapper docutils container" id="py-ch1-whileexample1">
<div class="code-block-caption"><span class="caption-text">While loop</span><a class="headerlink" href="#py-ch1-whileexample1" title="Permalink to this code">¶</a></div>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">#WhileExample1.py: Print numbers upto 5</span>

<span class="n">n</span><span class="o">=</span><span class="mi">1</span> <span class="c1">#initial value of number</span>
<span class="k">print</span><span class="p">(</span><span class="s2">&quot;Numbers upto 5: &quot;</span><span class="p">)</span>
<span class="k">while</span> <span class="n">n</span><span class="o">&lt;</span><span class="mi">6</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s2">&quot; &quot;</span><span class="p">),</span> <span class="c1">#end=&quot; &quot;: to stop row change after print</span>
    <span class="n">n</span><span class="o">=</span><span class="n">n</span><span class="o">+</span><span class="mi">1</span>
<span class="k">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Code ended at n =  </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">n</span><span class="p">)</span>

<span class="sd">&#39;&#39;&#39;</span>
<span class="sd">output:</span>
<span class="sd">Numbers upto 5:</span>
<span class="sd">1 2 3 4 5</span>
<span class="sd">Code ended at n =  6</span>
<span class="sd">&#39;&#39;&#39;</span>
</pre></div>
</td></tr></table></div>
</div>
<p><strong>Explanation</strong> <a class="reference internal" href="#py-ch1-whileexample1"><span class="std std-numref">Listing 1.16</span></a></p>
<blockquote>
<div><p>In the code, line ‘3’ sets the initial value of the number i.e. ‘n=1’. Line ‘5’ indicates that ‘while’ loop will be executed until ‘n’ is less than 6. Next two lines i.e. line ‘6’ and ‘7’, are indented with respect to line ‘5’. Hence these line will be executed if and only if the condition at line ‘5’ is satisfied.</p>
<p>Since the value of ‘n’ is one therefore while loop be executed. First, number 1 is printed by line ‘6’, then value of ‘n’ is incremented by 1 i.e. ‘n=2’. ‘n’ is still less than 6, therefore loop will be executed again. In this iteration value of ‘n’ will become 3, which is still less than 6. In the same manner, loop will continue to increase the value of ‘n’ until ‘n=6’. When ‘n=6’, then loop condition at line ‘5’ will not be satisfied and loop will not be executed this time. At this point Python-interpreter will reach to line ‘8’, where it will print the value stored in variable ‘n’ i.e. 6 as shown in line ‘14’.</p>
<p>Also, look at ‘print’ commands at lines ‘3, 6’ and ‘8’. At line ‘6’, “end = ‘ ‘” is placed at the end, which results in no line change while printing outputs as shown at line ‘13’. At line ‘8’, ‘\n’ is used to change the line, otherwise this print output will be continued with output of line ‘6’.</p>
</div></blockquote>
</div>
<div class="section" id="for-loop">
<h4>For loop<a class="headerlink" href="#for-loop" title="Permalink to this headline">¶</a></h4>
<p>Repetitive structure can also be implemented using ‘for’ loop. <strong>For</strong> loop requires the keyword <strong>in</strong> and some <strong>sequence</strong> for execution. Lets discuss the <strong>range</strong> command to generate sequences, then we will look at ‘for’ loop. Some outputs of ‘range’ commands are shown in <a class="reference internal" href="#py-ch1-rangecommand"><span class="std std-numref">Listing 1.17</span></a>.</p>
<div class="literal-block-wrapper docutils container" id="py-ch1-rangecommand">
<div class="code-block-caption"><span class="caption-text">Range command</span><a class="headerlink" href="#py-ch1-rangecommand" title="Permalink to this code">¶</a></div>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<span class="go">[0, 1, 2, 3, 4]</span>

<span class="gp">&gt;&gt;&gt; </span><span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">4</span><span class="p">)</span>
<span class="go">[1, 2, 3]</span>

<span class="gp">&gt;&gt;&gt; </span><span class="nb">range</span><span class="p">(</span><span class="mi">11</span><span class="p">,</span> <span class="mi">19</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="go">[11, 13, 15, 17]</span>

<span class="gp">&gt;&gt;&gt; </span><span class="nb">range</span><span class="p">(</span><span class="mi">15</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="o">-</span><span class="mi">2</span><span class="p">)</span>
<span class="go">[15, 13, 11, 9]</span>
</pre></div>
</td></tr></table></div>
</div>
<p><strong>Explanation</strong> <a class="reference internal" href="#py-ch1-rangecommand"><span class="std std-numref">Listing 1.17</span></a></p>
<blockquote>
<div><p>From the outputs of ‘range’ commands in the listing, it is clear that it generates sequences of integers. Python indexing starts from zero, therefore command ‘range(5)’ at line ‘3’ generates five numbers ranging from ‘0’ to ‘4’.</p>
<p>At line ‘6’, two arguments are given in ‘range’ commands i.e. ‘1’ and ‘4’. Note that output for this at line ‘7’ starts from ‘1’ and ends at ‘3’ i.e. last number is not included by Python in the output list.</p>
<p>At line ‘9’ and ‘12’, three arguments are provided to ‘range’ function. In these cases, third argument is the increment value e.g. line ‘12’ indicates that the number should start from ‘15’ and stop at number ‘7’ with a decrement of ‘2’ at each step. Note that last value i.e. ‘7’ is not included in the output again.  Similarly, output of line ‘9’ does not include ‘19’.</p>
</div></blockquote>
<p><a class="reference internal" href="#py-ch1-forexample1"><span class="std std-numref">Listing 1.18</span></a> prints numbers from ‘1’ to ‘5’ in forward and reverse direction using range command.</p>
<div class="literal-block-wrapper docutils container" id="py-ch1-forexample1">
<div class="code-block-caption"><span class="caption-text">For loop</span><a class="headerlink" href="#py-ch1-forexample1" title="Permalink to this code">¶</a></div>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">#ForExample1.py: Print numbers 1-5</span>

<span class="k">print</span><span class="p">(</span><span class="s2">&quot;Numbers in forward order&quot;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">):</span>
    <span class="k">print</span><span class="p">(</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s2">&quot; &quot;</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Final value of i is: &quot;</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span>

<span class="k">print</span> <span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Numbers in reverse order&quot;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">j</span>  <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">):</span>
    <span class="k">print</span><span class="p">(</span><span class="n">j</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s2">&quot; &quot;</span><span class="p">),</span>
<span class="k">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Final value of i is: &quot;</span><span class="p">,</span> <span class="n">j</span><span class="p">)</span>

<span class="sd">&#39;&#39;&#39;</span>
<span class="sd">outputs:</span>
<span class="sd">Numbers in forward order</span>
<span class="sd">1 2 3 4 5</span>
<span class="sd">Final value of i is:  4</span>

<span class="sd">Numbers in reverse order</span>
<span class="sd">5 4 3 2 1</span>
<span class="sd">Final value of i is:  1</span>
<span class="sd">&#39;&#39;&#39;</span>

<span class="n">fruits</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;apple&quot;</span><span class="p">,</span> <span class="s2">&quot;banana&quot;</span><span class="p">,</span> <span class="s2">&quot;orange&quot;</span><span class="p">]</span>
<span class="k">print</span><span class="p">(</span><span class="s2">&quot;List of fruits are shown below:&quot;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">fruits</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
<span class="sd">&#39;&#39;&#39;</span>
<span class="sd">List of fruits are shown below:</span>
<span class="sd">apple</span>
<span class="sd">banana</span>
<span class="sd">orange</span>
<span class="sd">&#39;&#39;&#39;</span>
</pre></div>
</td></tr></table></div>
</div>
<p><strong>Explanation</strong> <a class="reference internal" href="#py-ch1-forexample1"><span class="std std-numref">Listing 1.18</span></a></p>
<blockquote>
<div><p>At line ‘4’, command ‘range(5)’ generates the five numbers, therefore loop repeats itself five times.  Since, output of range starts from ‘0’, therefore ‘i’ is incremented by one before printing. Line ‘6’ shows that the variable ‘i’ stores only one value at a time, and the last stored value is ‘4’ i.e. last value of ‘range(5)’.</p>
<p>At line ‘9’, variable ‘j’ is used instead of ‘i’ and range command generates the number from 1 to 5 again but in reverse order.  Note that number of iteration in for loop depends on the number of elements i.e. length of the ‘range’ command’s output and independent of the element values. Line ‘10’ prints the current value of ‘j’ at each iteration. Finally, line ‘15’ prints the last value stores in variable ‘j’ i.e. ‘j=1’, which is the last value generated by command ‘range(5,0,-1)’.</p>
<p>Code in line ‘24’ shows that, how the values are assigned to the iterating variable ‘i’ from a list. The list ‘fruits’ contains three items, therefore loop will execute three times; and different elements of the list are assigned to variable ‘i’ at each iteration i.e. apple is assign first, then banana and lastly orange will be assigned.</p>
</div></blockquote>
</div>
</div>
<div class="section" id="function">
<span id="sec-functionspython"></span><h3>Function<a class="headerlink" href="#function" title="Permalink to this headline">¶</a></h3>
<p>Some logics may be used frequently in the code, which can be written in the form of functions. Then, the functions can be called whenever required, instead of rewriting the logic again and again.</p>
<p>In <a class="reference internal" href="#py-ch1-funcex"><span class="std std-numref">Listing 1.19</span></a>, the function ‘addTwoNum’ adds two numbers.</p>
<div class="literal-block-wrapper docutils container" id="py-ch1-funcex">
<div class="code-block-caption"><span class="caption-text">Function</span><a class="headerlink" href="#py-ch1-funcex" title="Permalink to this code">¶</a></div>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">#funcEx.py</span>
<span class="k">def</span> <span class="nf">addTwoNum</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
    <span class="nb">sum</span> <span class="o">=</span> <span class="n">a</span><span class="o">+</span><span class="n">b</span>
    <span class="k">return</span><span class="p">(</span><span class="nb">sum</span><span class="p">)</span>

<span class="n">result</span> <span class="o">=</span> <span class="n">addTwoNum</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s2">&quot;sum of numbers is </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">result</span><span class="p">)</span>

<span class="sd">&#39;&#39;&#39;</span>
<span class="sd">sum of numbers is 7</span>
<span class="sd">&#39;&#39;&#39;</span>
</pre></div>
</td></tr></table></div>
</div>
<p><strong>Explanation</strong> <a class="reference internal" href="#py-ch1-funcex"><span class="std std-numref">Listing 1.19</span></a></p>
<blockquote>
<div><p>In Python, function is defined using keyword ‘def’. Line 2 defines the function with name ‘addTwoNum’ which takes two parameter i.e. a and b. Line 3 add the values of ‘a’ and ‘b’ and stores the result in variable ‘sum’. Finally line 4 returns the value to function call which is done at line 6.</p>
<p>In line 6, function ‘addTwoNum’ is called with two values ‘4’ and ‘5’ which are assigned to variable ‘a’ an ‘b’ respectively in line 2. Also, function returns the ‘sum’ variable from line 4, which is stored in variable ‘results’ in line 6 (as line 6 called the function). Finally, line 7 prints the result.</p>
</div></blockquote>
<p>In <a class="reference internal" href="#py-ch1-funcex2"><span class="std std-numref">Listing 1.20</span></a>, the function is defined with some default values; which means if user does not provide all the arguments’ values, then default value will be used for the execution of the function.</p>
<div class="literal-block-wrapper docutils container" id="py-ch1-funcex2">
<div class="code-block-caption"><span class="caption-text">Function with default arguments</span><a class="headerlink" href="#py-ch1-funcex2" title="Permalink to this code">¶</a></div>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">#funcEx2.py: default argument can be defined only after non-default argument</span>
<span class="c1"># e.g. addTwoNum(num1=2, num2): is wrong. b must have some defined value</span>
<span class="k">def</span> <span class="nf">addTwoNum</span><span class="p">(</span><span class="n">num1</span><span class="p">,</span> <span class="n">num2</span><span class="o">=</span><span class="mi">2</span><span class="p">):</span>
    <span class="k">return</span><span class="p">(</span><span class="n">num1</span><span class="o">+</span><span class="n">num2</span><span class="p">)</span>

<span class="n">result1</span> <span class="o">=</span> <span class="n">addTwoNum</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s2">&quot;result1=</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">result1</span><span class="p">)</span>

<span class="n">result2</span> <span class="o">=</span> <span class="n">addTwoNum</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s2">&quot;result2=</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">result2</span><span class="p">)</span>

<span class="sd">&#39;&#39;&#39;</span>
<span class="sd">result1=5</span>
<span class="sd">result2=7</span>
<span class="sd">&#39;&#39;&#39;</span>
</pre></div>
</td></tr></table></div>
</div>
<p><strong>Explanation</strong> <a class="reference internal" href="#py-ch1-funcex2"><span class="std std-numref">Listing 1.20</span></a></p>
<blockquote>
<div>Function of this listing is same as <a class="reference internal" href="#py-ch1-funcex"><span class="std std-numref">Listing 1.19</span></a>. Only difference is that the line 3 contains a default value for num2 i.e. ‘num2 = 2’. Default value indicates that, if function is called without giving the second value then it will be set to 2 by default, as shown in line 6. Line 6 pass only one value i.e. 3, therefore num1 will be assign 3, whereas num2 will be assigned default value i.e. 2. Rest of the the working is same as <a class="reference internal" href="#py-ch1-funcex"><span class="std std-numref">Listing 1.19</span></a>.</div></blockquote>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">There are various other important Python features e.g. classes, decorators and descriptors etc. which are not explained here as we are not going to use these in the coding. Further, using these features we can make code more efficient and reusable along with less error-prone.</p>
</div>
</div>
<div class="section" id="numpy-scipy-and-matplotlib">
<h3>Numpy, Scipy and Matplotlib<a class="headerlink" href="#numpy-scipy-and-matplotlib" title="Permalink to this headline">¶</a></h3>
<p>In this section, we will use various Python libraries, i.e. <strong>Numpy</strong>, <strong>Scipy</strong> and <strong>Matplotlib</strong>, which are very useful for scientific computation. With Numpy library, we can define array and matrices easily. Also, it contains various useful mathematical function e.g. random number generator i.e. ‘rand’ and ‘randn’ etc. Matplotlib is used for plotting the data in various format. Some of the function of these libraries are shown in this section. Further, Scipy library can be used for more advance features e.g. complementary error function (erfc) and LU factorization etc.</p>
<p><a class="reference internal" href="#py-ch1-numpymatplot"><span class="std std-numref">Listing 1.21</span></a> generates the sine wave using Numpy library; whereas the Matplotlib library is used for plotting the data.</p>
<div class="literal-block-wrapper docutils container" id="py-ch1-numpymatplot">
<div class="code-block-caption"><span class="caption-text">Sine wave using Numpy and Matplotlib, <a class="reference internal" href="#fig-numpymatplot"><span class="std std-numref">Fig. 1.1</span></a></span><a class="headerlink" href="#py-ch1-numpymatplot" title="Permalink to this code">¶</a></div>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1"># numpyMatplot.py</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="kn">as</span> <span class="nn">plt</span>
<span class="c1"># np.linspace: devide line from 0 to 4*pi into 100 equidistant points</span>
<span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">4</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span>
<span class="n">sinx</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="c1"># find sin(x) for above 100 points</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">sinx</span><span class="p">)</span> <span class="c1"># plot (x, sin(x))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">&quot;Time&quot;</span><span class="p">)</span> <span class="c1"># label for x axis</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&quot;Amplitude&quot;</span><span class="p">)</span> <span class="c1"># label for y axis</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Sine wave&#39;</span><span class="p">)</span> <span class="c1"># title</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlim</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">4</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="p">])</span> <span class="c1"># x-axis display range</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylim</span><span class="p">([</span><span class="o">-</span><span class="mf">1.5</span><span class="p">,</span> <span class="mf">1.5</span><span class="p">])</span> <span class="c1"># y-axis display range</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span> <span class="c1"># to show the plot on the screen</span>
</pre></div>
</td></tr></table></div>
</div>
<p><strong>Explanation</strong> <a class="reference internal" href="#py-ch1-numpymatplot"><span class="std std-numref">Listing 1.21</span></a></p>
<blockquote>
<div>First line import numpy library to the code. Also, it is imported with shortname ‘np’; which is used in line 5 as ‘np.linspace’. If line 2 is written as ‘import numpy’, then line 5 should be written  as ‘numpy.linspace’. Further, third line import ‘pyplot’ function of ‘matplotlib’ library as plt. Rest of the lines are explained as comments in the listing.</div></blockquote>
<div class="figure align-center" id="id4">
<span id="fig-numpymatplot"></span><a class="reference internal image-reference" href="_images/SineWave.jpg"><img alt="_images/SineWave.jpg" src="_images/SineWave.jpg" style="width: 448.0px; height: 336.0px;" /></a>
<p class="caption"><span class="caption-text">Sine wave using Numpy and Matplotlib, <a class="reference internal" href="#py-ch1-numpymatplot"><span class="std std-numref">Listing 1.21</span></a></span></p>
</div>
<div class="section" id="arrays">
<h4>Arrays<a class="headerlink" href="#arrays" title="Permalink to this headline">¶</a></h4>
<p>Arrays can be created using ‘arange’ and ‘array’ commands as shown below,</p>
<div class="section" id="arange">
<h5>arange<a class="headerlink" href="#arange" title="Permalink to this headline">¶</a></h5>
<p>One dimensional array can be created using ‘arange’ option as shown below,</p>
<div class="literal-block-wrapper docutils container" id="py-ch1-arangeex">
<div class="code-block-caption"><span class="caption-text">arange</span><a class="headerlink" href="#py-ch1-arangeex" title="Permalink to this code">¶</a></div>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1"># arangeEx.py</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
<span class="n">a</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">10</span><span class="p">)</span> <span class="c1"># last element i.e. 10 is not included in result</span>
<span class="k">print</span><span class="p">(</span><span class="n">a</span><span class="p">)</span> <span class="c1"># [1 2 3 4 5 6 7 8 9]</span>
<span class="k">print</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span> <span class="c1"># (9,) i.e. total 9 entries</span>

<span class="n">b</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span> <span class="c1"># print 1 to 10 with the spacing of 2</span>
<span class="k">print</span><span class="p">(</span><span class="n">b</span><span class="p">)</span> <span class="c1"># [1 3 5 7 9]</span>
<span class="k">print</span><span class="p">(</span><span class="n">b</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span> <span class="c1"># (5,) i.e. total 9 entries</span>

<span class="n">c</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="o">-</span><span class="mi">2</span><span class="p">)</span> <span class="c1"># last element 2 is not included in result self</span>
<span class="k">print</span><span class="p">(</span><span class="n">c</span><span class="p">)</span> <span class="c1"># [10  8  6  4]</span>
</pre></div>
</td></tr></table></div>
</div>
</div>
<div class="section" id="array">
<h5>array<a class="headerlink" href="#array" title="Permalink to this headline">¶</a></h5>
<p>Multidimensional array can not be created by ‘arange’. Also, ‘arange’ can only generate sequences and can not take user-defined data. These two problems can be solved by using ‘array’ option as shown in <a class="reference internal" href="#py-ch1-arrayex"><span class="std std-numref">Listing 1.23</span></a>,</p>
<div class="literal-block-wrapper docutils container" id="py-ch1-arrayex">
<div class="code-block-caption"><span class="caption-text">array</span><a class="headerlink" href="#py-ch1-arrayex" title="Permalink to this code">¶</a></div>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1"># arrayEx.py</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>

<span class="n">a</span><span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">2</span><span class="p">])</span>
<span class="k">print</span><span class="p">(</span><span class="n">a</span><span class="p">)</span> <span class="c1"># [1 8 2]</span>
<span class="k">print</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">shape</span><span class="p">(</span><span class="n">a</span><span class="p">))</span> <span class="c1"># (3,)</span>

<span class="n">b</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span>
    <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span>
    <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span>
    <span class="p">[</span><span class="mi">6</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span>
<span class="p">])</span>
<span class="c1"># b can be written as follow as well, but above is more readable</span>
<span class="c1"># b=np.array([[1, 2],[4, 3]])</span>
<span class="k">print</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">shape</span><span class="p">(</span><span class="n">b</span><span class="p">))</span> <span class="c1">#(3, 2) i.e. 3 row and 2 column</span>

<span class="c1"># row of array can have different number of elements</span>
<span class="n">c</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">10</span><span class="p">)],[</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">11</span><span class="p">,</span> <span class="mi">16</span><span class="p">)]])</span>
<span class="k">print</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>
<span class="sd">&#39;&#39;&#39;</span>
<span class="sd">[[array([1, 2, 3, 4, 5, 6, 7, 8, 9])]</span>
<span class="sd">     [array([11, 12, 13, 14, 15])]]</span>
<span class="sd">&#39;&#39;&#39;</span>
</pre></div>
</td></tr></table></div>
</div>
</div>
<div class="section" id="matrix">
<h5>Matrix<a class="headerlink" href="#matrix" title="Permalink to this headline">¶</a></h5>
<p>Similar to array, we can define matrix using ‘mat’ function of numpy library as shown in <a class="reference internal" href="#py-ch1-matrixex"><span class="std std-numref">Listing 1.24</span></a>. Also, LU factorization of the matrix is shown in <a class="reference internal" href="#py-ch1-scipyex"><span class="std std-numref">Listing 1.25</span></a> using Scipy library. There are differences in results of mathematical operations on the matrices defined by ‘array’ and ‘mat’, as shown in the <a class="reference internal" href="#py-ch1-scipyex"><span class="std std-numref">Listing 1.25</span></a>; e.g. ‘dot’ function is required for matrix multiplication of array; whereas ‘*’ sign performs matrix multiplication for ‘mat’ function.</p>
<div class="literal-block-wrapper docutils container" id="py-ch1-matrixex">
<div class="code-block-caption"><span class="caption-text">Matrix</span><a class="headerlink" href="#py-ch1-matrixex" title="Permalink to this code">¶</a></div>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1"># matrixEx.py</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
<span class="kn">from</span> <span class="nn">scipy.linalg</span> <span class="kn">import</span> <span class="n">lu</span>

<span class="n">a</span><span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">mat</span><span class="p">(</span><span class="s1">&#39;1, 2; 3, 2; 2, 3&#39;</span><span class="p">)</span> <span class="c1"># define matrix</span>
<span class="c1"># print(np.shape(a)) # (3, 2)</span>

<span class="n">aT</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">transpose</span><span class="p">(</span><span class="n">a</span><span class="p">)</span> <span class="c1"># transpose of matrix &#39;a&#39;</span>
<span class="c1"># print(np.shape(aT)) # (2, 3)</span>

<span class="c1"># eye(n) is used for (nxn) Identity matrix</span>
<span class="n">b</span><span class="o">=</span><span class="mi">2</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">eye</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span> <span class="c1"># 2 * Identity matrix</span>
<span class="c1"># print(np.shape(b)) # (3, 3)</span>

<span class="n">c</span> <span class="o">=</span> <span class="n">b</span><span class="o">*</span><span class="n">a</span>
<span class="c1"># print(np.shape(c)) # (3, 2)</span>

<span class="n">l</span><span class="o">=</span> <span class="n">lu</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">l</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
</div>
<div class="literal-block-wrapper docutils container" id="py-ch1-scipyex">
<div class="code-block-caption"><span class="caption-text">LU Factorization of Matrix</span><a class="headerlink" href="#py-ch1-scipyex" title="Permalink to this code">¶</a></div>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1"># scipyEx.py</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
<span class="c1"># import LU factorization command from scipy.linalg</span>
<span class="kn">from</span> <span class="nn">scipy.linalg</span> <span class="kn">import</span> <span class="n">lu</span>

<span class="c1">#define matrix &#39;a&#39;</span>
<span class="n">a</span><span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">mat</span><span class="p">(</span><span class="s1">&#39;1, 1, 1; 3, 4, 6; 2, 5, 4&#39;</span><span class="p">)</span> <span class="c1"># define matrix</span>

<span class="c1"># perform LU factorization and</span>
<span class="c1"># save the values in p, l and u as it returns 3 values</span>
<span class="p">[</span><span class="n">p</span><span class="p">,</span> <span class="n">l</span><span class="p">,</span> <span class="n">u</span><span class="p">]</span><span class="o">=</span> <span class="n">lu</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>

<span class="c1"># print values of p, l and u</span>
<span class="k">print</span><span class="p">(</span><span class="s2">&quot;p = &quot;</span><span class="p">,</span> <span class="n">p</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s2">&quot;l = &quot;</span><span class="p">,</span> <span class="n">l</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s2">&quot;u = &quot;</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="n">l</span><span class="p">,</span><span class="mi">2</span><span class="p">))</span>


<span class="k">print</span><span class="p">(</span><span class="s2">&quot;Type of P: &quot;</span><span class="p">,</span> <span class="nb">type</span><span class="p">(</span><span class="n">p</span><span class="p">))</span> <span class="c1">#type of p: ndarray</span>
<span class="c1"># p*l*u will give wrong results</span>
<span class="c1"># because types are not matrix (but ndarray) as shown above</span>
<span class="n">r</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">l</span><span class="p">)</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">u</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s2">&quot;r = &quot;</span><span class="p">,</span> <span class="n">r</span><span class="p">)</span>

<span class="c1">#for p*l*u we need to change the ndarray to matrix type as below,</span>
<span class="k">print</span><span class="p">(</span><span class="s2">&quot;Type of P after np.mat: &quot;</span><span class="p">,</span> <span class="nb">type</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">mat</span><span class="p">(</span><span class="n">p</span><span class="p">)))</span>
<span class="n">m</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">mat</span><span class="p">(</span><span class="n">p</span><span class="p">)</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">mat</span><span class="p">(</span><span class="n">l</span><span class="p">)</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">mat</span><span class="p">(</span><span class="n">u</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s2">&quot;m = &quot;</span><span class="p">,</span> <span class="n">m</span><span class="p">)</span>

<span class="sd">&#39;&#39;&#39;</span>
<span class="sd">Outputs:</span>

<span class="sd">p =  [[ 0.  0.  1.]</span>
<span class="sd"> [ 1.  0.  0.]</span>
<span class="sd"> [ 0.  1.  0.]]</span>

<span class="sd">l =  [[ 1.          0.          0.        ]</span>
<span class="sd"> [ 0.66666667  1.          0.        ]</span>
<span class="sd"> [ 0.33333333 -0.14285714  1.        ]]</span>

<span class="sd">u =  [[ 1.    0.    0.  ]</span>
<span class="sd"> [ 0.67  1.    0.  ]</span>
<span class="sd"> [ 0.33 -0.14  1.  ]]</span>

<span class="sd">Type of P:  &lt;class &#39;numpy.ndarray&#39;&gt;</span>

<span class="sd">r =  [[ 1.  1.  1.]</span>
<span class="sd"> [ 3.  4.  6.]</span>
<span class="sd"> [ 2.  5.  4.]]</span>

<span class="sd">Type of P after np.mat:  &lt;class &#39;numpy.matrixlib.defmatrix.matrix&#39;&gt;</span>

<span class="sd">m =  [[ 1.  1.  1.]</span>
<span class="sd"> [ 3.  4.  6.]</span>
<span class="sd"> [ 2.  5.  4.]]</span>
<span class="sd">&#39;&#39;&#39;</span>
</pre></div>
</td></tr></table></div>
</div>
</div>
</div>
</div>
<div class="section" id="good-practices">
<h3>Good practices<a class="headerlink" href="#good-practices" title="Permalink to this headline">¶</a></h3>
<p>As oppose to other programming languages, Python provides various ways to iterate over the list, which are shown in this section.</p>
<div class="section" id="avoid-range-command">
<h4>Avoid range command<a class="headerlink" href="#avoid-range-command" title="Permalink to this headline">¶</a></h4>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># multiply 2 to all elements of arr</span>
<span class="n">arr</span> <span class="o">=</span> <span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">30</span><span class="p">]</span>

<span class="c1"># bad practice</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">arr</span><span class="p">)):</span>
    <span class="k">print</span><span class="p">(</span><span class="mi">2</span><span class="o">*</span><span class="n">arr</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>  <span class="c1"># 20, 40, 60</span>

<span class="c1"># good practices</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">arr</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="mi">2</span><span class="o">*</span><span class="n">i</span><span class="p">)</span>  <span class="c1"># 20, 40, 60</span>

<span class="c1"># print in reverse order</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">reversed</span><span class="p">(</span><span class="n">arr</span><span class="p">):</span>
    <span class="k">print</span><span class="p">(</span><span class="mi">2</span><span class="o">*</span><span class="n">i</span><span class="p">)</span>  <span class="c1"># 60, 40, 20</span>
</pre></div>
</div>
</div>
<div class="section" id="enumerate">
<h4>Enumerate<a class="headerlink" href="#enumerate" title="Permalink to this headline">¶</a></h4>
<p>In previous case, we do not have the access over index. Use ‘enumerate’ to get access to index as well,</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># multiply 2 to all elements of arr</span>
<span class="n">arr</span> <span class="o">=</span> <span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">30</span><span class="p">]</span>

<span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">a</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">arr</span><span class="p">):</span>
    <span class="k">print</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="s1">&#39;:&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="o">*</span><span class="n">a</span><span class="p">)</span>
    <span class="c1"># 0 : 20</span>
    <span class="c1"># 1 : 40</span>
    <span class="c1"># 2 : 60</span>
</pre></div>
</div>
</div>
<div class="section" id="loop-in-sorted-order">
<h4>Loop in sorted order<a class="headerlink" href="#loop-in-sorted-order" title="Permalink to this headline">¶</a></h4>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># multiply 2 to all elements of arr,</span>
<span class="c1"># but in sorted order</span>
<span class="n">arr</span> <span class="o">=</span> <span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="mi">50</span><span class="p">,</span> <span class="mi">20</span><span class="p">]</span>

<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">arr</span><span class="p">):</span>
    <span class="k">print</span><span class="p">(</span><span class="mi">2</span><span class="o">*</span><span class="n">i</span><span class="p">)</span>  <span class="c1"># 20, 40, 60, 100</span>

<span class="c1"># in reversed sorted order</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">arr</span><span class="p">,</span> <span class="n">reverse</span><span class="o">=</span><span class="bp">True</span><span class="p">):</span>
    <span class="k">print</span><span class="p">(</span><span class="mi">2</span><span class="o">*</span><span class="n">i</span><span class="p">)</span>  <span class="c1"># 100, 60, 40, 20</span>
</pre></div>
</div>
</div>
<div class="section" id="loop-over-keys">
<h4>Loop over keys<a class="headerlink" href="#loop-over-keys" title="Permalink to this headline">¶</a></h4>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">dc</span> <span class="o">=</span> <span class="p">{</span> <span class="s1">&#39;Toy&#39;</span><span class="p">:</span><span class="mi">3</span><span class="p">,</span> <span class="s1">&#39;Play&#39;</span><span class="p">:</span><span class="mi">4</span><span class="p">,</span> <span class="s1">&#39;Games&#39;</span><span class="p">:</span><span class="mi">5</span><span class="p">}</span>

<span class="c1"># print keys of dictionaries</span>
<span class="k">for</span> <span class="n">d</span> <span class="ow">in</span> <span class="n">dc</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="loop-over-keys-and-values">
<h4>Loop over keys and values<a class="headerlink" href="#loop-over-keys-and-values" title="Permalink to this headline">¶</a></h4>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">dc</span> <span class="o">=</span> <span class="p">{</span> <span class="s1">&#39;Toy&#39;</span><span class="p">:</span><span class="mi">3</span><span class="p">,</span> <span class="s1">&#39;Play&#39;</span><span class="p">:</span><span class="mi">4</span><span class="p">,</span> <span class="s1">&#39;Games&#39;</span><span class="p">:</span><span class="mi">5</span><span class="p">}</span>

<span class="c1"># print keys, values of dictionaries</span>
<span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">dc</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
    <span class="k">print</span><span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="n">v</span><span class="p">)</span>
    <span class="c1"># Toy 3</span>
    <span class="c1"># Play 4</span>
    <span class="c1"># Games 5</span>
</pre></div>
</div>
</div>
<div class="section" id="create-dictionaries-from-lists">
<h4>Create dictionaries from lists<a class="headerlink" href="#create-dictionaries-from-lists" title="Permalink to this headline">¶</a></h4>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">k</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Toy&#39;</span><span class="p">,</span> <span class="s1">&#39;Game&#39;</span><span class="p">,</span> <span class="s1">&#39;Tiger&#39;</span><span class="p">]</span>
<span class="n">v</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Toys&#39;</span><span class="p">,</span> <span class="s1">&#39;Games&#39;</span><span class="p">,</span> <span class="s1">&#39;Tigers&#39;</span><span class="p">]</span>

<span class="c1">#create dict</span>
<span class="n">dc</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="n">v</span><span class="p">))</span>
<span class="k">print</span><span class="p">(</span><span class="n">dc</span><span class="p">)</span>
<span class="c1"># {&#39;Game&#39;: &#39;Games&#39;, &#39;Tiger&#39;: &#39;Tigers&#39;, &#39;Toy&#39;: &#39;Toys&#39;}</span>

<span class="n">d</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="nb">enumerate</span><span class="p">(</span><span class="n">v</span><span class="p">))</span>
<span class="k">print</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>
<span class="c1"># {0: &#39;Toys&#39;, 1: &#39;Games&#39;, 2: &#39;Tigers&#39;}</span>
</pre></div>
</div>
</div>
<div class="section" id="looping-and-modifying-the-list-simultaneously">
<h4>Looping and modifying the list simultaneously<a class="headerlink" href="#looping-and-modifying-the-list-simultaneously" title="Permalink to this headline">¶</a></h4>
<p>We need to make a copy of the list for such operations as shown below,</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># loopUpdate.py</span>

<span class="n">animals</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;tiger&#39;</span><span class="p">,</span> <span class="s1">&#39;cat&#39;</span><span class="p">,</span> <span class="s1">&#39;dog&#39;</span><span class="p">]</span>
<span class="n">am</span> <span class="o">=</span> <span class="n">animals</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>

<span class="c1"># below line will go in infinite loop</span>
<span class="c1"># for a in animals:</span>
<span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">am</span><span class="p">:</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">a</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">3</span><span class="p">:</span>
        <span class="n">animals</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="n">animals</span><span class="p">)</span>
</pre></div>
</div>
<p>Or we can use ‘animals[:]’ in the for loop, instead of ‘animal’ as shown below,</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># loopUpdate.py</span>

<span class="n">animals</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;tiger&#39;</span><span class="p">,</span> <span class="s1">&#39;cat&#39;</span><span class="p">,</span> <span class="s1">&#39;dog&#39;</span><span class="p">]</span>

<span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">animals</span><span class="p">[:]:</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">a</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">3</span><span class="p">:</span>
        <span class="n">animals</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="n">animals</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="check-items-in-the-list">
<h4>Check items in the list<a class="headerlink" href="#check-items-in-the-list" title="Permalink to this headline">¶</a></h4>
<p>The ‘in’ keyword can be used with ‘if’ statement, to check the value in the list,</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># loopUpdate.py</span>

<span class="k">def</span> <span class="nf">testNumber</span><span class="p">(</span><span class="n">num</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">num</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">]:</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Thanks&quot;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Number is not 1, 3 or 5&quot;</span><span class="p">)</span>

<span class="n">testNumber</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="n">testNumber</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="unpacking">
<h4>Unpacking<a class="headerlink" href="#unpacking" title="Permalink to this headline">¶</a></h4>
<p>Any iterable i.e. list, tuple or set can be unpacked using assignment operator as below,</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span> <span class="o">=</span> <span class="n">x</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span>
<span class="go">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span>
<span class="go">2</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">student</span>  <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;Tom&quot;</span><span class="p">,</span> <span class="mi">90</span><span class="p">,</span> <span class="mi">95</span><span class="p">,</span> <span class="mi">98</span><span class="p">,</span> <span class="mi">30</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Name</span><span class="p">,</span> <span class="o">*</span><span class="n">Marks</span><span class="p">,</span> <span class="n">Age</span> <span class="o">=</span> <span class="n">student</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Marks</span>
<span class="go">[90, 95, 98]</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">y</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;Two&quot;</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="p">(</span><span class="s2">&quot;Five&quot;</span><span class="p">,</span> <span class="s2">&quot;Six&quot;</span><span class="p">,</span> <span class="s2">&quot;Seven&quot;</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="p">,</span> <span class="o">*</span><span class="n">b</span><span class="p">,</span> <span class="p">(</span><span class="o">*</span><span class="n">c</span><span class="p">,</span> <span class="n">d</span><span class="p">)</span> <span class="o">=</span> <span class="n">y</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span>
<span class="go">&#39;Seven&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c</span>
<span class="go">[&#39;Five&#39;, &#39;Six&#39;]</span>
</pre></div>
</div>
</div>
<div class="section" id="update-variables">
<h4>Update variables<a class="headerlink" href="#update-variables" title="Permalink to this headline">¶</a></h4>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">x</span> <span class="o">=</span> <span class="mi">3</span>
<span class="n">y</span> <span class="o">=</span> <span class="mi">2</span>
<span class="n">z</span> <span class="o">=</span> <span class="mi">5</span>
<span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span> <span class="o">=</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">,</span> <span class="n">x</span>

<span class="k">print</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">)</span>  <span class="c1"># 2, 5, 3</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="object-oriented-programming">
<h3>Object oriented programming<a class="headerlink" href="#object-oriented-programming" title="Permalink to this headline">¶</a></h3>
<p>Object oriented programming (OOP) increases the re-usability of the code. Also, the codes become more manageable than non-OOP methods. But, it takes proper planning, and therefore longer time, to write the codes using OOP method. In this chapter, we will learn various terms used in OOP along with their usages with examples.</p>
<div class="section" id="class-and-object">
<h4>Class and object<a class="headerlink" href="#class-and-object" title="Permalink to this headline">¶</a></h4>
<p>A ‘class’ is user defined template which contains variables, constants and functions etc.; whereas an ‘object’ is the instance (or variable) of the class. In simple words, a class contains the structure of the code, whereas the object of the class uses that structure for performing various tasks, as shown in this section.</p>
</div>
<div class="section" id="create-class-and-object">
<h4>Create class and object<a class="headerlink" href="#create-class-and-object" title="Permalink to this headline">¶</a></h4>
<p>Class is created using keyword ‘class’ as shown in Line 4 of <a class="reference internal" href="#py-oopsbasics-ex1"><span class="std std-numref">Listing 1.26</span></a>, where the class ‘Jungle’ is created. <strong>As a rule, class name is started with uppercase letter, whereas function name is started with lowercase letter</strong>. Currently, this class does not have any structure, therefore keyword ‘pass’ is used at Line 5. Then, at Line 8, an object of class i.e. ‘j’ is created; whose value is printed at Line 9. This print statement prints the class-name of this object along with it’s location in the memory (see comments at Line 9).</p>
<div class="literal-block-wrapper docutils container" id="py-oopsbasics-ex1">
<div class="code-block-caption"><span class="caption-text">Create class and object</span><a class="headerlink" href="#py-oopsbasics-ex1" title="Permalink to this code">¶</a></div>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8
9</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">#ex1.py</span>

<span class="c1">#class declaration</span>
<span class="k">class</span> <span class="nc">Jungle</span><span class="p">:</span>
    <span class="k">pass</span>

<span class="c1"># create object of class Jungle</span>
<span class="n">j</span> <span class="o">=</span> <span class="n">Jungle</span><span class="p">()</span>
<span class="k">print</span><span class="p">(</span><span class="n">j</span><span class="p">)</span>  <span class="c1"># &lt;__main__.Jungle object at 0x004D6970&gt;</span>
</pre></div>
</td></tr></table></div>
</div>
<div class="section" id="add-function-to-class">
<h5>Add function to class<a class="headerlink" href="#add-function-to-class" title="Permalink to this headline">¶</a></h5>
<p>Now, we will add one function ‘welcomeMessage’ in the class. The functions inside the class are known as ‘<strong>methods</strong>’. The functions inside the class are the normal functions (nothing special about them), as we can see at Lines 5-6. <strong>To use the variables and functions etc. outside the class, we need to create the object of the class first, as shown in Line 9, where object ‘j’ is created</strong>. When we create teh object of a class, then all the functions and variables of that class is attached to the object and can be used by that object; e.g. the object ‘j’ can now use the function ‘welcomeMessage’ using ‘.’ operator, as shown in Line 10. Also, ‘self’ is used at Line 6, which is discussed in Section <a class="reference internal" href="#sec-constructor"><span class="std std-numref">Section 1.9.2.2</span></a>.</p>
<div class="literal-block-wrapper docutils container" id="py-oopsbasics-ex2">
<div class="code-block-caption"><span class="caption-text">Add function to class</span><a class="headerlink" href="#py-oopsbasics-ex2" title="Permalink to this code">¶</a></div>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">#ex2.py</span>

<span class="c1">#class declaration</span>
<span class="k">class</span> <span class="nc">Jungle</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">welcomeMessage</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Welcome to the Jungle&quot;</span><span class="p">)</span>

<span class="c1"># create object of class Jungle</span>
<span class="n">j</span> <span class="o">=</span> <span class="n">Jungle</span><span class="p">()</span>
<span class="n">j</span><span class="o">.</span><span class="n">welcomeMessage</span><span class="p">()</span> <span class="c1"># Welcome to the Jungle</span>
</pre></div>
</td></tr></table></div>
</div>
</div>
<div class="section" id="constructor">
<span id="sec-constructor"></span><h5>Constructor<a class="headerlink" href="#constructor" title="Permalink to this headline">¶</a></h5>
<p>The ‘__init__’ method is used to define and initialize the class variables. This ‘’__init__’ method is known as <strong>Constructor</strong> and the variables are known as <strong>attributes</strong>. Note that, the <strong>self</strong> keyword is used in the ‘init function’ (Line 6) along with the name of the variables (Line 7). Further All the functions, should have first parameter as ‘self’ inside the class. Although we can replace the word ‘self’ with any other word, but it is good practice to use the word ‘self’ as convention.</p>
<p><strong>Explanation</strong> <a class="reference internal" href="#py-oopsbasics-ex3"><span class="std std-numref">Listing 1.28</span></a></p>
<blockquote>
<div><p>Whenever, the object of a class is create then all the attributes and methods of that class are attached to it; and <strong>the constructor i.e. ‘__init__’ method is executed automatically</strong>. Here, the constructor contains one variable i.e. ‘visitorName’ (Line 7) and one input parameter i.e. ‘name’ (Line 6) whose value is initialized with ‘unknown’. Therefore, when the object ‘j’ is created at Line 13, the value ‘Meher’ will be assigned to parameter ‘name’ and finally saved in ‘visitorName’ as constructor is executed as soon as the object created. Further, if we create the object without providing the name i.e. ‘j = Jungle()’, then default value i.e. ‘unknown’ will be saved in attribute ‘visitorName’. Lastly, the method ‘welcomeMessage’ is slightly updated, which is now printing the name of the ‘visitor’ (Line 10) as well.</p>
<div class="literal-block-wrapper docutils container" id="py-oopsbasics-ex3">
<div class="code-block-caption"><span class="caption-text">Constructor with default values</span><a class="headerlink" href="#py-oopsbasics-ex3" title="Permalink to this code">¶</a></div>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">#ex3.py</span>

<span class="c1">#class declaration</span>
<span class="k">class</span> <span class="nc">Jungle</span><span class="p">:</span>
    <span class="c1">#constructor with default values</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Unknown&quot;</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">visitorName</span> <span class="o">=</span> <span class="n">name</span>

    <span class="k">def</span> <span class="nf">welcomeMessage</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Hello </span><span class="si">%s</span><span class="s2">, Welcome to the Jungle&quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">visitorName</span><span class="p">)</span>

<span class="c1"># create object of class Jungle</span>
<span class="n">j</span> <span class="o">=</span> <span class="n">Jungle</span><span class="p">(</span><span class="s2">&quot;Meher&quot;</span><span class="p">)</span>
<span class="n">j</span><span class="o">.</span><span class="n">welcomeMessage</span><span class="p">()</span> <span class="c1"># Hello Meher, Welcome to the Jungle</span>

<span class="c1"># if no name is passed, the default value i.e. Unknown will be used</span>
<span class="n">k</span> <span class="o">=</span> <span class="n">Jungle</span><span class="p">()</span>
<span class="n">k</span><span class="o">.</span><span class="n">welcomeMessage</span><span class="p">()</span> <span class="c1"># Hello Unknown, Welcome to the Jungle</span>
</pre></div>
</td></tr></table></div>
</div>
</div></blockquote>
</div>
<div class="section" id="define-main-function">
<h5>Define ‘main’ function<a class="headerlink" href="#define-main-function" title="Permalink to this headline">¶</a></h5>
<p>The above code can be written in ‘main’ function (Lines 12-19) using standard-boiler-plate (Lines 22-23), which makes the code more readable, as shown in <a class="reference internal" href="#py-oopsbasics-ex4"><span class="std std-numref">Listing 1.29</span></a>. This boiler-plate tells the Python-interpretor that the ‘main’ is the starting point of the code.</p>
<div class="literal-block-wrapper docutils container" id="py-oopsbasics-ex4">
<div class="code-block-caption"><span class="caption-text">main function</span><a class="headerlink" href="#py-oopsbasics-ex4" title="Permalink to this code">¶</a></div>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">#ex4.py</span>

<span class="c1">#class declaration</span>
<span class="k">class</span> <span class="nc">Jungle</span><span class="p">:</span>
    <span class="c1">#constructor with default values</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Unknown&quot;</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">visitorName</span> <span class="o">=</span> <span class="n">name</span>

    <span class="k">def</span> <span class="nf">welcomeMessage</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Hello </span><span class="si">%s</span><span class="s2">, Welcome to the Jungle&quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">visitorName</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="c1"># create object of class Jungle</span>
    <span class="n">j</span> <span class="o">=</span> <span class="n">Jungle</span><span class="p">(</span><span class="s2">&quot;Meher&quot;</span><span class="p">)</span>
    <span class="n">j</span><span class="o">.</span><span class="n">welcomeMessage</span><span class="p">()</span> <span class="c1"># Hello Meher, Welcome to the Jungle</span>

    <span class="c1"># if no name is passed, the default value i.e. Unknown will be used</span>
    <span class="n">k</span> <span class="o">=</span> <span class="n">Jungle</span><span class="p">()</span>
    <span class="n">k</span><span class="o">.</span><span class="n">welcomeMessage</span><span class="p">()</span> <span class="c1"># Hello Unknown, Welcome to the Jungle</span>

<span class="c1"># standard boilerplate to set &#39;main&#39; as starting function</span>
<span class="k">if</span> <span class="vm">__name__</span><span class="o">==</span><span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
</pre></div>
</td></tr></table></div>
</div>
</div>
<div class="section" id="keep-classes-in-separate-file">
<h5>Keep classes in separate file<a class="headerlink" href="#keep-classes-in-separate-file" title="Permalink to this headline">¶</a></h5>
<p>To make code more manageable, we can save the class-code (i.e. class Jungle) and application-files (i.e. main) in separate file. For this, save the class code in ‘jungleBook.py’ file, as shown in <a class="reference internal" href="#py-oopsbasics-sc-junglebook"><span class="std std-numref">Listing 1.30</span></a>; whereas save the ‘main()’ in ‘main.py’ file as shown in <a class="reference internal" href="#py-oopsbasics-sc-main"><span class="std std-numref">Listing 1.31</span></a>. Since, class is in different file now, therefore we need to import the class to ‘main.py file’ using keyword ‘<strong>import</strong>’ as shown in Line 4 of <a class="reference internal" href="#py-oopsbasics-sc-main"><span class="std std-numref">Listing 1.31</span></a>.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Here, we kept the class and main function in separate files. It is not a good idea keep these small related-codes separate like this. We will learn to manage the code as we will write some big codes in the tutorial.</p>
</div>
<div class="literal-block-wrapper docutils container" id="py-oopsbasics-sc-junglebook">
<div class="code-block-caption"><span class="caption-text">Save classes in separate file</span><a class="headerlink" href="#py-oopsbasics-sc-junglebook" title="Permalink to this code">¶</a></div>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">#jungleBook.py</span>

<span class="c1">#class declaration</span>
<span class="k">class</span> <span class="nc">Jungle</span><span class="p">:</span>
    <span class="c1">#constructor with default values</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Unknown&quot;</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">visitorName</span> <span class="o">=</span> <span class="n">name</span>

    <span class="k">def</span> <span class="nf">welcomeMessage</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Hello </span><span class="si">%s</span><span class="s2">, Welcome to the Jungle&quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">visitorName</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
</div>
<div class="literal-block-wrapper docutils container" id="py-oopsbasics-sc-main">
<div class="code-block-caption"><span class="caption-text">Import class to main.py</span><a class="headerlink" href="#py-oopsbasics-sc-main" title="Permalink to this code">¶</a></div>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">#main.py</span>

<span class="c1">#import class &#39;Jungle&#39; from jungleBook.py</span>
<span class="kn">from</span> <span class="nn">jungleBook</span> <span class="kn">import</span> <span class="n">Jungle</span>

<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="c1"># create object of class Jungle</span>
    <span class="n">j</span> <span class="o">=</span> <span class="n">Jungle</span><span class="p">(</span><span class="s2">&quot;Meher&quot;</span><span class="p">)</span>
    <span class="n">j</span><span class="o">.</span><span class="n">welcomeMessage</span><span class="p">()</span> <span class="c1"># Hello Meher, Welcome to the Jungle</span>

    <span class="c1"># if no name is passed, the default value i.e. Unknown will be used</span>
    <span class="n">k</span> <span class="o">=</span> <span class="n">Jungle</span><span class="p">()</span>
    <span class="n">k</span><span class="o">.</span><span class="n">welcomeMessage</span><span class="p">()</span> <span class="c1"># Hello Unknown, Welcome to the Jungle</span>

<span class="c1"># standard boilerplate to set &#39;main&#39; as starting function</span>
<span class="k">if</span> <span class="vm">__name__</span><span class="o">==</span><span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
</pre></div>
</td></tr></table></div>
</div>
</div>
</div>
<div class="section" id="inheritance">
<h4>Inheritance<a class="headerlink" href="#inheritance" title="Permalink to this headline">¶</a></h4>
<p>Suppose, we want to write a class ‘RateJungle’ in which visitor can provide ‘rating’ based on their visiting-experience. If we write the class from the starting, then we need define attribute ‘visitorName’ again; which will make the code repetitive and unorganizable, as the visitor entry will be at multiple places and such code is more prone to error. With the help of inheritance, we can avoid such duplication as shown in <a class="reference internal" href="#py-ih-junglebook"><span class="std std-numref">Listing 1.32</span></a>; where class Jungle is inherited at Line 12 by the class ‘RateJungle’. Now, when the object ‘r’ of class ‘RateJungle’ is created at Line 7 of <a class="reference internal" href="#py-ih-main"><span class="std std-numref">Listing 1.33</span></a>, then this object ‘r’ will have the access to ‘visitorName’ as well (which is in the parent class).</p>
<div class="literal-block-wrapper docutils container" id="py-ih-junglebook">
<div class="code-block-caption"><span class="caption-text">Inheritance</span><a class="headerlink" href="#py-ih-junglebook" title="Permalink to this code">¶</a></div>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">#jungleBook.py</span>

<span class="c1">#class declaration</span>
<span class="k">class</span> <span class="nc">Jungle</span><span class="p">:</span>
    <span class="c1">#constructor with default values</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Unknown&quot;</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">visitorName</span> <span class="o">=</span> <span class="n">name</span>

    <span class="k">def</span> <span class="nf">welcomeMessage</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Hello </span><span class="si">%s</span><span class="s2">, Welcome to the Jungle&quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">visitorName</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">RateJungle</span><span class="p">(</span><span class="n">Jungle</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">feedback</span><span class="p">):</span>
        <span class="c1"># feedback (1-10) :  1 is the best.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">feedback</span> <span class="o">=</span> <span class="n">feedback</span> <span class="c1"># Public Attribute</span>

        <span class="c1"># inheriting the constructor of the class</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>

    <span class="c1"># using parent class attribute i.e. visitorName</span>
    <span class="k">def</span> <span class="nf">printRating</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Thanks </span><span class="si">%s</span><span class="s2"> for your feedback&quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">visitorName</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
</div>
<div class="literal-block-wrapper docutils container" id="py-ih-main">
<div class="code-block-caption"><span class="caption-text">Usage of parent-class method and attributes in child-class</span><a class="headerlink" href="#py-ih-main" title="Permalink to this code">¶</a></div>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">#main.py</span>

<span class="c1">## import class &#39;Jungle&#39; and &#39;RateJungle&#39; from jungleBook.py</span>
<span class="kn">from</span> <span class="nn">jungleBook</span> <span class="kn">import</span> <span class="n">Jungle</span><span class="p">,</span> <span class="n">RateJungle</span>

<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="n">r</span> <span class="o">=</span> <span class="n">RateJungle</span><span class="p">(</span><span class="s2">&quot;Meher&quot;</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>

    <span class="n">r</span><span class="o">.</span><span class="n">printRating</span><span class="p">()</span> <span class="c1"># Thanks Meher for your feedback</span>

    <span class="c1"># calling parent class method</span>
    <span class="n">r</span><span class="o">.</span><span class="n">welcomeMessage</span><span class="p">()</span> <span class="c1"># Hello Meher, Welcome to the Jungle</span>

<span class="c1"># standard boilerplate to set &#39;main&#39; as starting function</span>
<span class="k">if</span> <span class="vm">__name__</span><span class="o">==</span><span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
</pre></div>
</td></tr></table></div>
</div>
</div>
<div class="section" id="polymorphism">
<h4>Polymorphism<a class="headerlink" href="#polymorphism" title="Permalink to this headline">¶</a></h4>
<p>In OOP, we can use same name for methods and attributes in different classes; the methods or attributes are invoked based on the object type; e.g. in <a class="reference internal" href="#py-oopsbasics-p-scarysound"><span class="std std-numref">Listing 1.34</span></a>, the method ‘scarySound’ is used for class ‘Animal’ and ‘Bird’ at Lines 4 and 8 respectively. Then object of these classes are created at Line 8-9 of <a class="reference internal" href="#py-oopsbasics-p-main"><span class="std std-numref">Listing 1.35</span></a>.  Finally, method ‘scarySound’ is invoked at Lines 12-13; here Line 13 is the object of class Animal, therefore method of that class is invoked and corresponding message is printed. Similarly, Line 14 invokes the ‘scaryMethod’ of class Bird and corresponding line is printed.</p>
<div class="literal-block-wrapper docutils container" id="py-oopsbasics-p-scarysound">
<div class="code-block-caption"><span class="caption-text">Polymorphism example with function ‘move’</span><a class="headerlink" href="#py-oopsbasics-p-scarysound" title="Permalink to this code">¶</a></div>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">#scarySound.py</span>

<span class="k">class</span> <span class="nc">Animal</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">scarySound</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Animals are running away due to scary sound.&quot;</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">Bird</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">scarySound</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Birds are flying away due to scary sound.&quot;</span><span class="p">)</span>

<span class="c1"># scaryScound is not defined for Insect</span>
<span class="k">class</span> <span class="nc">Insect</span><span class="p">:</span>
    <span class="k">pass</span>
</pre></div>
</td></tr></table></div>
</div>
<div class="literal-block-wrapper docutils container" id="py-oopsbasics-p-main">
<div class="code-block-caption"><span class="caption-text">Polymorphism: move function works in different ways for different class-objects</span><a class="headerlink" href="#py-oopsbasics-p-main" title="Permalink to this code">¶</a></div>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">#main.py</span>

<span class="c1">## import class &#39;Animal, Bird&#39; from scarySound.py</span>
<span class="kn">from</span> <span class="nn">scarySound</span> <span class="kn">import</span> <span class="n">Animal</span><span class="p">,</span> <span class="n">Bird</span>

<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="c1"># create objects of Animal and Bird class</span>
    <span class="n">a</span> <span class="o">=</span> <span class="n">Animal</span><span class="p">()</span>
    <span class="n">b</span> <span class="o">=</span> <span class="n">Bird</span><span class="p">()</span>

    <span class="c1"># polymorphism</span>
    <span class="n">a</span><span class="o">.</span><span class="n">scarySound</span><span class="p">()</span> <span class="c1"># Animals are running away due to scary sound.</span>
    <span class="n">b</span><span class="o">.</span><span class="n">scarySound</span><span class="p">()</span> <span class="c1"># Birds are flying away due to scary sound.</span>

<span class="c1"># standard boilerplate to set &#39;main&#39; as starting function</span>
<span class="k">if</span> <span class="vm">__name__</span><span class="o">==</span><span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
</pre></div>
</td></tr></table></div>
</div>
</div>
<div class="section" id="abstract-class-and-method">
<h4>Abstract class and method<a class="headerlink" href="#abstract-class-and-method" title="Permalink to this headline">¶</a></h4>
<p>Abstract classes are the classes which contains one or more abstract method; and abstract methods are the methods which does not contain any implemetation, but the child-class need to implement these methods otherwise error will be reported. In this way, we can force the child-class to implement certain methods in it. We can define, abstract classes and abstract method using keyword ‘ABCMeta’ and ‘abstractmethod’ respectively, as shown in Lines 6 and 15 respectively of <a class="reference internal" href="#py-ac-junglebook"><span class="std std-numref">Listing 1.36</span></a>. Since, ‘scarySound’ is defined as abstractmethod at Line 15-17, therefore it is compulsory to implement it in all the subclasses.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Look at the class ‘Insect’ in <a class="reference internal" href="#py-oopsbasics-p-scarysound"><span class="std std-numref">Listing 1.34</span></a>, where ‘scarySound’ was not defined but code was running correctly; but now the ‘scarySound’ is abstractmethod, therefore it is compulsory to implement it, as done in Line 16 of <a class="reference internal" href="#py-ac-scarysound"><span class="std std-numref">Listing 1.37</span></a>.</p>
</div>
<div class="literal-block-wrapper docutils container" id="py-ac-junglebook">
<div class="code-block-caption"><span class="caption-text">Abstract class and method</span><a class="headerlink" href="#py-ac-junglebook" title="Permalink to this code">¶</a></div>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">#jungleBook.py</span>

<span class="kn">from</span> <span class="nn">abc</span> <span class="kn">import</span> <span class="n">ABCMeta</span><span class="p">,</span> <span class="n">abstractmethod</span>

<span class="c1">#Abstract class and abstract method declaration</span>
<span class="k">class</span> <span class="nc">Jungle</span><span class="p">(</span><span class="n">metaclass</span><span class="o">=</span><span class="n">ABCMeta</span><span class="p">):</span>
    <span class="c1">#constructor with default values</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Unknown&quot;</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">visitorName</span> <span class="o">=</span> <span class="n">name</span>

    <span class="k">def</span> <span class="nf">welcomeMessage</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Hello </span><span class="si">%s</span><span class="s2">, Welcome to the Jungle&quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">visitorName</span><span class="p">)</span>

    <span class="c1"># abstract method is compulsory to defined in child-class</span>
    <span class="nd">@abstractmethod</span>
    <span class="k">def</span> <span class="nf">scarySound</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">pass</span>
</pre></div>
</td></tr></table></div>
</div>
<div class="literal-block-wrapper docutils container" id="py-ac-scarysound">
<div class="code-block-caption"><span class="caption-text">Abstract methods are compulsory to define in child-class</span><a class="headerlink" href="#py-ac-scarysound" title="Permalink to this code">¶</a></div>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">#scarySound.py</span>

<span class="kn">from</span> <span class="nn">jungleBook</span> <span class="kn">import</span> <span class="n">Jungle</span>

<span class="k">class</span> <span class="nc">Animal</span><span class="p">(</span><span class="n">Jungle</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">scarySound</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Animals are running away due to scary sound.&quot;</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">Bird</span><span class="p">(</span><span class="n">Jungle</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">scarySound</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Birds are flying away due to scary sound.&quot;</span><span class="p">)</span>

<span class="c1"># since Jungle is defined as metaclass</span>
<span class="c1"># therefore all the abstract methods are compulsory be defined in child class</span>
<span class="k">class</span> <span class="nc">Insect</span><span class="p">(</span><span class="n">Jungle</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">scarySound</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Insects do not care about scary sound.&quot;</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
</div>
<div class="literal-block-wrapper docutils container" id="py-oopsbasics-ac-main">
<div class="code-block-caption"><span class="caption-text">Main function</span><a class="headerlink" href="#py-oopsbasics-ac-main" title="Permalink to this code">¶</a></div>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">#main.py</span>

<span class="c1">## import class &#39;Animal, Bird&#39; from scarySound.py</span>
<span class="kn">from</span> <span class="nn">scarySound</span> <span class="kn">import</span> <span class="n">Animal</span><span class="p">,</span> <span class="n">Bird</span><span class="p">,</span> <span class="n">Insect</span>

<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="c1"># create objects of Animal and Bird class</span>
    <span class="n">a</span> <span class="o">=</span> <span class="n">Animal</span><span class="p">()</span>
    <span class="n">b</span> <span class="o">=</span> <span class="n">Bird</span><span class="p">()</span>
    <span class="n">i</span> <span class="o">=</span> <span class="n">Insect</span><span class="p">()</span>

    <span class="c1"># polymorphism</span>
    <span class="n">a</span><span class="o">.</span><span class="n">scarySound</span><span class="p">()</span> <span class="c1"># Animals are running away due to scary sound.</span>
    <span class="n">b</span><span class="o">.</span><span class="n">scarySound</span><span class="p">()</span> <span class="c1"># Birds are flying away due to scary sound.</span>
    <span class="n">i</span><span class="o">.</span><span class="n">scarySound</span><span class="p">()</span> <span class="c1"># Insects do not care about scary sound.</span>

<span class="c1"># standard boilerplate to set &#39;main&#39; as starting function</span>
<span class="k">if</span> <span class="vm">__name__</span><span class="o">==</span><span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
</pre></div>
</td></tr></table></div>
</div>
</div>
<div class="section" id="public-and-private-attribute">
<h4>Public and private attribute<a class="headerlink" href="#public-and-private-attribute" title="Permalink to this headline">¶</a></h4>
<p><strong>There is not concept of private attribute in Python.</strong> All the attributes and methods are accessible to end users. But there is a convention used in Python programming i.e. if a variable or method name starts with ‘_’, then users should not directly access to it; there must be some methods provided by the class-author to access that variable or method.  Similarly, ‘__’ is designed for renaming the attribute with class name i.e. the attribute is automatically renamed as ‘_className__attributeName’. This is used to avoid conflict in the attribute names in different classes, and is useful at the time of inheritance, when parent and child class has same attribute name.</p>
<p><a class="reference internal" href="#py-oopsbasics-pp-junglebook"><span class="std std-numref">Listing 1.39</span></a> and <a class="reference internal" href="#py-oopsbasics-pp-main"><span class="std std-numref">Listing 1.40</span></a> show the example of attributes along with the methods to access them. Please read the comments to understand these codes.</p>
<div class="literal-block-wrapper docutils container" id="py-oopsbasics-pp-junglebook">
<div class="code-block-caption"><span class="caption-text">Public and private attribute</span><a class="headerlink" href="#py-oopsbasics-pp-junglebook" title="Permalink to this code">¶</a></div>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">#jungleBook.py</span>

<span class="c1">#class declaration</span>
<span class="k">class</span> <span class="nc">Jungle</span><span class="p">:</span>
    <span class="c1">#constructor with default values</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Unknown&quot;</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">visitorName</span> <span class="o">=</span> <span class="n">name</span>

    <span class="k">def</span> <span class="nf">welcomeMessage</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Hello </span><span class="si">%s</span><span class="s2">, Welcome to the Jungle&quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">visitorName</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">RateJungle</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">feedback</span><span class="p">):</span>
        <span class="c1"># feedback (1-10) :  1 is the best.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">feedback</span> <span class="o">=</span> <span class="n">feedback</span> <span class="c1"># Public Attribute</span>

        <span class="c1"># Public attribute with single underscore sign</span>
        <span class="c1"># Single _ signifies that author does not want to acecess it directly</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_staffRating</span> <span class="o">=</span> <span class="mi">50</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">__jungleGuideRating</span> <span class="o">=</span> <span class="mi">100</span> <span class="c1"># Private Attribute</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">updateStaffRating</span><span class="p">()</span> <span class="c1"># update Staff rating based on feedback</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">updateGuideRating</span><span class="p">()</span> <span class="c1"># update Guide rating based on feedback</span>

    <span class="k">def</span> <span class="nf">printRating</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Feedback : </span><span class="si">%s</span><span class="s2"> </span><span class="se">\t</span><span class="s2">Guide Rating: </span><span class="si">%s</span><span class="s2"> </span><span class="se">\t</span><span class="s2">Staff Rating: </span><span class="si">%s</span><span class="s2"> &quot;</span>
            <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">feedback</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__jungleGuideRating</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_staffRating</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">updateStaffRating</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; update Staff rating based on visitor feedback&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">feedback</span> <span class="o">&lt;</span> <span class="mi">5</span> <span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_staffRating</span> <span class="o">+=</span> <span class="mi">5</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_staffRating</span> <span class="o">-=</span> <span class="mi">5</span>

    <span class="k">def</span> <span class="nf">updateGuideRating</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; update Guide rating based on visitor feedback&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">feedback</span> <span class="o">&lt;</span> <span class="mi">5</span> <span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__jungleGuideRating</span> <span class="o">+=</span> <span class="mi">10</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__jungleGuideRating</span> <span class="o">-=</span> <span class="mi">10</span>
</pre></div>
</td></tr></table></div>
</div>
<div class="literal-block-wrapper docutils container" id="py-oopsbasics-pp-main">
<div class="code-block-caption"><span class="caption-text">Accessing public and private attributes</span><a class="headerlink" href="#py-oopsbasics-pp-main" title="Permalink to this code">¶</a></div>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">#main.py</span>

<span class="c1"># import class &#39;Jungle&#39; and &#39;RateJungle&#39; from jungleBook.py</span>
<span class="kn">from</span> <span class="nn">jungleBook</span> <span class="kn">import</span> <span class="n">Jungle</span><span class="p">,</span> <span class="n">RateJungle</span>

<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="c1">## create object of class Jungle</span>
    <span class="n">j</span> <span class="o">=</span> <span class="n">Jungle</span><span class="p">(</span><span class="s2">&quot;Meher&quot;</span><span class="p">)</span>
    <span class="n">j</span><span class="o">.</span><span class="n">welcomeMessage</span><span class="p">()</span> <span class="c1"># Hello Meher, Welcome to the Jungle</span>

    <span class="n">r</span> <span class="o">=</span> <span class="n">RateJungle</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
    <span class="n">r</span><span class="o">.</span><span class="n">printRating</span><span class="p">()</span> <span class="c1"># Feedback : 3  Guide Rating: 110  Staff Rating: 55</span>

    <span class="c1"># _staffRating can be accessed &quot;directly&quot;, but not a good practice.</span>
    <span class="c1"># Use the method which is provided by the author</span>
    <span class="c1"># e.g. below is the bad practice</span>
    <span class="n">r</span><span class="o">.</span><span class="n">_staffRating</span> <span class="o">=</span> <span class="mi">30</span> <span class="c1"># directly change the _staffRating</span>
    <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Staff rating : &quot;</span><span class="p">,</span> <span class="n">r</span><span class="o">.</span><span class="n">_staffRating</span><span class="p">)</span> <span class="c1"># Staff rating :  30</span>

    <span class="c1">## access to private attribute is not allowed</span>
    <span class="c1">## uncomment following line to see error</span>
    <span class="c1"># print(&quot;Jungle Guide rating : &quot;, r.__jungleGuideRating)</span>

    <span class="c1">## private attribute can still be accessed as below,</span>
    <span class="c1">## objectName._className.__attributeName</span>
    <span class="k">print</span> <span class="p">(</span><span class="s2">&quot;Guide rating : &quot;</span><span class="p">,</span>  <span class="n">r</span><span class="o">.</span><span class="n">_RateJungle__jungleGuideRating</span><span class="p">)</span> <span class="c1"># Guide rating :  110</span>

<span class="c1"># standard boilerplate to set &#39;main&#39; as starting function</span>
<span class="k">if</span> <span class="vm">__name__</span><span class="o">==</span><span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
</pre></div>
</td></tr></table></div>
</div>
</div>
<div class="section" id="class-attribute">
<h4>Class Attribute<a class="headerlink" href="#class-attribute" title="Permalink to this headline">¶</a></h4>
<p>Class attribute is the variable of the class (not of method) as shown in Line 7 of <a class="reference internal" href="#py-oopsbasics-ih-jungle"><span class="std std-numref">Listing 1.41</span></a>. This attribute can be available to all the classes without any inheritance e.g. At Line 44, the class Test (Line 41) is using the class-attribute ‘sum_of_feedback’ of class Jungle (Line 7). Note that, we need to use the class name to access the class attribute e.g. Jungle.sum_of_feedback (Lines 30 and 44).</p>
<div class="literal-block-wrapper docutils container" id="py-oopsbasics-ih-jungle">
<div class="code-block-caption"><span class="caption-text">Class attributes and it’s access</span><a class="headerlink" href="#py-oopsbasics-ih-jungle" title="Permalink to this code">¶</a></div>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">#jungleBook.py</span>

<span class="c1">#class declaration</span>
<span class="k">class</span> <span class="nc">Jungle</span><span class="p">:</span>
    <span class="c1"># class attribute</span>
    <span class="c1"># use __sum_of_feedback to hide it from the child class</span>
    <span class="n">sum_of_feedback</span> <span class="o">=</span> <span class="mf">0.0</span>

    <span class="c1">#constructor with default values</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Unknown&quot;</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_visitorName</span> <span class="o">=</span> <span class="n">name</span> <span class="c1"># please do not access directly</span>

    <span class="k">def</span> <span class="nf">welcomeMessage</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Hello </span><span class="si">%s</span><span class="s2">, Welcome to the Jungle&quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">visitorName</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">averageFeedback</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1">#average feedback is hided for the the child class</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__avg_feedback</span> <span class="o">=</span> <span class="n">Jungle</span><span class="o">.</span><span class="n">sum_of_feedback</span><span class="o">/</span><span class="n">RateJungle</span><span class="o">.</span><span class="n">total_num_feedback</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Average feedback : &quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__avg_feedback</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">RateJungle</span><span class="p">(</span><span class="n">Jungle</span><span class="p">):</span>
    <span class="c1"># class attribute</span>
    <span class="n">total_num_feedback</span> <span class="o">=</span> <span class="mi">0</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">feedback</span><span class="p">):</span>
        <span class="c1"># feedback (1-10) :  1 is the best.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">feedback</span> <span class="o">=</span> <span class="n">feedback</span> <span class="c1"># Public Attribute</span>

        <span class="c1"># add new feedback value to sum_of_feedback</span>
        <span class="n">Jungle</span><span class="o">.</span><span class="n">sum_of_feedback</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">feedback</span>
        <span class="c1"># increase total number of feedback by 1</span>
        <span class="n">RateJungle</span><span class="o">.</span><span class="n">total_num_feedback</span> <span class="o">+=</span> <span class="mi">1</span>

        <span class="c1"># inheriting the constructor of the class</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>

    <span class="c1"># using parent class attribute i.e. visitorName</span>
    <span class="k">def</span> <span class="nf">printRating</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Thanks </span><span class="si">%s</span><span class="s2"> for your feedback&quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">_visitorName</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">Test</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># inheritance is not required for accessing class attribute</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;sum_of_feedback (Jungle class attribute) : &quot;</span><span class="p">,</span> <span class="n">Jungle</span><span class="o">.</span><span class="n">sum_of_feedback</span><span class="p">)</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;total_num_feedback (RateJungle class attribute) : &quot;</span><span class="p">,</span> <span class="n">RateJungle</span><span class="o">.</span><span class="n">total_num_feedback</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
</div>
<div class="literal-block-wrapper docutils container" id="py-oopsbasics-ih-main">
<div class="code-block-caption"><span class="caption-text">Main program</span><a class="headerlink" href="#py-oopsbasics-ih-main" title="Permalink to this code">¶</a></div>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">#main.py</span>

<span class="c1">## import class &#39;Jungle&#39;, &#39;RateJungle&#39; and &#39;Test&#39; from jungleBook.py</span>
<span class="kn">from</span> <span class="nn">jungleBook</span> <span class="kn">import</span> <span class="n">Jungle</span><span class="p">,</span> <span class="n">RateJungle</span><span class="p">,</span> <span class="n">Test</span>

<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="n">r</span> <span class="o">=</span> <span class="n">RateJungle</span><span class="p">(</span><span class="s2">&quot;Meher&quot;</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
    <span class="n">s</span> <span class="o">=</span> <span class="n">RateJungle</span><span class="p">(</span><span class="s2">&quot;Krishna&quot;</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>

    <span class="n">r</span><span class="o">.</span><span class="n">averageFeedback</span><span class="p">()</span> <span class="c1"># Average feedback :  2.5</span>


    <span class="c1"># Test class is using other class attributes without inheritance</span>
    <span class="n">w</span> <span class="o">=</span> <span class="n">Test</span><span class="p">()</span>
    <span class="sd">&#39;&#39;&#39; sum_of_feedback (Jungle class attribute) :  5.0</span>
<span class="sd">        total_num_feedback (RateJungle class attribute) :  2</span>
<span class="sd">    &#39;&#39;&#39;</span>

<span class="c1"># standard boilerplate to set &#39;main&#39; as starting function</span>
<span class="k">if</span> <span class="vm">__name__</span><span class="o">==</span><span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
</pre></div>
</td></tr></table></div>
</div>
</div>
<div class="section" id="special-methods">
<h4>Special methods<a class="headerlink" href="#special-methods" title="Permalink to this headline">¶</a></h4>
<p>There are some special method, which are invoked under certain cases e.g. __init__ method is invoked, when an object of the instance is created. In this section, we will see some more special methods.</p>
<div class="section" id="init-and-del">
<h5>__init__ and __del__<a class="headerlink" href="#init-and-del" title="Permalink to this headline">¶</a></h5>
<p>The __init__ method is invoked when object is created; whereas __del__ is always invoked at the end of the code; e.g. we invoke the ‘del’ at Line 21 of <a class="reference internal" href="#py-oopsbasics-sm-delex"><span class="std std-numref">Listing 1.43</span></a>, which deletes object ‘s1’ and remaining objects are printed by Line 13. But, after Line 25, there is no further statement, therefore the ‘del’ command will automatically executed, and results at Lines 31-32 will be displayed. The ‘del’ command is also known as ‘<strong>destructor</strong>’.</p>
<div class="literal-block-wrapper docutils container" id="py-oopsbasics-sm-delex">
<div class="code-block-caption"><span class="caption-text">__init__ and __del__ function</span><a class="headerlink" href="#py-oopsbasics-sm-delex" title="Permalink to this code">¶</a></div>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1"># delEx.py</span>

<span class="k">class</span> <span class="nc">Student</span><span class="p">:</span>
    <span class="n">totalStudent</span> <span class="o">=</span> <span class="mi">0</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
        <span class="n">Student</span><span class="o">.</span><span class="n">totalStudent</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Total Students (init) : &quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">totalStudent</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__del__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">Student</span><span class="o">.</span><span class="n">totalStudent</span> <span class="o">-=</span> <span class="mi">1</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Total Students (del) : &quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">totalStudent</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="n">s1</span> <span class="o">=</span> <span class="n">Student</span><span class="p">(</span><span class="s2">&quot;Meher&quot;</span><span class="p">)</span> <span class="c1"># Total Students (init) :  1</span>
    <span class="n">s2</span> <span class="o">=</span> <span class="n">Student</span><span class="p">(</span><span class="s2">&quot;Krishna&quot;</span><span class="p">)</span> <span class="c1"># Total Students (init) :  2</span>
    <span class="n">s3</span> <span class="o">=</span> <span class="n">Student</span><span class="p">(</span><span class="s2">&quot;Patel&quot;</span><span class="p">)</span> <span class="c1"># Total Students (init) :  3</span>

    <span class="c1">## delete object s1</span>
    <span class="k">del</span> <span class="n">s1</span> <span class="c1"># Total Students (del) :  2</span>

    <span class="c1"># print(s1.name) # error because s1 object is deleted</span>
    <span class="k">print</span><span class="p">(</span><span class="n">s2</span><span class="o">.</span><span class="n">name</span><span class="p">)</span> <span class="c1"># Krishna</span>
    <span class="k">print</span><span class="p">(</span><span class="n">s3</span><span class="o">.</span><span class="n">name</span><span class="p">)</span> <span class="c1"># Patel</span>

    <span class="c1">## since there is no further statements, therefore</span>
    <span class="c1">## &#39;del&#39; will be executed for all the objects and</span>
    <span class="c1">## following results will be displayed</span>

    <span class="c1"># Total Students (del) :  1</span>
    <span class="c1"># Total Students (del) :  0</span>

<span class="c1"># standard boilerplate to set &#39;main&#39; as starting function</span>
<span class="k">if</span> <span class="vm">__name__</span><span class="o">==</span><span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
</pre></div>
</td></tr></table></div>
</div>
</div>
<div class="section" id="str">
<h5>__str__<a class="headerlink" href="#str" title="Permalink to this headline">¶</a></h5>
<p>When __str__ is defined in the class, then ‘print’ statement for object (e.g. print(j) at Line 11 of <a class="reference internal" href="#py-oopsbasics-sm-strex"><span class="std std-numref">Listing 1.44</span></a>), will execute the __str__ statement, instead of printing the address of object, as happened in <a class="reference internal" href="#py-oopsbasics-ex1"><span class="std std-numref">Listing 1.26</span></a>. This statement is very useful for providing the useful information about the class using print statement.</p>
<div class="literal-block-wrapper docutils container" id="py-oopsbasics-sm-strex">
<div class="code-block-caption"><span class="caption-text">__str__ method is executed when ‘print’ statement is used for object</span><a class="headerlink" href="#py-oopsbasics-sm-strex" title="Permalink to this code">¶</a></div>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">#strEx.py</span>

<span class="c1">#class declaration</span>
<span class="k">class</span> <span class="nc">Jungle</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span><span class="p">(</span><span class="s2">&quot;It is an object of class Jungle&quot;</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="c1"># create object of class Jungle</span>
    <span class="n">j</span> <span class="o">=</span> <span class="n">Jungle</span><span class="p">()</span>
    <span class="k">print</span><span class="p">(</span><span class="n">j</span><span class="p">)</span>  <span class="c1"># It is an object of class Jungle</span>

<span class="c1"># standard boilerplate to set &#39;main&#39; as starting function</span>
<span class="k">if</span> <span class="vm">__name__</span><span class="o">==</span><span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
</pre></div>
</td></tr></table></div>
</div>
</div>
<div class="section" id="call">
<h5>__call__<a class="headerlink" href="#call" title="Permalink to this headline">¶</a></h5>
<p>The __call__ method is executed, when object is used as function, as shown in Line 20 of <a class="reference internal" href="#py-oopsbasics-sm-callex"><span class="std std-numref">Listing 1.45</span></a>; where object ‘d’ is used as function i.e. d(300).</p>
<div class="literal-block-wrapper docutils container" id="py-oopsbasics-sm-callex">
<div class="code-block-caption"><span class="caption-text">__call__ method is executed when object is used as function</span><a class="headerlink" href="#py-oopsbasics-sm-callex" title="Permalink to this code">¶</a></div>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1"># callEx.py</span>

<span class="c1">#class declaration</span>
<span class="k">class</span> <span class="nc">CalculatePrice</span><span class="p">:</span>
    <span class="c1"># discount in %</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">discount</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">discount</span> <span class="o">=</span> <span class="n">discount</span>

    <span class="k">def</span> <span class="fm">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">price</span><span class="p">):</span>
        <span class="n">discountPrice</span> <span class="o">=</span> <span class="n">price</span> <span class="o">-</span> <span class="n">price</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">discount</span><span class="o">/</span><span class="mi">100</span>
        <span class="k">return</span> <span class="p">(</span><span class="n">price</span><span class="p">,</span> <span class="n">discountPrice</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="c1"># create object of class CalculatePrice with 10% discount</span>
    <span class="n">d</span> <span class="o">=</span> <span class="n">CalculatePrice</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>

    <span class="c1"># using object as function i.e. d(300)</span>
    <span class="c1"># since two variables are return by call fuction, therefore</span>
    <span class="c1"># unpack the return values in two variables</span>
    <span class="n">price</span><span class="p">,</span> <span class="n">priceAfterDiscount</span> <span class="o">=</span>  <span class="n">d</span><span class="p">(</span><span class="mi">300</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Original Price: </span><span class="si">%s</span><span class="s2">,  Price after discount : </span><span class="si">%s</span><span class="s2"> &quot;</span>
                    <span class="o">%</span> <span class="p">(</span><span class="n">price</span><span class="p">,</span> <span class="n">priceAfterDiscount</span><span class="p">))</span>

    <span class="c1">## or use below method, if you do not want to unpack the return values</span>
    <span class="c1"># getPrices =  d(300)</span>
    <span class="c1"># print(&quot;Original Price: %s,  Price after discount : %s &quot;</span>
    <span class="c1">#                 % (getPrices[0], getPrices[1]))</span>

<span class="c1"># standard boilerplate to set &#39;main&#39; as starting function</span>
<span class="k">if</span> <span class="vm">__name__</span><span class="o">==</span><span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
</pre></div>
</td></tr></table></div>
</div>
</div>
<div class="section" id="dict-and-doc">
<h5>__dict__ and __doc__<a class="headerlink" href="#dict-and-doc" title="Permalink to this headline">¶</a></h5>
<p>__dict__ is used to get the useful information about the class (Line 21); whereas __doc__ prints the docstring of the class (Line 30).</p>
<div class="literal-block-wrapper docutils container" id="py-oopsbasics-sm-dictex">
<div class="code-block-caption"><span class="caption-text">__dict__ and __doc__</span><a class="headerlink" href="#py-oopsbasics-sm-dictex" title="Permalink to this code">¶</a></div>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">#dictEx.py</span>

<span class="c1">#class declaration</span>
<span class="k">class</span> <span class="nc">Jungle</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot; List of animal and pet information</span>
<span class="sd">        animal = string</span>
<span class="sd">        isPet = string</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">animal</span><span class="o">=</span><span class="s2">&quot;Elephant&quot;</span><span class="p">,</span> <span class="n">isPet</span><span class="o">=</span><span class="s2">&quot;yes&quot;</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">animal</span> <span class="o">=</span>  <span class="n">animal</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">isPet</span> <span class="o">=</span> <span class="n">isPet</span>

<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="c1"># create object of class Jungle</span>
    <span class="n">j1</span> <span class="o">=</span> <span class="n">Jungle</span><span class="p">()</span>
    <span class="k">print</span><span class="p">(</span><span class="n">j1</span><span class="o">.</span><span class="vm">__dict__</span><span class="p">)</span> <span class="c1"># {&#39;isPet&#39;: &#39;yes&#39;, &#39;animal&#39;: &#39;Elephant&#39;}</span>

    <span class="n">j2</span> <span class="o">=</span> <span class="n">Jungle</span><span class="p">(</span><span class="s2">&quot;Lion&quot;</span><span class="p">,</span> <span class="s2">&quot;No&quot;</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">j2</span><span class="o">.</span><span class="vm">__dict__</span><span class="p">)</span> <span class="c1"># {&#39;isPet&#39;: &#39;No&#39;, &#39;animal&#39;: &#39;Lion&#39;}</span>

    <span class="k">print</span><span class="p">(</span><span class="n">Jungle</span><span class="o">.</span><span class="vm">__dict__</span><span class="p">)</span>
    <span class="sd">&quot;&quot;&quot; {&#39;__doc__&#39;: &#39;__doc__&#39;: &#39; List of animal and pet information \n</span>
<span class="sd">                        animal = string\n      isPet = string\n    &#39;,</span>
<span class="sd">        &#39;__weakref__&#39;: &lt;attribute &#39;__weakref__&#39; of &#39;Jungle&#39; objects&gt;,</span>
<span class="sd">        &#39;__module__&#39;: &#39;__main__&#39;,</span>
<span class="sd">        &#39;__dict__&#39;: &lt;attribute &#39;__dict__&#39; of &#39;Jungle&#39; objects&gt;,</span>
<span class="sd">        &#39;__init__&#39;: &lt;function Jungle.__init__ at 0x00466738&gt;}</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">print</span><span class="p">(</span><span class="n">Jungle</span><span class="o">.</span><span class="vm">__doc__</span><span class="p">)</span>
    <span class="sd">&quot;&quot;&quot;List of animal and pet information</span>
<span class="sd">        animal = string</span>
<span class="sd">        isPet = string</span>
<span class="sd">    &quot;&quot;&quot;</span>

<span class="c1"># standard boilerplate to set &#39;main&#39; as starting function</span>
<span class="k">if</span> <span class="vm">__name__</span><span class="o">==</span><span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
</pre></div>
</td></tr></table></div>
</div>
</div>
<div class="section" id="setattr-and-getattr">
<h5>__setattr__ and __getattr__<a class="headerlink" href="#setattr-and-getattr" title="Permalink to this headline">¶</a></h5>
<p>Method __setattr__ is executed, whenever we set the value of an attribute. __setattr__ can be useful for validating the input-types before assigning them to attributes as shown in Line 9 of <a class="reference internal" href="#py-oopsbasics-sm-setattrex"><span class="std std-numref">Listing 1.47</span></a>. Please read the comments of <a class="reference internal" href="#py-oopsbasics-sm-setattrex"><span class="std std-numref">Listing 1.47</span></a> for better understanding. Similarly, __getattr__ is invoked whenever we try to access the value of an attribute, <strong>which is not in the dictionary</strong>.</p>
<div class="literal-block-wrapper docutils container" id="py-oopsbasics-sm-setattrex">
<div class="code-block-caption"><span class="caption-text">__setattr__ and __getattr__</span><a class="headerlink" href="#py-oopsbasics-sm-setattrex" title="Permalink to this code">¶</a></div>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1"># setAttr.py</span>
<span class="k">class</span> <span class="nc">StudentID</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">id</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">age</span> <span class="o">=</span> <span class="s2">&quot;30&quot;</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">id</span> <span class="o">=</span> <span class="nb">id</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">firstName</span> <span class="o">=</span> <span class="n">name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">age</span> <span class="o">=</span> <span class="n">age</span>

    <span class="c1"># all the init parameters need to be specified in &#39;setattr&#39;</span>
    <span class="k">def</span> <span class="fm">__setattr__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">if</span><span class="p">(</span><span class="n">name</span> <span class="o">==</span> <span class="s2">&quot;id&quot;</span><span class="p">):</span> <span class="c1"># setting id</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span> <span class="ow">and</span> <span class="n">value</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="vm">__dict__</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c1"># print(&quot;Id must be positive integer&quot;)</span>
                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;Id must be positive integer&quot;</span><span class="p">)</span>
        <span class="k">elif</span> <span class="p">(</span><span class="n">name</span> <span class="o">==</span> <span class="s2">&quot;firstName&quot;</span><span class="p">):</span> <span class="c1"># setting firstName</span>
            <span class="bp">self</span><span class="o">.</span><span class="vm">__dict__</span><span class="p">[</span><span class="s2">&quot;firstName&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
        <span class="k">else</span><span class="p">:</span> <span class="c1"># setting age</span>
            <span class="bp">self</span><span class="o">.</span><span class="vm">__dict__</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>

    <span class="c1"># getattr is executed, when attribute is not found in dictionary</span>
    <span class="k">def</span> <span class="fm">__getattr__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">AttributeError</span><span class="p">(</span><span class="s2">&quot;Attribute does not exist&quot;</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="n">s1</span> <span class="o">=</span> <span class="n">StudentID</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;Meher&quot;</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">s1</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">s1</span><span class="o">.</span><span class="n">firstName</span><span class="p">,</span> <span class="n">s1</span><span class="o">.</span><span class="n">age</span><span class="p">)</span> <span class="c1"># 1 Meher 30</span>

    <span class="c1">## uncomment below line to see the &quot;TypeError&quot; generated by &#39;setattr&#39;</span>
    <span class="c1"># s2 = StudentID(-1, &quot;Krishna&quot;, 28)</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Traceback (most recent call last):</span>
<span class="sd">    [...]</span>
<span class="sd">    raise TypeError(&quot;Id must be positive integer&quot;)</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">s3</span> <span class="o">=</span> <span class="n">StudentID</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;Krishna&quot;</span><span class="p">,</span> <span class="mi">28</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">s3</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">s3</span><span class="o">.</span><span class="n">firstName</span><span class="p">,</span> <span class="n">s3</span><span class="o">.</span><span class="n">age</span><span class="p">)</span> <span class="c1"># 1 Krishna 28</span>

    <span class="c1">## uncomment below line to see the &quot;AttributeError&quot; generated by &#39;getattr&#39;</span>
    <span class="c1"># print(s3.lastName) # following message will be displayed</span>
    <span class="sd">&quot;&quot;&quot; Traceback (most recent call last):</span>
<span class="sd">        [...]</span>
<span class="sd">        AttributeError: Attribute does not exist</span>
<span class="sd">    &quot;&quot;&quot;</span>
<span class="c1"># standard boilerplate to set &#39;main&#39; as starting function</span>
<span class="k">if</span> <span class="vm">__name__</span><span class="o">==</span><span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
</pre></div>
</td></tr></table></div>
</div>
</div>
</div>
</div>
<div class="section" id="conclusion">
<h3>Conclusion<a class="headerlink" href="#conclusion" title="Permalink to this headline">¶</a></h3>
<p>In this chapter, we learn various features of Python along with object oriented programming. Also, we learn some of the good coding practices in Python. Further, We saw that there is no concept of private attributes in Python. Lastly, we discuss various special methods available in Python which can enhance the debugging and error checking capability of the code.  We will see all these features in details in the subsequent chapters.</p>
</div>
</div>
<span id="document-python/package"></span><div class="section" id="virtual-environment-package-and-distribution">
<h2>Virtual environment, Package and Distribution<a class="headerlink" href="#virtual-environment-package-and-distribution" title="Permalink to this headline">¶</a></h2>
<div class="section" id="anadconda-virtual-environment">
<h3>Anadconda virtual environment<a class="headerlink" href="#anadconda-virtual-environment" title="Permalink to this headline">¶</a></h3>
<div class="section" id="installation">
<h4>Installation<a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li>Go to Anaconda webpage and download the latest Python3 version for your OS (i.e. Linux or Windows).</li>
<li>Windows: Double click the downloaded .exe file to install the Anaconda. During installation, it will ask to include the Anaconda in the Environment variable, Press “YES” there.</li>
<li>Linux: Do the below for installation</li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>$ chmod <span class="m">777</span> &lt;downloaded .sh file&gt;
$ ./&lt;downloaded .sh file&gt;
<span class="o">(</span>When asked, press yes to include the Anaconda in the Path<span class="o">)</span>
</pre></div>
</div>
<ul class="simple">
<li>Verify installation : Open terminal and run the ‘python’ command. It should show the Install version of Python e.g. Python 3.6.5 in the below result</li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>C:<span class="se">\U</span>sers<span class="se">\m</span>eherp&gt; python
    Python <span class="m">3</span>.6.5 <span class="p">|</span>Anaconda, Inc.<span class="p">|</span> <span class="o">(</span>default, Mar <span class="m">29</span> <span class="m">2018</span>, <span class="m">13</span>:32:41<span class="o">)</span> ...
    &gt;&gt;&gt;exit<span class="o">()</span> <span class="c1"># to exit from Python Shell</span>
</pre></div>
</div>
</div>
<div class="section" id="creating-virtual-environment">
<h4>Creating virtual environment<a class="headerlink" href="#creating-virtual-environment" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li>Python applications will often use packages and modules that don’t come as part of the standard library. Applications will sometimes need a specific version of a library, because the application may require that a particular bug has been fixed or the application may be written using an obsolete version of the library’s interface.</li>
<li>This means it may not be possible for one Python installation to meet the requirements of every application. If application A needs version 1.0 of a particular module but application B needs version 2.0, then the requirements are in conflict and installing either version 1.0 or 2.0 will leave one application unable to run.</li>
<li>The solution for this problem is to create a virtual environment, a self-contained directory tree that contains a Python installation for a particular version of Python, plus a number of additional packages.</li>
<li>Creating virtual environment is very easy in Anaconda as shown below,</li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="o">(</span>create env: <span class="s2">&quot;conda create -n &lt;name of env&gt; python=x.x&quot;</span> where x.x is Python version<span class="o">)</span>
$ conda create -n myenv <span class="nv">python</span><span class="o">=</span><span class="m">3</span>.5


<span class="o">[</span>...<span class="o">]</span>
Proceed <span class="o">([</span>y<span class="o">]</span>/n<span class="o">)</span>? y


Downloading and Extracting Packages
wincertstore-0.2     <span class="p">|</span> <span class="m">13</span> KB     <span class="p">|</span> <span class="c1">############################################################################ | 100%</span>
pip-10.0.1           <span class="p">|</span> <span class="m">1</span>.8 MB    <span class="p">|</span> <span class="c1">############################################################################ | 100%</span>
wheel-0.31.1         <span class="p">|</span> <span class="m">81</span> KB     <span class="p">|</span> <span class="c1">############################################################################ | 100%</span>
certifi-2018.8.24    <span class="p">|</span> <span class="m">140</span> KB    <span class="p">|</span> <span class="c1">############################################################################ | 100%</span>
python-3.5.6         <span class="p">|</span> <span class="m">18</span>.2 MB   <span class="p">|</span> <span class="c1">############################################################################ | 100%</span>
setuptools-40.2.0    <span class="p">|</span> <span class="m">597</span> KB    <span class="p">|</span> <span class="c1">############################################################################ | 100%</span>
Preparing transaction: <span class="k">done</span>
Verifying transaction: <span class="k">done</span>
Executing transaction: <span class="k">done</span>
<span class="c1">#</span>
<span class="c1"># To activate this environment, use:</span>
<span class="c1"># &gt; activate myenv</span>
<span class="c1">#</span>
<span class="c1"># To deactivate an active environment, use:</span>
<span class="c1"># &gt; deactivate</span>
<span class="c1">#</span>
<span class="c1"># * for power-users using bash, you must source</span>
<span class="c1">#</span>
</pre></div>
</div>
<ul class="simple">
<li>We need to activate this env to use it. You can see the activate command in above result as well.</li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>$ activate myenv
<span class="o">(</span><span class="k">if</span> activated successfully, <span class="k">then</span> name of the env will be show as below i.e. <span class="o">(</span>myenv<span class="o">))</span>
<span class="o">(</span>myenv<span class="o">)</span> C:<span class="se">\U</span>sers<span class="se">\m</span>eherp&gt;deactivate
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>(see activate command in above result, sometimes below result are shown in different OS/version)</p>
<div class="last highlight-shell notranslate"><div class="highlight"><pre><span></span>$ <span class="nb">source</span> activate myenv
$ conda activate myenv
</pre></div>
</div>
</div>
<ul class="simple">
<li>Now, we can install various libraries to this environment without affecting our original instillation (or other environments); i.e. the changes will remain within this environment only. In the below result we can see that the ‘wget’ library is not available in the current environment,</li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="o">(</span>myenv<span class="o">)</span> C:<span class="se">\U</span>sers<span class="se">\m</span>eherp&gt;python
Python <span class="m">3</span>.5.6 <span class="p">|</span>Anaconda, Inc.<span class="p">|</span> <span class="o">(</span>default, Aug <span class="m">26</span> <span class="m">2018</span>, <span class="m">16</span>:05:27<span class="o">)</span> <span class="o">[</span>MSC v.1900 <span class="m">64</span> bit <span class="o">(</span>AMD64<span class="o">)]</span> on win32
Type <span class="s2">&quot;help&quot;</span>, <span class="s2">&quot;copyright&quot;</span>, <span class="s2">&quot;credits&quot;</span> or <span class="s2">&quot;license&quot;</span> <span class="k">for</span> more information.
&gt;&gt;&gt; import wget
Traceback <span class="o">(</span>most recent call last<span class="o">)</span>:
  File <span class="s2">&quot;&lt;stdin&gt;&quot;</span>, line <span class="m">1</span>, in &lt;module&gt;
ImportError: No module named <span class="s1">&#39;wget&#39;</span>
&gt;&gt;&gt; exit<span class="o">()</span>
</pre></div>
</div>
<ul class="simple">
<li>We can use ‘conda install’ or ‘pip install’ option to install the libraries in the environment as shown below,</li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="o">(</span>myenv<span class="o">)</span> C:<span class="se">\U</span>sers<span class="se">\m</span>eherp&gt;pip install wget

Collecting wget
  Downloading https://files.pythonhosted.org/packages/47/6a/62e288da7bcda82b935ff0c6cfe542970f04e29c756b0e147251b2fb251f/wget-3.2.zip
Building wheels <span class="k">for</span> collected packages: wget
  Running setup.py bdist_wheel <span class="k">for</span> wget ... <span class="k">done</span>
  Stored in directory: C:<span class="se">\U</span>sers<span class="se">\m</span>eherp<span class="se">\A</span>ppData<span class="se">\L</span>ocal<span class="se">\p</span>ip<span class="se">\C</span>ache<span class="se">\w</span>heels<span class="se">\4</span><span class="m">0</span><span class="se">\1</span><span class="m">5</span><span class="se">\3</span><span class="m">0</span><span class="se">\7</span>d8f7cea2902b4db79e3fea550d7d7b85ecb27ef992b618f3f
Successfully built wget
Installing collected packages: wget
Successfully installed wget-3.2
You are using pip version <span class="m">10</span>.0.1, however version <span class="m">19</span>.1.1 is available.
You should consider upgrading via the <span class="s1">&#39;python -m pip install --upgrade pip&#39;</span> command.
</pre></div>
</div>
<ul class="simple">
<li>Now, we can see that the ‘wget’ library is installed in the environment,</li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="o">(</span>myenv<span class="o">)</span> C:<span class="se">\U</span>sers<span class="se">\m</span>eherp&gt;python
Python <span class="m">3</span>.5.6 <span class="p">|</span>Anaconda, Inc.<span class="p">|</span> <span class="o">(</span>default, Aug <span class="m">26</span> <span class="m">2018</span>, <span class="m">16</span>:05:27<span class="o">)</span> <span class="o">[</span>MSC v.1900 <span class="m">64</span> bit <span class="o">(</span>AMD64<span class="o">)]</span> on win32
Type <span class="s2">&quot;help&quot;</span>, <span class="s2">&quot;copyright&quot;</span>, <span class="s2">&quot;credits&quot;</span> or <span class="s2">&quot;license&quot;</span> <span class="k">for</span> more information.
&gt;&gt;&gt; import wget
&gt;&gt;&gt; exit<span class="o">()</span>
</pre></div>
</div>
<ul class="simple">
<li>Deactivate the environment</li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="o">(</span>myenv<span class="o">)</span> C:<span class="se">\U</span>sers<span class="se">\m</span>eherp&gt;deactivate

C:<span class="se">\U</span>sers<span class="se">\m</span>eherp&gt;
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>Use below based on the message which is shown while creating the environment</p>
<div class="last highlight-shell notranslate"><div class="highlight"><pre><span></span>$ <span class="nb">source</span> deactivate
$ conda deactivate
</pre></div>
</div>
</div>
</div>
<div class="section" id="other-commands">
<h4>Other commands<a class="headerlink" href="#other-commands" title="Permalink to this headline">¶</a></h4>
<p>Below are some other useful command related to virtual environment,</p>
<ul class="simple">
<li>List of environments</li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="o">(</span>show the list of enviroments<span class="o">)</span>
$ conda env list


<span class="c1"># conda environments:</span>
<span class="c1">#</span>
base * C:<span class="se">\U</span>sers<span class="se">\m</span>eherp<span class="se">\A</span>ppData<span class="se">\L</span>ocal<span class="se">\C</span>ontinuum<span class="se">\a</span>naconda3
audio C:<span class="se">\U</span>sers<span class="se">\m</span>eherp<span class="se">\A</span>ppData<span class="se">\L</span>ocal<span class="se">\C</span>ontinuum<span class="se">\a</span>naconda3<span class="se">\e</span>nvs<span class="se">\a</span>udio
caffe C:<span class="se">\U</span>sers<span class="se">\m</span>eherp<span class="se">\A</span>ppData<span class="se">\L</span>ocal<span class="se">\C</span>ontinuum<span class="se">\a</span>naconda3<span class="se">\e</span>nvs<span class="se">\c</span>affe
myenv C:<span class="se">\U</span>sers<span class="se">\m</span>eherp<span class="se">\A</span>ppData<span class="se">\L</span>ocal<span class="se">\C</span>ontinuum<span class="se">\a</span>naconda3<span class="se">\e</span>nvs<span class="se">\m</span>yenv
tensorflow_env C:<span class="se">\U</span>sers<span class="se">\m</span>eherp<span class="se">\A</span>ppData<span class="se">\L</span>ocal<span class="se">\C</span>ontinuum<span class="se">\a</span>naconda3<span class="se">\e</span>nvs<span class="se">\t</span>ensorflow_env
wts C:<span class="se">\U</span>sers<span class="se">\m</span>eherp<span class="se">\A</span>ppData<span class="se">\L</span>ocal<span class="se">\C</span>ontinuum<span class="se">\a</span>naconda3<span class="se">\e</span>nvs<span class="se">\w</span>ts
</pre></div>
</div>
<ul class="simple">
<li>Install libraries using .txt file</li>
<li>Let’s create a text file ‘myEnv.txt’ at the desired location e.g. Desktop with below content</li>
</ul>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>flask==1.0.0
django
</pre></div>
</div>
<ul class="simple">
<li>Install the packages using this file as below. Note that, all the dependent libraries will be downloaded &amp; installed automatically e.g. Django depends on ‘pytz’ and ‘sqlparse’ library</li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="o">(</span>myenv<span class="o">)</span> C:<span class="se">\U</span>sers<span class="se">\m</span>eherp&gt;pip install -r C:<span class="se">\U</span>sers<span class="se">\m</span>eherp<span class="se">\D</span>esktop<span class="se">\m</span>yEnv.txt
<span class="o">[</span>...<span class="o">]</span>
Installing collected packages: itsdangerous, MarkupSafe, Jinja2, click, Werkzeug, flask, sqlparse, pytz, django
Successfully installed Jinja2-2.10.1 MarkupSafe-1.1.1 Werkzeug-0.15.4 click-7.0 django-2.2.2 flask-1.0 itsdangerous-1.1.0 pytz-2019.1 sqlparse-0.3.0
</pre></div>
</div>
<ul class="simple">
<li>See the list of installed libraries: ‘freeze’ command is used for it,</li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="o">(</span>myenv<span class="o">)</span> C:<span class="se">\U</span>sers<span class="se">\m</span>eherp&gt;pip freeze

<span class="nv">certifi</span><span class="o">==</span><span class="m">2018</span>.8.24
<span class="nv">Click</span><span class="o">==</span><span class="m">7</span>.0
<span class="nv">Django</span><span class="o">==</span><span class="m">2</span>.2.2
<span class="nv">Flask</span><span class="o">==</span><span class="m">1</span>.0
<span class="nv">itsdangerous</span><span class="o">==</span><span class="m">1</span>.1.0
<span class="nv">Jinja2</span><span class="o">==</span><span class="m">2</span>.10.1
<span class="nv">MarkupSafe</span><span class="o">==</span><span class="m">1</span>.1.1
<span class="nv">pytz</span><span class="o">==</span><span class="m">2019</span>.1
<span class="nv">sqlparse</span><span class="o">==</span><span class="m">0</span>.3.0
<span class="nv">Werkzeug</span><span class="o">==</span><span class="m">0</span>.15.4
<span class="nv">wget</span><span class="o">==</span><span class="m">3</span>.2
<span class="nv">wincertstore</span><span class="o">==</span><span class="m">0</span>.2
</pre></div>
</div>
<ul class="simple">
<li>Export the list of install libraries to a file,</li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="o">(</span>C:<span class="se">\U</span>sers<span class="se">\m</span>eherp<span class="se">\D</span>esktop<span class="se">\c</span>opyMyEnv.txt is the saved location<span class="o">)</span>
<span class="o">(</span>myenv<span class="o">)</span> C:<span class="se">\U</span>sers<span class="se">\m</span>eherp&gt;pip freeze &gt; C:<span class="se">\U</span>sers<span class="se">\m</span>eherp<span class="se">\D</span>esktop<span class="se">\c</span>opyMyEnv.txt
</pre></div>
</div>
<ul class="simple">
<li>‘copyMyEnv.txt’ will be created at Desktop with below content.</li>
</ul>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>certifi==2018.8.24
Click==7.0
Django==2.2.2
Flask==1.0
itsdangerous==1.1.0
Jinja2==2.10.1
MarkupSafe==1.1.1
pytz==2019.1
sqlparse==0.3.0
Werkzeug==0.15.4
wget==3.2
wincertstore==0.2
</pre></div>
</div>
<ul class="simple">
<li>Deactivate and remove the environment</li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>conda deactivate

<span class="o">(</span>delete the environment<span class="o">)</span>
conda remove --name myenv --all
</pre></div>
</div>
</div>
</div>
<div class="section" id="virtual-environment-using-virtualenv-and-virtualenvw">
<h3>Virtual environment using virtualenv and virtualenvw<a class="headerlink" href="#virtual-environment-using-virtualenv-and-virtualenvw" title="Permalink to this headline">¶</a></h3>
<div class="section" id="install-virtualenv-and-virtualenvwrapper">
<h4>Install virtualenv and virtualenvwrapper<a class="headerlink" href="#install-virtualenv-and-virtualenvwrapper" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li>Install virtualenv and virtualenvwrapper</li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>$ pip install virtualenv virtualenvwrapper
</pre></div>
</div>
</div>
<div class="section" id="modify-bashrc">
<h4>Modify .bashrc<a class="headerlink" href="#modify-bashrc" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li>Add below line at the end of .bashrc file if virtual environment is installed in the Anaconda environment</li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="c1"># replace /home/meherp/anaconda2 with correct installation location</span>

<span class="c1"># virtualenv and virtualenvwrapper</span>
<span class="nb">export</span> <span class="nv">WORKON_HOME</span><span class="o">=</span><span class="nv">$HOME</span>/.virtualenvs
<span class="nb">export</span> <span class="nv">VIRTUALENVWRAPPER_PYTHON</span><span class="o">=</span>/home/meherp/anaconda2/bin/python
<span class="nb">source</span> /home/meherp/anaconda2/bin/virtualenvwrapper.sh
</pre></div>
</div>
<ul class="simple">
<li>Add below at the end of .bashrc file if virtualenv environment is created outside the Anaconda environment.</li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="c1"># replace python3 with correct version i.e. python3 or python2</span>

<span class="nb">export</span> <span class="nv">WORKON_HOME</span><span class="o">=</span><span class="nv">$HOME</span>/.virtualenvs
<span class="nb">source</span> /usr/local/bin/virtualenvwrapper.sh
<span class="nb">export</span> <span class="nv">VIRTUALENVWRAPPER_PYTHON</span><span class="o">=</span>/usr/bin/python3
</pre></div>
</div>
</div>
<div class="section" id="create-virtualenv">
<h4>Create virtualenv<a class="headerlink" href="#create-virtualenv" title="Permalink to this headline">¶</a></h4>
<p>Test the installation by creating a virtualenv and installing numpy to it.</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>$ <span class="nb">source</span> ~/.bashrc
$ mkvirtualenv vtest -p python3
$ pip install numpy
</pre></div>
</div>
<ul class="simple">
<li>activate the environment,</li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>$ workon vtest
</pre></div>
</div>
<ul class="simple">
<li>Deactivate the environment</li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>$ deactivate
</pre></div>
</div>
<ul class="simple">
<li>Delete the environment</li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>$ rmvirtualenv vtest
</pre></div>
</div>
</div>
</div>
<div class="section" id="packages">
<h3>Packages<a class="headerlink" href="#packages" title="Permalink to this headline">¶</a></h3>
<p>In this section, we will learn to create the ‘packages’, which are nothing but the collection of modules under the same name.</p>
<div class="section" id="location-of-installed-packages">
<span id="sec-loc-pack"></span><h4>Location of installed packages<a class="headerlink" href="#location-of-installed-packages" title="Permalink to this headline">¶</a></h4>
<p>Before creating our own package, let’s see the location of the installed packages. The installed packages (using pip command) are saved in the folder ‘lib/python3.6/site-packages’, as shown below,</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="o">(</span><span class="k">for</span> environment <span class="s1">&#39;pythondsp&#39;</span><span class="o">)</span>
pythondsp/lib/python3.6/site-packages

<span class="o">(</span>without environment<span class="o">)</span>
/home/anaconda3/lib/python3.6/site-packages
</pre></div>
</div>
<p>Apart from current working directory, the Python look for the files in the folder ‘site-packages’. We will understand this in <a class="reference internal" href="#sec-global-package"><span class="std std-numref">Section 2.3.4</span></a>. The complete list of the directories can be seen using ‘sys.path’ command.</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="o">(</span>pythondsp<span class="o">)</span> $ python

&gt;&gt;&gt; import sys

&gt;&gt;&gt; sys.path
<span class="o">[</span>
    <span class="o">[</span>...<span class="o">]</span>
    <span class="s1">&#39;/home/pythondsp/lib/python3.6/site-packages&#39;</span>,
    <span class="o">[</span>...<span class="o">]</span>
<span class="o">]</span>
</pre></div>
</div>
</div>
<div class="section" id="create-files">
<h4>Create files<a class="headerlink" href="#create-files" title="Permalink to this headline">¶</a></h4>
<p>In this section, we will write some Python codes, and then in next section, we will convert these Python modules into a package.</p>
<ul class="simple">
<li>Activate the environment, and create a folder with any name e.g. ‘bucket’ at desired location</li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="o">(</span>pythondsp<span class="o">)</span> $ mkdir -p ~/Desktop/bucket
<span class="o">(</span>pythondsp<span class="o">)</span> $ <span class="nb">cd</span> ~/Desktop/bucket
</pre></div>
</div>
<p>Now create two files inside the folder with following contents,</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># bucket/my_calc.py</span>

<span class="k">def</span> <span class="nf">sum2Num</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
    <span class="k">return</span> <span class="p">(</span><span class="n">x</span><span class="o">+</span><span class="n">y</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">diff2Num</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
    <span class="k">return</span> <span class="p">(</span><span class="n">x</span><span class="o">-</span><span class="n">y</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># bucket/my_work.py</span>

<span class="kn">from</span> <span class="nn">my_calc</span> <span class="kn">import</span> <span class="n">sum2Num</span><span class="p">,</span> <span class="n">diff2Num</span>

<span class="n">x</span> <span class="o">=</span> <span class="mi">10</span>
<span class="n">y</span> <span class="o">=</span> <span class="mi">5</span>

<span class="k">print</span><span class="p">(</span><span class="s2">&quot;{0} + {1} = {2}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">sum2Num</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)))</span>
<span class="k">print</span><span class="p">(</span><span class="s2">&quot;{0} - {1} = {2}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">diff2Num</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)))</span>
</pre></div>
</div>
<p>Next, check execute ‘my_work.py’ to check the setup,</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">First ‘import my_work’ will import everything from the file, therefore ‘print’ statement will be executed. But the second import will import the values from the ‘cache’ (not from the file),  therefore ‘print’ statements from the file will not be executed.</p>
</div>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="o">(</span>pythondsp<span class="o">)</span> $ python my_work.py
<span class="m">10</span> + <span class="nv">5</span> <span class="o">=</span> <span class="m">15</span>
<span class="m">10</span> - <span class="nv">5</span> <span class="o">=</span> <span class="m">5</span>
</pre></div>
</div>
<p>Also, check the below commands,</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="o">(</span>pythondsp<span class="o">)</span> $ python

&gt;&gt;&gt; from my_calc import sum2Num
&gt;&gt;&gt; sum2Num<span class="o">(</span><span class="m">2</span>, <span class="m">4</span><span class="o">)</span>
<span class="m">6</span>

&gt;&gt;&gt; import my_work
<span class="m">10</span> + <span class="nv">5</span> <span class="o">=</span> <span class="m">15</span>
<span class="m">10</span> - <span class="nv">5</span> <span class="o">=</span> <span class="m">5</span>
&gt;&gt;&gt; import my_work
&gt;&gt;&gt;
</pre></div>
</div>
</div>
<div class="section" id="id1">
<h4>Packages<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h4>
<p>In this section, we will convert the Python modules into the package.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<ul class="last simple">
<li>Package name should be unique, so that it will not collide with other package names.</li>
</ul>
</div>
<ul class="simple">
<li>Create another folder inside the folder ‘bucket’ with any desired name e.g. ‘wolfpack’, and move the ‘python files’ inside it. After running below commands, we will have following folder structure (after excluding the folder ‘__pycache__),</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The folder (i.e. ‘wolfpack’) inside the ‘root folder (i.e. bucket)’ is called the ‘package’ and needs special settings to use it with root-folder.</p>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>bucket/
└── wolfpack
    ├── my_calc.py
    └── my_work.py
</pre></div>
</div>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="o">(</span>pythondsp<span class="o">)</span> $ mkdir wolfpack
<span class="o">(</span>pythondsp<span class="o">)</span> $ mv my_work.py my_calc.py wolfpack
</pre></div>
</div>
<ul class="simple">
<li>Now, run the shell commands again as shown below. Note that the command at Line 4 is working fine, but command at Line 6 is generating error.</li>
</ul>
<div class="literal-block-wrapper docutils container" id="py-import-error">
<div class="code-block-caption"><span class="caption-text">Import package and error</span><a class="headerlink" href="#py-import-error" title="Permalink to this code">¶</a></div>
<div class="highlight-shell notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="o">(</span>pythondsp<span class="o">)</span> $ python

&gt;&gt;&gt; from wolfpack.my_calc import sum2Num
<span class="hll">&gt;&gt;&gt; sum2Num<span class="o">(</span><span class="m">10</span>, <span class="m">2</span><span class="o">)</span>
</span><span class="m">12</span>
<span class="hll">&gt;&gt;&gt; from wolfpack import my_work
</span>Traceback <span class="o">(</span>most recent call last<span class="o">)</span>:
  File <span class="s2">&quot;&lt;stdin&gt;&quot;</span>, line <span class="m">1</span>, in &lt;module&gt;
  File <span class="s2">&quot;/home/meher/Desktop/bucket/wolfpack/my_work.py&quot;</span>, line <span class="m">3</span>, in &lt;module&gt;
    from my_calc import sum2Num, diff2Num
ModuleNotFoundError: No module named <span class="s1">&#39;my_calc&#39;</span>
</pre></div>
</td></tr></table></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>The error at Line 6 is ‘No module named ‘my_calc’, as we are <strong>running the command from the ‘root directory</strong> (i.e. bucket)’, therefore the line ‘import my_calc’ in ‘my_work.py’ will look for it in the <strong>root directory only</strong> (not inside the ‘<strong>wolfpack</strong>’). The error can be removed by modifying the code as below,</p>
<p>In the below code, we used ‘from .my_calc import sum2Num, diff2Num’. The ‘dot operator’ tells python to look in the current directory (i.e. wolfpack), not in the ‘root directory’.</p>
<div class="last highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># bucket/wolfpack/my_work.py</span>

<span class="kn">from</span> <span class="nn">.my_calc</span> <span class="kn">import</span> <span class="n">sum2Num</span><span class="p">,</span> <span class="n">diff2Num</span>

<span class="n">x</span> <span class="o">=</span> <span class="mi">10</span>
<span class="n">y</span> <span class="o">=</span> <span class="mi">5</span>

<span class="k">print</span><span class="p">(</span><span class="s2">&quot;{0} + {1} = {2}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">sum2Num</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)))</span>
<span class="k">print</span><span class="p">(</span><span class="s2">&quot;{0} - {1} = {2}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">diff2Num</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)))</span>
</pre></div>
</div>
</div>
<ul class="simple">
<li>Close the Python terminal and open it again. Then execute the commands and it will work fine,</li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="o">(</span>pythondsp<span class="o">)</span> $ python

&gt;&gt;&gt; from wolfpack import my_work
<span class="m">10</span> + <span class="nv">5</span> <span class="o">=</span> <span class="m">15</span>
<span class="m">10</span> - <span class="nv">5</span> <span class="o">=</span> <span class="m">5</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<ul class="simple">
<li>Now, the folder ‘wolfpack’ is a ‘package’ and the files inside it can not be executed directly, as these files have ‘dot’ operators in the ‘import’ statement. Following error will be generated if we run the ‘package-module’ directly.</li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="o">(</span>pythondsp<span class="o">)</span> $ <span class="nb">cd</span> wolfpack/

<span class="o">(</span>pythondsp<span class="o">)</span> $ ls
my_calc.py  my_work.py

<span class="o">(</span>pythondsp<span class="o">)</span> $ python my_work.py
Traceback <span class="o">(</span>most recent call last<span class="o">)</span>:
  File <span class="s2">&quot;my_work.py&quot;</span>, line <span class="m">3</span>, in &lt;module&gt;
    from .my_calc import sum2Num, diff2Num
ModuleNotFoundError: No module named <span class="s1">&#39;__main__.my_calc&#39;</span><span class="p">;</span>
</pre></div>
</div>
<ul class="last">
<li><p class="first">The files in the package module can be executed through root-folders (i.e. bucket) by importing the modules.</p>
</li>
<li><p class="first">Also, the folder ‘wolfpack’ can be called as a python-file in the codes i.e. ‘import wolfpack’</p>
</li>
<li><p class="first">We will use following terms for the two folders,</p>
<blockquote>
<div><ul class="simple">
<li>Root directory : ‘bucket’</li>
<li>Package directory : ‘wolfpack’</li>
</ul>
</div></blockquote>
</li>
</ul>
</div>
</div>
<div class="section" id="globally-available-package">
<span id="sec-global-package"></span><h4>Globally available package<a class="headerlink" href="#globally-available-package" title="Permalink to this headline">¶</a></h4>
<p>If we ‘cut and paste’ the package folder (i.e. wolfpack) inside the folder ‘site-packages’, then it will be available globally in the environment, i.e. it can be imported into any project at any location.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Do not cut and paste the folder now. We will create the package in <a class="reference internal" href="#sec-create-package-setup"><span class="std std-numref">Section 2.4</span></a> and use ‘setup.py’ command to install the package.</p>
</div>
</div>
<div class="section" id="init-file">
<h4>__init__ file<a class="headerlink" href="#init-file" title="Permalink to this headline">¶</a></h4>
<p>In <a class="reference internal" href="#py-import-error"><span class="std std-numref">Listing 2.1</span></a>, we import the function ‘sum2Num’ using following command .</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">wolfpack.my_calc</span> <span class="kn">import</span> <span class="n">sum2Num</span><span class="s1">&#39;</span>
</pre></div>
</div>
<p>Currently, we have only two files in the package therefore it’s easy to import ‘function’ like this. But, if we have 100 files with 10 folders in a package, then it will be difficult/inconvenient to remember the import-location of the ‘methods’. A better approach is to to use the ‘__init__.py’ file as shown below,</p>
<ul class="simple">
<li>First go to package folder and create an __init__.py with following content,</li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># wolfpack/__init__.py</span>

<span class="c1"># import functions from my_calc</span>
<span class="kn">from</span> <span class="nn">.my_calc</span> <span class="kn">import</span> <span class="n">sum2Num</span><span class="p">,</span> <span class="n">diff2Num</span>
</pre></div>
</div>
<ul class="simple">
<li>Now, we can import the commands directly without knowing the file structure,</li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># run from root-folder &#39;bucket&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">wolfpack</span> <span class="kn">import</span> <span class="n">sum2Num</span><span class="p">,</span> <span class="n">diff2Num</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sum2Num</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">12</span><span class="p">)</span>
<span class="go">15</span>
</pre></div>
</div>
</div>
<div class="section" id="all-in-init-file">
<h4>__all__ in __init__ file<a class="headerlink" href="#all-in-init-file" title="Permalink to this headline">¶</a></h4>
<p>If we want to allow ‘import *’ option for our package, then we need to add the magic keyword ‘__all__’ in the __init__.py file,</p>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1"># wolfpack/__init__.py</span>

<span class="c1"># import sum2Num from my_calc</span>
<span class="hll"><span class="kn">from</span> <span class="nn">.my_calc</span> <span class="kn">import</span> <span class="n">sum2Num</span>
</span>
<span class="c1"># import &#39;my_calc&#39; and &#39;my_calc&#39; for &#39;import *&#39;</span>
<span class="hll"><span class="n">__all__</span> <span class="o">=</span> <span class="p">[</span> <span class="s2">&quot;sum2Num&quot;</span><span class="p">,</span>
</span><span class="hll">            <span class="s2">&quot;my_calc&quot;</span><span class="p">,</span>
</span><span class="hll">            <span class="s2">&quot;my_work&quot;</span>
</span>            <span class="p">]</span>
</pre></div>
</td></tr></table></div>
<p>Now, use the ‘import *’ command in the Python shell as below. Following items will be imported with * command,</p>
<ul class="simple">
<li>module ‘my_calc’</li>
<li>module ‘my_work’</li>
<li>function ‘sum2Num’</li>
</ul>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<ul class="last simple">
<li>In Line 4 of above code, only ‘sum2Num’ is imported. If we do not include sum2Num in the ‘__all__ (Line 7)’, then ‘__all__’ will overwrite the Line 4 and ‘sum2Num’ will not be available. And error (in below code) similar to ‘diff2Num(10, 10)’ will be shown for sum2Num.</li>
</ul>
</div>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="o">(</span>run from the root-folder <span class="s1">&#39;bucket&#39;</span><span class="o">)</span>
<span class="o">(</span>pythondsp<span class="o">)</span> $ python

&gt;&gt;&gt; from wolfpack import *
<span class="m">10</span> + <span class="nv">5</span> <span class="o">=</span> <span class="m">15</span>
<span class="m">10</span> - <span class="nv">5</span> <span class="o">=</span> <span class="m">5</span>
&gt;&gt;&gt;
&gt;&gt;&gt; my_work.x
<span class="m">10</span>
&gt;&gt;&gt; sum2Num<span class="o">(</span><span class="m">10</span>, <span class="m">10</span><span class="o">)</span>
<span class="m">20</span>
&gt;&gt;&gt;
&gt;&gt;&gt; my_calc.diff2Num<span class="o">(</span><span class="m">25</span>, <span class="m">5</span><span class="o">)</span>
<span class="m">20</span>
&gt;&gt;&gt;
&gt;&gt;&gt; diff2Num<span class="o">(</span><span class="m">10</span>, <span class="m">10</span><span class="o">)</span>
Traceback <span class="o">(</span>most recent call last<span class="o">)</span>:
  File <span class="s2">&quot;&lt;stdin&gt;&quot;</span>, line <span class="m">1</span>, in &lt;module&gt;
NameError: name <span class="s1">&#39;diff2Num&#39;</span> is not defined
</pre></div>
</div>
</div>
</div>
<div class="section" id="distribute-the-package">
<span id="sec-create-package-setup"></span><h3>Distribute the package<a class="headerlink" href="#distribute-the-package" title="Permalink to this headline">¶</a></h3>
<p>In this section, we will convert our package to ‘distributable package’, which can be used by others as well,</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>We need to create the setup.py file inside the root-folder ‘bucket’ to generate the ‘distribution’. Suppose, if we have the following ‘directory structure’.</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>bucket/
├── documentation.txt   # document the package here.
├── my_exec.py          # executable python file
├── my_file1.py         # python file
├── my_file2.py         # python file
├── readme.txt          # add tips here....
├── setup.py            # needs to create a &#39;distribution&#39;
└── wolfpack            # package
    ├── __init__.py
    ├── item1.py
    └── item2.py
</pre></div>
</div>
<p>Then our setup.py file will be as follows,</p>
<div class="last highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># setup.py</span>

<span class="kn">from</span> <span class="nn">distutils.core</span> <span class="kn">import</span> <span class="n">setup</span>

<span class="n">setup</span><span class="p">(</span><span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;wolf&quot;</span><span class="p">,</span>                       <span class="c1"># choose any name</span>
    <span class="n">version</span> <span class="o">=</span> <span class="s2">&quot;1.0&quot;</span><span class="p">,</span>                       <span class="c1"># give version number</span>
    <span class="n">py_modules</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;my_file1&#39;</span><span class="p">,</span> <span class="s1">&#39;my_file2&#39;</span><span class="p">],</span> <span class="c1"># python files</span>
    <span class="n">packages</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;wolfpack&#39;</span><span class="p">],</span>               <span class="c1"># add package here</span>
    <span class="n">scripts</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;my_exec.py&#39;</span><span class="p">],</span>              <span class="c1"># executable</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<ul class="simple">
<li>Since our project have only ‘package’ in it, therefore we will use below ‘setup.py’ configuration,</li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># setup.py</span>

<span class="kn">from</span> <span class="nn">distutils.core</span> <span class="kn">import</span> <span class="n">setup</span>

<span class="n">setup</span><span class="p">(</span><span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;wolfpack&quot;</span><span class="p">,</span>     <span class="c1"># choose any name</span>
    <span class="n">version</span> <span class="o">=</span> <span class="s2">&quot;1.0&quot;</span><span class="p">,</span>         <span class="c1"># give version number</span>
    <span class="n">packages</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;wolfpack&#39;</span><span class="p">],</span> <span class="c1"># add package here</span>
<span class="p">)</span>
</pre></div>
</div>
<ul class="simple">
<li>Next, run the setup.py as below and it will create a ‘distribution’. It will show some warning as we did not include the ‘README.txt’ and ‘MANIFEST.in’ etc.</li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="o">(</span>pythondsp<span class="o">)</span> $ python setup.py sdist

running sdist
running check
warning: check: missing required meta-data: url

warning: check: missing meta-data: either <span class="o">(</span>author and author_email<span class="o">)</span> or <span class="o">(</span>maintainer and maintainer_email<span class="o">)</span> must be supplied

warning: sdist: manifest template <span class="s1">&#39;MANIFEST.in&#39;</span> does not exist <span class="o">(</span>using default file list<span class="o">)</span>

warning: sdist: standard file not found: should have one of README, README.txt

writing manifest file <span class="s1">&#39;MANIFEST&#39;</span>
creating wolfpack-1.0
creating wolfpack-1.0/wolfpack
making hard links in wolfpack-1.0...
hard linking setup.py -&gt; wolfpack-1.0
hard linking wolfpack/__init__.py -&gt; wolfpack-1.0/wolfpack
hard linking wolfpack/my_calc.py -&gt; wolfpack-1.0/wolfpack
hard linking wolfpack/my_work.py -&gt; wolfpack-1.0/wolfpack
creating dist
Creating tar archive
removing <span class="s1">&#39;wolfpack-1.0&#39;</span> <span class="o">(</span>and everything under it<span class="o">)</span>
</pre></div>
</div>
<ul class="simple">
<li>The resultant distribution will be saved as ‘wolfpack-1.0.tar.gz’ inside the ‘dist’ folder.</li>
<li>Extract the ‘zipped’ file. Then execute the setup.py file in the unzipped folder as below,</li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>$ <span class="nb">cd</span> dist/wolfpack-1.0
$ python setup.py install
</pre></div>
</div>
<ul class="simple">
<li>Next, see the ‘site-packages’ folder for ‘wolfpack’ package; or use below command to check the list of packages.</li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="o">(</span>pythondsp<span class="o">)</span> $ pip list

<span class="o">[</span>...<span class="o">]</span>
wolfpack <span class="o">(</span><span class="m">1</span>.0<span class="o">)</span>
</pre></div>
</div>
<ul class="simple">
<li>Finally, check the working of the package. Create a folder at any location and run the below commands,</li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="o">(</span>pythondsp<span class="o">)</span> $ python

&gt;&gt;&gt; from wolfpack import *
<span class="m">10</span> + <span class="nv">5</span> <span class="o">=</span> <span class="m">15</span>
<span class="m">10</span> - <span class="nv">5</span> <span class="o">=</span> <span class="m">5</span>
&gt;&gt;&gt; sum2Num<span class="o">(</span><span class="m">10</span>, <span class="m">10</span><span class="o">)</span>
<span class="m">20</span>
&gt;&gt;&gt; my_calc.diff2Num<span class="o">(</span><span class="m">3</span>,1<span class="o">)</span>
<span class="m">2</span>
</pre></div>
</div>
</div>
<div class="section" id="conclusion">
<h3>Conclusion<a class="headerlink" href="#conclusion" title="Permalink to this headline">¶</a></h3>
<p>In this chapter, we learn about the virtual environment and packages. Also, we saw the method by which we can convert the ‘package’ into the  ‘distribution’.</p>
</div>
</div>
<span id="document-python/debug"></span><div class="section" id="debugging">
<h2>Debugging<a class="headerlink" href="#debugging" title="Permalink to this headline">¶</a></h2>
<div class="section" id="introdution">
<h3>Introdution<a class="headerlink" href="#introdution" title="Permalink to this headline">¶</a></h3>
<p>In this chapter, the ‘sys’ module is discussed to read the input from the terminal. Then a little overview of the debugging tool is provided, which will be used in subsequent chapters.</p>
</div>
<div class="section" id="first-code">
<h3>First code<a class="headerlink" href="#first-code" title="Permalink to this headline">¶</a></h3>
<p>In the below code, perimeter and area of a circular ring is calculated.</p>
<blockquote>
<div><div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1"># ring.py</span>

<span class="kn">from</span> <span class="nn">math</span> <span class="kn">import</span> <span class="n">pi</span>

<span class="n">metal</span> <span class="o">=</span> <span class="s2">&quot;Copper&quot;</span>
<span class="n">radius</span> <span class="o">=</span> <span class="mi">10</span>

<span class="n">perimeter</span> <span class="o">=</span> <span class="mi">2</span><span class="o">*</span><span class="n">pi</span><span class="o">*</span><span class="n">radius</span>
<span class="n">area</span> <span class="o">=</span> <span class="n">pi</span> <span class="o">*</span> <span class="n">radius</span><span class="o">**</span><span class="mi">2</span>

<span class="k">print</span><span class="p">(</span><span class="s2">&quot;Metal = &quot;</span><span class="p">,</span> <span class="n">metal</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s2">&quot;pi = &quot;</span><span class="p">,</span> <span class="n">pi</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s2">&quot;Perimeter = &quot;</span><span class="p">,</span> <span class="n">perimeter</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s2">&quot;area = &quot;</span><span class="p">,</span> <span class="n">area</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
</div></blockquote>
<p>Following is the output of the above code,</p>
<blockquote>
<div><div class="highlight-text notranslate"><div class="highlight"><pre><span></span>$ python ring.py
Metal =  Copper
pi =  3.141592653589793
Perimeter =  62.83185307179586
area =  314.1592653589793
</pre></div>
</div>
</div></blockquote>
</div>
<div class="section" id="reading-input-from-command-line">
<h3>Reading input from command line<a class="headerlink" href="#reading-input-from-command-line" title="Permalink to this headline">¶</a></h3>
<p>In the previous code, the inputs, i.e. radius and metal, are hardwired in the code. In this section, we will modify the code, so that the inputs values can be provided from the termial.</p>
<ul>
<li><p class="first">For this, we need to import ‘sys’ module.</p>
<blockquote>
<div><div class="admonition note">
<p class="first admonition-title">Note</p>
<ul class="last simple">
<li>The ‘sys.argv’ pass the command line argument to Python script.</li>
<li>The argv[0] is the file name.</li>
<li>Also, the arguments are passed as string-format, therefore these need to be converted into proper format, as done in Line 16, where the argv[2] is converted into ‘float’ format.</li>
</ul>
</div>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1"># ring.py</span>

<span class="kn">import</span> <span class="nn">sys</span>

<span class="kn">from</span> <span class="nn">math</span> <span class="kn">import</span> <span class="n">pi</span>

<span class="hll"><span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">3</span><span class="p">:</span>  <span class="c1"># display error message for missing arguments</span>
</span><span class="hll">    <span class="k">raise</span> <span class="ne">SystemExit</span><span class="p">(</span><span class="s2">&quot;usage : ring.py </span><span class="se">\&quot;</span><span class="s2">metal</span><span class="se">\&quot;</span><span class="s2"> radius&quot;</span><span class="p">)</span>
</span>
<span class="hll"><span class="c1"># sys.argv[0] is the file name</span>
</span><span class="c1"># metal = &quot;Copper&quot;</span>
<span class="hll"><span class="n">metal</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
</span>
<span class="c1"># radius = 10</span>
<span class="hll"><span class="c1"># input is read as string therefore it is converted into float</span>
</span><span class="hll"><span class="n">radius</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
</span>
<span class="n">perimeter</span> <span class="o">=</span> <span class="mi">2</span><span class="o">*</span><span class="n">pi</span><span class="o">*</span><span class="n">radius</span>
<span class="n">area</span> <span class="o">=</span> <span class="n">pi</span> <span class="o">*</span> <span class="n">radius</span><span class="o">**</span><span class="mi">2</span>

<span class="k">print</span><span class="p">(</span><span class="s2">&quot;Metal =&quot;</span><span class="p">,</span> <span class="n">metal</span><span class="p">)</span>
<span class="c1"># print(&quot;pi =&quot;, pi)</span>
<span class="k">print</span><span class="p">(</span><span class="s2">&quot;Perimeter =&quot;</span><span class="p">,</span> <span class="n">perimeter</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s2">&quot;area =&quot;</span><span class="p">,</span> <span class="n">area</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
</div></blockquote>
</li>
<li><p class="first">Now, run the command and we will get the following outputs.</p>
<blockquote>
<div><div class="highlight-text notranslate"><div class="highlight"><pre><span></span>$ python ring.py
usage : ring.py &quot;metal&quot; radius

$ python ring.py &quot;Gold&quot; 2
Metal = Gold
Perimeter = 12.566370614359172
area = 12.566370614359172
</pre></div>
</div>
</div></blockquote>
</li>
</ul>
</div>
<div class="section" id="id1">
<h3>Debugging<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h3>
<p>In this section, two basic methods are shown for debugging the code. In the later chapters, we will see use some advance topics such as decorator and descriptor etc. to debug the design.</p>
<div class="section" id="run-script-and-go-to-python-shell">
<span id="python-shell-debug"></span><h4>Run script and go to Python shell<a class="headerlink" href="#run-script-and-go-to-python-shell" title="Permalink to this headline">¶</a></h4>
<p>One of the way to debug the code is to use Python shell. For this we can use the ‘-i’ option as shown below. After executing of the code using ‘i’ option, the Python shell will be open, where we can check the various values or behavior of the implemented logics.  We will use this method extensively in the tutorial.</p>
<blockquote>
<div><div class="highlight-text notranslate"><div class="highlight"><pre><span></span><span class="hll">$ python -i ring.py &quot;Gold&quot; 2
</span>Metal = Gold
Perimeter = 12.566370614359172
area = 12.566370614359172
&gt;&gt;&gt; print(sys.argv) # print the arguments read from terminal
[&#39;ring.py&#39;, &#39;Gold&#39;, &#39;2&#39;]
&gt;&gt;&gt; print(metal)
Gold
</pre></div>
</div>
</div></blockquote>
</div>
<div class="section" id="python-debugger-pdb">
<h4>Python debugger (pdb)<a class="headerlink" href="#python-debugger-pdb" title="Permalink to this headline">¶</a></h4>
<p>Another way to debug the code is to use the ‘pdb’, as shown below,</p>
<ul>
<li><p class="first">Here, python debugger module is imported at Line 3.</p>
</li>
<li><p class="first">Next, pdb.set_trace is used to set the starting location for the debugging, i.e. the code will stop after reaching this point i.e. Line 15 here.</p>
<blockquote>
<div><div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1"># ring.py</span>

<span class="hll"><span class="kn">import</span> <span class="nn">pdb</span> <span class="c1"># Python Debugger</span>
</span><span class="kn">import</span> <span class="nn">sys</span>

<span class="kn">from</span> <span class="nn">math</span> <span class="kn">import</span> <span class="n">pi</span>

<span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">3</span><span class="p">:</span> <span class="c1"># display error message for missing arguments</span>
    <span class="k">raise</span> <span class="ne">SystemExit</span><span class="p">(</span><span class="s2">&quot;usage : ring.py </span><span class="se">\&quot;</span><span class="s2">metal</span><span class="se">\&quot;</span><span class="s2"> radius&quot;</span><span class="p">)</span>

<span class="hll"><span class="c1"># print arguments</span>
</span><span class="hll"><span class="k">print</span><span class="p">(</span><span class="s2">&quot;Entered values: &quot;</span><span class="p">,</span> <span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">)</span>
</span>
<span class="hll"><span class="c1"># manual debugging starts from here</span>
</span><span class="hll"><span class="n">pdb</span><span class="o">.</span><span class="n">set_trace</span><span class="p">()</span>
</span>
<span class="c1"># sys.argv[0] is the file name</span>
<span class="c1"># metal = &quot;Copper&quot;</span>
<span class="n">metal</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>

<span class="c1"># radius = 10</span>
<span class="c1"># input is read as string therefore it is converted into float</span>
<span class="n">radius</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>

<span class="n">perimeter</span> <span class="o">=</span> <span class="mi">2</span><span class="o">*</span><span class="n">pi</span><span class="o">*</span><span class="n">radius</span>
<span class="n">area</span> <span class="o">=</span> <span class="n">pi</span> <span class="o">*</span> <span class="n">radius</span><span class="o">**</span><span class="mi">2</span>

<span class="k">print</span><span class="p">(</span><span class="s2">&quot;Metal =&quot;</span><span class="p">,</span> <span class="n">metal</span><span class="p">)</span>
<span class="c1"># print(&quot;pi =&quot;, pi)</span>
<span class="k">print</span><span class="p">(</span><span class="s2">&quot;Perimeter =&quot;</span><span class="p">,</span> <span class="n">perimeter</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s2">&quot;area =&quot;</span><span class="p">,</span> <span class="n">area</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
</div></blockquote>
</li>
<li><p class="first">Now, run the code as below. Press ‘s’ and then enter to execute the next line.</p>
<blockquote>
<div><div class="highlight-text notranslate"><div class="highlight"><pre><span></span>$ python ring.py &quot;Gold&quot; 2
Entered values:  [&#39;ring.py&#39;, &#39;Gold&#39;, &#39;2&#39;]
&gt; /ring.py(19)&lt;module&gt;()
-&gt; metal = sys.argv[1]
(Pdb) s
&gt; /ring.py(23)&lt;module&gt;()
-&gt; radius = float(sys.argv[2])
</pre></div>
</div>
</div></blockquote>
</li>
</ul>
</div>
</div>
<div class="section" id="underscore-operator">
<h3>Underscore operator (_)<a class="headerlink" href="#underscore-operator" title="Permalink to this headline">¶</a></h3>
<p>The Underscore operator stores the last value of the calculation and can be very useful while debugging the code in Python shell.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="mi">3</span> <span class="o">+</span> <span class="mi">2</span>
<span class="go">5</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">_</span> <span class="o">*</span> <span class="mi">2</span>
<span class="go">10</span>
</pre></div>
</div>
</div>
<div class="section" id="conclusion">
<h3>Conclusion<a class="headerlink" href="#conclusion" title="Permalink to this headline">¶</a></h3>
<p>In this chapter, we saw the debugging tools which will be used in subsequent chapters. Also, the module ‘sys’ is discussed for reading the inputs from the terminal.</p>
</div>
</div>
<span id="document-python/print"></span><div class="section" id="print-statement">
<h2>Print statement<a class="headerlink" href="#print-statement" title="Permalink to this headline">¶</a></h2>
<div class="section" id="introduction">
<h3>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h3>
<p>In this chapter, the print statement is discussed to print the output in nice format.</p>
</div>
<div class="section" id="expansion-calculation">
<h3>Expansion calculation<a class="headerlink" href="#expansion-calculation" title="Permalink to this headline">¶</a></h3>
<p>In the below code, number of days are calculate in which the diameter of the ring becomes greater than or equal to 10 cm.</p>
<blockquote>
<div><div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1"># expansion.py</span>

<span class="c1"># find the number of days when radius = 10 cm due to heat-expansion</span>

<span class="kn">import</span> <span class="nn">sys</span>

<span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">3</span><span class="p">:</span> <span class="c1"># display error message for missing arguments</span>
    <span class="k">raise</span> <span class="ne">SystemExit</span><span class="p">(</span><span class="s2">&quot;usage : ring.py </span><span class="se">\&quot;</span><span class="s2">metal</span><span class="se">\&quot;</span><span class="s2"> radius&quot;</span><span class="p">)</span>

<span class="c1"># sys.argv[0] is the file name</span>
<span class="n">metal</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>

<span class="c1"># input is read as string therefore it is converted into float</span>
<span class="n">radius</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>

<span class="hll"><span class="c1"># list of expansion rate for different metal</span>
</span><span class="hll"><span class="n">rate</span> <span class="o">=</span> <span class="p">[</span><span class="mf">0.4</span><span class="p">,</span> <span class="mf">0.08</span><span class="p">,</span> <span class="mf">0.05</span><span class="p">]</span> <span class="c1"># [Copper, Gold, Iron]</span>
</span>
<span class="n">day</span> <span class="o">=</span> <span class="mi">0</span>
<span class="k">while</span> <span class="n">radius</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="p">:</span>
    <span class="c1"># multiply by correct expansion rate</span>
    <span class="k">if</span> <span class="n">metal</span> <span class="o">==</span> <span class="s2">&quot;Copper&quot;</span><span class="p">:</span>
<span class="hll">        <span class="n">expansion</span> <span class="o">=</span> <span class="n">radius</span> <span class="o">*</span> <span class="n">rate</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span>    <span class="k">elif</span> <span class="n">metal</span> <span class="o">==</span> <span class="s2">&quot;Gold&quot;</span><span class="p">:</span>
        <span class="n">expansion</span> <span class="o">=</span> <span class="n">radius</span> <span class="o">*</span> <span class="n">rate</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
    <span class="k">elif</span> <span class="n">metal</span> <span class="o">==</span> <span class="s2">&quot;Iron&quot;</span><span class="p">:</span>
        <span class="n">expansion</span> <span class="o">=</span> <span class="n">radius</span> <span class="o">*</span> <span class="n">rate</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Enter the correct metal&quot;</span><span class="p">)</span>
        <span class="k">break</span>

    <span class="c1"># new radius</span>
    <span class="n">radius</span> <span class="o">+=</span> <span class="n">expansion</span>
    <span class="n">day</span> <span class="o">+=</span> <span class="mi">1</span> <span class="c1"># increment the number of days by one</span>

<span class="c1"># print the number of days</span>
<span class="k">print</span><span class="p">(</span><span class="s2">&quot;Number of days =&quot;</span><span class="p">,</span> <span class="n">day</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
</div></blockquote>
<p>Following are the outputs for different metals with same radius,</p>
<blockquote>
<div><div class="highlight-text notranslate"><div class="highlight"><pre><span></span>$ python expansion.py &quot;Gold&quot; 8
Number of days = 3

$ python expansion.py &quot;Iron&quot; 8
Number of days = 5

$ python expansion.py &quot;Copper&quot; 8
Number of days = 1

$ python expansion.py &quot;Silver&quot; 8
Enter the correct metal
Number of days = 0
</pre></div>
</div>
</div></blockquote>
</div>
<div class="section" id="print-the-expansion">
<h3>Print the expansion<a class="headerlink" href="#print-the-expansion" title="Permalink to this headline">¶</a></h3>
<p>In the below code, the new radius after expansion is printed on the daily basis,</p>
<blockquote>
<div><div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1"># expansion.py</span>

<span class="c1"># find the number of days when radius = 10 cm due to heat-expansion</span>

<span class="kn">import</span> <span class="nn">sys</span>

<span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">3</span><span class="p">:</span> <span class="c1"># display error message for missing arguments</span>
    <span class="k">raise</span> <span class="ne">SystemExit</span><span class="p">(</span><span class="s2">&quot;usage : ring.py </span><span class="se">\&quot;</span><span class="s2">metal</span><span class="se">\&quot;</span><span class="s2"> radius&quot;</span><span class="p">)</span>

<span class="c1"># sys.argv[0] is the file name</span>
<span class="n">metal</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>

<span class="c1"># input is read as string therefore it is converted into float</span>
<span class="n">radius</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>

<span class="c1"># list of expansion rate for different metal</span>
<span class="n">rate</span> <span class="o">=</span> <span class="p">[</span><span class="mf">0.4</span><span class="p">,</span> <span class="mf">0.08</span><span class="p">,</span> <span class="mf">0.05</span><span class="p">]</span> <span class="c1"># [Copper, Gold, Iron]</span>

<span class="n">day</span> <span class="o">=</span> <span class="mi">0</span>

<span class="hll"><span class="k">print</span><span class="p">(</span><span class="s2">&quot;day, expansion, radius&quot;</span><span class="p">)</span>
</span><span class="k">while</span> <span class="n">radius</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="p">:</span>
    <span class="c1"># multiply by correct expansion rate</span>
    <span class="k">if</span> <span class="n">metal</span> <span class="o">==</span> <span class="s2">&quot;Copper&quot;</span><span class="p">:</span>
        <span class="n">expansion</span> <span class="o">=</span> <span class="n">radius</span> <span class="o">*</span> <span class="n">rate</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="k">elif</span> <span class="n">metal</span> <span class="o">==</span> <span class="s2">&quot;Gold&quot;</span><span class="p">:</span>
        <span class="n">expansion</span> <span class="o">=</span> <span class="n">radius</span> <span class="o">*</span> <span class="n">rate</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
    <span class="k">elif</span> <span class="n">metal</span> <span class="o">==</span> <span class="s2">&quot;Iron&quot;</span><span class="p">:</span>
        <span class="n">expansion</span> <span class="o">=</span> <span class="n">radius</span> <span class="o">*</span> <span class="n">rate</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Enter the correct metal&quot;</span><span class="p">)</span>
        <span class="k">break</span>

    <span class="c1"># new radius</span>
    <span class="n">radius</span> <span class="o">+=</span> <span class="n">expansion</span>
    <span class="n">day</span> <span class="o">+=</span> <span class="mi">1</span> <span class="c1"># increment the number of days by one</span>

<span class="hll">    <span class="c1"># print the data</span>
</span><span class="hll">    <span class="k">print</span><span class="p">(</span><span class="n">day</span><span class="p">,</span> <span class="n">expansion</span><span class="p">,</span> <span class="n">radius</span><span class="p">)</span>
</span>
<span class="c1"># print the number of days</span>
<span class="c1"># print(&quot;Number of days =&quot;, day)</span>
</pre></div>
</td></tr></table></div>
</div></blockquote>
<p>Following is the output for Gold ring,</p>
<blockquote>
<div><div class="highlight-text notranslate"><div class="highlight"><pre><span></span>$ python expansion.py &quot;Gold&quot; 8
day, expansion, radius
1 0.64 8.64
2 0.6912 9.3312
3 0.746496 10.077696000000001
</pre></div>
</div>
</div></blockquote>
</div>
<div class="section" id="formatted-output">
<h3>Formatted output<a class="headerlink" href="#formatted-output" title="Permalink to this headline">¶</a></h3>
<p>In the below code, the ‘format’ option of print statement is used to display the output in more readable form,</p>
<blockquote>
<div><div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1"># expansion.py</span>

<span class="c1"># find the number of days when radius = 10 cm due to heat-expansion</span>

<span class="kn">import</span> <span class="nn">sys</span>

<span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">3</span><span class="p">:</span> <span class="c1"># display error message for missing arguments</span>
    <span class="k">raise</span> <span class="ne">SystemExit</span><span class="p">(</span><span class="s2">&quot;usage : ring.py </span><span class="se">\&quot;</span><span class="s2">metal</span><span class="se">\&quot;</span><span class="s2"> radius&quot;</span><span class="p">)</span>

<span class="c1"># sys.argv[0] is the file name</span>
<span class="n">metal</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>

<span class="c1"># input is read as string therefore it is converted into float</span>
<span class="n">radius</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>

<span class="c1"># list of expansion rate for different metal</span>
<span class="n">rate</span> <span class="o">=</span> <span class="p">[</span><span class="mf">0.4</span><span class="p">,</span> <span class="mf">0.08</span><span class="p">,</span> <span class="mf">0.05</span><span class="p">]</span> <span class="c1"># [Copper, Gold, Iron]</span>

<span class="n">day</span> <span class="o">=</span> <span class="mi">0</span>

<span class="hll"><span class="c1">## use any of the below</span>
</span><span class="hll"><span class="c1">## below is not in good format</span>
</span><span class="hll"><span class="c1"># print(&quot;{0}, {1}, {2}&quot;.format(&quot;day&quot;, &quot;expansion&quot;, &quot;radius&quot;))</span>
</span>
<span class="hll"><span class="c1">## &quot;&gt; right aligned&quot; &quot;&lt; left aligned&quot;</span>
</span><span class="hll"><span class="c1">## 5s : string with width 5</span>
</span><span class="hll"><span class="k">print</span><span class="p">(</span><span class="s2">&quot;{:&gt;5s} {:&gt;10s} {:&gt;7s}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s2">&quot;day&quot;</span><span class="p">,</span> <span class="s2">&quot;expansion&quot;</span><span class="p">,</span> <span class="s2">&quot;radius&quot;</span><span class="p">))</span>
</span>
<span class="hll"><span class="c1">## old style</span>
</span><span class="hll"><span class="c1"># print(&quot;%5s %10s %7s&quot; % (&quot;day&quot;, &quot;expansion&quot;, &quot;radius&quot;))</span>
</span>
<span class="k">while</span> <span class="n">radius</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="p">:</span>
    <span class="c1"># multiply by correct expansion rate</span>
    <span class="k">if</span> <span class="n">metal</span> <span class="o">==</span> <span class="s2">&quot;Copper&quot;</span><span class="p">:</span>
        <span class="n">expansion</span> <span class="o">=</span> <span class="n">radius</span> <span class="o">*</span> <span class="n">rate</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="k">elif</span> <span class="n">metal</span> <span class="o">==</span> <span class="s2">&quot;Gold&quot;</span><span class="p">:</span>
        <span class="n">expansion</span> <span class="o">=</span> <span class="n">radius</span> <span class="o">*</span> <span class="n">rate</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
    <span class="k">elif</span> <span class="n">metal</span> <span class="o">==</span> <span class="s2">&quot;Iron&quot;</span><span class="p">:</span>
        <span class="n">expansion</span> <span class="o">=</span> <span class="n">radius</span> <span class="o">*</span> <span class="n">rate</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Enter the correct metal&quot;</span><span class="p">)</span>
        <span class="k">break</span>

    <span class="c1"># new radius</span>
    <span class="n">radius</span> <span class="o">+=</span> <span class="n">expansion</span>
    <span class="n">day</span> <span class="o">+=</span> <span class="mi">1</span> <span class="c1"># increment the number of days by one</span>

<span class="hll">    <span class="c1">## print the data</span>
</span><span class="hll">    <span class="c1">## 5d : 5 digits</span>
</span><span class="hll">    <span class="c1">## 7.2f : 7 digits with 2 decimal points</span>
</span><span class="hll">    <span class="k">print</span><span class="p">(</span><span class="s2">&quot;{:&gt;5d} {:&gt;10.5f} {:&gt;7.2f}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">day</span><span class="p">,</span> <span class="n">expansion</span><span class="p">,</span> <span class="n">radius</span><span class="p">))</span>
</span>
<span class="c1"># print the number of days</span>
<span class="c1"># print(&quot;Number of days =&quot;, day)</span>
</pre></div>
</td></tr></table></div>
</div></blockquote>
<ul>
<li><p class="first">Following is the outputs of the print statements, which looks better than the output in the previous section,</p>
<blockquote>
<div><div class="highlight-text notranslate"><div class="highlight"><pre><span></span>$ python expansion.py &quot;Gold&quot; 8
  day  expansion  radius
    1    0.64000    8.64
    2    0.69120    9.33
    3    0.74650   10.08
</pre></div>
</div>
</div></blockquote>
</li>
</ul>
</div>
<div class="section" id="saving-results-in-file">
<h3>Saving results in file<a class="headerlink" href="#saving-results-in-file" title="Permalink to this headline">¶</a></h3>
<p>There are two ways to save the results in the file.</p>
<ul>
<li><p class="first">In the first method, we can redirect the output of the print statement to the file (instead of printing then on the terminal). Note that the ‘&gt;’ sign will overwrite the file contents, whereas the ‘&gt;&gt;’ sign will append the content at the end of the file. Also, please see the <a class="reference external" href="http://unixguide.readthedocs.io/en/latest/index.html">Unix Guide</a> to learn more commands like ‘cat’ which is used to display the content of the file.</p>
<blockquote>
<div><div class="highlight-text notranslate"><div class="highlight"><pre><span></span><span class="hll">$ python expansion.py &quot;Gold&quot; 8 &gt; data.txt
</span>
$ cat data.txt
  day  expansion  radius
    1    0.64000    8.64
    2    0.69120    9.33
    3    0.74650   10.08

<span class="hll">$ python expansion.py &quot;Gold&quot; 8 &gt;&gt; data.txt
</span>
$ cat data.txt
  day  expansion  radius
    1    0.64000    8.64
    2    0.69120    9.33
    3    0.74650   10.08
  day  expansion  radius
    1    0.64000    8.64
    2    0.69120    9.33
    3    0.74650   10.08
</pre></div>
</div>
</div></blockquote>
</li>
<li><p class="first">In the other method, we can open the file in the Python script and then save the data in the file, as shown below. More file operations will be discussed in next chapter.</p>
<blockquote>
<div><div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This method is better than previous method, as we can select the outputs which should be written in the file. For example, Line 44 will not be printed in the file, if the wrong input values are provided during execution of the script.</p>
</div>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1"># expansion.py</span>

<span class="c1"># find the number of days when radius = 10 cm due to heat-expansion</span>

<span class="kn">import</span> <span class="nn">sys</span>

<span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">3</span><span class="p">:</span> <span class="c1"># display error message for missing arguments</span>
    <span class="k">raise</span> <span class="ne">SystemExit</span><span class="p">(</span><span class="s2">&quot;usage : ring.py </span><span class="se">\&quot;</span><span class="s2">metal</span><span class="se">\&quot;</span><span class="s2"> radius&quot;</span><span class="p">)</span>

<span class="c1"># sys.argv[0] is the file name</span>
<span class="n">metal</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>

<span class="c1"># input is read as string therefore it is converted into float</span>
<span class="n">radius</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>

<span class="c1"># list of expansion rate for different metal</span>
<span class="n">rate</span> <span class="o">=</span> <span class="p">[</span><span class="mf">0.4</span><span class="p">,</span> <span class="mf">0.08</span><span class="p">,</span> <span class="mf">0.05</span><span class="p">]</span> <span class="c1"># [Copper, Gold, Iron]</span>

<span class="n">day</span> <span class="o">=</span> <span class="mi">0</span>

<span class="hll"><span class="n">out_file</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;expansion.txt&quot;</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="c1"># open file in write mode</span>
</span>
<span class="c1">## use any of the below</span>
<span class="c1">## below is not in good format</span>
<span class="c1"># print(&quot;{0}, {1}, {2}&quot;.format(&quot;day&quot;, &quot;expansion&quot;, &quot;radius&quot;))</span>

<span class="c1">## &quot;&gt; right aligned&quot; &quot;&lt; left aligned&quot;</span>
<span class="c1">## 5s : string with width 5</span>
<span class="hll"><span class="k">print</span><span class="p">(</span><span class="s2">&quot;{:&gt;5s} {:&gt;10s} {:&gt;7s}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s2">&quot;day&quot;</span><span class="p">,</span> <span class="s2">&quot;expansion&quot;</span><span class="p">,</span> <span class="s2">&quot;radius&quot;</span><span class="p">),</span>
</span><span class="hll">                <span class="nb">file</span> <span class="o">=</span> <span class="n">out_file</span><span class="p">)</span>
</span>
<span class="c1">## old style</span>
<span class="c1"># print(&quot;%5s %10s %7s&quot; % (&quot;day&quot;, &quot;expansion&quot;, &quot;radius&quot;))</span>

<span class="k">while</span> <span class="n">radius</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="p">:</span>
    <span class="c1"># multiply by correct expansion rate</span>
    <span class="k">if</span> <span class="n">metal</span> <span class="o">==</span> <span class="s2">&quot;Copper&quot;</span><span class="p">:</span>
        <span class="n">expansion</span> <span class="o">=</span> <span class="n">radius</span> <span class="o">*</span> <span class="n">rate</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="k">elif</span> <span class="n">metal</span> <span class="o">==</span> <span class="s2">&quot;Gold&quot;</span><span class="p">:</span>
        <span class="n">expansion</span> <span class="o">=</span> <span class="n">radius</span> <span class="o">*</span> <span class="n">rate</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
    <span class="k">elif</span> <span class="n">metal</span> <span class="o">==</span> <span class="s2">&quot;Iron&quot;</span><span class="p">:</span>
        <span class="n">expansion</span> <span class="o">=</span> <span class="n">radius</span> <span class="o">*</span> <span class="n">rate</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Enter the correct metal&quot;</span><span class="p">)</span>
        <span class="k">break</span>

    <span class="c1"># new radius</span>
    <span class="n">radius</span> <span class="o">+=</span> <span class="n">expansion</span>
    <span class="n">day</span> <span class="o">+=</span> <span class="mi">1</span> <span class="c1"># increment the number of days by one</span>

    <span class="c1">## print the data</span>
    <span class="c1">## 5d : 5 digits</span>
    <span class="c1">## 7.2f : 7 digits with 2 decimal points</span>
<span class="hll">    <span class="k">print</span><span class="p">(</span><span class="s2">&quot;{:&gt;5d} {:&gt;10.5f} {:&gt;7.2f}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">day</span><span class="p">,</span> <span class="n">expansion</span><span class="p">,</span> <span class="n">radius</span><span class="p">),</span>
</span><span class="hll">                <span class="nb">file</span> <span class="o">=</span> <span class="n">out_file</span><span class="p">)</span>
</span>
<span class="c1"># print the number of days</span>
<span class="c1"># print(&quot;Number of days =&quot;, day)</span>
</pre></div>
</td></tr></table></div>
</div></blockquote>
</li>
<li><p class="first">Now, execute the script and see the content of the file as below,</p>
<blockquote>
<div><div class="highlight-text notranslate"><div class="highlight"><pre><span></span>$ python expansion.py &quot;Gold&quot; 8

$ cat expansion.txt
  day  expansion  radius
    1    0.64000    8.64
    2    0.69120    9.33
    3    0.74650   10.08
</pre></div>
</div>
</div></blockquote>
</li>
</ul>
</div>
<div class="section" id="alter-the-printing-sequence">
<h3>Alter the printing sequence<a class="headerlink" href="#alter-the-printing-sequence" title="Permalink to this headline">¶</a></h3>
<p>We can alter the printing location of the arguments as below,</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># {0}, {1}, {2} are the position i.e. 0th argument i.e. &#39;day&#39;</span>
<span class="c1"># will go in first position and so on.</span>
<span class="k">print</span><span class="p">(</span><span class="s2">&quot;{0}, {1}, {2}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s2">&quot;day&quot;</span><span class="p">,</span> <span class="s2">&quot;expansion&quot;</span><span class="p">,</span> <span class="s2">&quot;radius&quot;</span><span class="p">))</span>

<span class="c1"># same as above but with modified locations i.e. parameter 2 (i.e. day)</span>
<span class="c1"># will be printed at first position i.e. {2}</span>
<span class="k">print</span><span class="p">(</span><span class="s2">&quot;{2}, {0}, {1}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s2">&quot;expansion&quot;</span><span class="p">,</span> <span class="s2">&quot;radius&quot;</span><span class="p">,</span> <span class="s2">&quot;day&quot;</span><span class="p">))</span>


<span class="c1"># same can be done with following formatting</span>
<span class="k">print</span><span class="p">(</span><span class="s2">&quot;{:&gt;5s} {:&gt;10s} {:&gt;7s}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s2">&quot;day&quot;</span><span class="p">,</span> <span class="s2">&quot;expansion&quot;</span><span class="p">,</span> <span class="s2">&quot;radius&quot;</span><span class="p">))</span>

<span class="c1"># same as above, but location is defined</span>
<span class="k">print</span><span class="p">(</span><span class="s2">&quot;{2:&gt;5s} {0:&gt;10s} {1:&gt;7s}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s2">&quot;expansion&quot;</span><span class="p">,</span> <span class="s2">&quot;radius&quot;</span><span class="p">,</span> <span class="s2">&quot;day&quot;</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="section" id="conclusion">
<h3>Conclusion<a class="headerlink" href="#conclusion" title="Permalink to this headline">¶</a></h3>
<p>In this chapter, we saw various print statements. Also, we learn the methods by which can save the outputs in the file. In the next chapter, we will learn some more file operations.</p>
</div>
</div>
<span id="document-python/csv"></span><div class="section" id="csv-module">
<span id="index-0"></span><h2>CSV module<a class="headerlink" href="#csv-module" title="Permalink to this headline">¶</a></h2>
<div class="section" id="introduction">
<h3>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h3>
<p>In this chapter, we will see some of the features of the Python in-built CSV module. This module can be quite useful for processing the files as shown in this chapter.</p>
</div>
<div class="section" id="basic-file-operations">
<h3>Basic file operations<a class="headerlink" href="#basic-file-operations" title="Permalink to this headline">¶</a></h3>
<p>In this section, we will perform some operations on the file without using the CSV module. For this first create a file ‘price.csv’ with following contents in it,</p>
<blockquote>
<div><div class="highlight-text notranslate"><div class="highlight"><pre><span></span>date,metal,radius,price,quantity
&quot;2016-06-12&quot;,&quot;Gold&quot;,5.5,80.99,1
&quot;2015-07-13&quot;,&quot;Silver&quot;,40.3,5.5,3
&quot;2016-01-21&quot;,&quot;Iron&quot;,9.2,14.29,8
&quot;2014-03-23&quot;,&quot;Gold&quot;,8,120.3,2
&quot;2017-09-11&quot;,&quot;Copper&quot;,4.1,70.25,12
&quot;2011-01-20&quot;,&quot;Iron&quot;,3.25,10.99,3
</pre></div>
</div>
</div></blockquote>
<div class="section" id="open-and-close-the-files">
<h4>Open and close the files<a class="headerlink" href="#open-and-close-the-files" title="Permalink to this headline">¶</a></h4>
<ul>
<li><p class="first">Next go to the folder, where the file ‘price.csv’ is saved and open Python shell there. And run the following commands.</p>
<blockquote>
<div><div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">f</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;price.csv&quot;</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span> <span class="c1"># it is a buffered text stream</span>
<span class="go">&lt;_io.TextIOWrapper name=&#39;price.csv&#39; mode=&#39;r&#39; encoding=&#39;UTF-8&#39;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">()</span> <span class="c1"># read the buffer into data</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="c1"># print the data</span>
<span class="go">date,metal,radius,price,quantity</span>
<span class="go">&quot;2016-06-12&quot;,&quot;Gold&quot;,5.5,80.99,1</span>
<span class="go">&quot;2015-07-13&quot;,&quot;Silver&quot;,40.3,5.5,3</span>
<span class="go">&quot;2016-01-21&quot;,&quot;Iron&quot;,9.2,14.29,8</span>
<span class="go">&quot;2014-03-23&quot;,&quot;Gold&quot;,8,120.3,2</span>
<span class="go">&quot;2017-09-11&quot;,&quot;Copper&quot;,4.1,70.25,12</span>
<span class="go">&quot;2011-01-20&quot;,&quot;Iron&quot;,3.25,10.99,3</span>
</pre></div>
</td></tr></table></div>
</div></blockquote>
</li>
<li><p class="first">We can access and print the individual lines as well, as shown below,</p>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">r</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;price.csv&#39;</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="c1"># open in read mode</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">r</span><span class="p">:</span>
<span class="gp">... </span>    <span class="k">print</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
<span class="gp">...</span>
<span class="go">date,metal,radius,price,quantity</span>

<span class="go">&quot;2016-06-12&quot;,&quot;Gold&quot;,5.5,80.99,1</span>

<span class="go">&quot;2015-07-13&quot;,&quot;Silver&quot;,40.3,5.5,3</span>

<span class="go">&quot;2016-01-21&quot;,&quot;Iron&quot;,9.2,14.29,8</span>

<span class="go">&quot;2014-03-23&quot;,&quot;Gold&quot;,8,120.3,2</span>

<span class="go">&quot;2017-09-11&quot;,&quot;Copper&quot;,4.1,70.25,12</span>

<span class="go">&quot;2011-01-20&quot;,&quot;Iron&quot;,3.25,10.99,3</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p class="first">Next close the file. Once the file is closed than we can not perform further operation on buffer.</p>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">f</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">r</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">r</span><span class="p">:</span> <span class="c1"># file is closed, therefore can not be accessed</span>
<span class="gp">... </span>    <span class="k">print</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
<span class="gp">...</span>
<span class="gt">Traceback (most recent call last):</span>
  File <span class="nb">&quot;&lt;stdin&gt;&quot;</span>, line <span class="m">1</span>, in <span class="n">&lt;module&gt;</span>
<span class="gr">ValueError</span>: <span class="n">I/O operation on closed file.</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">r</span>
<span class="go">&lt;_io.TextIOWrapper name=&#39;price.csv&#39; mode=&#39;r&#39; encoding=&#39;UTF-8&#39;&gt;</span>
</pre></div>
</div>
</div></blockquote>
</li>
</ul>
</div>
<div class="section" id="with-open-statement">
<h4>with - open statement<a class="headerlink" href="#with-open-statement" title="Permalink to this headline">¶</a></h4>
<p>In this section, ‘with - open’ statement is used to read the file.</p>
<blockquote>
<div><div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Do not forget to close the file using close() command. Further, file will be closed automatically, if it is open using ‘with’ statement, as shown in this section. This method is quite useful when we write the codes in the files, instead of Python-shell.</p>
</div>
</div></blockquote>
<ul>
<li><p class="first">In the below code, the file is open using ‘with’ statement therefore it will be closed as soon as the ‘with’ statement ends. Therefore buffer will not be accessible outside the ‘with’ statement. For example in the below code, Line 13 generates the error, as buffer ‘w’ is outside the ‘with’ statement.</p>
<blockquote>
<div><div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;price.csv&#39;</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">w</span><span class="p">:</span>
<span class="gp">... </span>    <span class="n">data</span> <span class="o">=</span> <span class="n">w</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="c1"># print the data</span>
<span class="go">date,metal,radius,price,quantity</span>
<span class="go">&quot;2016-06-12&quot;,&quot;Gold&quot;,5.5,80.99,1</span>
<span class="go">&quot;2015-07-13&quot;,&quot;Silver&quot;,40.3,5.5,3</span>
<span class="go">&quot;2016-01-21&quot;,&quot;Iron&quot;,9.2,14.29,8</span>
<span class="go">&quot;2014-03-23&quot;,&quot;Gold&quot;,8,120.3,2</span>
<span class="go">&quot;2017-09-11&quot;,&quot;Copper&quot;,4.1,70.25,12</span>
<span class="go">&quot;2011-01-20&quot;,&quot;Iron&quot;,3.25,10.99,3</span>



<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">lines</span> <span class="ow">in</span> <span class="n">w</span><span class="p">:</span>  <span class="c1"># file is already closed</span>
<span class="gp">... </span>    <span class="k">print</span><span class="p">(</span><span class="n">lines</span><span class="p">)</span>
<span class="gp">...</span>
<span class="gt">Traceback (most recent call last):</span>
  File <span class="nb">&quot;&lt;stdin&gt;&quot;</span>, line <span class="m">1</span>, in <span class="n">&lt;module&gt;</span>
<span class="gr">ValueError</span>: <span class="n">I/O operation on closed file.</span>
<span class="go">&gt;&gt;&gt;</span>
</pre></div>
</td></tr></table></div>
</div></blockquote>
</li>
</ul>
</div>
</div>
<div class="section" id="strings-operations">
<h3>Strings operations<a class="headerlink" href="#strings-operations" title="Permalink to this headline">¶</a></h3>
<p>We need to perform string-operations to the data for the further processing the data e.g. extracting the lines which contains “Gold” etc. In this section, we will see some of the string operations and the perform these operations on the file ‘print.csv’.</p>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">m</span> <span class="o">=</span> <span class="s2">&quot;Hello World&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span><span class="p">(</span><span class="n">m</span><span class="p">)</span>
<span class="go">Hello World</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">m</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="c1"># print first character</span>
<span class="go">&#39;H&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">m</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">2</span><span class="p">]</span> <span class="c1"># print first 2 characters</span>
<span class="go">&#39;He&#39;</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">m</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="c1"># print last character</span>
<span class="go">&#39;d&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">m</span><span class="p">[</span><span class="o">-</span><span class="mi">3</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="c1"># print 2nd and 3rd last (but not the last)</span>
<span class="go">&#39;rl&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">m</span><span class="p">[</span><span class="o">-</span><span class="mi">3</span><span class="p">:]</span> <span class="c1"># print last 3 characters</span>
<span class="go">&#39;rld&#39;</span>
</pre></div>
</div>
</div></blockquote>
<p>Lets see some more string operations as below. Please read the comments in the codes.</p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="33%" />
<col width="67%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Commands</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>strip()</td>
<td>remove end line character i.e. n</td>
</tr>
<tr class="row-odd"><td>strip(‘”’)</td>
<td>remove “</td>
</tr>
<tr class="row-even"><td>replace(‘”’, ‘-‘)</td>
<td>replace ” with -</td>
</tr>
<tr class="row-odd"><td>split(“,”)</td>
<td>make list for data with separator ‘,’</td>
</tr>
</tbody>
</table>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">f</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;price.csv&#39;</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">f</span><span class="p">:</span>
<span class="gp">... </span>    <span class="k">print</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
<span class="gp">...</span>
<span class="go">date,metal,radius,price,quantity</span>

<span class="go">&quot;2016-06-12&quot;,&quot;Gold&quot;,5.5,80.99,1</span>

<span class="go">&quot;2015-07-13&quot;,&quot;Silver&quot;,40.3,5.5,3</span>

<span class="go">&quot;2016-01-21&quot;,&quot;Iron&quot;,9.2,14.29,8</span>

<span class="go">&quot;2014-03-23&quot;,&quot;Gold&quot;,8,120.3,2</span>

<span class="go">&quot;2017-09-11&quot;,&quot;Copper&quot;,4.1,70.25,12</span>

<span class="go">&quot;2011-01-20&quot;,&quot;Iron&quot;,3.25,10.99,3</span>


<span class="gp">&gt;&gt;&gt; </span><span class="n">line</span> <span class="c1"># loop store only one value</span>
<span class="go">&#39;&quot;2011-01-20&quot;,&quot;Iron&quot;,3.25,10.99,3\n&#39;</span>

<span class="gp">&gt;&gt;&gt; </span><span class="c1"># remove the end line character i.e. \n</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">line</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
<span class="go">&#39;&quot;2011-01-20&quot;,&quot;Iron&quot;,3.25,10.99,3&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">line</span> <span class="c1"># strip operation does not save automatically</span>
<span class="go">&#39;&quot;2011-01-20&quot;,&quot;Iron&quot;,3.25,10.99,3\n&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">line</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span> <span class="c1"># save the split operation</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">line</span>
<span class="go">&#39;&quot;2011-01-20&quot;,&quot;Iron&quot;,3.25,10.99,3&#39;</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">line</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;&quot;&#39;</span><span class="p">,</span> <span class="s1">&#39;-&#39;</span><span class="p">)</span> <span class="c1"># replace &quot; with -</span>
<span class="go">&#39;-2011-01-20-,-Iron-,3.25,10.99,3&#39;</span>

<span class="gp">&gt;&gt;&gt; </span><span class="c1"># create list and split at comma</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">columns</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">columns</span>
<span class="go">[&#39;&quot;2011-01-20&quot;&#39;, &#39;&quot;Iron&quot;&#39;, &#39;3.25&#39;, &#39;10.99&#39;, &#39;3&#39;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">type</span><span class="p">(</span><span class="n">columns</span><span class="p">)</span>
<span class="go">&lt;class &#39;list&#39;&gt;</span>

<span class="gp">&gt;&gt;&gt; </span><span class="c1"># acess columns</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">columns</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="go">&#39;&quot;2011-01-20&quot;&#39;</span>

<span class="gp">&gt;&gt;&gt; </span><span class="c1"># remove &quot; from the data</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">col</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">columns</span><span class="p">):</span>
<span class="gp">... </span>    <span class="n">columns</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">col</span><span class="o">.</span><span class="n">strip</span><span class="p">(</span><span class="s1">&#39;&quot;&#39;</span><span class="p">)</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">columns</span>
<span class="go">[&#39;2011-01-20&#39;, &#39;Iron&#39;, &#39;3.25&#39;, &#39;10.99&#39;, &#39;3&#39;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">columns</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="go">&#39;2011-01-20&#39;</span>

<span class="gp">&gt;&gt;&gt; </span><span class="c1"># all the items are string, therefore multiplaction can not be performed</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">total_price</span> <span class="o">=</span> <span class="n">columns</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="o">*</span><span class="n">columns</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span>
<span class="gt">Traceback (most recent call last):</span>
  File <span class="nb">&quot;&lt;stdin&gt;&quot;</span>, line <span class="m">1</span>, in <span class="n">&lt;module&gt;</span>
<span class="gr">TypeError</span>: <span class="n">can&#39;t multiply sequence by non-int of type &#39;str&#39;</span>

<span class="go"># convert string to &#39;float&#39; and multiple</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">total_price</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">columns</span><span class="p">[</span><span class="mi">3</span><span class="p">])</span><span class="o">*</span><span class="nb">int</span><span class="p">(</span><span class="n">columns</span><span class="p">[</span><span class="mi">4</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">total_price</span>
<span class="go">32.97</span>
</pre></div>
</div>
</div></blockquote>
</div>
<div class="section" id="perform-calculations">
<h3>Perform calculations<a class="headerlink" href="#perform-calculations" title="Permalink to this headline">¶</a></h3>
<p>In this section, we will write a Python script which will use all the operations of the previous section, to calculate the total cost of all the items.</p>
<blockquote>
<div><div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1"># price.py</span>

<span class="n">total_price</span> <span class="o">=</span> <span class="mi">0</span> <span class="c1"># for all items in the list</span>

<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;price.csv&#39;</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span> <span class="c1"># open file in read mode</span>
    <span class="n">header</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="n">rows</span><span class="p">)</span> <span class="c1"># skip line 1 i.e. header</span>
    <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">f</span><span class="p">:</span>
        <span class="n">line</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span> <span class="c1"># remove \n</span>
        <span class="n">columns</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">)</span> <span class="c1"># split line on ,</span>
        <span class="n">columns</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">columns</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">(</span><span class="s1">&#39;&quot;&#39;</span><span class="p">)</span> <span class="c1"># remove &quot; for metal</span>
        <span class="n">columns</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">columns</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="c1"># radius</span>
        <span class="n">columns</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">columns</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span> <span class="c1"># price</span>
        <span class="n">columns</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">columns</span><span class="p">[</span><span class="mi">3</span><span class="p">])</span> <span class="c1"># quantity</span>
        <span class="n">columns</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">=</span> <span class="n">columns</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">(</span><span class="s1">&#39;&quot;&#39;</span><span class="p">)</span> <span class="c1"># date</span>

        <span class="n">total_price</span> <span class="o">+=</span> <span class="n">columns</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">*</span> <span class="n">columns</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>

<span class="k">print</span><span class="p">(</span><span class="s2">&quot;Total price =&quot;</span><span class="p">,</span> <span class="n">total_price</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
</div></blockquote>
<p>Following is the output of above listing,</p>
<blockquote>
<div><div class="highlight-text notranslate"><div class="highlight"><pre><span></span>$ python price.py
Total price = 1328.38
</pre></div>
</div>
</div></blockquote>
<div class="admonition important" id="index-1">
<p class="first admonition-title">Important</p>
<p class="last">Note that, ‘next(rows)’ is used in <a class="reference internal" href="index.html#py-price-conv-func"><span class="std std-numref">Listing 6.1</span></a> which return the next row of the reader’s iterable object as a list. Since, the first row is extracted and save in the header, therefore it will not be available inside the for loop.</p>
</div>
</div>
<div class="section" id="problem-with-current-method">
<h3>Problem with current method<a class="headerlink" href="#problem-with-current-method" title="Permalink to this headline">¶</a></h3>
<p>Create a file ‘price2.csv’ with following contents. Note that the contents of this file and the ‘price.csv’ are the same expect for the date, which is different format.</p>
<blockquote>
<div><div class="highlight-text notranslate"><div class="highlight"><pre><span></span>date,metal,radius,price,quantity
&quot;Jun 12, 2016&quot;,&quot;Gold&quot;,5.5,80.99,1
&quot;Jul 13, 2015&quot;,&quot;Silver&quot;,40.3,5.5,3
&quot;Jan 21, 2016&quot;,&quot;Iron&quot;,9.2,14.29,8
&quot;Mar 23, 2014&quot;,&quot;Gold&quot;,8,120.30,2
&quot;Sep 11, 2017&quot;,&quot;Copper&quot;,4.1,70.25,12
&quot;Jan 20, 2011&quot;,&quot;Iron&quot;,3.25,10.99,3
</pre></div>
</div>
</div></blockquote>
<p>Now read the file ‘price2.csv’ in ‘price.py’ as below,</p>
<blockquote>
<div><div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1"># price.py</span>

<span class="n">total_price</span> <span class="o">=</span> <span class="mi">0</span> <span class="c1"># for all items in the list</span>

<span class="hll"><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;price2.csv&#39;</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span> <span class="c1"># open file in read mode</span>
</span>    <span class="n">header</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="n">rows</span><span class="p">)</span> <span class="c1"># skip line 1 i.e. header</span>
    <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">f</span><span class="p">:</span>
        <span class="n">line</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span> <span class="c1"># remove \n</span>
        <span class="n">columns</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">)</span> <span class="c1"># split line on ,</span>
        <span class="n">columns</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">columns</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">(</span><span class="s1">&#39;&quot;&#39;</span><span class="p">)</span> <span class="c1"># date</span>
        <span class="n">columns</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">columns</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">(</span><span class="s1">&#39;&quot;&#39;</span><span class="p">)</span> <span class="c1"># remove &quot; for metal</span>
        <span class="n">columns</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">columns</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span> <span class="c1"># radius</span>
        <span class="n">columns</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">columns</span><span class="p">[</span><span class="mi">3</span><span class="p">])</span> <span class="c1"># price</span>
        <span class="n">columns</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">columns</span><span class="p">[</span><span class="mi">4</span><span class="p">])</span> <span class="c1"># quantity</span>

        <span class="n">total_price</span> <span class="o">+=</span> <span class="n">columns</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">*</span> <span class="n">columns</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span>

<span class="k">print</span><span class="p">(</span><span class="s2">&quot;Total price = </span><span class="si">%10.2f</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">total_price</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
</div></blockquote>
<p>Next execute the code and following error will be generated.</p>
<blockquote>
<div><div class="highlight-text notranslate"><div class="highlight"><pre><span></span>$ python -i price.py
Traceback (most recent call last):
  File &quot;price.py&quot;, line 12, in &lt;module&gt;
    columns[2] = float(columns[2]) # radius
ValueError: could not convert string to float: &#39;&quot;Gold&quot;&#39;
</pre></div>
</div>
</div></blockquote>
<p>This error is generated because the date has one comma, because of which an additional column is added to the list, as shown below,</p>
<blockquote>
<div><div class="highlight-text notranslate"><div class="highlight"><pre><span></span>&gt;&gt;&gt; columns
[&#39;Jun 12&#39;, &#39; 2016&#39;, &#39;&quot;Gold&quot;&#39;, &#39;5.5&#39;, &#39;80.99&#39;, &#39;1&#39;]
</pre></div>
</div>
</div></blockquote>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">One way to remove this problem is to redesign the code according to new date format. Note that, the dates are in standard formats in both the cases. Therefore we should think like this, “This is not a new problem as everything is in standard format, therefore there must be an standard way to solve this problem”. And look for the standard library or third party packages to solve the problem. Currently, we can solve this problem using CSV module, or we can use Pandas-library which is quite powerful to solve the problems in data-processing. <a class="reference external" href="http://pandasguide.readthedocs.io/en/latest/index.html">Click here</a> to learn the Pandas.</p>
</div>
</div>
<div class="section" id="id1">
<h3>CSV module<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h3>
<p>In this section, we will see two functionalities of the CSV module i.e. ‘csv.reader’ and ‘csv.DictReader’.</p>
<div class="section" id="csv-reader">
<span id="index-2"></span><h4>csv.reader<a class="headerlink" href="#csv-reader" title="Permalink to this headline">¶</a></h4>
<ul>
<li><p class="first">Before modifying the Python script, let us see the functionality of the CSV module. Note that, in the below outputs, the stripping and splitting operations are performed by the CSV module itself.</p>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">csv</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;price2.csv&#39;</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rows</span> <span class="o">=</span> <span class="n">csv</span><span class="o">.</span><span class="n">reader</span><span class="p">(</span><span class="n">f</span><span class="p">)</span> <span class="c1"># read the file using csv</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">rows</span><span class="p">:</span>
<span class="gp">... </span>    <span class="k">print</span><span class="p">(</span><span class="n">row</span><span class="p">)</span>
<span class="gp">...</span>
<span class="go">[&#39;date&#39;, &#39;metal&#39;, &#39;radius&#39;, &#39;price&#39;, &#39;quantity&#39;]</span>
<span class="go">[&#39;Jun 12, 2016&#39;, &#39;Gold&#39;, &#39;5.5&#39;, &#39;80.99&#39;, &#39;1&#39;]</span>
<span class="go">[&#39;Jul 13, 2015&#39;, &#39;Silver&#39;, &#39;40.3&#39;, &#39;5.5&#39;, &#39;3&#39;]</span>
<span class="go">[&#39;Jan 21, 2016&#39;, &#39;Iron&#39;, &#39;9.2&#39;, &#39;14.29&#39;, &#39;8&#39;]</span>
<span class="go">[&#39;Mar 23, 2014&#39;, &#39;Gold&#39;, &#39;8&#39;, &#39;120.30&#39;, &#39;2&#39;]</span>
<span class="go">[&#39;Sep 11, 2017&#39;, &#39;Copper&#39;, &#39;4.1&#39;, &#39;70.25&#39;, &#39;12&#39;]</span>
<span class="go">[&#39;Jan 20, 2011&#39;, &#39;Iron&#39;, &#39;3.25&#39;, &#39;10.99&#39;, &#39;3&#39;]</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p class="first">Following is the Python script which can perform the calculation on both the files i.e. ‘price.csv’ and ‘price2.csv’.</p>
<blockquote>
<div><div class="literal-block-wrapper docutils container" id="py-price-without-func">
<div class="code-block-caption"><span class="caption-text">price calculation using csv module</span><a class="headerlink" href="#py-price-without-func" title="Permalink to this code">¶</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># price.py</span>

<span class="kn">import</span> <span class="nn">csv</span>

<span class="n">total_price</span> <span class="o">=</span> <span class="mi">0</span> <span class="c1"># for all items in the list</span>

<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;price2.csv&#39;</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span> <span class="c1"># open file in read mode</span>
    <span class="n">rows</span> <span class="o">=</span> <span class="n">csv</span><span class="o">.</span><span class="n">reader</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
    <span class="n">header</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="n">rows</span><span class="p">)</span> <span class="c1"># skip line 1 i.e. header</span>
    <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">rows</span><span class="p">:</span>
        <span class="n">row</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="mi">3</span><span class="p">])</span> <span class="c1"># price</span>
        <span class="n">row</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="mi">4</span><span class="p">])</span> <span class="c1"># quantity</span>

        <span class="n">total_price</span> <span class="o">+=</span> <span class="n">row</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">*</span> <span class="n">row</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span>

<span class="k">print</span><span class="p">(</span><span class="s2">&quot;Total price = </span><span class="si">%10.2f</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">total_price</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div></blockquote>
</li>
<li><p class="first">Run the above script and we will get the following output,</p>
<blockquote>
<div><div class="highlight-text notranslate"><div class="highlight"><pre><span></span>$ python price.py
Total price =    1328.38
</pre></div>
</div>
</div></blockquote>
</li>
</ul>
<div class="admonition important">
<p class="first admonition-title">Important</p>
<p class="last">Note that, when we use standard library then lots of task are reduced e.g. here we need not to perform any cleaning operation i.e. removing double-quotes and commas etc. Also, the code is shorter and cleaner when we used the CSV module.</p>
</div>
</div>
<div class="section" id="csv-dictreader">
<span id="index-3"></span><h4>csv.DictReader<a class="headerlink" href="#csv-dictreader" title="Permalink to this headline">¶</a></h4>
<p>The ‘.DictReader’ option is same as the ‘.reader’, but it maps the information into the dictionary, which enhances the data processing capabilities.</p>
<blockquote>
<div><div class="admonition note">
<p class="first admonition-title">Note</p>
<ul class="last simple">
<li>‘.reader’ returns a reader-object which iterates over the line of the csv file.</li>
<li>‘.DictReader’ is similar to ‘.reader’ but maps the information in the dictionary.</li>
<li>In the below example, Python data structure are used, e.g. List and Set etc.,  which are discussed in next chapter.</li>
<li>Further, we will some more examples of ‘.DictReader’ after learning the ‘data structure’ and ‘functions’.</li>
</ul>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">csv</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">csv</span><span class="o">.</span><span class="n">DictReader</span><span class="p">(</span><span class="nb">open</span><span class="p">(</span><span class="s1">&#39;price.csv&#39;</span><span class="p">)))</span> <span class="c1"># read DictReader in list</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>  <span class="c1"># first item in the list</span>

<span class="go">OrderedDict([(&#39;date&#39;, &#39;2016-06-12&#39;), (&#39;metal&#39;, &#39;Gold&#39;), (&#39;radius&#39;, &#39;5.5&#39;),</span>
<span class="go">    (&#39;price&#39;, &#39;80.99&#39;), (&#39;quantity&#39;, &#39;1&#39;)])</span>

<span class="gp">&gt;&gt;&gt; </span><span class="p">[</span><span class="n">row</span><span class="p">[</span><span class="s1">&#39;metal&#39;</span><span class="p">]</span> <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">f</span><span class="p">]</span> <span class="c1"># display all values i.e. List</span>
<span class="go">[&#39;Gold&#39;, &#39;Silver&#39;, &#39;Iron&#39;, &#39;Gold&#39;, &#39;Copper&#39;, &#39;Iron&#39;]</span>

<span class="gp">&gt;&gt;&gt; </span><span class="p">{</span><span class="n">row</span><span class="p">[</span><span class="s1">&#39;metal&#39;</span><span class="p">]</span> <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">f</span><span class="p">}</span> <span class="c1"># display unique values i.e. Set</span>
<span class="go">{&#39;Silver&#39;, &#39;Copper&#39;, &#39;Iron&#39;, &#39;Gold&#39;}</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">g</span> <span class="o">=</span> <span class="p">[</span><span class="n">row</span> <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">f</span> <span class="k">if</span> <span class="n">row</span><span class="p">[</span><span class="s1">&#39;metal&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Gold&#39;</span><span class="p">]</span> <span class="c1"># read Gold entries</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">g</span><span class="p">)</span>  <span class="c1"># total gold entries</span>
<span class="go">2</span>

<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">g</span><span class="p">:</span>  <span class="c1"># print radius, price and quantity</span>
<span class="gp">... </span>    <span class="k">print</span><span class="p">(</span><span class="n">item</span><span class="p">[</span><span class="s1">&#39;radius&#39;</span><span class="p">],</span> <span class="n">item</span><span class="p">[</span><span class="s1">&#39;price&#39;</span><span class="p">],</span> <span class="n">item</span><span class="p">[</span><span class="s1">&#39;quantity&#39;</span><span class="p">])</span>
<span class="gp">...</span>
<span class="go">5.5 80.99 1</span>
<span class="go">8 120.3 2</span>
</pre></div>
</div>
</div></blockquote>
</div>
</div>
<div class="section" id="conclusion">
<h3>Conclusion<a class="headerlink" href="#conclusion" title="Permalink to this headline">¶</a></h3>
<p>In this chapter, we saw the various ways to read the files. Also, we learn the usage of CSV module. Lastly, we saw some of the data structure available in Python, which will be discussed in details after the next chapter. In the next chapter, we will discussed the “functions” and “error handling”.</p>
</div>
</div>
<span id="document-python/function"></span><div class="section" id="functions">
<h2>Functions<a class="headerlink" href="#functions" title="Permalink to this headline">¶</a></h2>
<div class="section" id="docstring">
<h3>docstring<a class="headerlink" href="#docstring" title="Permalink to this headline">¶</a></h3>
<p>The content between the ‘’’ is known as ‘docstring’, which are displayed by the ‘help’ function as shown below. Press ‘q’ to exit from help-screen.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">add2Num</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
<span class="gp">... </span>    <span class="sd">&#39;&#39;&#39; add two numbers : x, y &#39;&#39;&#39;</span>
<span class="gp">... </span>    <span class="k">print</span><span class="p">(</span><span class="n">x</span><span class="o">+</span><span class="n">y</span><span class="p">)</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">add2Num</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="go">5</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">help</span><span class="p">(</span><span class="n">add2Num</span><span class="p">)</span>
<span class="go">Help on function add2Num in module __main__:</span>

<span class="go">add2Num(x, y)</span>
<span class="go">    add two numbers : x, y</span>
</pre></div>
</div>
</div>
<div class="section" id="types-of-docstring">
<h3>types of docstring<a class="headerlink" href="#types-of-docstring" title="Permalink to this headline">¶</a></h3>
<p>There are two standard format of creating the docstrings, i.e. Numpy style and Goole style, which are supported by Sphinx-documentation for generating the auto-documentation of the project.</p>
</div>
<div class="section" id="convert-previous-code-into-function">
<h3>Convert previous code into function<a class="headerlink" href="#convert-previous-code-into-function" title="Permalink to this headline">¶</a></h3>
<div class="section" id="conversion">
<h4>Conversion<a class="headerlink" href="#conversion" title="Permalink to this headline">¶</a></h4>
<p>Now, we will convert the code in <a class="reference internal" href="index.html#py-price-without-func"><span class="std std-numref">Listing 5.1</span></a> into function. Conversion process is quite simple, as shown in <a class="reference internal" href="#py-price-conv-func"><span class="std std-numref">Listing 6.1</span></a>, where function with docstring is defined at Lines 5-6. Ther previous code is indented and finally a return statement is added in Line 20. Lines 22-24 calls the function and print the output. Lastly, Lines 28-29 are the standard boilerplate to set the function ‘main’ as the entry point.</p>
<div class="literal-block-wrapper docutils container" id="py-price-conv-func">
<div class="code-block-caption"><span class="caption-text">price calculation using function</span><a class="headerlink" href="#py-price-conv-func" title="Permalink to this code">¶</a></div>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1"># price.py</span>

<span class="kn">import</span> <span class="nn">csv</span>

<span class="hll"><span class="k">def</span> <span class="nf">ring_cost</span><span class="p">(</span><span class="n">filename</span><span class="p">):</span>
</span><span class="hll">    <span class="sd">&#39;&#39;&#39; calculate the total cost &#39;&#39;&#39;</span>
</span>
    <span class="n">total_price</span> <span class="o">=</span> <span class="mi">0</span> <span class="c1"># for all items in the list</span>

    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span> <span class="c1"># open file in read mode</span>
        <span class="n">rows</span> <span class="o">=</span> <span class="n">csv</span><span class="o">.</span><span class="n">reader</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
        <span class="n">header</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="n">rows</span><span class="p">)</span> <span class="c1"># skip line 1 i.e. header</span>
        <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">rows</span><span class="p">:</span>
            <span class="n">row</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="mi">3</span><span class="p">])</span> <span class="c1"># price</span>
            <span class="n">row</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="mi">4</span><span class="p">])</span> <span class="c1"># quantity</span>

            <span class="n">total_price</span> <span class="o">+=</span> <span class="n">row</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">*</span> <span class="n">row</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span>

<span class="hll">    <span class="c1"># print(&quot;Total price = %10.2f&quot; % total_price)</span>
</span><span class="hll">    <span class="k">return</span> <span class="n">total_price</span>  <span class="c1"># return total_price</span>
</span>
<span class="hll"><span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
</span><span class="hll">    <span class="n">total</span> <span class="o">=</span> <span class="n">ring_cost</span><span class="p">(</span><span class="s1">&#39;price.csv&#39;</span><span class="p">)</span>  <span class="c1"># function call</span>
</span><span class="hll">    <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Total price = </span><span class="si">%10.2f</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">total</span><span class="p">)</span> <span class="c1"># print value</span>
</span>
<span class="hll"><span class="c1"># standard boilerplate</span>
</span><span class="hll"><span class="c1"># main is the starting function</span>
</span><span class="hll"><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
</span><span class="hll">    <span class="n">main</span><span class="p">()</span>
</span></pre></div>
</td></tr></table></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>$ python price.py
Total price =    1328.38
</pre></div>
</div>
</div>
<div class="section" id="debugging">
<h4>Debugging<a class="headerlink" href="#debugging" title="Permalink to this headline">¶</a></h4>
<p>In <a class="reference internal" href="index.html#py-price-without-func"><span class="std std-numref">Listing 5.1</span></a>, we have to manually change the file name in the ‘price.py’ file; whereas in <a class="reference internal" href="#py-price-conv-func"><span class="std std-numref">Listing 6.1</span></a>, we can pass the filename as the parameter in the <a class="reference internal" href="index.html#python-shell-debug"><span class="std std-numref">Section 3.4.1</span></a>, as shown below,</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>$ python -i price.py
Total price =    1328.38
&gt;&gt;&gt;
&gt;&gt;&gt; ring_cost(&#39;price.csv&#39;)
1328.3799999999999
&gt;&gt;&gt; ring_cost(&#39;price2.csv&#39;)
1328.3799999999999
&gt;&gt;&gt;
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">In the above command, ‘python -i price.py’, the main() function is called. And after entering the Python shell, we can call the function directly i.e. ring_cost(‘price.csv’), and the corresponding ‘return value’, i.e. 1328.3799999999999, will be printed in the shell.</p>
</div>
</div>
</div>
<div class="section" id="glob-module">
<h3>glob module<a class="headerlink" href="#glob-module" title="Permalink to this headline">¶</a></h3>
<p>‘glob’ module can be used to select the files for further processing, as shown in this section. To understand it, first create some files as below,</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>$ touch data1.txt data2.txt data3.txt data_1.txt data_2.txt data_3.txt data1.csv data2.csv data3.csv
</pre></div>
</div>
<p>Next, open the Python shell and see the following function of ‘glob’ module,</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">glob</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="s1">&#39;*.csv&#39;</span><span class="p">)</span> <span class="c1"># find all csv files</span>
<span class="go">[&#39;data3.csv&#39;, &#39;data2.csv&#39;, &#39;data1.csv&#39;]</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">glob</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="s1">&#39;data*.txt&#39;</span><span class="p">)</span> <span class="c1"># select all txt file which starts with &#39;data&#39;</span>
<span class="go">[&#39;data_3.txt&#39;, &#39;data_2.txt&#39;, &#39;data2.txt&#39;, &#39;data_1.txt&#39;, &#39;data3.txt&#39;, &#39;data1.txt&#39;]</span>

<span class="gp">&gt;&gt;&gt; </span><span class="c1"># select txt files which have one character between &#39;data&#39; and &#39;.txt&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">glob</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="s1">&#39;data?.txt&#39;</span><span class="p">)</span>
<span class="go">[&#39;data2.txt&#39;, &#39;data3.txt&#39;, &#39;data1.txt&#39;]</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">glob</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="s1">&#39;data[0-2]*.csv&#39;</span><span class="p">)</span> <span class="c1"># select csv file with numbers 0,1,2 after &#39;data&#39;</span>
<span class="go">[&#39;data2.csv&#39;, &#39;data1.csv&#39;]</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<ul class="last simple">
<li>The ‘glob’ module returns the ‘list’.</li>
<li>The list is in unordered form.</li>
</ul>
</div>
<div class="section" id="price-calculation-on-files-using-glob">
<h4>Price calculation on files using ‘glob’<a class="headerlink" href="#price-calculation-on-files-using-glob" title="Permalink to this headline">¶</a></h4>
<p>Now, we will use the glob module to perform ‘price calculation’ on files using ‘glob’ module. First open the Python shell without using ‘-i’ operation.</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>$ python
</pre></div>
</div>
<p>Since we did not use the ‘-i’ operation to open the shell, therefore we need to import the function ‘ring_cost’ in the shell, as shown below,</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">glob</span>
<span class="hll"><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">price</span> <span class="kn">import</span> <span class="n">ring_cost</span>
</span><span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">files</span> <span class="o">=</span> <span class="n">glob</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="s1">&#39;pri*.csv&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="nb">file</span> <span class="ow">in</span> <span class="n">files</span><span class="p">:</span>
<span class="gp">... </span>    <span class="k">print</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="n">ring_cost</span><span class="p">(</span><span class="nb">file</span><span class="p">))</span>
<span class="gp">...</span>
<span class="go">price.csv 1328.3799999999999</span>
<span class="go">price2.csv 1328.3799999999999</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Note that we need to restart python shell every time, we made some changes in the code. This is required as the ‘import’ statement loads all the data at the first time; and when we re-import the modules then it is fetched from the cache.</p>
</div>
<p>Note that, the ‘glob’ returns a list, therefore we can extend the list using various listing operation. This can be useful when we have files names with different names, but required same operations e.g. we want to perform price calculation on another set of items which has same columns as price.csv file. List can be modified as below,</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">files</span> <span class="o">=</span> <span class="n">glob</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="s1">&#39;pri*.csv&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">files2</span> <span class="o">=</span> <span class="n">glob</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="s1">&#39;pri*.csv&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">files</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">files2</span><span class="p">)</span>  <span class="c1"># extend list</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">files</span>
<span class="go">[&#39;price.csv&#39;, &#39;price2.csv&#39;, &#39;price.csv&#39;, &#39;price2.csv&#39;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">files</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;price2.csv&#39;</span><span class="p">)</span>  <span class="c1"># append data</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">files</span>
<span class="go">[&#39;price.csv&#39;, &#39;price2.csv&#39;, &#39;price.csv&#39;, &#39;price2.csv&#39;, &#39;price2.csv&#39;]</span>
</pre></div>
</div>
</div>
</div>
</div>
<span id="document-python/datatypes"></span><div class="section" id="data-types-and-objects">
<h2>Data types and objects<a class="headerlink" href="#data-types-and-objects" title="Permalink to this headline">¶</a></h2>
<div class="section" id="introduction">
<h3>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h3>
<p>In this chapter, we will see various data types available in the Python. Also, we will use these data types for processing the data (also known as data mining).</p>
<p>Everything in Python is the object e.g. builtin types numbers, strings, list, set and dictionary etc. are objects. Further, user define objects can be created using ‘classes’. This chapter describes the working of Python object model along with builtin data types.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This chapter contains lots of details about the data objects and data types. We can skip this chapter at this moment, except <a class="reference internal" href="#sec-builtindatatypes"><span class="std std-numref">Section 7.5</span></a>, and reference back to it, whenever required.</p>
</div>
</div>
<div class="section" id="index-0">
<span id="identity-and-type"></span><h3>Identity and type<a class="headerlink" href="#index-0" title="Permalink to this headline">¶</a></h3>
<p>Each object has an identity in the form of integer and a type. The identity corresponds to the location of the object in the memory.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="mi">2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">id</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>  <span class="c1"># id is unique memory address</span>
<span class="go">3077862864</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">type</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="go">&lt;class &#39;int&#39;&gt;</span>
<span class="go">&gt;&gt;&gt;</span>

<span class="gp">&gt;&gt;&gt; </span><span class="c1"># type of class is &#39;type&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">class</span> <span class="nc">Circle</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">pass</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">id</span><span class="p">(</span><span class="n">Circle</span><span class="p">)</span>
<span class="go">3070212412</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">type</span><span class="p">(</span><span class="n">Circle</span><span class="p">)</span>
<span class="go">&lt;class &#39;type&#39;&gt;</span>
<span class="go">&gt;&gt;&gt;</span>

<span class="gp">&gt;&gt;&gt; </span><span class="c1"># type of builtin-type is &#39;type&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">type</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>
<span class="go">&lt;class &#39;type&#39;&gt;</span>
<span class="go">&gt;&gt;&gt;</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The type of classes and builtin types e.g. int and float are <span class="target" id="index-1"></span>type as shown in above code.</p>
</div>
<div class="section" id="is-operator">
<span id="isoperator"></span><span id="index-2"></span><h4>‘is’ operator<a class="headerlink" href="#is-operator" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li>The ‘is’ operator is used to compare the identity of two objects,</li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span> <span class="o">=</span> <span class="n">a</span> <span class="c1"># b is new name for a</span>

<span class="gp">&gt;&gt;&gt; </span><span class="c1"># a and b have same id</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">id</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="go">3070184940</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">id</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
<span class="go">3070184940</span>

<span class="gp">&gt;&gt;&gt; </span><span class="c1"># since a and b are same, hence if modify b, a also changes</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span>
<span class="go">[1, 2, 3, 3]</span>
<span class="go">&gt;&gt;&gt;</span>

<span class="gp">&gt;&gt;&gt; </span><span class="c1"># &#39;is&#39; returns true if &#39;id&#39; is same</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="ow">is</span> <span class="n">b</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span> <span class="ow">is</span> <span class="n">a</span>
<span class="go">True</span>
<span class="go">&gt;&gt;&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="comparing-objects">
<h4>Comparing objects<a class="headerlink" href="#comparing-objects" title="Permalink to this headline">¶</a></h4>
<p>Objects can be compared based on values, id and types as shown below,</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">compare</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">if</span> <span class="n">a</span> <span class="ow">is</span> <span class="n">b</span><span class="p">:</span>
<span class="gp">... </span>            <span class="k">print</span><span class="p">(</span><span class="s2">&quot; objects have same id&quot;</span><span class="p">)</span>
<span class="gp">... </span>    <span class="k">if</span> <span class="n">a</span> <span class="o">==</span> <span class="n">b</span><span class="p">:</span>
<span class="gp">... </span>            <span class="k">print</span><span class="p">(</span><span class="s2">&quot; values of objects are same&quot;</span><span class="p">)</span>
<span class="gp">... </span>    <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">a</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">type</span><span class="p">(</span><span class="n">b</span><span class="p">):</span>
<span class="gp">... </span>            <span class="k">print</span><span class="p">(</span><span class="s2">&quot; types of objects are same&quot;</span><span class="p">)</span>
<span class="gp">...</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">y</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">id</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="go">3070183308</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">id</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
<span class="go">3070185004</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">compare</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
<span class="go"> values of objects are same</span>
<span class="go"> types of objects are same</span>


<span class="gp">&gt;&gt;&gt; </span><span class="n">compare</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="go">objects have same id</span>
<span class="go">values of objects are same</span>
<span class="go">types of objects are same</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">compare</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="go">types of objects are same</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="mi">3</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">y</span> <span class="o">=</span> <span class="mi">3</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">compare</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
<span class="go"> objects have same id</span>
<span class="go"> values of objects are same</span>
<span class="go"> types of objects are same</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">id</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="go">3077862880</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">id</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
<span class="go">3077862880</span>
</pre></div>
</div>
</div>
<div class="section" id="isinstance">
<span id="index-3"></span><h4>isinstance<a class="headerlink" href="#isinstance" title="Permalink to this headline">¶</a></h4>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The type of an object is <strong>itself an object</strong>, which is known as object’s class. This object (i.e. object’s class) is unique for a given type, hence can be compared using ‘is’ opeartor as shown below,</p>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">y</span> <span class="o">=</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">list</span><span class="p">:</span>
<span class="gp">... </span>    <span class="n">x</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span>
<span class="go">[1, 2, 3, [2, 3]]</span>
<span class="go">&gt;&gt;&gt;</span>
</pre></div>
</div>
<ul class="simple">
<li>Above operation can be performed using <strong>isinstance(object, type)</strong> as shown below,</li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">y</span> <span class="o">=</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
<span class="gp">... </span>    <span class="n">x</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span>
<span class="go">[1, 2, 3, [2, 3]]</span>
<span class="go">&gt;&gt;&gt;</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="reference-count-and-garbage-collection">
<span id="index-4"></span><h3>Reference count and garbage collection<a class="headerlink" href="#reference-count-and-garbage-collection" title="Permalink to this headline">¶</a></h3>
<p>All the objects are reference counted. This reference count is increased whenever a new name is assigned to object or placed in a container e.g. list, tuple or dictionary etc.</p>
<div class="section" id="getrefcount">
<h4>getrefcount<a class="headerlink" href="#getrefcount" title="Permalink to this headline">¶</a></h4>
<p><span class="target" id="index-5"></span>getrefcount can be used to see the reference count of an object.I</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">r</span> <span class="o">=</span> <span class="mi">20</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">sys</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sys</span><span class="o">.</span><span class="n">getrefcount</span><span class="p">(</span><span class="n">r</span><span class="p">)</span>
<span class="go">15</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">o</span> <span class="o">=</span> <span class="n">r</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sys</span><span class="o">.</span><span class="n">getrefcount</span><span class="p">(</span><span class="n">r</span><span class="p">)</span>
<span class="go">16</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c</span> <span class="o">=</span> <span class="p">[]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">r</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c</span>
<span class="go">[20]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sys</span><span class="o">.</span><span class="n">getrefcount</span><span class="p">(</span><span class="n">r</span><span class="p">)</span>
<span class="go">17</span>
<span class="go">&gt;&gt;&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="garbage-collection">
<h4>Garbage collection<a class="headerlink" href="#garbage-collection" title="Permalink to this headline">¶</a></h4>
<p>The ‘del’ command decrease the value of reference count; when this value reaches to zero, the object is garbage collected as shown below,</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">del</span> <span class="n">c</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sys</span><span class="o">.</span><span class="n">getrefcount</span><span class="p">(</span><span class="n">r</span><span class="p">)</span>
<span class="go">16</span>

<span class="gp">&gt;&gt;&gt; </span><span class="k">del</span> <span class="n">o</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sys</span><span class="o">.</span><span class="n">getrefcount</span><span class="p">(</span><span class="n">r</span><span class="p">)</span>
<span class="go">15</span>

<span class="gp">&gt;&gt;&gt; </span><span class="k">del</span> <span class="n">r</span>
</pre></div>
</div>
</div>
<div class="section" id="shallow-and-deep-copy">
<span id="shallowdeepcopy"></span><span id="index-6"></span><h4>Shallow and deep copy<a class="headerlink" href="#shallow-and-deep-copy" title="Permalink to this headline">¶</a></h4>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">In <a class="reference internal" href="#isoperator"><span class="std std-numref">Section 7.2.1</span></a>, we assigned b = a,  which created a reference for a as b. However, this behaviour is quite different for mutuable objects e.g. list and dictionary. There are two types of reference for these cases i.e. shallow copy and deep copy.</p>
</div>
<p class="rubric">Shallow copy</p>
<ul class="simple">
<li>In shallow reference, inner list or dictionary shared the data between two references as shown below. Note that, a and b are not same i.e. ‘a is b’ results as False, but still change in b results in change in a.</li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>  <span class="c1"># create shallow copy i.e. [10, 20] are still shared</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span>
<span class="go">[1, 2, [10, 20]]</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="ow">is</span> <span class="n">b</span>
<span class="go">False</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mi">30</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span>   <span class="c1"># no change in a</span>
<span class="go">[1, 2, [10, 20]]</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">100</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span>  <span class="c1"># value of a is changed</span>
<span class="go">[1, 2, [100, 20]]</span>
<span class="go">&gt;&gt;&gt;</span>
</pre></div>
</div>
<p class="rubric">Deep copy</p>
<p>Above problem can be solved using ‘deep copy’. Deep copy creates a new object and recursively copies all the objects it contains.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">copy</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]]</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="ow">is</span> <span class="n">b</span>
<span class="go">False</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">=</span><span class="mi">100</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span>
<span class="go">[1, 2, [100, 4]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span>  <span class="c1"># a is not changed</span>
<span class="go">[1, 2, [3, 4]]</span>
<span class="go">&gt;&gt;&gt;</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="first-class-object">
<h3>First class object<a class="headerlink" href="#first-class-object" title="Permalink to this headline">¶</a></h3>
<p>All objects in python are said to be ‘first class’ i.e. all objects that can be named by an identifier have equal status. In below code, ‘ty’ is assigned the object ‘str’; now ‘ty’ can be used in place of str as shown below,</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ty</span><span class="o">=</span><span class="nb">str</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ty</span> <span class="o">=</span> <span class="nb">int</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ty</span><span class="p">(</span><span class="s1">&#39;10&#39;</span><span class="p">)</span>
<span class="go">10</span>
<span class="go">&gt;&gt;&gt;</span>
</pre></div>
</div>
<p>This feature is quite useful for writing compact and flexible code. In below code, list comprehension is used to change the data type of ‘stock’,</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># here, stock is string, we want to split it and</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># convert the data in to correct format i.e. string, int and float</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">stock</span> <span class="o">=</span> <span class="s2">&quot;GOOG, 100, 20.3&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">field_types</span> <span class="o">=</span> <span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">split_stock</span> <span class="o">=</span> <span class="n">stock</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">)</span>   <span class="c1"># split data and get a list</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">split_stock</span>
<span class="go">[&#39;GOOG&#39;, &#39; 100&#39;, &#39; 20.3&#39;]</span>

<span class="gp">&gt;&gt;&gt; </span><span class="c1"># change the format</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">stock_format</span> <span class="o">=</span> <span class="p">[</span><span class="n">ty</span><span class="p">(</span><span class="n">val</span><span class="p">)</span> <span class="k">for</span> <span class="n">ty</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">field_types</span><span class="p">,</span> <span class="n">split_stock</span><span class="p">)]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">stock_format</span>   <span class="c1"># format = [str, int, float]</span>
<span class="go">[&#39;GOOG&#39;, 100, 20.3]</span>
</pre></div>
</div>
</div>
<div class="section" id="builtin-types-for-representing-data">
<span id="sec-builtindatatypes"></span><span id="index-7"></span><h3>Builtin types for representing data<a class="headerlink" href="#builtin-types-for-representing-data" title="Permalink to this headline">¶</a></h3>
<p>There are various types of data types, which can be divided as shown in <a class="reference internal" href="#builtindatatypes"><span class="std std-numref">Table 7.1</span></a>.</p>
<span id="builtindatatypes"></span><table border="1" class="docutils" id="id1">
<caption><span class="caption-text">Builtin datatypes</span><a class="headerlink" href="#id1" title="Permalink to this table">¶</a></caption>
<colgroup>
<col width="28%" />
<col width="28%" />
<col width="45%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Category</th>
<th class="head">Type name</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>None</td>
<td>NoneType</td>
<td>x = None</td>
</tr>
<tr class="row-odd"><td>Numbers</td>
<td>int</td>
<td>integer</td>
</tr>
<tr class="row-even"><td>&#160;</td>
<td>float</td>
<td>floating point</td>
</tr>
<tr class="row-odd"><td>&#160;</td>
<td>complex</td>
<td>complex number</td>
</tr>
<tr class="row-even"><td>&#160;</td>
<td>boolean</td>
<td>True or False</td>
</tr>
<tr class="row-odd"><td>Sequences</td>
<td>str</td>
<td>character string</td>
</tr>
<tr class="row-even"><td>&#160;</td>
<td>list</td>
<td>list</td>
</tr>
<tr class="row-odd"><td>&#160;</td>
<td>tuple</td>
<td>tuple</td>
</tr>
<tr class="row-even"><td>Mapping</td>
<td>dict</td>
<td>Dictionary</td>
</tr>
<tr class="row-odd"><td>Sets</td>
<td>set</td>
<td>Mutable set</td>
</tr>
<tr class="row-even"><td>&#160;</td>
<td>frozenset</td>
<td>Immutable set</td>
</tr>
</tbody>
</table>
<div class="section" id="none">
<h4>None<a class="headerlink" href="#none" title="Permalink to this headline">¶</a></h4>
<p>None object is usually used with the function for setting default value for the kwargs e.g. def add(a=None, b=None) etc. Further, if None is return by a function than it is considered as ‘False’ in Boolean expressions,</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="bp">None</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">type</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="go">&lt;class &#39;NoneType&#39;&gt;</span>
<span class="go">&gt;&gt;&gt;</span>

<span class="gp">&gt;&gt;&gt; </span><span class="c1"># input arguments values as None</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">add2Num</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
<span class="gp">... </span>    <span class="n">c</span> <span class="o">=</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span>
<span class="gp">... </span>    <span class="k">print</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="bp">None</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">s</span> <span class="o">=</span> <span class="n">add2Num</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span> <span class="c1"># None is return</span>
<span class="go">5</span>

<span class="gp">&gt;&gt;&gt; </span><span class="nb">type</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
<span class="go">&lt;class &#39;NoneType&#39;&gt;</span>

<span class="gp">&gt;&gt;&gt; </span><span class="c1"># None is considered as False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">if</span> <span class="n">s</span><span class="p">:</span>
<span class="gp">... </span>    <span class="k">print</span><span class="p">(</span><span class="s2">&quot;s has some value&quot;</span><span class="p">)</span>
<span class="gp">... </span><span class="k">else</span><span class="p">:</span>
<span class="gp">... </span>    <span class="k">print</span><span class="p">(</span><span class="s2">&quot;s is None&quot;</span><span class="p">)</span>
<span class="gp">...</span>
<span class="go">s is None</span>
<span class="go">&gt;&gt;&gt;</span>
</pre></div>
</div>
<ul class="simple">
<li>isinstance can not be used with None type,</li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">isinstance</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
<span class="gt">Traceback (most recent call last):</span>
  File <span class="nb">&quot;&lt;stdin&gt;&quot;</span>, line <span class="m">1</span>, in <span class="n">&lt;module&gt;</span>
<span class="gr">TypeError</span>: <span class="n">isinstance() arg 2 must be a type or tuple of types</span>
</pre></div>
</div>
</div>
<div class="section" id="numbers">
<h4>Numbers<a class="headerlink" href="#numbers" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li>Complex numbers are represented as a pair of two <strong>floating-point</strong> number.  Real part and complex part of complex number can be extracted as below,</li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">c</span> <span class="o">=</span> <span class="mi">3</span> <span class="o">+</span> <span class="mi">3j</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c</span><span class="o">.</span><span class="n">real</span>
<span class="go">3.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c</span><span class="o">.</span><span class="n">imag</span>
<span class="go">3.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c</span><span class="o">.</span><span class="n">conjugate</span><span class="p">()</span>
<span class="go">(3-3j)</span>
<span class="go">&gt;&gt;&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="sequences">
<span id="index-8"></span><h4>Sequences<a class="headerlink" href="#sequences" title="Permalink to this headline">¶</a></h4>
<p>Sequences are the set objects which are indexed by non-negative integers. Python has three types of sequences i..e. string, list and tuple. Strings and tuples are immutable objects, whereas list is mutable object.</p>
<p><a class="reference internal" href="#commonopseq"><span class="std std-numref">Table 7.2</span></a> shows the operations which are applicable to all the sequences,</p>
<span id="commonopseq"></span><table border="1" class="docutils" id="id2">
<caption><span class="caption-text">Common operations to all sequences</span><a class="headerlink" href="#id2" title="Permalink to this table">¶</a></caption>
<colgroup>
<col width="24%" />
<col width="38%" />
<col width="38%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Operation</th>
<th class="head">Description</th>
<th class="head">example s = [5, 10, 15, 20, 25]</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>s[i]</td>
<td>returns element i</td>
<td>s[1] # 10</td>
</tr>
<tr class="row-odd"><td>s[i:j]</td>
<td>returns a slice</td>
<td>s[0:3] # [5, 10, 15]</td>
</tr>
<tr class="row-even"><td>s[i:j:stride]</td>
<td>returns a extended slice</td>
<td>s[0:3:2] # [5, 15]</td>
</tr>
<tr class="row-odd"><td>len(s)</td>
<td>Number of elements</td>
<td>len(s) # 5</td>
</tr>
<tr class="row-even"><td>min(s)</td>
<td>mininum value in s</td>
<td>min(s) # 5</td>
</tr>
<tr class="row-odd"><td>max(s)</td>
<td>maximum value in s</td>
<td>max(s) # 25</td>
</tr>
<tr class="row-even"><td>sum(s)</td>
<td>sum of all elements</td>
<td>sum(s) # 75</td>
</tr>
<tr class="row-odd"><td>sum(s, [, initial])</td>
<td>sum of elements + initial value</td>
<td>sum(s, 3) # 78</td>
</tr>
<tr class="row-even"><td>all(s)</td>
<td>return True, if all true in s</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>any(s)</td>
<td>return Trun, if any true in s</td>
<td>&#160;</td>
</tr>
</tbody>
</table>
<p class="rubric">‘all’ and ‘any’ example</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span> <span class="c1"># tuple</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">3</span><span class="p">]</span>
<span class="go">(1, 2, 3)</span>

<span class="gp">&gt;&gt;&gt; </span> <span class="c1"># True, as all items in x are greater than zero</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">all</span><span class="p">(</span><span class="n">item</span><span class="o">&gt;</span><span class="mi">0</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">x</span><span class="p">)</span>
<span class="go">True</span>

<span class="gp">&gt;&gt;&gt; </span> <span class="c1"># False, as all items in x are not greater than 4</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">all</span><span class="p">(</span><span class="n">item</span><span class="o">&gt;</span><span class="mi">4</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">x</span><span class="p">)</span>
<span class="go">False</span>

<span class="gp">&gt;&gt;&gt; </span> <span class="c1"># True, as some items in x are greater than 4</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">any</span><span class="p">(</span><span class="n">item</span><span class="o">&gt;</span><span class="mi">4</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">x</span><span class="p">)</span>
<span class="go">True</span>
<span class="go">&gt;&gt;&gt;</span>
</pre></div>
</div>
<ul class="simple">
<li>Some string operations are shown below,</li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">s</span> <span class="o">=</span> <span class="s1">&#39;Meher Krishna Patel&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">s</span><span class="p">[:</span><span class="mi">5</span><span class="p">]</span>   <span class="c1"># 0 to 4</span>
<span class="go">&#39;Meher&#39;</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">s</span><span class="p">[:</span><span class="o">-</span><span class="mi">5</span><span class="p">]</span>  <span class="c1"># 0 to sixth last</span>
<span class="go">&#39;Meher Krishna &#39;</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">s</span><span class="p">[</span><span class="o">-</span><span class="mi">5</span><span class="p">:]</span>  <span class="c1"># fifth last to end</span>
<span class="go">&#39;Patel&#39;</span>
<span class="go">&gt;&gt;&gt;</span>
</pre></div>
</div>
<ul class="simple">
<li><a class="reference internal" href="#opmutableseq"><span class="std std-numref">Table 7.3</span></a> shows the operations which are applicable to mutable sequences only, i.e. string and list,</li>
</ul>
<span id="opmutableseq"></span><table border="1" class="docutils" id="id3">
<caption><span class="caption-text">Operations for mutuable sequences only</span><a class="headerlink" href="#id3" title="Permalink to this table">¶</a></caption>
<colgroup>
<col width="36%" />
<col width="64%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">item</th>
<th class="head">description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>s[i] = v</td>
<td>item assignment, v = value</td>
</tr>
<tr class="row-odd"><td>s[i, j] = t</td>
<td>slice assignment, t = tuple/list</td>
</tr>
<tr class="row-even"><td>s[i:j:stride] = t</td>
<td>extended slice assignment</td>
</tr>
<tr class="row-odd"><td>del s[i]</td>
<td>item deletion</td>
</tr>
<tr class="row-even"><td>del s[i:j]</td>
<td>slice deletion</td>
</tr>
<tr class="row-odd"><td>del s[i:j:stride]</td>
<td>extended slice deletion</td>
</tr>
</tbody>
</table>
<ul class="simple">
<li>Some of the operations of <a class="reference internal" href="#opmutableseq"><span class="std std-numref">Table 7.3</span></a> are shown below,</li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">20</span>  <span class="c1"># value assignment</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span>
<span class="go">[20, 2, 3, 4, 5, 6, 7, 8]</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span><span class="p">[</span><span class="mi">2</span><span class="p">:</span><span class="mi">5</span><span class="p">]</span> <span class="o">=</span> <span class="o">-</span><span class="mi">10</span><span class="p">,</span> <span class="o">-</span><span class="mi">20</span><span class="p">,</span> <span class="o">-</span><span class="mi">30</span>  <span class="c1"># slice assignment</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span>
<span class="go">[20, 2, -10, -20, -30, 6, 7, 8]</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span><span class="p">[</span><span class="mi">3</span><span class="p">:</span><span class="mi">6</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="o">-</span><span class="mi">100</span><span class="p">,</span> <span class="o">-</span><span class="mi">200</span><span class="p">,</span> <span class="o">-</span><span class="mi">300</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span>
<span class="go">[20, 2, -10, -100, -200, -300, 7, 8]</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">5</span><span class="p">:</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span>   <span class="c1"># extended slice assignment</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span>
<span class="go">[0, 2, -10, 0, -200, -300, 7, 8]</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">del</span> <span class="n">x</span><span class="p">[</span><span class="mi">3</span><span class="p">:</span><span class="mi">5</span><span class="p">]</span>   <span class="c1"># slice deletion</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span>
<span class="go">[0, 2, -10, -300, 7, 8]</span>
<span class="go">&gt;&gt;&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="list">
<h4>List<a class="headerlink" href="#list" title="Permalink to this headline">¶</a></h4>
<p>List is the mutable sequences, which is often used to store the data of same type. It can be seen as the columns of a spreadsheet.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">list(s) command converts any iterable to a list. If iterable is already a list, then list(s) command will create a new list with shallow copy of ‘s’ as discussed in <a class="reference internal" href="#shallowdeepcopy"><span class="std std-numref">Section 7.3.3</span></a>.</p>
</div>
<p><a class="reference internal" href="#oplist"><span class="std std-numref">Table 7.4</span></a> shows various methods supported by list object,</p>
<span id="oplist"></span><table border="1" class="docutils" id="id4">
<caption><span class="caption-text">List methods</span><a class="headerlink" href="#id4" title="Permalink to this table">¶</a></caption>
<colgroup>
<col width="31%" />
<col width="69%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Method</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>list(s)</td>
<td>convert s to list</td>
</tr>
<tr class="row-odd"><td>s.append(x)</td>
<td>append element x,  to the end of s</td>
</tr>
<tr class="row-even"><td>s.extend(x)</td>
<td>append new list x,  to the end of s</td>
</tr>
<tr class="row-odd"><td>s.count(x)</td>
<td>count occurances of x in s</td>
</tr>
<tr class="row-even"><td>s.index(x, [, start [, stop]])</td>
<td>return the smallest i where s[i] == x.
start and stop optionally specify the starting
and ending for the search</td>
</tr>
<tr class="row-odd"><td>s.insert(i, x)</td>
<td>insert x at index i</td>
</tr>
<tr class="row-even"><td>s.pop([i])</td>
<td>pops the element index i. If ‘i’ is ommited then last value popped out</td>
</tr>
<tr class="row-odd"><td>s.remove(x)</td>
<td>search for first occurrence of  x and remove it</td>
</tr>
<tr class="row-even"><td>s.reverse()</td>
<td>reverse the order of list</td>
</tr>
<tr class="row-odd"><td>s.sort([key [, reverse])</td>
<td>Sorts item fo s. ‘key’ and ‘reverse’ should be provided as keywords</td>
</tr>
</tbody>
</table>
<ul class="simple">
<li>Some of the examples of commands in <a class="reference internal" href="#oplist"><span class="std std-numref">Table 7.4</span></a> are listed below,</li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">s</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">s</span>
<span class="go">[1, 2, 3, 4]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">s</span>
<span class="go">[1, 2, 3, 4, [3, 4]]</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span>
<span class="go">[1, 2, 3, 1, 5]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="go">2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="go">2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="o">-</span><span class="mi">10</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span>
<span class="go">[1, 2, -10, 3, 1, 5]</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
<span class="go">5</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span>
<span class="go">[1, 2, -10, 3, 1]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="go">-10</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span>
<span class="go">[1, 2, 3, 1]</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span>
<span class="go">[2, 3, 1]</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">s</span><span class="o">.</span><span class="n">reverse</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">s</span>
<span class="go">[4, 3, 2]</span>
<span class="go">&gt;&gt;&gt;</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">‘s.sort()’ method sorts and modifies the original list; whereas ‘sorted()’ option sorts the contents of the list, but does not modify the original list, therefore we need to save it manuall. Further, if we try to save the outcome of s.sort() in some other list, it will not work as shown below</p>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">name_age</span> <span class="o">=</span> <span class="p">[</span> <span class="p">[</span><span class="s1">&#39;Tom&#39;</span><span class="p">,</span> <span class="mi">20</span><span class="p">],</span> <span class="p">[</span><span class="s1">&#39;Jerry&#39;</span><span class="p">,</span> <span class="mi">15</span><span class="p">],</span> <span class="p">[</span><span class="s1">&#39;Pluto&#39;</span><span class="p">,</span> <span class="mi">25</span><span class="p">]</span> <span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">name_age</span>
<span class="go">[[&#39;Tom&#39;, 20], [&#39;Jerry&#39;, 15], [&#39;Pluto&#39;, 25]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">name_age</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">name</span><span class="p">:</span> <span class="n">name</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>   <span class="c1"># sort by name</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">name_age</span>
<span class="go">[[&#39;Jerry&#39;, 15], [&#39;Pluto&#39;, 25], [&#39;Tom&#39;, 20]]</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">name_age</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">age</span><span class="p">:</span> <span class="n">age</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>     <span class="c1"># sort by age</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">name_age</span>
<span class="go">[[&#39;Jerry&#39;, 15], [&#39;Tom&#39;, 20], [&#39;Pluto&#39;, 25]]</span>
<span class="go">&gt;&gt;&gt;</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="p">[]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="n">name_age</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">age</span><span class="p">:</span> <span class="n">age</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>  <span class="c1"># can not save the output</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span>  <span class="c1"># nothing is saved in x</span>

<span class="gp">&gt;&gt;&gt; </span><span class="c1"># use sorted() to save outputs to another list</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">y</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">name_age</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">age</span><span class="p">:</span> <span class="n">age</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>   <span class="c1"># sorted() : by age</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">y</span>
<span class="go">[[&#39;Jerry&#39;, 15], [&#39;Tom&#39;, 20], [&#39;Pluto&#39;, 25]]</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">y</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">name_age</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">name</span><span class="p">:</span> <span class="n">name</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>    <span class="c1"># sorted() : by name</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">y</span>
<span class="go">[[&#39;Jerry&#39;, 15], [&#39;Tom&#39;, 20], [&#39;Pluto&#39;, 25]]</span>
</pre></div>
</div>
</div>
<div class="section" id="strings">
<span id="index-9"></span><h4>Strings<a class="headerlink" href="#strings" title="Permalink to this headline">¶</a></h4>
<p>Various strings methods are shown in <a class="reference internal" href="#opstring"><span class="std std-numref">Table 7.5</span></a>. As oppose to list methods, string methods do not modify the underlying string data. In the other words, the string methods return the new string which can be saved in new string object.</p>
<span id="opstring"></span><table border="1" class="docutils" id="id5">
<caption><span class="caption-text">String methods</span><a class="headerlink" href="#id5" title="Permalink to this table">¶</a></caption>
<colgroup>
<col width="38%" />
<col width="62%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Method</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>s.capitalize()</td>
<td>capitalize the first letter</td>
</tr>
<tr class="row-odd"><td>s.center(width, [,pad])</td>
<td>centers the string in a field of length width.
pad is a padding character</td>
</tr>
<tr class="row-even"><td>s.count(sub, [, start [, end]])</td>
<td>counts occurrence of the specified substring sub</td>
</tr>
<tr class="row-odd"><td>s.endswith(suffix, [, start [, end]])</td>
<td>checks for the end for a suffix</td>
</tr>
<tr class="row-even"><td>s.expandtabs([tabsize])</td>
<td>replace tabs with spaces</td>
</tr>
<tr class="row-odd"><td><p class="first">s.find(sub [, start [, end]])</p>
<p class="last">s.rfind(sub [, start [, end]])</p>
</td>
<td><p class="first">find the first occurrence of substring sub</p>
<p class="last">find last occurrence of substring sub</p>
</td>
</tr>
<tr class="row-even"><td>s.format(* args, ** kwargs)</td>
<td>format string</td>
</tr>
<tr class="row-odd"><td><p class="first">s.index(sub, [, start [, end]])</p>
<p class="last">s.rindex(sub, [, start [, end]])</p>
</td>
<td><p class="first">find the first occurrence of sub</p>
<p class="last">find the last occurrence of sub</p>
</td>
</tr>
<tr class="row-even"><td>s.isalnum()</td>
<td>checks whether all characters are alphanumerics</td>
</tr>
<tr class="row-odd"><td>s.isalpha()</td>
<td>checks whether all characters are alphabets</td>
</tr>
<tr class="row-even"><td>s.isdigit()</td>
<td>checks whether all characters are digits</td>
</tr>
<tr class="row-odd"><td>s.islower()</td>
<td>checks whether all characters are lowercase</td>
</tr>
<tr class="row-even"><td>s.isspace()</td>
<td>checks whether all characters are spaces</td>
</tr>
<tr class="row-odd"><td>s.istitle()</td>
<td>checks whether all characters are titlecased</td>
</tr>
<tr class="row-even"><td>s.isupper()</td>
<td>checks whether all characters are uppercase</td>
</tr>
<tr class="row-odd"><td>s.join(t)</td>
<td>joins string in sequence t with s as separator</td>
</tr>
<tr class="row-even"><td><p class="first">s.ljust(width [, fill])</p>
<p class="last">s.rjust(width [, fill])</p>
</td>
<td>left or right align s in a string of size ‘width’</td>
</tr>
<tr class="row-odd"><td><p class="first">s.lower()</p>
<p class="last">s.upper()</p>
</td>
<td>change string to lower or upper case</td>
</tr>
<tr class="row-even"><td>s.lstrip([chrs])</td>
<td>remove leading white space or [chrs] if provided</td>
</tr>
<tr class="row-odd"><td><p class="first">s.partition(sep)</p>
<p class="last">s.partition(sep)</p>
</td>
<td><p class="first">partitions a string based on a seperator string ‘sep’.</p>
<p>It returns a tuple (head, sep, tail) or s(s, “”, “”) if
seperator is not provided</p>
<p class="last">partitions a string but search from the last.</p>
</td>
</tr>
<tr class="row-even"><td>s.replace(old, new [, maxreplace])</td>
<td>replace a substring</td>
</tr>
<tr class="row-odd"><td><p class="first">s.split([sep [, maxsplit]])</p>
<p class="last">s.rsplit([sep, [,maxsplit]])</p>
</td>
<td><p class="first">splits a string using ‘sep’ as delimiter.  maxsplit is
the maximum number of split.</p>
<p class="last">r is used for checking from the end</p>
</td>
</tr>
<tr class="row-even"><td>s.splitlines([keepends])</td>
<td>splits the string into a list of line.
If keepends is 1, then trailing newlines are preserved</td>
</tr>
<tr class="row-odd"><td>s.startswith(prefix, [,start [,end]])</td>
<td>checks whether string starts with prefix</td>
</tr>
<tr class="row-even"><td><p class="first">s.strip([chars])</p>
<p class="last">s.rstrip([chars])</p>
</td>
<td>removes leading and trailing white spaces or chars if provided</td>
</tr>
<tr class="row-odd"><td>s.swapcase()</td>
<td>changes the case of string</td>
</tr>
<tr class="row-even"><td>s.title()</td>
<td>return title-case version of string</td>
</tr>
<tr class="row-odd"><td>s.zfill(width)</td>
<td>pads a string with zeros on the left up to specified width</td>
</tr>
</tbody>
</table>
<ul class="simple">
<li>Some of the examples of commands in <a class="reference internal" href="#opstring"><span class="std std-numref">Table 7.5</span></a> are listed below,</li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">s</span> <span class="o">=</span> <span class="s2">&quot;meher krishna patel&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">s</span><span class="o">.</span><span class="n">capitalize</span><span class="p">()</span>
<span class="go">&#39;Meher krishna patel&#39;</span>
<span class="go">&gt;&gt;&gt;</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">s</span><span class="o">.</span><span class="n">center</span><span class="p">(</span><span class="mi">30</span><span class="p">)</span>
<span class="go">&#39;     meher krishna patel      &#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">s</span><span class="o">.</span><span class="n">center</span><span class="p">(</span><span class="mi">50</span><span class="p">)</span>
<span class="go">&#39;               meher krishna patel                &#39;</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">s</span><span class="o">.</span><span class="n">center</span><span class="p">(</span><span class="mi">30</span><span class="p">,</span> <span class="s1">&#39;#&#39;</span><span class="p">)</span>
<span class="go">&#39;#####meher krishna patel######&#39;</span>
<span class="go">&gt;&gt;&gt;</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">s</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="s1">&#39;e&#39;</span><span class="p">)</span>
<span class="go">3</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">s</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="s1">&#39;eh&#39;</span><span class="p">)</span>
<span class="go">1</span>
<span class="go">&gt;&gt;&gt;</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">s</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s1">&#39;Patel&#39;</span><span class="p">)</span>
<span class="go">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">s</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s1">&#39;Patel &#39;</span><span class="p">)</span>  <span class="c1"># space added at the end</span>
<span class="go">False</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">s</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s1">&#39;er&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>  <span class="c1"># Meher, check from 0 to 4</span>
<span class="go">True</span>
<span class="go">&gt;&gt;&gt;</span>

<span class="gp">&gt;&gt;&gt; </span><span class="s1">&#39;{}, {}, {}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">)</span>
<span class="go">&#39;a, b, c&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="s1">&#39;{2}, {0}, {1}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">)</span>
<span class="go">&#39;c, a, b&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="s1">&#39;{name}, {age}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;Meher&#39;</span><span class="p">,</span> <span class="n">age</span><span class="o">=</span><span class="mi">30</span><span class="p">)</span>   <span class="c1"># keywords</span>
<span class="go">&#39;Meher, 30&#39;</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">s</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="s1">&#39;e&#39;</span><span class="p">)</span>
<span class="go">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">s</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="s1">&#39;e&#39;</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
<span class="go">17</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">t</span> <span class="o">=</span> <span class="s1">&#39; &#39;</span>   <span class="c1"># space seperator</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">t</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
<span class="go">&#39;m e h e r   k r i s h n a   p a t e l&#39;</span>
<span class="go">&gt;&gt;&gt;</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;    ## Meher&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">name</span><span class="o">.</span><span class="n">lstrip</span><span class="p">()</span>
<span class="go">&#39;## Meher&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">name</span><span class="o">.</span><span class="n">lstrip</span><span class="p">()</span><span class="o">.</span><span class="n">lstrip</span><span class="p">(</span><span class="s1">&#39;##&#39;</span><span class="p">)</span>
<span class="go">&#39; Meher&#39;</span>
<span class="go">&gt;&gt;&gt;</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">s</span><span class="o">.</span><span class="n">partition</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
<span class="go">(&#39;meher&#39;, &#39; &#39;, &#39;krishna patel&#39;)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">s</span><span class="o">.</span><span class="n">partition</span><span class="p">(</span><span class="s1">&#39;krishna&#39;</span><span class="p">)</span>
<span class="go">(&#39;meher &#39;, &#39;krishna&#39;, &#39; patel&#39;)</span>
<span class="go">&gt;&gt;&gt;</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">s</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;e&#39;</span><span class="p">,</span> <span class="s1">&#39;E&#39;</span><span class="p">)</span>
<span class="go">&#39;mEhEr krishna patEl&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">s</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;e&#39;</span><span class="p">,</span> <span class="s1">&#39;E&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="go">&#39;mEhEr krishna patel&#39;</span>
<span class="go">&gt;&gt;&gt;</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">s</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
<span class="go">[&#39;meher&#39;, &#39;krishna&#39;, &#39;patel&#39;]</span>
<span class="go">&gt;&gt;&gt;</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">l</span> <span class="o">=</span> <span class="s1">&#39;My name is Meher.</span><span class="se">\n</span><span class="s1">What is your name?&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span><span class="p">(</span><span class="n">l</span><span class="p">)</span>
<span class="go">My name is Meher.</span>
<span class="go">What is your name?</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">l</span><span class="o">.</span><span class="n">splitlines</span><span class="p">()</span>
<span class="go">[&#39;My name is Meher.&#39;, &#39;What is your name?&#39;]</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">l</span><span class="o">.</span><span class="n">splitlines</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="go">[&#39;My name is Meher.\n&#39;, &#39;What is your name?&#39;]</span>
<span class="go">&gt;&gt;&gt;</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">n</span> <span class="o">=</span> <span class="s1">&#39;   #meher krishna patel#  &#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">n</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
<span class="go">&#39;#meher krishna patel#&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">n</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">(</span><span class="s1">&#39;#&#39;</span><span class="p">)</span>
<span class="go">&#39;meher krishna patel&#39;</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">s</span><span class="o">.</span><span class="n">zfill</span><span class="p">(</span><span class="mi">30</span><span class="p">)</span>
<span class="go">&#39;00000000000meher krishna patel&#39;</span>
<span class="go">&gt;&gt;&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="mapping-types">
<span id="index-10"></span><h4>Mapping types<a class="headerlink" href="#mapping-types" title="Permalink to this headline">¶</a></h4>
<p>A mapping object represents an arbitrary collection of objects that are indexed by another collection of arbitrary key values. Unlike sequences, a mapping object can be indexed by numbers, strings and other objects. Further, the mappings are mutable.</p>
<p>Dictionaries are the only builtin mapping types in python. <a class="reference internal" href="#opdict"><span class="std std-numref">Table 7.6</span></a> shows the list of various dictionary operations,</p>
<span id="opdict"></span><table border="1" class="docutils" id="id6">
<caption><span class="caption-text">Methods and operations on dictionaries,</span><a class="headerlink" href="#id6" title="Permalink to this table">¶</a></caption>
<colgroup>
<col width="25%" />
<col width="75%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Item</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>len(m)</td>
<td>number of item in m</td>
</tr>
<tr class="row-odd"><td>m[k]</td>
<td>returns value of key k</td>
</tr>
<tr class="row-even"><td>del m[k]</td>
<td>delete key k</td>
</tr>
<tr class="row-odd"><td>k in m</td>
<td>return True if key k exist</td>
</tr>
<tr class="row-even"><td>m.clear()</td>
<td>remove all item from m</td>
</tr>
<tr class="row-odd"><td>m.copy()</td>
<td>make a copy of m</td>
</tr>
<tr class="row-even"><td>m.fromkeys(s, [,val])</td>
<td><p class="first">create a new dictionary with keys from sequnece s.</p>
<p class="last">‘None’ or val (if provided) is filled as values to all keys</p>
</td>
</tr>
<tr class="row-odd"><td>m.get[k, [,msg]]</td>
<td>returns m[k]; if not found return msg.</td>
</tr>
<tr class="row-even"><td>m.items()
m.keys()
m.values()</td>
<td><p class="first">returns items, keys or values</p>
<p class="last">These are return as iterator</p>
</td>
</tr>
<tr class="row-odd"><td>m.pop(k [,msg])</td>
<td>pops m[k] if found; otherwise shows msg if provided, else keyerror</td>
</tr>
<tr class="row-even"><td>m.popitem()</td>
<td>remove one key-value at random</td>
</tr>
<tr class="row-odd"><td>m.setdefault(k [,v])</td>
<td>same as m.get() but set the key with
value None/v, if not found (instead of keyerror)</td>
</tr>
<tr class="row-even"><td>m.update(b)</td>
<td>add all objects of b to m</td>
</tr>
</tbody>
</table>
<ul class="simple">
<li>Some of the examples of commands in <a class="reference internal" href="#opdict"><span class="std std-numref">Table 7.6</span></a> are listed below,</li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">m</span> <span class="o">=</span> <span class="p">{</span> <span class="s1">&#39;name&#39;</span> <span class="p">:</span> <span class="s1">&#39;AA&#39;</span><span class="p">,</span>
<span class="gp">... </span>      <span class="s1">&#39;shares&#39;</span> <span class="p">:</span> <span class="mi">100</span><span class="p">,</span>
<span class="gp">... </span>      <span class="s1">&#39;price&#39;</span> <span class="p">:</span> <span class="mf">300.2</span>
<span class="gp">... </span><span class="p">}</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">m</span><span class="p">)</span>
<span class="go">3</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">m</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]</span>
<span class="go">&#39;AA&#39;</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">m</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;GOOG&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">m</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]</span>
<span class="go">&#39;GOOG&#39;</span>

<span class="gp">&gt;&gt;&gt; </span><span class="k">del</span> <span class="n">m</span><span class="p">[</span><span class="s1">&#39;shares&#39;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">m</span><span class="p">)</span>
<span class="go">2</span>

<span class="gp">&gt;&gt;&gt; </span><span class="s1">&#39;shares&#39;</span> <span class="ow">in</span> <span class="n">m</span>
<span class="go">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="s1">&#39;name&#39;</span> <span class="ow">in</span> <span class="n">m</span>
<span class="go">True</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">m</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">m</span>
<span class="go">{}</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">m</span> <span class="o">=</span> <span class="p">{</span> <span class="s1">&#39;name&#39;</span> <span class="p">:</span> <span class="s1">&#39;Tiger&#39;</span><span class="p">,</span> <span class="s1">&#39;age&#39;</span> <span class="p">:</span> <span class="mi">14</span> <span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">m</span>
<span class="go">{&#39;name&#39;: &#39;Tiger&#39;, &#39;age&#39;: 14}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c</span> <span class="o">=</span> <span class="n">m</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c</span>
<span class="go">{&#39;name&#39;: &#39;Tiger&#39;, &#39;age&#39;: 14}</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">stock</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="s1">&#39;shares&#39;</span><span class="p">,</span> <span class="s1">&#39;price&#39;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">n</span><span class="o">=</span><span class="p">{}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">n</span><span class="o">.</span><span class="n">fromkeys</span><span class="p">(</span><span class="n">stock</span><span class="p">)</span>
<span class="go">{&#39;name&#39;: None, &#39;shares&#39;: None, &#39;price&#39;: None}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">n</span>   <span class="c1"># note that results are not stored in n</span>
<span class="go">{}</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">o</span><span class="o">=</span><span class="p">{}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">o</span> <span class="o">=</span> <span class="n">o</span><span class="o">.</span><span class="n">fromkeys</span><span class="p">(</span><span class="n">stock</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">o</span>
<span class="go">{&#39;name&#39;: 0, &#39;shares&#39;: 0, &#39;price&#39;: 0}</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">o</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">)</span>
<span class="go"> 0</span>
<span class="go"> &gt;&gt;&gt; o.get(&#39;rise&#39;, 3)</span>
<span class="go"> 3</span>
<span class="go"> &gt;&gt;&gt; o.get(&#39;name&#39;, 3)</span>
<span class="go"> 0</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">o</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">&#39;price&#39;</span><span class="p">)</span>
<span class="go">0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">o</span>
<span class="go">{&#39;name&#39;: 0, &#39;shares&#39;: 0}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">o</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">&#39;price&#39;</span><span class="p">,</span> <span class="s1">&#39;not found&#39;</span><span class="p">)</span>
<span class="go">&#39;not found&#39;</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">m</span>
<span class="go">{&#39;name&#39;: &#39;AA&#39;, &#39;shares&#39;: 100}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">m</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="s1">&#39;price&#39;</span><span class="p">,</span> <span class="mf">200.3</span><span class="p">)</span>
<span class="go">200.3</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">m</span>
<span class="go">{&#39;name&#39;: &#39;AA&#39;, &#39;shares&#39;: 100, &#39;price&#39;: 200.3}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">m</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="s1">&#39;shares&#39;</span><span class="p">,</span> <span class="mi">80</span><span class="p">)</span>
<span class="go">100</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">m</span>
<span class="go">{&#39;name&#39;: &#39;AA&#39;, &#39;shares&#39;: 100, &#39;price&#39;: 200.3}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">m</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">)</span>
<span class="go">&#39;AA&#39;</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span><span class="o">=</span> <span class="p">{</span><span class="s1">&#39;rise&#39;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span> <span class="s1">&#39;fall&#39;</span><span class="p">:</span><span class="mi">0</span><span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">m</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">m</span>
<span class="go">{&#39;rise&#39;: 10, &#39;name&#39;: &#39;AA&#39;, &#39;fall&#39;: 0, &#39;shares&#39;: 100, &#39;price&#39;: 200.3}</span>
<span class="go">&gt;&gt;&gt;</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>m.items(), m.keys() and m.values() returns the result as iterator, which can be changed into list using ‘list()’ method,</p>
<div class="last highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">m</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;AA&#39;</span><span class="p">,</span> <span class="s1">&#39;shares&#39;</span><span class="p">:</span><span class="mi">100</span><span class="p">,</span> <span class="s1">&#39;value&#39;</span><span class="p">:</span><span class="mf">200.2</span><span class="p">}</span>
<span class="go"> &gt;&gt;&gt; m</span>
<span class="go"> {&#39;name&#39;: &#39;AA&#39;, &#39;shares&#39;: 100, &#39;value&#39;: 200.2}</span>

<span class="go"> &gt;&gt;&gt; i = m.items()</span>
<span class="go"> &gt;&gt;&gt; i</span>
<span class="go"> dict_items([(&#39;name&#39;, &#39;AA&#39;), (&#39;shares&#39;, 100), (&#39;value&#39;, 200.2)])</span>

<span class="go"> &gt;&gt;&gt; i = list(i)</span>
<span class="go"> &gt;&gt;&gt; i</span>
<span class="go"> [(&#39;name&#39;, &#39;AA&#39;), (&#39;shares&#39;, 100), (&#39;value&#39;, 200.2)]</span>

<span class="go"> &gt;&gt;&gt; v = list(m.values())</span>
<span class="go"> &gt;&gt;&gt; v</span>
<span class="go"> [&#39;AA&#39;, 100, 200.2]</span>
<span class="go"> &gt;&gt;&gt;</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="set-types">
<span id="index-11"></span><h4>Set types<a class="headerlink" href="#set-types" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li>Set is an unordered  collection of unique items.</li>
<li>Unlike sequences, set does not provide indexing.</li>
<li>Unlike dictionary, set does not provide key associated with values.</li>
<li>The items placed in the set must be immutable e.g. list can not be saved in set as shown below,</li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">s</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">type</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
<span class="go">&lt;class &#39;set&#39;&gt;</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">s</span><span class="o">.</span><span class="n">add</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span>    <span class="c1">#  mutable objects e.g. list can not be saved in set</span>
<span class="gt">Traceback (most recent call last):</span>
  File <span class="nb">&quot;&lt;stdin&gt;&quot;</span>, line <span class="m">1</span>, in <span class="n">&lt;module&gt;</span>
<span class="gr">TypeError</span>: <span class="n">unhashable type: &#39;list&#39;</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">s</span><span class="o">.</span><span class="n">add</span><span class="p">((</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">))</span>   <span class="c1"># immutable objects e.g.tuple can be saved in set</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">s</span>
<span class="go">{(1, 2, 3)}</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">s</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">s</span>
<span class="go">{5, (1, 2, 3)}</span>
<span class="go">&gt;&gt;&gt;</span>
</pre></div>
</div>
<ul class="simple">
<li>Sets are of two types i.e. ‘set’ and ‘frozenset’. Above codes are the example of set, which is mutable in nature; whereas ‘frozenset’ is immutable i.e. add operation can not be performed on frozenset.</li>
</ul>
<p><a class="reference internal" href="#opsets"><span class="std std-numref">Table 7.7</span></a> shows various operations that can be performed on both sets and frozensets,</p>
<span id="opsets"></span><table border="1" class="docutils" id="id7">
<caption><span class="caption-text">Methods and operations for Set types</span><a class="headerlink" href="#id7" title="Permalink to this table">¶</a></caption>
<colgroup>
<col width="28%" />
<col width="72%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Item</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>len(s)</td>
<td>total number of items in s</td>
</tr>
<tr class="row-odd"><td>s.copy()</td>
<td>makes a copy of s</td>
</tr>
<tr class="row-even"><td>s.difference(t)</td>
<td><p class="first">return items in s but not in t.</p>
<p class="last">The ‘t’ can be any iterator e.g. list, tuple or set</p>
</td>
</tr>
<tr class="row-odd"><td>s.intersection(t)</td>
<td>returns common in both s and t</td>
</tr>
<tr class="row-even"><td>s.isdisjoint(t)</td>
<td>returns ‘True’ if nothingis common in s and t</td>
</tr>
<tr class="row-odd"><td>s.isubset(t)</td>
<td>returns ‘True’ if s is subset of t</td>
</tr>
<tr class="row-even"><td>s.issuperset(t)</td>
<td>returns ‘True’ is s is superset of t</td>
</tr>
<tr class="row-odd"><td>s.symmetric_difference(t)</td>
<td>returns all the items from s and t, which are not common in s and t</td>
</tr>
<tr class="row-even"><td>s.union(t)</td>
<td>returns all items from s and t</td>
</tr>
</tbody>
</table>
<ul class="simple">
<li>Some of the operations of <a class="reference internal" href="#opsets"><span class="std std-numref">Table 7.7</span></a> are shown below,</li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="p">]</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">s</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">a</span><span class="p">)</span> <span class="c1"># change &#39;a&#39; to set</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">s</span>  <span class="c1"># duplicate entries are removed</span>
<span class="go">{1, 2, 3, 4, 5}</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">t</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">s</span><span class="o">.</span><span class="n">difference</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
<span class="go">{4, 5}</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">t</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">s</span><span class="o">.</span><span class="n">difference</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
<span class="go">{4, 5}</span>
<span class="go">&gt;&gt;&gt;</span>
</pre></div>
</div>
<ul class="simple">
<li>Mutable sets provides some additional methods as shown in <a class="reference internal" href="#opmutableset"><span class="std std-numref">Table 7.8</span></a>. Operation on this table will update the set after execution of the commands.</li>
</ul>
<span id="opmutableset"></span><table border="1" class="docutils" id="id8">
<caption><span class="caption-text">Methods for mutable set type</span><a class="headerlink" href="#id8" title="Permalink to this table">¶</a></caption>
<colgroup>
<col width="40%" />
<col width="60%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Item</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>s.add(item)</td>
<td>add item to s</td>
</tr>
<tr class="row-odd"><td>s.clear()</td>
<td>remove all items from s</td>
</tr>
<tr class="row-even"><td>s.difference_update(t)</td>
<td>remvoes all items from s, which are in t</td>
</tr>
<tr class="row-odd"><td>s.discard(item)</td>
<td>remove item form s. No error if item not present</td>
</tr>
<tr class="row-even"><td>s.intersection_update</td>
<td>computes the intersetion of s and t</td>
</tr>
<tr class="row-odd"><td>s.pop()</td>
<td>remove an element from s</td>
</tr>
<tr class="row-even"><td>s.remove(item)</td>
<td>remove item from s. If not found, raise keyerror</td>
</tr>
<tr class="row-odd"><td>s.symmetric_difference_update(t)</td>
<td>save uncommon entries in s and t to s</td>
</tr>
<tr class="row-even"><td>s.update(t)</td>
<td>add all entries of iterator ‘t’ to s</td>
</tr>
</tbody>
</table>
<ul class="simple">
<li>Some of the operations of <a class="reference internal" href="#opmutableset"><span class="std std-numref">Table 7.8</span></a> are shown below,</li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">s</span> <span class="o">=</span> <span class="p">{</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">t</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">12</span><span class="p">]</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">s</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="mi">9</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">s</span>
<span class="go">{1, 2, 3, 4, 5, 9}</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">s</span><span class="o">.</span><span class="n">symmetric_difference_update</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">s</span>
<span class="go">{4, 5, 9, 11, 12}</span>
<span class="go">&gt;&gt;&gt;</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="builtin-types-for-representing-program-structure">
<span id="index-12"></span><h3>Builtin types for representing program structure<a class="headerlink" href="#builtin-types-for-representing-program-structure" title="Permalink to this headline">¶</a></h3>
<p>Everything in python is the object including functions, classes and modules. Therefore functions, classes and modules can be manipulated as data. <a class="reference internal" href="#builtinprogstruct"><span class="std std-numref">Table 7.9</span></a> shows various types that are used to represent various element of a program itself,</p>
<span id="builtinprogstruct"></span><table border="1" class="docutils" id="id9">
<caption><span class="caption-text">Builtin types for program structure</span><a class="headerlink" href="#id9" title="Permalink to this table">¶</a></caption>
<colgroup>
<col width="19%" />
<col width="35%" />
<col width="45%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Type category</th>
<th class="head">Type name</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Callable</td>
<td>types.BuiltinFunctionType</td>
<td>builtin function or method</td>
</tr>
<tr class="row-odd"><td>&#160;</td>
<td>type</td>
<td>type of builtin types and classes</td>
</tr>
<tr class="row-even"><td>&#160;</td>
<td>object</td>
<td>Ancestor of all types and classes</td>
</tr>
<tr class="row-odd"><td>&#160;</td>
<td>types.FunctionType</td>
<td>user defined funtions</td>
</tr>
<tr class="row-even"><td>&#160;</td>
<td>types.MethodType</td>
<td>class method</td>
</tr>
<tr class="row-odd"><td>Modules</td>
<td>types.ModuleType</td>
<td>Module</td>
</tr>
<tr class="row-even"><td>Classes</td>
<td>object</td>
<td>Ancestor of all types and classes</td>
</tr>
<tr class="row-odd"><td>Types</td>
<td>type</td>
<td>Type of builtin types and classes</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">In <a class="reference internal" href="#builtinprogstruct"><span class="std std-numref">Table 7.9</span></a>, ‘object’ and ‘type’ are appeared twices because ‘classes’ and ‘types’ are callable as function.</p>
</div>
<div class="section" id="callable-types">
<span id="index-13"></span><h4>Callable types<a class="headerlink" href="#callable-types" title="Permalink to this headline">¶</a></h4>
<p>Callable types represent objects which can be called as function e.g. builtin functions, user-define functions, instance method and classes etc.</p>
<div class="section" id="user-defined-functions">
<span id="index-14"></span><h5>User-defined functions<a class="headerlink" href="#user-defined-functions" title="Permalink to this headline">¶</a></h5>
<p>User-defined functions are callable functions that are created at module level by using ‘def’ statement or with ‘lambda’ operator, as shown below,</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">add2Num</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">return</span><span class="p">(</span><span class="n">x</span><span class="o">+</span><span class="n">y</span><span class="p">)</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">diff2Num</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="n">x</span><span class="o">-</span><span class="n">y</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">add2Num</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="go">5</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">diff2Num</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="go">1</span>
<span class="go">&gt;&gt;&gt;</span>
</pre></div>
</div>
<ul class="simple">
<li>Various attributes of user-defined functions are shown in <a class="reference internal" href="#user-defined-attributes"><span class="std std-numref">Table 7.10</span></a>,</li>
</ul>
<span id="user-defined-attributes"></span><table border="1" class="docutils" id="id10">
<caption><span class="caption-text">Attributes for user-defined function ‘f’</span><a class="headerlink" href="#id10" title="Permalink to this table">¶</a></caption>
<colgroup>
<col width="25%" />
<col width="75%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Attributes</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>f.__doc__</td>
<td>documentation string</td>
</tr>
<tr class="row-odd"><td>f.__name__</td>
<td>function name</td>
</tr>
<tr class="row-even"><td>f.__dict__</td>
<td>dictionary containing function attributes</td>
</tr>
<tr class="row-odd"><td>f.__code__</td>
<td>byte-compiled code</td>
</tr>
<tr class="row-even"><td>f.__defaults__</td>
<td>tuple containing default arguments</td>
</tr>
<tr class="row-odd"><td>f.__globals__</td>
<td>dictionary defining the global namespace</td>
</tr>
<tr class="row-even"><td>f.__closure__</td>
<td>tuple containing data related to nested scope</td>
</tr>
</tbody>
</table>
<ul class="simple">
<li>Some of the operations of <a class="reference internal" href="#user-defined-attributes"><span class="std std-numref">Table 7.10</span></a> are shown below,</li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">mathEx</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
<span class="gp">... </span>    <span class="sd">&quot;&quot;&quot; calculate (a+b)*x &quot;&quot;&quot;</span>
<span class="gp">... </span>    <span class="k">global</span> <span class="n">x</span>
<span class="gp">... </span>    <span class="n">c</span> <span class="o">=</span> <span class="p">(</span><span class="n">a</span> <span class="o">+</span> <span class="n">b</span><span class="p">)</span> <span class="o">*</span> <span class="n">x</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="n">c</span>
<span class="gp">...</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">mathEx</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
<span class="go">18</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">mathEx</span><span class="o">.</span><span class="vm">__doc__</span>
<span class="go">&#39; calculate (a+b)*x &#39;</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">mathEx</span><span class="o">.</span><span class="vm">__globals__</span>
<span class="go">{&#39;__loader__&#39;: &lt;class &#39;_frozen_importlib.BuiltinImporter&#39;&gt;,</span>
<span class="go">&#39;__builtins__&#39;: &lt;module &#39;builtins&#39; (built-in)&gt;,</span>
<span class="go">&#39;__spec__&#39;: None, &#39;__package__&#39;: None,</span>
<span class="go">&#39;__name__&#39;: &#39;__main__&#39;,</span>
<span class="go">&#39;x&#39;: 3, &#39;mathEx&#39;: &lt;function mathEx at 0xb70577c4&gt;,</span>
<span class="go">&#39;__doc__&#39;: None}</span>
<span class="go">&gt;&gt;&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="methods">
<h5>Methods<a class="headerlink" href="#methods" title="Permalink to this headline">¶</a></h5>
<p>Methods are the functions that are defined inside the class. There are three types of methods i.e. instance method, class method and static method. Following is an example of all three methods,</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">class</span> <span class="nc">Spam</span><span class="p">():</span>
<span class="gp">... </span>    <span class="n">num</span> <span class="o">=</span> <span class="mi">10</span>   <span class="c1"># class variable</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">num</span> <span class="o">=</span> <span class="mi">3</span><span class="p">):</span>
<span class="gp">... </span>            <span class="bp">self</span><span class="o">.</span><span class="n">num</span> <span class="o">=</span> <span class="n">num</span>
<span class="gp">...</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="nf">imethod</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>  <span class="c1"># print instance variable</span>
<span class="gp">... </span>            <span class="k">print</span><span class="p">(</span><span class="s2">&quot;imethod &quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">num</span><span class="p">)</span>
<span class="gp">...</span>
<span class="gp">... </span>    <span class="nd">@classmethod</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="nf">cmethod</span><span class="p">(</span><span class="bp">cls</span><span class="p">):</span>  <span class="c1"># print class variable</span>
<span class="gp">... </span>            <span class="k">print</span><span class="p">(</span><span class="s2">&quot;cmethod &quot;</span><span class="p">,</span> <span class="bp">cls</span><span class="o">.</span><span class="n">num</span><span class="p">)</span>
<span class="gp">...</span>
<span class="gp">... </span>    <span class="nd">@staticmethod</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="nf">smethod</span><span class="p">(</span><span class="n">num</span><span class="p">):</span>  <span class="c1"># print variable defined in the file</span>
<span class="gp">... </span>            <span class="k">print</span><span class="p">(</span><span class="s2">&quot;smethod &quot;</span><span class="p">,</span> <span class="n">num</span><span class="p">)</span>


<span class="gp">&gt;&gt;&gt; </span><span class="n">s</span> <span class="o">=</span> <span class="n">Spam</span><span class="p">()</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">s</span><span class="o">.</span><span class="n">imethod</span><span class="p">()</span>
<span class="go">imethod  3</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">s</span><span class="o">.</span><span class="n">cmethod</span><span class="p">()</span>
<span class="go">cmethod  10</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">num</span> <span class="o">=</span> <span class="o">-</span><span class="mi">40</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">s</span><span class="o">.</span><span class="n">smethod</span><span class="p">()</span>
<span class="go">smethod  -40</span>
</pre></div>
</div>
<ul class="simple">
<li>Note that, calling a function a two step process as shown below.</li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">i</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">imethod</span>    <span class="c1"># i is method</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">type</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
<span class="go">&lt;class &#39;method&#39;&gt;</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">i</span><span class="p">()</span>              <span class="c1"># make function call using ()</span>
<span class="go">imethod  3</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">iu</span> <span class="o">=</span> <span class="n">Spam</span><span class="o">.</span><span class="n">imethod</span>   <span class="c1"># function (not method)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">type</span><span class="p">(</span><span class="n">iu</span><span class="p">)</span>
<span class="go">&lt;class &#39;function&#39;&gt;</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">iu</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>         <span class="c1"># instance of the class must be passed in function</span>
<span class="go">imethod  3</span>

<span class="gp">&gt;&gt;&gt; </span><span class="nb">type</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>             <span class="c1"># instance-method is &#39;method</span>
<span class="go">&lt;class &#39;method&#39;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">type</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>             <span class="c1"># classmethod is &#39;method&#39;</span>
<span class="go">&lt;class &#39;method&#39;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">type</span><span class="p">(</span><span class="n">l</span><span class="p">)</span>             <span class="c1"># staticmethod is &#39;function&#39;</span>
<span class="go">&lt;class &#39;function&#39;&gt;</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">c</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">cmethod</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c</span><span class="p">()</span>
<span class="go">cmethod  10</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">l</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">smethod</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">l</span><span class="p">()</span>
<span class="go">smethod  -40</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cu</span> <span class="o">=</span> <span class="n">Spam</span><span class="o">.</span><span class="n">cmethod</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cu</span><span class="p">()</span>
<span class="go">cmethod  10</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lu</span> <span class="o">=</span> <span class="n">Spam</span><span class="o">.</span><span class="n">smethod</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lu</span><span class="p">()</span>
<span class="go">smethod  -40</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Method (s.imethod) is a callable object that wraps both a function and the associated instance. When we call the method, the instance is passed to the method as the first parameter (self); but does not invoked teh function call operator. Then, () can be used to invoke the function call as shown in above example; whereas, the function (Spam.imethod) wraps only method function (not the instance), therefore instance need to passed explicitly.</p>
</div>
<p><a class="reference internal" href="#attmethods"><span class="std std-numref">Table 7.11</span></a> shows the attributes available for the method-objects,</p>
<span id="attmethods"></span><table border="1" class="docutils" id="id11">
<caption><span class="caption-text">Attributes for the methods</span><a class="headerlink" href="#id11" title="Permalink to this table">¶</a></caption>
<colgroup>
<col width="19%" />
<col width="81%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Attributes</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>m.__doc__</td>
<td>documentation string</td>
</tr>
<tr class="row-odd"><td>m.__name__</td>
<td>method name</td>
</tr>
<tr class="row-even"><td>m.__class__</td>
<td>name of the class where method is defined</td>
</tr>
<tr class="row-odd"><td>m.__func__</td>
<td>function object implementing the method</td>
</tr>
<tr class="row-even"><td>m.__self__</td>
<td>instance associated with the method (None if unbound</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="classes-and-instances-are-callable">
<h5>Classes and instances are callable<a class="headerlink" href="#classes-and-instances-are-callable" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li>Class objects and instances operate as callable objects. A class object is created by the ‘class’ statement and is called as function in order to create a new instance. The arguments passed in the to the function are passed to __init__() method, which initialize the newly created instance.</li>
<li>An instance can emulate the function if it defines the special method __call__(). If a method is defined for an instance ‘f’, then f.methodname(args) actually invokes the method f.methodname.__call__(args).</li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">class</span> <span class="nc">Foo</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">val</span><span class="p">):</span>
<span class="gp">... </span>            <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span>  <span class="n">val</span>
<span class="gp">...</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="nf">addValue</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">num</span><span class="p">):</span>
<span class="gp">... </span>            <span class="k">print</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="o">+</span> <span class="n">num</span><span class="p">)</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span> <span class="o">=</span> <span class="n">Foo</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>      <span class="c1"># class is called as function to create new instance</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span><span class="o">.</span><span class="n">addValue</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
<span class="go">7</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span><span class="o">.</span><span class="n">addValue</span><span class="o">.</span><span class="fm">__call__</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<span class="go">8</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">i</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">addValue</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">i</span><span class="o">.</span><span class="fm">__call__</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="go">6</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="class-types-and-instances">
<h4>Class, types and instances<a class="headerlink" href="#class-types-and-instances" title="Permalink to this headline">¶</a></h4>
<p>When we define a class, then the class definition produces an object of type ‘type’, as shown below. <a class="reference internal" href="#attclass"><span class="std std-numref">Table 7.12</span></a> shows the various attributes available for the class,</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">class</span> <span class="nc">Foo</span><span class="p">():</span>
<span class="gp">... </span>    <span class="k">pass</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">type</span><span class="p">(</span><span class="n">Foo</span><span class="p">)</span>
<span class="go">&lt;class &#39;type&#39;&gt;</span>
<span class="go">&gt;&gt;&gt;</span>
</pre></div>
</div>
<span id="attclass"></span><table border="1" class="docutils" id="id12">
<caption><span class="caption-text">Class attributes</span><a class="headerlink" href="#id12" title="Permalink to this table">¶</a></caption>
<colgroup>
<col width="31%" />
<col width="69%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Attributes</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>t.__doc__</td>
<td>documentation string</td>
</tr>
<tr class="row-odd"><td>t.__name__</td>
<td>class name</td>
</tr>
<tr class="row-even"><td>t.__bases__</td>
<td>tuple of base classes</td>
</tr>
<tr class="row-odd"><td>t.__dict__</td>
<td>dictionary holding the class methods and variables</td>
</tr>
<tr class="row-even"><td>t.__module__</td>
<td>module name in which the class is defined</td>
</tr>
<tr class="row-odd"><td>t.__abstractmethods__</td>
<td>set of abstract method names</td>
</tr>
</tbody>
</table>
<p>The instance of the class has some special attributes a shown in <a class="reference internal" href="#insatt"><span class="std std-numref">Table 7.13</span></a>,</p>
<span id="insatt"></span><table border="1" class="docutils" id="id13">
<caption><span class="caption-text">Instance attributes</span><a class="headerlink" href="#id13" title="Permalink to this table">¶</a></caption>
<colgroup>
<col width="25%" />
<col width="75%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Attributes</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>i.__class__</td>
<td>name of the class for instance</td>
</tr>
<tr class="row-odd"><td>i.__dict__</td>
<td>dictionary holding the instance data</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The __dict__ attribute is normally where all the data associated with an instance is stored. However this behaviour can be changed by using __slots__ , which is a more efficient way for handling the large number of instances. In that case, __dict__ attribute will not be available for the instance.</p>
</div>
</div>
<div class="section" id="modules">
<h4>Modules<a class="headerlink" href="#modules" title="Permalink to this headline">¶</a></h4>
<p>Module type is a container that holds object loaded with ‘import’ statement. Whenever an attribute of the module is references, then corresponding dictionary is invoked e.g. m.x invokes m.__dict__[‘x’]. <a class="reference internal" href="#attmodule"><span class="std std-numref">Table 7.14</span></a> shows the various attributes available for module.</p>
<span id="attmodule"></span><table border="1" class="docutils" id="id14">
<caption><span class="caption-text">Module attributes</span><a class="headerlink" href="#id14" title="Permalink to this table">¶</a></caption>
<colgroup>
<col width="26%" />
<col width="74%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Attributes</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>m.__dict__</td>
<td>dictionary associated with module</td>
</tr>
<tr class="row-odd"><td>m.__doc__</td>
<td>documenatation string</td>
</tr>
<tr class="row-even"><td>m.__name__</td>
<td>name of module</td>
</tr>
<tr class="row-odd"><td>m.__file__</td>
<td>file from which module is loaded</td>
</tr>
<tr class="row-even"><td>m.__path__</td>
<td>fully qualified package name</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="special-methods">
<span id="index-15"></span><h3>Special methods<a class="headerlink" href="#special-methods" title="Permalink to this headline">¶</a></h3>
<p>In this section, various special method are listed which handle different situations.</p>
<div class="section" id="object-creation-and-destruction">
<h4>Object creation and destruction<a class="headerlink" href="#object-creation-and-destruction" title="Permalink to this headline">¶</a></h4>
<p><a class="reference internal" href="#objcreatedel"><span class="std std-numref">Table 7.15</span></a> shows three methods which are used to create and delete the objects.</p>
<span id="objcreatedel"></span><table border="1" class="docutils" id="id15">
<caption><span class="caption-text">Object creation and destruction</span><a class="headerlink" href="#id15" title="Permalink to this table">¶</a></caption>
<colgroup>
<col width="51%" />
<col width="49%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Method</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>__new__(cls [,*args [,**kwargs]])</td>
<td>called to create a new object</td>
</tr>
<tr class="row-odd"><td>__init__(self, [,*args [,**kwargs]])</td>
<td>called to initialize a new instance</td>
</tr>
<tr class="row-even"><td>__del__(self)</td>
<td>called to delete an instance</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="string-representation">
<h4>String representation<a class="headerlink" href="#string-representation" title="Permalink to this headline">¶</a></h4>
<p><a class="reference internal" href="#strrepresent"><span class="std std-numref">Table 7.16</span></a> shows three methods which are used with string objects,</p>
<span id="strrepresent"></span><table border="1" class="docutils" id="id16">
<caption><span class="caption-text">String representation</span><a class="headerlink" href="#id16" title="Permalink to this table">¶</a></caption>
<colgroup>
<col width="40%" />
<col width="60%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Method</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>__format__(self, format_spec)</td>
<td>creates a formatted string</td>
</tr>
<tr class="row-odd"><td>__repr__(self)</td>
<td>creates a string representation of an object</td>
</tr>
<tr class="row-even"><td>__str__(self)</td>
<td>create a simple string representation</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="type-checking">
<h4>Type checking<a class="headerlink" href="#type-checking" title="Permalink to this headline">¶</a></h4>
<p><a class="reference internal" href="#typecheck"><span class="std std-numref">Table 7.17</span></a> shows two methods which are used for type checking,</p>
<span id="typecheck"></span><table border="1" class="docutils" id="id17">
<caption><span class="caption-text">Type checking</span><a class="headerlink" href="#id17" title="Permalink to this table">¶</a></caption>
<colgroup>
<col width="56%" />
<col width="44%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Method</th>
<th class="head">Result</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>__instancecheck__(cls, object)</td>
<td>isinstance(object, cls)</td>
</tr>
<tr class="row-odd"><td>__subclasscheck__(cls, sub)</td>
<td>issubclass(sub, cls)</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="attribute-access">
<h4>Attribute access<a class="headerlink" href="#attribute-access" title="Permalink to this headline">¶</a></h4>
<p><a class="reference internal" href="#attaccess"><span class="std std-numref">Table 7.18</span></a> shows the methods which are used to access the attribute using dot operator</p>
<span id="attaccess"></span><table border="1" class="docutils" id="id18">
<caption><span class="caption-text">Attribute access</span><a class="headerlink" href="#id18" title="Permalink to this table">¶</a></caption>
<colgroup>
<col width="26%" />
<col width="74%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Method</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>__getattribute__(self, name)</td>
<td>returns attribute self.name</td>
</tr>
<tr class="row-odd"><td>__getattr__(self, name)</td>
<td>returns attribute self.name if not found through normal attribute lookup or raise error</td>
</tr>
<tr class="row-even"><td>__setattr__(self, name, value)</td>
<td>sets value of the attribute</td>
</tr>
<tr class="row-odd"><td>__delattr__(self, name)</td>
<td>delete the attribute</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Whenever an attribute is accessed, then __getattribute__ is invoked. If attribute is not found, then __getattr__ is invoked. The, default behavior of __getattr__ is to raise ‘AttributeError’.</p>
</div>
</div>
<div class="section" id="descriptors">
<h4>Descriptors<a class="headerlink" href="#descriptors" title="Permalink to this headline">¶</a></h4>
<p>A subtle aspect of attribute manipulation is that sometimes the attributes of an object are wrapped with an extra layer of logic with get, set and delete operations. This can be achieved with descriptors with three options which are listed in <a class="reference internal" href="#methoddescriptor"><span class="std std-numref">Table 7.19</span></a>.</p>
<p><a class="reference internal" href="#attaccess"><span class="std std-numref">Table 7.18</span></a> shows the methods which are used to</p>
<span id="methoddescriptor"></span><table border="1" class="docutils" id="id19">
<caption><span class="caption-text">Special methods for Descriptor objects</span><a class="headerlink" href="#id19" title="Permalink to this table">¶</a></caption>
<colgroup>
<col width="43%" />
<col width="57%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Method</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>__get__(self, instance, cls)</td>
<td>return the attribute value or raise error</td>
</tr>
<tr class="row-odd"><td>__set__(self, instance, value)</td>
<td>set the attribute to value</td>
</tr>
<tr class="row-even"><td>__delete__(self, instance)</td>
<td>delete the attribute</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="sequence-and-mapping-methods">
<h4>Sequence and mapping methods<a class="headerlink" href="#sequence-and-mapping-methods" title="Permalink to this headline">¶</a></h4>
<p><a class="reference internal" href="#seqmapmethod"><span class="std std-numref">Table 7.20</span></a> shows the methods which are used to emulate the sequences and mapping objects</p>
<span id="seqmapmethod"></span><table border="1" class="docutils" id="id20">
<caption><span class="caption-text">Methods for sequences and mappings</span><a class="headerlink" href="#id20" title="Permalink to this table">¶</a></caption>
<colgroup>
<col width="48%" />
<col width="52%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Method</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>__len__(self)</td>
<td>returns length of self</td>
</tr>
<tr class="row-odd"><td>__getitem__(self, key)</td>
<td>returns self[key]</td>
</tr>
<tr class="row-even"><td>__setitem__(self, key, value</td>
<td>sets self[key]=value</td>
</tr>
<tr class="row-odd"><td>__delitem__(self, key)</td>
<td>deletes self[key]</td>
</tr>
<tr class="row-even"><td>__contains__(self, obj)</td>
<td>returns True if obj is in self</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="iteration">
<span id="index-16"></span><h4>Iteration<a class="headerlink" href="#iteration" title="Permalink to this headline">¶</a></h4>
<p><a class="reference internal" href="#itermethod"><span class="std std-numref">Table 7.21</span></a> shows the methods which are used with iterators. Further, following example is added for better understanding of the table,</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">y</span> <span class="o">=</span> <span class="n">x</span><span class="o">.</span><span class="fm">__iter__</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">y</span><span class="o">.</span><span class="n">__next__</span><span class="p">()</span>
<span class="go">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">y</span><span class="o">.</span><span class="n">__next__</span><span class="p">()</span>
<span class="go">2</span>
<span class="go">&gt;&gt;&gt;</span>

<span class="gp">&gt;&gt;&gt; </span><span class="c1"># complete code for iteration</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">y</span> <span class="o">=</span> <span class="n">x</span><span class="o">.</span><span class="fm">__iter__</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">while</span> <span class="mi">1</span><span class="p">:</span>
<span class="gp">... </span>    <span class="k">try</span><span class="p">:</span>
<span class="gp">... </span>        <span class="k">print</span><span class="p">(</span><span class="n">y</span><span class="o">.</span><span class="n">__next__</span><span class="p">(),</span> <span class="n">end</span><span class="o">=</span><span class="s2">&quot;, &quot;</span><span class="p">)</span>
<span class="gp">... </span>    <span class="k">except</span> <span class="ne">StopIteration</span><span class="p">:</span>
<span class="gp">... </span>        <span class="k">break</span>
<span class="gp">...</span>

<span class="go">1, 2, 3, 4, 5, 6,    # outputs</span>
</pre></div>
</div>
<span id="itermethod"></span><table border="1" class="docutils" id="id21">
<caption><span class="caption-text">Method for iterator</span><a class="headerlink" href="#id21" title="Permalink to this table">¶</a></caption>
<colgroup>
<col width="24%" />
<col width="76%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Method</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>obj.__iter__()</td>
<td>returns the iterator object</td>
</tr>
<tr class="row-odd"><td>iter.__next__()</td>
<td>return the next object or raise StopIteration error</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="callable-interface">
<span id="index-17"></span><h4>Callable interface<a class="headerlink" href="#callable-interface" title="Permalink to this headline">¶</a></h4>
<p>An instance can be used as function if the class method contains __call__ method,</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">class</span> <span class="nc">Foo</span><span class="p">:</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">num</span><span class="p">):</span>
<span class="gp">... </span>        <span class="bp">self</span><span class="o">.</span><span class="n">num</span> <span class="o">=</span> <span class="n">num</span>
<span class="gp">...</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="fm">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">greeting</span><span class="p">):</span>
<span class="gp">... </span>        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;{}, The name of the class is &#39;{}&#39;&quot;</span>
<span class="gp">... </span>              <span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">greeting</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">))</span>
<span class="gp">...</span>
<span class="go">&gt;&gt;&gt;</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span> <span class="o">=</span> <span class="n">Foo</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span><span class="p">(</span><span class="s1">&#39;Hello&#39;</span><span class="p">)</span>      <span class="c1"># instance is used as function</span>
<span class="go">Hello, The name of the class is &#39;Foo&#39;</span>

<span class="gp">&gt;&gt;&gt; </span><span class="c1">############### another example ##########################</span>

<span class="gp">&gt;&gt;&gt; </span><span class="k">class</span> <span class="nc">Spam</span><span class="p">:</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">a</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
<span class="gp">... </span>        <span class="bp">self</span><span class="o">.</span><span class="n">a</span> <span class="o">=</span> <span class="n">a</span>
<span class="gp">... </span>        <span class="bp">self</span><span class="o">.</span><span class="n">b</span> <span class="o">=</span> <span class="n">b</span>
<span class="gp">...</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="fm">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">a</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mi">20</span><span class="p">):</span>
<span class="gp">... </span>        <span class="bp">self</span><span class="o">.</span><span class="n">a</span> <span class="o">=</span> <span class="n">a</span>
<span class="gp">... </span>        <span class="bp">self</span><span class="o">.</span><span class="n">b</span> <span class="o">=</span> <span class="n">b</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># invoke __init__</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">s</span> <span class="o">=</span> <span class="n">Spam</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span><span class="p">(</span><span class="s2">&quot;__init__ : &quot;</span><span class="p">,</span> <span class="n">s</span><span class="o">.</span><span class="n">a</span><span class="p">,</span> <span class="n">s</span><span class="o">.</span><span class="n">b</span><span class="p">)</span>
<span class="go">__init__ :  0 0</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># invoke __call__</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">s</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span><span class="p">(</span><span class="s2">&quot;__call__ : &quot;</span><span class="p">,</span> <span class="n">s</span><span class="o">.</span><span class="n">a</span><span class="p">,</span> <span class="n">s</span><span class="o">.</span><span class="n">b</span><span class="p">)</span>
<span class="go">__call__ :  1 2</span>
</pre></div>
</div>
</div>
<div class="section" id="context-management-protocol">
<span id="index-18"></span><h4>Context management protocol<a class="headerlink" href="#context-management-protocol" title="Permalink to this headline">¶</a></h4>
<p>The ‘with’ statement allows statements to execute under the control over another object known as “context manager”. The context manager has two methods i.e. __enter__ and __exit__ as shown in <a class="reference internal" href="#contextmanagement"><span class="std std-numref">Table 7.22</span></a>.</p>
<span id="contextmanagement"></span><table border="1" class="docutils" id="id22">
<caption><span class="caption-text">Methods for context management</span><a class="headerlink" href="#id22" title="Permalink to this table">¶</a></caption>
<colgroup>
<col width="27%" />
<col width="73%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Methods</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>__enter__(self)</td>
<td>called when entering a new context</td>
</tr>
<tr class="row-odd"><td>__exit__(self, type, value, tb)</td>
<td>called when leaving the context. If an exception occurred, ‘type’, ‘value’ and ‘tb’ have
the exception type, value and traceback information</td>
</tr>
</tbody>
</table>
<ul class="simple">
<li>Primary use of the context management interface is to allow for simplified resource control on objects involving system state e.g. files, networks connection and database etc. By implementing this interface, an object can safely clean up resources when execution leaves a context in which the object is being used.</li>
</ul>
</div>
<div class="section" id="object-inspection-and-dir">
<h4>Object inspection and dir()<a class="headerlink" href="#object-inspection-and-dir" title="Permalink to this headline">¶</a></h4>
<p>The dir() function is used to inspect the objects, which returns all the attributes of the objects. To provide only useful information about the object, it can be overwritten using __dir__(self) as shown below,</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">class</span> <span class="nc">Spam</span><span class="p">:</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">a</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
<span class="gp">... </span>        <span class="bp">self</span><span class="o">.</span><span class="n">a</span> <span class="o">=</span> <span class="n">a</span>
<span class="gp">... </span>        <span class="bp">self</span><span class="o">.</span><span class="n">b</span> <span class="o">=</span> <span class="n">b</span>
<span class="gp">...</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="fm">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">a</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mi">20</span><span class="p">):</span>
<span class="gp">... </span>        <span class="bp">self</span><span class="o">.</span><span class="n">a</span> <span class="o">=</span> <span class="n">a</span>
<span class="gp">... </span>        <span class="bp">self</span><span class="o">.</span><span class="n">b</span> <span class="o">=</span> <span class="n">b</span>
<span class="gp">...</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="nf">__dir__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="gp">... </span>        <span class="k">return</span> <span class="p">[</span><span class="s1">&#39;__init__&#39;</span><span class="p">,</span> <span class="s1">&#39;__call__&#39;</span><span class="p">,</span> <span class="s1">&#39;add more&#39;</span><span class="p">]</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">s</span> <span class="o">=</span> <span class="n">Spam</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">dir</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
<span class="go">[&#39;__call__&#39;, &#39;__init__&#39;, &#39;add more&#39;]</span>
<span class="go">&gt;&gt;&gt;</span>
</pre></div>
</div>
</div>
</div>
</div>
<span id="document-python/exception"></span><div class="section" id="exception-handling">
<span id="index-0"></span><h2>Exception handling<a class="headerlink" href="#exception-handling" title="Permalink to this headline">¶</a></h2>
<div class="section" id="introduction">
<h3>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h3>
<p>Exception handling is the process of handling the run time error. Error may occur due to missing data and invalid data etc. These error can be catch in the runtime using try-except block and then can be processed according to our need. This chapter presents some of the examples of error handling.</p>
<p>For this first create a new file with missing data in it, as shown below. Here ‘price’ column is empty for Silver,</p>
<div class="highlight-text notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8
9</pre></div></td><td class="code"><div class="highlight"><pre><span></span>$ cat price_missing.csv

date,metal,radius,price,quantity
&quot;2016-06-12&quot;,&quot;Gold&quot;,5.5,80.99,1
<span class="hll">&quot;2015-07-13&quot;,&quot;Silver&quot;,40.3,,3
</span>&quot;2016-01-21&quot;,&quot;Iron&quot;,9.2,14.29,8
&quot;2014-03-23&quot;,&quot;Gold&quot;,8,120.3,2
&quot;2017-09-11&quot;,&quot;Copper&quot;,4.1,70.25,12
&quot;2011-01-20&quot;,&quot;Iron&quot;,3.25,10.99,3
</pre></div>
</td></tr></table></div>
<p>Now try to calculate the total price for this file using ‘ring_cost’ function. A ValueError will be displayed as shown below,</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">price</span> <span class="kn">import</span> <span class="n">ring_cost</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ring_cost</span><span class="p">(</span><span class="s1">&#39;price_missing.csv&#39;</span><span class="p">)</span>
<span class="gt">Traceback (most recent call last):</span>
    <span class="p">[</span><span class="o">...</span><span class="p">]</span>
    <span class="n">row</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="mi">3</span><span class="p">])</span> <span class="c1"># price</span>
<span class="hll"><span class="gr">ValueError</span>: <span class="n">could not convert string to float:</span>
</span></pre></div>
</div>
</div>
<div class="section" id="try-except-block">
<h3>try-except block<a class="headerlink" href="#try-except-block" title="Permalink to this headline">¶</a></h3>
<p>The problem discussed in above section can be solved using try-except block. In this block, the ‘try’ statement can be used to try the string to float/int conversion; and if it fails then ‘except’ block can be used to skip the processing of that particular row, as shown below,</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span> <span class="c1"># price.py</span>

 <span class="kn">import</span> <span class="nn">csv</span>

 <span class="k">def</span> <span class="nf">ring_cost</span><span class="p">(</span><span class="n">filename</span><span class="p">):</span>
     <span class="sd">&#39;&#39;&#39; calculate the total cost &#39;&#39;&#39;</span>

     <span class="n">total_price</span> <span class="o">=</span> <span class="mi">0</span> <span class="c1"># for all items in the list</span>

     <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span> <span class="c1"># open file in read mode</span>
         <span class="n">rows</span> <span class="o">=</span> <span class="n">csv</span><span class="o">.</span><span class="n">reader</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
         <span class="n">header</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="n">rows</span><span class="p">)</span> <span class="c1"># skip line 1 i.e. header</span>
         <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">rows</span><span class="p">:</span>
<span class="hll">             <span class="k">try</span><span class="p">:</span>
</span><span class="hll">                 <span class="n">row</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="mi">3</span><span class="p">])</span> <span class="c1"># price</span>
</span><span class="hll">                 <span class="n">row</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="mi">4</span><span class="p">])</span> <span class="c1"># quantity</span>
</span><span class="hll">             <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span> <span class="c1"># process ValueError only</span>
</span><span class="hll">                 <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Invalid data, row is skipped&quot;</span><span class="p">)</span>
</span><span class="hll">                 <span class="k">continue</span>
</span>             <span class="n">total_price</span> <span class="o">+=</span> <span class="n">row</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">*</span> <span class="n">row</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span>

     <span class="c1"># print(&quot;Total price = %10.2f&quot; % total_price)</span>
     <span class="k">return</span> <span class="n">total_price</span>  <span class="c1"># return total_price</span>

 <span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
     <span class="n">total</span> <span class="o">=</span> <span class="n">ring_cost</span><span class="p">(</span><span class="s1">&#39;price.csv&#39;</span><span class="p">)</span>  <span class="c1"># function call</span>
     <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Total price = </span><span class="si">%10.2f</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">total</span><span class="p">)</span> <span class="c1"># print value</span>

 <span class="c1"># standard boilerplate</span>
 <span class="c1"># main is the starting function</span>
 <span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
     <span class="n">main</span><span class="p">()</span>
</pre></div>
</div>
<p>Now process the file again and the processing will skip the invalid line and display the total price.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">price</span> <span class="kn">import</span> <span class="n">ring_cost</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ring_cost</span><span class="p">(</span><span class="s1">&#39;price_missing.csv&#39;</span><span class="p">)</span>
<span class="go">Invalid data, row is skipped</span>
<span class="go">1311.8799999999999</span>
</pre></div>
</div>
</div>
<div class="section" id="report-error">
<h3>Report error<a class="headerlink" href="#report-error" title="Permalink to this headline">¶</a></h3>
<p>In previous section, the invalid data was ignored and a message was printed. But it is better give some details about the error as well, which is discussed in this section.</p>
<div class="section" id="type-of-error">
<h4>Type of error<a class="headerlink" href="#type-of-error" title="Permalink to this headline">¶</a></h4>
<p>In the below code, the type of the error is printed on the screen.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># price.py</span>

<span class="kn">import</span> <span class="nn">csv</span>

<span class="k">def</span> <span class="nf">ring_cost</span><span class="p">(</span><span class="n">filename</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39; calculate the total cost &#39;&#39;&#39;</span>

    <span class="n">total_price</span> <span class="o">=</span> <span class="mi">0</span> <span class="c1"># for all items in the list</span>

    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span> <span class="c1"># open file in read mode</span>
        <span class="n">rows</span> <span class="o">=</span> <span class="n">csv</span><span class="o">.</span><span class="n">reader</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
        <span class="n">header</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="n">rows</span><span class="p">)</span> <span class="c1"># skip line 1 i.e. header</span>
        <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">rows</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">row</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="mi">3</span><span class="p">])</span> <span class="c1"># price</span>
                <span class="n">row</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="mi">4</span><span class="p">])</span> <span class="c1"># quantity</span>
<span class="hll">            <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">err</span><span class="p">:</span> <span class="c1"># process ValueError only</span>
</span>                <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Invalid data, row is skipped&quot;</span><span class="p">)</span>
<span class="hll">                <span class="k">print</span><span class="p">(</span><span class="s1">&#39;Reason :&#39;</span><span class="p">,</span> <span class="n">err</span><span class="p">)</span>
</span>                <span class="k">continue</span>
            <span class="n">total_price</span> <span class="o">+=</span> <span class="n">row</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">*</span> <span class="n">row</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span>

    <span class="c1"># print(&quot;Total price = %10.2f&quot; % total_price)</span>
    <span class="k">return</span> <span class="n">total_price</span>  <span class="c1"># return total_price</span>

<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="n">total</span> <span class="o">=</span> <span class="n">ring_cost</span><span class="p">(</span><span class="s1">&#39;price.csv&#39;</span><span class="p">)</span>  <span class="c1"># function call</span>
    <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Total price = </span><span class="si">%10.2f</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">total</span><span class="p">)</span> <span class="c1"># print value</span>

<span class="c1"># standard boilerplate</span>
<span class="c1"># main is the starting function</span>
<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Do not forget to restart the Python shell after changing the code.</p>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">price</span> <span class="kn">import</span> <span class="n">ring_cost</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ring_cost</span><span class="p">(</span><span class="s1">&#39;price_missing.csv&#39;</span><span class="p">)</span>
<span class="go">Invalid data, row is skipped</span>
<span class="hll"><span class="go">Reason : could not convert string to float:</span>
</span><span class="go">1311.8799999999999</span>
</pre></div>
</div>
</div>
<div class="section" id="location-of-error">
<h4>Location of error<a class="headerlink" href="#location-of-error" title="Permalink to this headline">¶</a></h4>
<p>We can use the ‘enumerate’ to display the location of the error.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># price.py</span>

<span class="kn">import</span> <span class="nn">csv</span>

<span class="k">def</span> <span class="nf">ring_cost</span><span class="p">(</span><span class="n">filename</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39; calculate the total cost &#39;&#39;&#39;</span>

    <span class="n">total_price</span> <span class="o">=</span> <span class="mi">0</span> <span class="c1"># for all items in the list</span>

    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span> <span class="c1"># open file in read mode</span>
        <span class="n">rows</span> <span class="o">=</span> <span class="n">csv</span><span class="o">.</span><span class="n">reader</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
        <span class="n">header</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="n">rows</span><span class="p">)</span> <span class="c1"># skip line 1 i.e. header</span>
<span class="hll">        <span class="k">for</span> <span class="n">row_num</span><span class="p">,</span> <span class="n">row</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">rows</span><span class="p">,</span> <span class="n">start</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span> <span class="c1"># start from 1, not 0)</span>
</span>            <span class="k">try</span><span class="p">:</span>
                <span class="n">row</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="mi">3</span><span class="p">])</span> <span class="c1"># price</span>
                <span class="n">row</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="mi">4</span><span class="p">])</span> <span class="c1"># quantity</span>
            <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">err</span><span class="p">:</span> <span class="c1"># process ValueError only</span>
                <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Invalid data, row is skipped&quot;</span><span class="p">)</span>
<span class="hll">                <span class="k">print</span><span class="p">(</span><span class="s1">&#39;Row: {}, Reason : {}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">row_num</span><span class="p">,</span> <span class="n">err</span><span class="p">))</span>
</span>                <span class="k">continue</span>
            <span class="n">total_price</span> <span class="o">+=</span> <span class="n">row</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">*</span> <span class="n">row</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span>

    <span class="c1"># print(&quot;Total price = %10.2f&quot; % total_price)</span>
    <span class="k">return</span> <span class="n">total_price</span>  <span class="c1"># return total_price</span>

<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="n">total</span> <span class="o">=</span> <span class="n">ring_cost</span><span class="p">(</span><span class="s1">&#39;price.csv&#39;</span><span class="p">)</span>  <span class="c1"># function call</span>
    <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Total price = </span><span class="si">%10.2f</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">total</span><span class="p">)</span> <span class="c1"># print value</span>

<span class="c1"># standard boilerplate</span>
<span class="c1"># main is the starting function</span>
<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
</pre></div>
</div>
<p>Now run the code again and it will display the location of the error,</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">price</span> <span class="kn">import</span> <span class="n">ring_cost</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ring_cost</span><span class="p">(</span><span class="s1">&#39;price_missing.csv&#39;</span><span class="p">)</span>
<span class="go">Invalid data, row is skipped</span>
<span class="hll"><span class="go">Row: 2, Reason : could not convert string to float:</span>
</span><span class="go">1311.8799999999999</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="catch-all-error-bad-practice">
<h3>Catch all error (bad practice)<a class="headerlink" href="#catch-all-error-bad-practice" title="Permalink to this headline">¶</a></h3>
<p>In previous sections, we catch the specific error i.e. ‘ValueError’. We can catch all types of errors as well using ‘Exception’ keyword, but this may result in misleading messages, as shown in this section.</p>
<p>First replace the ‘ValueError’ with ‘Exception’ as below,</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># price.py</span>

<span class="kn">import</span> <span class="nn">csv</span>

<span class="k">def</span> <span class="nf">ring_cost</span><span class="p">(</span><span class="n">filename</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39; calculate the total cost &#39;&#39;&#39;</span>

    <span class="n">total_price</span> <span class="o">=</span> <span class="mi">0</span> <span class="c1"># for all items in the list</span>

    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span> <span class="c1"># open file in read mode</span>
        <span class="n">rows</span> <span class="o">=</span> <span class="n">csv</span><span class="o">.</span><span class="n">reader</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
        <span class="n">header</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="n">rows</span><span class="p">)</span> <span class="c1"># skip line 1 i.e. header</span>
        <span class="k">for</span> <span class="n">row_num</span><span class="p">,</span> <span class="n">row</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">rows</span><span class="p">,</span> <span class="n">start</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span> <span class="c1"># start from 1, not 0)</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">row</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="mi">3</span><span class="p">])</span> <span class="c1"># price</span>
                <span class="n">row</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="mi">4</span><span class="p">])</span> <span class="c1"># quantity</span>
<span class="hll">            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">err</span><span class="p">:</span> <span class="c1"># process ValueError only</span>
</span>                <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Invalid data, row is skipped&quot;</span><span class="p">)</span>
                <span class="k">print</span><span class="p">(</span><span class="s1">&#39;Row: {}, Reason : {}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">row_num</span><span class="p">,</span> <span class="n">err</span><span class="p">))</span>
                <span class="k">continue</span>
            <span class="n">total_price</span> <span class="o">+=</span> <span class="n">row</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">*</span> <span class="n">row</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span>

    <span class="c1"># print(&quot;Total price = %10.2f&quot; % total_price)</span>
    <span class="k">return</span> <span class="n">total_price</span>  <span class="c1"># return total_price</span>

<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="n">total</span> <span class="o">=</span> <span class="n">ring_cost</span><span class="p">(</span><span class="s1">&#39;price.csv&#39;</span><span class="p">)</span>  <span class="c1"># function call</span>
    <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Total price = </span><span class="si">%10.2f</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">total</span><span class="p">)</span> <span class="c1"># print value</span>

<span class="c1"># standard boilerplate</span>
<span class="c1"># main is the starting function</span>
<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
</pre></div>
</div>
<p>Now run the code and it will work fine as shown below,</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">price</span> <span class="kn">import</span> <span class="n">ring_cost</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ring_cost</span><span class="p">(</span><span class="s1">&#39;price_missing.csv&#39;</span><span class="p">)</span>
<span class="go">Invalid data, row is skipped</span>
<span class="go">Row: 2, Reason : could not convert string to float:</span>
<span class="go">1311.8799999999999</span>
</pre></div>
</div>
<p>Next, replace the ‘int’ with ‘integer’ at Line 16, i.e. we are introducing error in the code.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># price.py</span>

<span class="kn">import</span> <span class="nn">csv</span>

<span class="k">def</span> <span class="nf">ring_cost</span><span class="p">(</span><span class="n">filename</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39; calculate the total cost &#39;&#39;&#39;</span>

    <span class="n">total_price</span> <span class="o">=</span> <span class="mi">0</span> <span class="c1"># for all items in the list</span>

    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span> <span class="c1"># open file in read mode</span>
        <span class="n">rows</span> <span class="o">=</span> <span class="n">csv</span><span class="o">.</span><span class="n">reader</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
        <span class="n">header</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="n">rows</span><span class="p">)</span> <span class="c1"># skip line 1 i.e. header</span>
        <span class="k">for</span> <span class="n">row_num</span><span class="p">,</span> <span class="n">row</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">rows</span><span class="p">,</span> <span class="n">start</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span> <span class="c1"># start from 1, not 0)</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">row</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="mi">3</span><span class="p">])</span> <span class="c1"># price</span>
<span class="hll">                <span class="n">row</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">=</span> <span class="n">integer</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="mi">4</span><span class="p">])</span> <span class="c1"># quantity</span>
</span>            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">err</span><span class="p">:</span> <span class="c1"># process ValueError only</span>
                <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Invalid data, row is skipped&quot;</span><span class="p">)</span>
                <span class="k">print</span><span class="p">(</span><span class="s1">&#39;Row: {}, Reason : {}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">row_num</span><span class="p">,</span> <span class="n">err</span><span class="p">))</span>
                <span class="k">continue</span>
            <span class="n">total_price</span> <span class="o">+=</span> <span class="n">row</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">*</span> <span class="n">row</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span>

    <span class="c1"># print(&quot;Total price = %10.2f&quot; % total_price)</span>
    <span class="k">return</span> <span class="n">total_price</span>  <span class="c1"># return total_price</span>

<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="n">total</span> <span class="o">=</span> <span class="n">ring_cost</span><span class="p">(</span><span class="s1">&#39;price.csv&#39;</span><span class="p">)</span>  <span class="c1"># function call</span>
    <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Total price = </span><span class="si">%10.2f</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">total</span><span class="p">)</span> <span class="c1"># print value</span>

<span class="c1"># standard boilerplate</span>
<span class="c1"># main is the starting function</span>
<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
</pre></div>
</div>
<p>Now run the code again and it will give display following messages, which has no relation with the actual error. Actual error is the ‘integer’ at line 16; since the conversion operation can not be performed now (due to invalid type ‘integer’), therefore error is catch for all the rows and the messages are generated for each row. Therefore it is very bad idea to catch errors using “Exception” keyword.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">price</span> <span class="kn">import</span> <span class="n">ring_cost</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ring_cost</span><span class="p">(</span><span class="s1">&#39;price_missing.csv&#39;</span><span class="p">)</span>
<span class="go">Invalid data, row is skipped</span>
<span class="go">Row: 1, Reason : name &#39;integer&#39; is not defined</span>
<span class="go">Invalid data, row is skipped</span>
<span class="go">Row: 2, Reason : could not convert string to float:</span>
<span class="go">Invalid data, row is skipped</span>
<span class="go">Row: 3, Reason : name &#39;integer&#39; is not defined</span>
<span class="go">Invalid data, row is skipped</span>
<span class="go">Row: 4, Reason : name &#39;integer&#39; is not defined</span>
<span class="go">Invalid data, row is skipped</span>
<span class="go">Row: 5, Reason : name &#39;integer&#39; is not defined</span>
<span class="go">Invalid data, row is skipped</span>
<span class="go">Row: 6, Reason : name &#39;integer&#39; is not defined</span>
<span class="go">0</span>
</pre></div>
</div>
</div>
<div class="section" id="silencing-error">
<h3>Silencing error<a class="headerlink" href="#silencing-error" title="Permalink to this headline">¶</a></h3>
<p>Sometimes it is undesirable to display the error messages of the except blocks. In such cases, we want to silent the error messages, which is discussed in this section.</p>
<p>First, undo the changes made in previous section, i.e. replace ‘integer’ with ‘int’ and ‘Exception’ with ‘ValueError’.</p>
<p>Now, we will consider the following three cases to handle the error,</p>
<ol class="arabic simple">
<li>silent : do not display error message</li>
<li>warn : display the error message</li>
<li>stop : stop execution of code, if error is detected</li>
</ol>
<p>For this one positional argument ‘mode’ is defined, whose default value is set to ‘warn’, and then put the ‘print’ statement inside the ‘if-else’ block. It is good idea to set the default value of ‘mode’ to ‘warn’ as we do not want to pass the error silently.</p>
<div class="literal-block-wrapper docutils container" id="py-exception-price">
<div class="code-block-caption"><span class="caption-text">Silencing error</span><a class="headerlink" href="#py-exception-price" title="Permalink to this code">¶</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># price.py</span>

<span class="kn">import</span> <span class="nn">csv</span>

<span class="c1"># warn is kept as default, as error should not be passed silently</span>
<span class="hll"><span class="k">def</span> <span class="nf">ring_cost</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;warn&#39;</span><span class="p">):</span>
</span>    <span class="sd">&#39;&#39;&#39; calculate the total cost &#39;&#39;&#39;</span>

    <span class="n">total_price</span> <span class="o">=</span> <span class="mi">0</span> <span class="c1"># for all items in the list</span>

    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span> <span class="c1"># open file in read mode</span>
        <span class="n">rows</span> <span class="o">=</span> <span class="n">csv</span><span class="o">.</span><span class="n">reader</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
        <span class="n">header</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="n">rows</span><span class="p">)</span> <span class="c1"># skip line 1 i.e. header</span>
        <span class="k">for</span> <span class="n">row_num</span><span class="p">,</span> <span class="n">row</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">rows</span><span class="p">,</span> <span class="n">start</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span> <span class="c1"># start from 1, not 0)</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">row</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="mi">3</span><span class="p">])</span> <span class="c1"># price</span>
                <span class="n">row</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="mi">4</span><span class="p">])</span> <span class="c1"># quantity</span>
            <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">err</span><span class="p">:</span> <span class="c1"># process ValueError only</span>
<span class="hll">                <span class="k">if</span> <span class="n">mode</span> <span class="o">==</span> <span class="s1">&#39;warn&#39;</span><span class="p">:</span>
</span><span class="hll">                    <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Invalid data, row is skipped&quot;</span><span class="p">)</span>
</span><span class="hll">                    <span class="k">print</span><span class="p">(</span><span class="s1">&#39;Row: {}, Reason : {}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">row_num</span><span class="p">,</span> <span class="n">err</span><span class="p">))</span>
</span><span class="hll">                <span class="k">elif</span> <span class="n">mode</span> <span class="o">==</span> <span class="s1">&#39;silent&#39;</span><span class="p">:</span>
</span><span class="hll">                    <span class="k">pass</span> <span class="c1"># do nothing</span>
</span><span class="hll">                <span class="k">elif</span> <span class="n">mode</span> <span class="o">==</span> <span class="s1">&#39;stop&#39;</span><span class="p">:</span>
</span><span class="hll">                    <span class="k">raise</span> <span class="c1"># raise the exception</span>
</span>                <span class="k">continue</span>
            <span class="n">total_price</span> <span class="o">+=</span> <span class="n">row</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">*</span> <span class="n">row</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span>

    <span class="c1"># print(&quot;Total price = %10.2f&quot; % total_price)</span>
    <span class="k">return</span> <span class="n">total_price</span>  <span class="c1"># return total_price</span>

<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="n">total</span> <span class="o">=</span> <span class="n">ring_cost</span><span class="p">(</span><span class="s1">&#39;price.csv&#39;</span><span class="p">)</span>  <span class="c1"># function call</span>
    <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Total price = </span><span class="si">%10.2f</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">total</span><span class="p">)</span> <span class="c1"># print value</span>

<span class="c1"># standard boilerplate</span>
<span class="c1"># main is the starting function</span>
<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
</pre></div>
</div>
</div>
<p>Below are the outputs for each of the cases
.. code-block:: python</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">price</span> <span class="k">import</span> <span class="n">ring_cost</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ring_cost</span><span class="p">(</span><span class="s1">&#39;price_missing.csv&#39;</span><span class="p">)</span>  <span class="c1"># default &#39;warn&#39;</span>
<span class="go">Invalid data, row is skipped</span>
<span class="go">Row: 2, Reason : could not convert string to float:</span>
<span class="go">1311.8799999999999</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ring_cost</span><span class="p">(</span><span class="s1">&#39;price_missing.csv&#39;</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;warn&#39;</span><span class="p">)</span>
<span class="go">Invalid data, row is skipped</span>
<span class="go">Row: 2, Reason : could not convert string to float:</span>
<span class="go">1311.8799999999999</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ring_cost</span><span class="p">(</span><span class="s1">&#39;price_missing.csv&#39;</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;silent&#39;</span><span class="p">)</span>
<span class="go">1311.8799999999999</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ring_cost</span><span class="p">(</span><span class="s1">&#39;price_missing.csv&#39;</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;stop&#39;</span><span class="p">)</span>
<span class="gt">Traceback (most recent call last):</span>
  File <span class="nb">&quot;&lt;stdin&gt;&quot;</span>, line <span class="m">1</span>, in <span class="n">&lt;module&gt;</span>
  File <span class="nb">&quot;/media/dhriti/work/git/advance-python-tutorials/codes/price.py&quot;</span>, line <span class="m">16</span>, in <span class="n">ring_cost</span>
    <span class="n">row</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="mi">3</span><span class="p">])</span> <span class="c1"># price</span>
<span class="gr">ValueError</span>: <span class="n">could not convert string to float:</span>
</pre></div>
</div>
</div>
<div class="section" id="list-of-exception-in-python">
<h3>List of Exception in Python<a class="headerlink" href="#list-of-exception-in-python" title="Permalink to this headline">¶</a></h3>
<p>Following is the list of exceptions available in Python,</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="ne">BaseException</span>
 <span class="o">+--</span> <span class="ne">SystemExit</span>
 <span class="o">+--</span> <span class="ne">KeyboardInterrupt</span>
 <span class="o">+--</span> <span class="ne">GeneratorExit</span>
 <span class="o">+--</span> <span class="ne">Exception</span>
      <span class="o">+--</span> <span class="ne">StopIteration</span>
      <span class="o">+--</span> <span class="n">StopAsyncIteration</span>
      <span class="o">+--</span> <span class="ne">ArithmeticError</span>
      <span class="o">|</span>    <span class="o">+--</span> <span class="ne">FloatingPointError</span>
      <span class="o">|</span>    <span class="o">+--</span> <span class="ne">OverflowError</span>
      <span class="o">|</span>    <span class="o">+--</span> <span class="ne">ZeroDivisionError</span>
      <span class="o">+--</span> <span class="ne">AssertionError</span>
      <span class="o">+--</span> <span class="ne">AttributeError</span>
      <span class="o">+--</span> <span class="ne">BufferError</span>
      <span class="o">+--</span> <span class="ne">EOFError</span>
      <span class="o">+--</span> <span class="ne">ImportError</span>
           <span class="o">+--</span> <span class="n">ModuleNotFoundError</span>
      <span class="o">+--</span> <span class="ne">LookupError</span>
      <span class="o">|</span>    <span class="o">+--</span> <span class="ne">IndexError</span>
      <span class="o">|</span>    <span class="o">+--</span> <span class="ne">KeyError</span>
      <span class="o">+--</span> <span class="ne">MemoryError</span>
      <span class="o">+--</span> <span class="ne">NameError</span>
      <span class="o">|</span>    <span class="o">+--</span> <span class="ne">UnboundLocalError</span>
      <span class="o">+--</span> <span class="ne">OSError</span>
      <span class="o">|</span>    <span class="o">+--</span> <span class="ne">BlockingIOError</span>
      <span class="o">|</span>    <span class="o">+--</span> <span class="ne">ChildProcessError</span>
      <span class="o">|</span>    <span class="o">+--</span> <span class="ne">ConnectionError</span>
      <span class="o">|</span>    <span class="o">|</span>    <span class="o">+--</span> <span class="ne">BrokenPipeError</span>
      <span class="o">|</span>    <span class="o">|</span>    <span class="o">+--</span> <span class="ne">ConnectionAbortedError</span>
      <span class="o">|</span>    <span class="o">|</span>    <span class="o">+--</span> <span class="ne">ConnectionRefusedError</span>
      <span class="o">|</span>    <span class="o">|</span>    <span class="o">+--</span> <span class="ne">ConnectionResetError</span>
      <span class="o">|</span>    <span class="o">+--</span> <span class="ne">FileExistsError</span>
      <span class="o">|</span>    <span class="o">+--</span> <span class="ne">FileNotFoundError</span>
      <span class="o">|</span>    <span class="o">+--</span> <span class="ne">InterruptedError</span>
      <span class="o">|</span>    <span class="o">+--</span> <span class="ne">IsADirectoryError</span>
      <span class="o">|</span>    <span class="o">+--</span> <span class="ne">NotADirectoryError</span>
      <span class="o">|</span>    <span class="o">+--</span> <span class="ne">PermissionError</span>
      <span class="o">|</span>    <span class="o">+--</span> <span class="ne">ProcessLookupError</span>
      <span class="o">|</span>    <span class="o">+--</span> <span class="ne">TimeoutError</span>
      <span class="o">+--</span> <span class="ne">ReferenceError</span>
      <span class="o">+--</span> <span class="ne">RuntimeError</span>
      <span class="o">|</span>    <span class="o">+--</span> <span class="ne">NotImplementedError</span>
      <span class="o">|</span>    <span class="o">+--</span> <span class="n">RecursionError</span>
      <span class="o">+--</span> <span class="ne">SyntaxError</span>
      <span class="o">|</span>    <span class="o">+--</span> <span class="ne">IndentationError</span>
      <span class="o">|</span>         <span class="o">+--</span> <span class="ne">TabError</span>
      <span class="o">+--</span> <span class="ne">SystemError</span>
      <span class="o">+--</span> <span class="ne">TypeError</span>
      <span class="o">+--</span> <span class="ne">ValueError</span>
      <span class="o">|</span>    <span class="o">+--</span> <span class="ne">UnicodeError</span>
      <span class="o">|</span>         <span class="o">+--</span> <span class="ne">UnicodeDecodeError</span>
      <span class="o">|</span>         <span class="o">+--</span> <span class="ne">UnicodeEncodeError</span>
      <span class="o">|</span>         <span class="o">+--</span> <span class="ne">UnicodeTranslateError</span>
      <span class="o">+--</span> <span class="ne">Warning</span>
           <span class="o">+--</span> <span class="ne">DeprecationWarning</span>
           <span class="o">+--</span> <span class="ne">PendingDeprecationWarning</span>
           <span class="o">+--</span> <span class="ne">RuntimeWarning</span>
           <span class="o">+--</span> <span class="ne">SyntaxWarning</span>
           <span class="o">+--</span> <span class="ne">UserWarning</span>
           <span class="o">+--</span> <span class="ne">FutureWarning</span>
           <span class="o">+--</span> <span class="ne">ImportWarning</span>
           <span class="o">+--</span> <span class="ne">UnicodeWarning</span>
           <span class="o">+--</span> <span class="ne">BytesWarning</span>
           <span class="o">+--</span> <span class="ne">ResourceWarning</span>
</pre></div>
</div>
</div>
<div class="section" id="conclusion">
<h3>Conclusion<a class="headerlink" href="#conclusion" title="Permalink to this headline">¶</a></h3>
<p>In this chapter, we saw various ways to handle the error along with some good practices. In next chapter, we will discuss the ‘data manipulation’ techniques using various data structures available in Python.</p>
</div>
</div>
<span id="document-python/datamine"></span><div class="section" id="data-mining">
<h2>Data mining<a class="headerlink" href="#data-mining" title="Permalink to this headline">¶</a></h2>
<p>Processing the data from a large file and finding patterns in it is known as data-mining. Data mining required lots of data cleaning and data transformation operations. In this section, we will see some of these operations.</p>
<div class="section" id="building-data-structure-from-file">
<h3>Building data structure from file<a class="headerlink" href="#building-data-structure-from-file" title="Permalink to this headline">¶</a></h3>
<p>In the previous chapters, we read the data from the file and then process the data. In this section, we will save the data in a list/dictionary and then use these data structure to process the data. We will see that the data processing operations become easier when the data is converted in the form of dictionary.</p>
<div class="admonition important">
<p class="first admonition-title">Important</p>
<p>In previous chapter, we read the file and calculated the total prices inside the function ‘ring_cost’. The problem with this method is that the read data is no longer available (after the return statement) for the further processing.</p>
<p class="last">Therefore, it is good idea to save the results in a list or dictionary, so that it will be available for other functions as well, as shown in this chapter.</p>
</div>
<p>Lets see the contents of the ‘price.csv’ file again,</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>$ cat price.csv
date,metal,radius,price,quantity
&quot;2016-06-12&quot;,&quot;Gold&quot;,5.5,80.99,1
&quot;2015-07-13&quot;,&quot;Silver&quot;,40.3,5.5,3
&quot;2016-01-21&quot;,&quot;Iron&quot;,9.2,14.29,8
&quot;2014-03-23&quot;,&quot;Gold&quot;,8,120.3,2
&quot;2017-09-11&quot;,&quot;Copper&quot;,4.1,70.25,12
&quot;2011-01-20&quot;,&quot;Iron&quot;,3.25,10.99,3
</pre></div>
</div>
<div class="section" id="save-and-read-data-in-list">
<h4>Save and read data in list<a class="headerlink" href="#save-and-read-data-in-list" title="Permalink to this headline">¶</a></h4>
<p>Create a new file ‘datamine.py’ with following contents. These contents are same as <a class="reference internal" href="index.html#py-exception-price"><span class="std std-numref">Listing 8.1</span></a>, except it returns the list. Also, a check is applied for input ‘mode’ value.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># datamine.py</span>

<span class="kn">import</span> <span class="nn">csv</span>

<span class="k">def</span> <span class="nf">read_file</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;warn&#39;</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39; read csv file and save data in the list &#39;&#39;&#39;</span>

<span class="hll">    <span class="c1"># check for correct mode</span>
</span><span class="hll">    <span class="k">if</span> <span class="n">mode</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;warn&#39;</span><span class="p">,</span> <span class="s1">&#39;silent&#39;</span><span class="p">,</span> <span class="s1">&#39;stop&#39;</span><span class="p">]:</span>
</span><span class="hll">        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;possible modes are &#39;warn&#39;, &#39;silent&#39;, &#39;stop&#39;&quot;</span><span class="p">)</span>
</span>
    <span class="n">ring_data</span> <span class="o">=</span> <span class="p">[]</span> <span class="c1"># create empty list to save data</span>

    <span class="k">with</span> <span class="nb">open</span> <span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
        <span class="n">rows</span> <span class="o">=</span>  <span class="n">csv</span><span class="o">.</span><span class="n">reader</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
        <span class="n">header</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="n">rows</span><span class="p">)</span> <span class="c1"># skip the header</span>

        <span class="c1"># change the types of the columns</span>
        <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">rows</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">row</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span> <span class="c1"># radius</span>
                <span class="n">row</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="mi">3</span><span class="p">])</span> <span class="c1"># price</span>
                <span class="n">row</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="mi">4</span><span class="p">])</span> <span class="c1"># quantity</span>
            <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">err</span><span class="p">:</span> <span class="c1"># process value error only</span>
                <span class="k">if</span> <span class="n">mode</span> <span class="o">==</span> <span class="s1">&#39;warn&#39;</span><span class="p">:</span>
                    <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Invalid data, row is skipped&quot;</span><span class="p">)</span>
                    <span class="k">print</span><span class="p">(</span><span class="s1">&#39;Row: {}, Reason : {}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">row_num</span><span class="p">,</span> <span class="n">err</span><span class="p">))</span>
                <span class="k">elif</span> <span class="n">mode</span> <span class="o">==</span> <span class="s1">&#39;silent&#39;</span><span class="p">:</span>
                    <span class="k">pass</span> <span class="c1"># do nothing</span>
                <span class="k">elif</span> <span class="n">mode</span> <span class="o">==</span> <span class="s1">&#39;stop&#39;</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="c1"># raise the exception</span>
                <span class="k">continue</span>

<span class="hll">            <span class="c1"># append data in list in the form of tuple</span>
</span><span class="hll">            <span class="n">ring_data</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">tuple</span><span class="p">(</span><span class="n">row</span><span class="p">))</span>
</span>
<span class="hll">    <span class="k">return</span> <span class="n">ring_data</span>
</span>
<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="n">ring_data</span> <span class="o">=</span> <span class="n">read_file</span><span class="p">(</span><span class="s1">&#39;price.csv&#39;</span><span class="p">)</span>

    <span class="c1"># total rows in the file</span>
    <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Total rows: &quot;</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">ring_data</span><span class="p">))</span>

    <span class="c1"># total price calculation</span>
    <span class="n">total_price</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">ring_data</span><span class="p">:</span>
        <span class="n">total_price</span> <span class="o">+=</span> <span class="n">row</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">*</span> <span class="n">row</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span>
    <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Total price: {:10.2f}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">total_price</span><span class="p">))</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
</pre></div>
</div>
<p>Run the above code and we will get the following results,</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>$ python datamine.py
Total rows:  6
Total price:    1328.38
</pre></div>
</div>
<p>Now, open the Python shell and run the below code. See the difference, “Previously we returned total_price from the function, therefore we could perform no more operation on the data. But, now we have the data in the form of List, therefore we can perform operation on the data.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>   <span class="o">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">datamine</span> <span class="kn">import</span> <span class="n">read_file</span>
   <span class="o">&gt;&gt;&gt;</span> <span class="n">ring_data</span> <span class="o">=</span> <span class="n">read_file</span><span class="p">(</span><span class="s1">&#39;price.csv&#39;</span><span class="p">)</span>
   <span class="o">&gt;&gt;&gt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">ring_data</span><span class="p">)</span>
   <span class="mi">6</span>
   <span class="o">&gt;&gt;&gt;</span> <span class="n">ring_data</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
   <span class="p">(</span><span class="s1">&#39;2016-06-12&#39;</span><span class="p">,</span> <span class="s1">&#39;Gold&#39;</span><span class="p">,</span> <span class="mf">5.5</span><span class="p">,</span> <span class="mf">80.99</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>

   <span class="o">&gt;&gt;&gt;</span> <span class="k">for</span> <span class="n">data</span> <span class="ow">in</span> <span class="n">ring_data</span><span class="p">:</span> <span class="c1"># print metal with radius &gt; 9</span>
   <span class="o">...</span>     <span class="k">if</span> <span class="n">data</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">9</span><span class="p">:</span>
   <span class="o">...</span>             <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Metal: {0}, Radius: {1}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">data</span><span class="p">[</span><span class="mi">2</span><span class="p">]))</span>
   <span class="o">...</span>
   <span class="n">Metal</span><span class="p">:</span> <span class="n">Silver</span><span class="p">,</span> <span class="n">Radius</span><span class="p">:</span> <span class="mf">40.3</span>
   <span class="n">Metal</span><span class="p">:</span> <span class="n">Iron</span><span class="p">,</span> <span class="n">Radius</span><span class="p">:</span> <span class="mf">9.2</span>


<span class="o">..</span> <span class="sb">`data_in_dict`</span><span class="p">:</span>
</pre></div>
</div>
</div>
<div class="section" id="save-and-read-data-in-dictionary">
<h4>Save and read data in Dictionary<a class="headerlink" href="#save-and-read-data-in-dictionary" title="Permalink to this headline">¶</a></h4>
<p>In the previous section, the list is read and data is printed (i.e. name of metal when radius &gt; 9). It worked fine there, but when we have a large number of columns in the list, then it is very difficult to locate the elements using positions e.g. ‘data[2]’. For easy referencing, a dictionary can be used as shown below.</p>
<p>Note that, at line 58, the elements are located by the name, i.e. row[‘price’], which is easier to handle than using index e.g. row[3].</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># datamine.py</span>

<span class="kn">import</span> <span class="nn">csv</span>

<span class="k">def</span> <span class="nf">read_file</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;warn&#39;</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39; read csv file and save data in the list &#39;&#39;&#39;</span>

    <span class="c1"># check for correct mode</span>
    <span class="k">if</span> <span class="n">mode</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;warn&#39;</span><span class="p">,</span> <span class="s1">&#39;silent&#39;</span><span class="p">,</span> <span class="s1">&#39;stop&#39;</span><span class="p">]:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;possible modes are &#39;warn&#39;, &#39;silent&#39;, &#39;stop&#39;&quot;</span><span class="p">)</span>

    <span class="n">ring_data</span> <span class="o">=</span> <span class="p">[]</span> <span class="c1"># create empty list to save data</span>

    <span class="k">with</span> <span class="nb">open</span> <span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
        <span class="n">rows</span> <span class="o">=</span>  <span class="n">csv</span><span class="o">.</span><span class="n">reader</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
        <span class="n">header</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="n">rows</span><span class="p">)</span> <span class="c1"># skip the header</span>

        <span class="c1"># change the types of the columns</span>
        <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">rows</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">row</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span> <span class="c1"># radius</span>
                <span class="n">row</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="mi">3</span><span class="p">])</span> <span class="c1"># price</span>
                <span class="n">row</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="mi">4</span><span class="p">])</span> <span class="c1"># quantity</span>
            <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">err</span><span class="p">:</span> <span class="c1"># process value error only</span>
                <span class="k">if</span> <span class="n">mode</span> <span class="o">==</span> <span class="s1">&#39;warn&#39;</span><span class="p">:</span>
                    <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Invalid data, row is skipped&quot;</span><span class="p">)</span>
                    <span class="k">print</span><span class="p">(</span><span class="s1">&#39;Row: {}, Reason : {}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">row_num</span><span class="p">,</span> <span class="n">err</span><span class="p">))</span>
                <span class="k">elif</span> <span class="n">mode</span> <span class="o">==</span> <span class="s1">&#39;silent&#39;</span><span class="p">:</span>
                    <span class="k">pass</span> <span class="c1"># do nothing</span>
                <span class="k">elif</span> <span class="n">mode</span> <span class="o">==</span> <span class="s1">&#39;stop&#39;</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="c1"># raise the exception</span>
                <span class="k">continue</span>

<span class="hll">            <span class="c1"># ring_data.append(tuple(row))</span>
</span>
<span class="hll">            <span class="c1"># append data in list in the form of tuple</span>
</span><span class="hll">            <span class="n">row_dict</span> <span class="o">=</span> <span class="p">{</span>
</span><span class="hll">                    <span class="s1">&#39;date&#39;</span> <span class="p">:</span> <span class="n">row</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
</span><span class="hll">                    <span class="s1">&#39;metal&#39;</span> <span class="p">:</span> <span class="n">row</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
</span><span class="hll">                    <span class="s1">&#39;radius&#39;</span> <span class="p">:</span> <span class="n">row</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span>
</span><span class="hll">                    <span class="s1">&#39;price&#39;</span> <span class="p">:</span> <span class="n">row</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span>
</span><span class="hll">                    <span class="s1">&#39;quantity&#39;</span> <span class="p">:</span> <span class="n">row</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span>
</span><span class="hll">                <span class="p">}</span>
</span>
<span class="hll">            <span class="n">ring_data</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">row_dict</span><span class="p">)</span>
</span>
    <span class="k">return</span> <span class="n">ring_data</span>

<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="n">ring_data</span> <span class="o">=</span> <span class="n">read_file</span><span class="p">(</span><span class="s1">&#39;price.csv&#39;</span><span class="p">)</span>

    <span class="c1"># total rows in the file</span>
    <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Total rows: &quot;</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">ring_data</span><span class="p">))</span>

    <span class="c1"># total price calculation</span>
    <span class="n">total_price</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">ring_data</span><span class="p">:</span>
<span class="hll">        <span class="n">total_price</span> <span class="o">+=</span> <span class="n">row</span><span class="p">[</span><span class="s1">&#39;price&#39;</span><span class="p">]</span> <span class="o">*</span> <span class="n">row</span><span class="p">[</span><span class="s1">&#39;quantity&#39;</span><span class="p">]</span>
</span>    <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Total price: {:10.2f}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">total_price</span><span class="p">))</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
</pre></div>
</div>
<p>Following is the output of above code,</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>$ python datamine.py
Total rows:  6
Total price:    1328.38
</pre></div>
</div>
</div>
</div>
<div class="section" id="list-comprehension">
<h3>List comprehension<a class="headerlink" href="#list-comprehension" title="Permalink to this headline">¶</a></h3>
<p>In previous section, we read the data from the file and stored in the list/dictionary to perform further operations.</p>
<p>In this section, we will extract a specific type of data and store them in a new list. Let’s do it in the Python shell as below,</p>
<div class="section" id="basic-method-for-extraction">
<h4>Basic method for extraction<a class="headerlink" href="#basic-method-for-extraction" title="Permalink to this headline">¶</a></h4>
<p>In the below code, if-statement along with the ‘loop’ is used to extract the desired data, i.e. radius &lt; 5.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">datamine</span> <span class="kn">import</span> <span class="n">read_file</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ring_data</span> <span class="o">=</span> <span class="n">read_file</span><span class="p">(</span><span class="s1">&#39;price.csv&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">small_ring</span> <span class="o">=</span> <span class="p">[]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">ring</span> <span class="ow">in</span> <span class="n">ring_data</span><span class="p">:</span>
<span class="gp">... </span>    <span class="k">if</span> <span class="n">ring</span><span class="p">[</span><span class="s1">&#39;radius&#39;</span><span class="p">]</span> <span class="o">&lt;</span> <span class="mi">5</span><span class="p">:</span> <span class="c1"># store radius &lt; 5</span>
<span class="gp">... </span>        <span class="n">small_ring</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">ring</span><span class="p">[</span><span class="s1">&#39;metal&#39;</span><span class="p">],</span> <span class="n">ring</span><span class="p">[</span><span class="s1">&#39;radius&#39;</span><span class="p">],</span>  <span class="n">ring</span><span class="p">[</span><span class="s1">&#39;price&#39;</span><span class="p">]))</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">ring</span> <span class="ow">in</span> <span class="n">small_ring</span><span class="p">:</span> <span class="c1"># display content of small_ring</span>
<span class="gp">... </span>    <span class="k">print</span><span class="p">(</span><span class="n">ring</span><span class="p">)</span>
<span class="gp">...</span>
<span class="go">(&#39;Copper&#39;, 4.1, 70.25)</span>
<span class="go">(&#39;Iron&#39;, 3.25, 10.99)</span>
</pre></div>
</div>
</div>
<div class="section" id="list-comprehension-for-extraction">
<h4>List comprehension for extraction<a class="headerlink" href="#list-comprehension-for-extraction" title="Permalink to this headline">¶</a></h4>
<p>Operation in above section, i.e. if statement with loop, is very common, therefore Python provide a way to do it in one line, which is known as ‘list comprehension’, as shown below,</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">datamine</span> <span class="kn">import</span> <span class="n">read_file</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ring_data</span> <span class="o">=</span> <span class="n">read_file</span><span class="p">(</span><span class="s1">&#39;price.csv&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">small_ring</span> <span class="o">=</span> <span class="p">[]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">small_ring</span> <span class="o">=</span> <span class="p">[(</span><span class="n">ring</span><span class="p">[</span><span class="s1">&#39;metal&#39;</span><span class="p">],</span> <span class="n">ring</span><span class="p">[</span><span class="s1">&#39;radius&#39;</span><span class="p">],</span> <span class="n">ring</span><span class="p">[</span><span class="s1">&#39;price&#39;</span><span class="p">])</span>
<span class="gp">... </span>    <span class="k">for</span> <span class="n">ring</span> <span class="ow">in</span> <span class="n">ring_data</span> <span class="k">if</span> <span class="n">ring</span><span class="p">[</span><span class="s1">&#39;radius&#39;</span><span class="p">]</span> <span class="o">&lt;</span> <span class="mi">5</span> <span class="p">]</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">ring</span> <span class="ow">in</span> <span class="n">small_ring</span><span class="p">:</span>
<span class="gp">... </span>    <span class="k">print</span><span class="p">(</span><span class="n">ring</span><span class="p">)</span>
<span class="gp">...</span>
<span class="go">(&#39;Copper&#39;, 4.1, 70.25)</span>
<span class="go">(&#39;Iron&#39;, 3.25, 10.99)</span>
</pre></div>
</div>
</div>
<div class="section" id="lambda-operator">
<h4>Lambda operator<a class="headerlink" href="#lambda-operator" title="Permalink to this headline">¶</a></h4>
<p>In numref:<cite>data_in_dict</cite>, the data was saved in the dictionary and then a specific type of data is extraced in above setion. In this section, we will sort the data store in the dictionary.</p>
</div>
<div class="section" id="basis-method-for-sorting">
<h4>Basis method for sorting<a class="headerlink" href="#basis-method-for-sorting" title="Permalink to this headline">¶</a></h4>
<p>Let’s do it in the Python shell as shown below. First see the content of the dictionary again,</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">datamine</span> <span class="kn">import</span> <span class="n">read_file</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ring_data</span> <span class="o">=</span> <span class="n">read_file</span><span class="p">(</span><span class="s1">&#39;price.csv&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">data</span> <span class="ow">in</span> <span class="n">ring_data</span><span class="p">:</span>
<span class="gp">... </span>    <span class="k">print</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<span class="gp">...</span>
<span class="go">{&#39;date&#39;: &#39;2016-06-12&#39;, &#39;metal&#39;: &#39;Gold&#39;, &#39;radius&#39;: 5.5,</span>
<span class="go">    &#39;price&#39;: 80.99, &#39;quantity&#39;: 1}</span>

<span class="go">{&#39;date&#39;: &#39;2015-07-13&#39;, &#39;metal&#39;: &#39;Silver&#39;, &#39;radius&#39;: 40.3,</span>
<span class="go">    &#39;price&#39;: 5.5, &#39;quantity&#39;: 3}</span>

<span class="go">{&#39;date&#39;: &#39;2016-01-21&#39;, &#39;metal&#39;: &#39;Iron&#39;, &#39;radius&#39;: 9.2,</span>
<span class="go">    &#39;price&#39;: 14.29, &#39;quantity&#39;: 8}</span>

<span class="go">{&#39;date&#39;: &#39;2014-03-23&#39;, &#39;metal&#39;: &#39;Gold&#39;, &#39;radius&#39;: 8.0,</span>
<span class="go">    &#39;price&#39;: 120.3, &#39;quantity&#39;: 2}</span>

<span class="go">{&#39;date&#39;: &#39;2017-09-11&#39;, &#39;metal&#39;: &#39;Copper&#39;, &#39;radius&#39;: 4.1,</span>
<span class="go">    &#39;price&#39;: 70.25, &#39;quantity&#39;: 12}</span>

<span class="go">{&#39;date&#39;: &#39;2011-01-20&#39;, &#39;metal&#39;: &#39;Iron&#39;, &#39;radius&#39;: 3.25,</span>
<span class="go">    &#39;price&#39;: 10.99, &#39;quantity&#39;: 3}</span>
</pre></div>
</div>
<p>Note that, unlike list, we can not perform the sort() operation on dictionary. We will have following error,</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>&gt;&gt;&gt; ring_data.sort()
Traceback (most recent call last):
  File &quot;&lt;stdin&gt;&quot;, line 1, in &lt;module&gt;
TypeError: &#39;&lt;&#39; not supported between instances of &#39;dict&#39; and &#39;dict&#39;
</pre></div>
</div>
<p>To sort the data in dictionary, we need to provide a ‘key’ to the sort() method. The key can be extracted from the dictionary using a function. Then this function should be called using sort() method as shown below,</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">sort() method has the ‘key’ argument i.e. it is not user-defined name.</p>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">sort_name</span><span class="p">(</span><span class="n">all_data</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="n">all_data</span><span class="p">[</span><span class="s1">&#39;metal&#39;</span><span class="p">]</span>
<span class="gp">...</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ring_data</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="n">sort_name</span><span class="p">)</span>  <span class="c1"># sort the data</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">data</span> <span class="ow">in</span> <span class="n">ring_data</span><span class="p">:</span>
<span class="gp">... </span>    <span class="k">print</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<span class="gp">...</span>
<span class="go">{&#39;date&#39;: &#39;2017-09-11&#39;, &#39;metal&#39;: &#39;Copper&#39;, &#39;radius&#39;: 4.1,</span>
<span class="go">    &#39;price&#39;: 70.25, &#39;quantity&#39;: 12}</span>

<span class="go">{&#39;date&#39;: &#39;2016-06-12&#39;, &#39;metal&#39;: &#39;Gold&#39;, &#39;radius&#39;: 5.5,</span>
<span class="go">    &#39;price&#39;: 80.99, &#39;quantity&#39;: 1}</span>

<span class="go">{&#39;date&#39;: &#39;2014-03-23&#39;, &#39;metal&#39;: &#39;Gold&#39;, &#39;radius&#39;: 8.0,</span>
<span class="go">    &#39;price&#39;: 120.3, &#39;quantity&#39;: 2}</span>

<span class="go">{&#39;date&#39;: &#39;2016-01-21&#39;, &#39;metal&#39;: &#39;Iron&#39;, &#39;radius&#39;: 9.2,</span>
<span class="go">    &#39;price&#39;: 14.29, &#39;quantity&#39;: 8}</span>

<span class="go">{&#39;date&#39;: &#39;2011-01-20&#39;, &#39;metal&#39;: &#39;Iron&#39;, &#39;radius&#39;: 3.25,</span>
<span class="go">    &#39;price&#39;: 10.99, &#39;quantity&#39;: 3}</span>

<span class="go">{&#39;date&#39;: &#39;2015-07-13&#39;, &#39;metal&#39;: &#39;Silver&#39;, &#39;radius&#39;: 40.3,</span>
<span class="go">    &#39;price&#39;: 5.5, &#39;quantity&#39;: 3}</span>
</pre></div>
</div>
</div>
<div class="section" id="id1">
<h4>Lambda operator<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h4>
<p>The problem with above method is that we need to define a one line function for each key e.g. ‘metal’, ‘price’ and ‘radius’ etc. (if we want to sort on every key), which is not desirable coding-style.</p>
<p>Lambda operators are the one operators which can be used to replace the one line function. Let’s see some example of Lambda operator first,</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sq</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span> <span class="p">:</span> <span class="n">x</span><span class="o">**</span><span class="mi">2</span>  <span class="c1"># one line function for x**2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sq</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="go">9</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">sum2Num</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="p">:</span> <span class="n">x</span> <span class="o">+</span> <span class="n">y</span> <span class="c1"># lambda operator with two variable</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sum2Num</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
<span class="go">7</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>In ‘sq = lambda x : x**2’, the ‘x’ is the input argument to function and the value after ‘:’, i.e. x**2, is the return value. And ‘sq’ is the name of the function i.e. the statement is equivalent to below code,</p>
<div class="last highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">sq</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">x</span><span class="o">**</span><span class="mi">2</span>
</pre></div>
</div>
</div>
<p>Now, we will use the sort() method using lambda operator as shown below,</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ring_data</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">all_data</span> <span class="p">:</span> <span class="n">all_data</span><span class="p">[</span><span class="s1">&#39;metal&#39;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">data</span> <span class="ow">in</span> <span class="n">ring_data</span><span class="p">:</span>
<span class="gp">... </span>    <span class="k">print</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<span class="gp">...</span>
<span class="go">{&#39;date&#39;: &#39;2017-09-11&#39;, &#39;metal&#39;: &#39;Copper&#39;, &#39;radius&#39;: 4.1,</span>
<span class="go">    &#39;price&#39;: 70.25, &#39;quantity&#39;: 12}</span>

<span class="go">{&#39;date&#39;: &#39;2016-06-12&#39;, &#39;metal&#39;: &#39;Gold&#39;, &#39;radius&#39;: 5.5,</span>
<span class="go">    &#39;price&#39;: 80.99, &#39;quantity&#39;: 1}</span>

<span class="go">{&#39;date&#39;: &#39;2014-03-23&#39;, &#39;metal&#39;: &#39;Gold&#39;, &#39;radius&#39;: 8.0,</span>
<span class="go">    &#39;price&#39;: 120.3, &#39;quantity&#39;: 2}</span>

<span class="go">{&#39;date&#39;: &#39;2016-01-21&#39;, &#39;metal&#39;: &#39;Iron&#39;, &#39;radius&#39;: 9.2,</span>
<span class="go">    &#39;price&#39;: 14.29, &#39;quantity&#39;: 8}</span>

<span class="go">{&#39;date&#39;: &#39;2011-01-20&#39;, &#39;metal&#39;: &#39;Iron&#39;, &#39;radius&#39;: 3.25,</span>
<span class="go">    &#39;price&#39;: 10.99, &#39;quantity&#39;: 3}</span>

<span class="go">{&#39;date&#39;: &#39;2015-07-13&#39;, &#39;metal&#39;: &#39;Silver&#39;, &#39;radius&#39;: 40.3,</span>
<span class="go">    &#39;price&#39;: 5.5, &#39;quantity&#39;: 3}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="find-and-arrange-gold-rings">
<h3>Find and arrange Gold rings<a class="headerlink" href="#find-and-arrange-gold-rings" title="Permalink to this headline">¶</a></h3>
<p>Let’s add List comprehension and Lambda operator in the file ‘datamine.py’. In the below code, the Gold rings are extracted first; and then the rings are arranged in decreasing order according to radius.</p>
<div class="literal-block-wrapper docutils container" id="py-find-arrange-ring">
<div class="code-block-caption"><span class="caption-text">Find and arrange Gold rings</span><a class="headerlink" href="#py-find-arrange-ring" title="Permalink to this code">¶</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span> <span class="c1"># datamine.py</span>

 <span class="kn">import</span> <span class="nn">csv</span>

 <span class="k">def</span> <span class="nf">read_file</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;warn&#39;</span><span class="p">):</span>
     <span class="sd">&#39;&#39;&#39; read csv file and save data in the list &#39;&#39;&#39;</span>

     <span class="c1"># check for correct mode</span>
     <span class="k">if</span> <span class="n">mode</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;warn&#39;</span><span class="p">,</span> <span class="s1">&#39;silent&#39;</span><span class="p">,</span> <span class="s1">&#39;stop&#39;</span><span class="p">]:</span>
         <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;possible modes are &#39;warn&#39;, &#39;silent&#39;, &#39;stop&#39;&quot;</span><span class="p">)</span>

     <span class="n">ring_data</span> <span class="o">=</span> <span class="p">[]</span> <span class="c1"># create empty list to save data</span>

     <span class="k">with</span> <span class="nb">open</span> <span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
         <span class="n">rows</span> <span class="o">=</span>  <span class="n">csv</span><span class="o">.</span><span class="n">reader</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
         <span class="n">header</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="n">rows</span><span class="p">)</span> <span class="c1"># skip the header</span>

         <span class="c1"># change the types of the columns</span>
         <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">rows</span><span class="p">:</span>
             <span class="k">try</span><span class="p">:</span>
                 <span class="n">row</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span> <span class="c1"># radius</span>
                 <span class="n">row</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="mi">3</span><span class="p">])</span> <span class="c1"># price</span>
                 <span class="n">row</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="mi">4</span><span class="p">])</span> <span class="c1"># quantity</span>
             <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">err</span><span class="p">:</span> <span class="c1"># process value error only</span>
                 <span class="k">if</span> <span class="n">mode</span> <span class="o">==</span> <span class="s1">&#39;warn&#39;</span><span class="p">:</span>
                     <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Invalid data, row is skipped&quot;</span><span class="p">)</span>
                     <span class="k">print</span><span class="p">(</span><span class="s1">&#39;Row: {}, Reason : {}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">row_num</span><span class="p">,</span> <span class="n">err</span><span class="p">))</span>
                 <span class="k">elif</span> <span class="n">mode</span> <span class="o">==</span> <span class="s1">&#39;silent&#39;</span><span class="p">:</span>
                     <span class="k">pass</span> <span class="c1"># do nothing</span>
                 <span class="k">elif</span> <span class="n">mode</span> <span class="o">==</span> <span class="s1">&#39;stop&#39;</span><span class="p">:</span>
                     <span class="k">raise</span> <span class="c1"># raise the exception</span>
                 <span class="k">continue</span>

             <span class="c1"># ring_data.append(tuple(row))</span>

             <span class="c1"># append data in list in the form of tuple</span>
             <span class="n">row_dict</span> <span class="o">=</span> <span class="p">{</span>
                     <span class="s1">&#39;date&#39;</span> <span class="p">:</span> <span class="n">row</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
                     <span class="s1">&#39;metal&#39;</span> <span class="p">:</span> <span class="n">row</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
                     <span class="s1">&#39;radius&#39;</span> <span class="p">:</span> <span class="n">row</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span>
                     <span class="s1">&#39;price&#39;</span> <span class="p">:</span> <span class="n">row</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span>
                     <span class="s1">&#39;quantity&#39;</span> <span class="p">:</span> <span class="n">row</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span>
                 <span class="p">}</span>

             <span class="n">ring_data</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">row_dict</span><span class="p">)</span>

     <span class="k">return</span> <span class="n">ring_data</span>

 <span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
     <span class="n">ring_data</span> <span class="o">=</span> <span class="n">read_file</span><span class="p">(</span><span class="s1">&#39;price.csv&#39;</span><span class="p">)</span>

<span class="hll">     <span class="c1"># # total rows in the file</span>
</span><span class="hll">     <span class="c1"># print(&quot;Total rows: &quot;, len(ring_data))</span>
</span>
<span class="hll">     <span class="c1"># # total price calculation</span>
</span><span class="hll">     <span class="c1"># total_price = 0</span>
</span><span class="hll">     <span class="c1"># for row in ring_data:</span>
</span><span class="hll">         <span class="c1"># total_price += row[&#39;price&#39;] * row[&#39;quantity&#39;]</span>
</span><span class="hll">     <span class="c1"># print(&quot;Total price: {:10.2f}&quot;.format(total_price))</span>
</span>
<span class="hll">     <span class="c1"># extract Gold-ring : using List comprehension</span>
</span><span class="hll">     <span class="n">gold_ring</span> <span class="o">=</span> <span class="p">[</span><span class="n">ring</span> <span class="k">for</span> <span class="n">ring</span> <span class="ow">in</span> <span class="n">ring_data</span> <span class="k">if</span> <span class="n">ring</span><span class="p">[</span><span class="s1">&#39;metal&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Gold&#39;</span><span class="p">]</span>
</span><span class="hll">     <span class="k">for</span> <span class="n">ring</span> <span class="ow">in</span> <span class="n">gold_ring</span><span class="p">:</span> <span class="c1"># print metal and radius</span>
</span><span class="hll">         <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Metal: {0}, Radius: {1}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ring</span><span class="p">[</span><span class="s1">&#39;metal&#39;</span><span class="p">],</span> <span class="n">ring</span><span class="p">[</span><span class="s1">&#39;radius&#39;</span><span class="p">]))</span>
</span>
<span class="hll">     <span class="c1"># reverse-sort the data in gold_ring : using Lambda operators</span>
</span><span class="hll">     <span class="n">gold_ring</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">data</span> <span class="p">:</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;radius&#39;</span><span class="p">],</span> <span class="n">reverse</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</span><span class="hll">     <span class="k">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Radius in descending order:&quot;</span><span class="p">)</span>
</span><span class="hll">     <span class="k">for</span> <span class="n">ring</span> <span class="ow">in</span> <span class="n">gold_ring</span><span class="p">:</span> <span class="c1"># print metal and radius</span>
</span><span class="hll">         <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Metal: {0}, Radius: {1}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ring</span><span class="p">[</span><span class="s1">&#39;metal&#39;</span><span class="p">],</span> <span class="n">ring</span><span class="p">[</span><span class="s1">&#39;radius&#39;</span><span class="p">]))</span>
</span>
 <span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
     <span class="n">main</span><span class="p">()</span>
</pre></div>
</div>
</div>
<p>Now execute the file and we will get the following results,</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>$ python datamine.py
Metal: Gold, Radius: 5.5
Metal: Gold, Radius: 8.0

Radius in descending order:
Metal: Gold, Radius: 8.0
Metal: Gold, Radius: 5.5
</pre></div>
</div>
</div>
<div class="section" id="conclusion">
<h3>Conclusion<a class="headerlink" href="#conclusion" title="Permalink to this headline">¶</a></h3>
<p>In this chapter, we store the data in the list and dictionary. Then we perform the extraction operation on the dictionary using ‘list comprehension’. Lastly we used the ‘lambda operator’ for sorting the data in the dictionary.</p>
</div>
</div>
<span id="document-python/oops"></span><div class="section" id="object-oriented-programming">
<h2>Object oriented programming<a class="headerlink" href="#object-oriented-programming" title="Permalink to this headline">¶</a></h2>
<div class="section" id="pythonic-style">
<h3>Pythonic style<a class="headerlink" href="#pythonic-style" title="Permalink to this headline">¶</a></h3>
<p>In this chapter, we will see the basic differences between the OOPs methods in Python and other programming languages e.g. C++ and Java etc. This understanding is essential to use the Python language effectively; and to write the code in Pythonic ways, i.e. not converting a C++/Java code into a Python code.</p>
<p>Here we will see the actual logic behind various pieces of Python language e.g. instances, variables, method and &#64;property etc. Also, we will see the combine usage of these pieces to complete a design with Agile methodology.</p>
</div>
<div class="section" id="simple-data-structure-to-classes">
<h3>Simple data structure to Classes<a class="headerlink" href="#simple-data-structure-to-classes" title="Permalink to this headline">¶</a></h3>
<p>In this section, we will convert our previous codes into classes.</p>
<div class="section" id="instance-variable">
<h4>Instance variable<a class="headerlink" href="#instance-variable" title="Permalink to this headline">¶</a></h4>
<p>First create a class, which can contain various columns of the csv file as shown in the below code. Please note the following points,</p>
<ul class="simple">
<li>__init__ is the initializer (often called the constructor), which initializes the instance variables.</li>
<li>self.radius, self.date and self.metal are the instance variables which are created by the __init__.</li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># pythonic.py</span>

<span class="kn">import</span> <span class="nn">math</span>

<span class="k">class</span> <span class="nc">Ring</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; Here we will see the actual logic behind various pieces of Python</span>
<span class="sd">    language e.g. instances, variables, method and @property etc.</span>
<span class="sd">    Also, we will see the combine usage of these pieces to complete a</span>
<span class="sd">    design with Agile methodology.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">date</span><span class="p">,</span> <span class="n">metal</span><span class="p">,</span> <span class="n">radius</span><span class="p">,</span> <span class="n">price</span><span class="p">,</span> <span class="n">quantity</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; init is not the constructor, but the initializer which</span>
<span class="sd">        initialize the instance variable</span>

<span class="sd">        self : is the instance</span>

<span class="sd">        __init__ takes the instance &#39;self&#39; and populates it with the radius,</span>
<span class="sd">        metal, date etc. and store in a dictionary.</span>

<span class="sd">        self.radius, self.metal etc. are the instance variable which</span>
<span class="sd">        must be unique.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">date</span> <span class="o">=</span> <span class="n">date</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">metal</span> <span class="o">=</span> <span class="n">metal</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">radius</span> <span class="o">=</span> <span class="n">radius</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">price</span> <span class="o">=</span> <span class="n">price</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">quantity</span> <span class="o">=</span> <span class="n">quantity</span>

    <span class="k">def</span> <span class="nf">cost</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">price</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">quantity</span>

    <span class="k">def</span> <span class="nf">area</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">math</span><span class="o">.</span><span class="n">pi</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">radius</span><span class="o">**</span><span class="mi">2</span>
</pre></div>
</div>
</div>
<div class="section" id="object-of-class">
<h4>Object of class<a class="headerlink" href="#object-of-class" title="Permalink to this headline">¶</a></h4>
<p>Let’s create an object ‘r’ of the class ‘Ring’, to verify the operation of the class, as shown below,</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pythonic</span> <span class="kn">import</span> <span class="n">Ring</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">r</span> <span class="o">=</span> <span class="n">Ring</span><span class="p">(</span><span class="s2">&quot;2017=08-10&quot;</span><span class="p">,</span> <span class="s2">&quot;Gold&quot;</span><span class="p">,</span> <span class="mf">5.5</span><span class="p">,</span> <span class="mf">10.5</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">r</span><span class="o">.</span><span class="n">metal</span>
<span class="go">&#39;Gold&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">r</span><span class="o">.</span><span class="n">cost</span><span class="p">()</span>
<span class="go">105.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">r</span><span class="o">.</span><span class="n">area</span><span class="p">()</span>
<span class="go">95.03317777109125</span>
</pre></div>
</div>
</div>
<div class="section" id="class-variable-and-initialization">
<h4>Class variable and initialization<a class="headerlink" href="#class-variable-and-initialization" title="Permalink to this headline">¶</a></h4>
<p>Lets, add some class variables to the above class. And define some initial values to the arguments in the __init__ function as shown below,</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Class variable should be used to create the shared variables. It is always good to put the shared variables on the class level rather than instance level.</p>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># pythonic.py</span>

<span class="kn">import</span> <span class="nn">math</span>
<span class="hll"><span class="kn">import</span> <span class="nn">time</span>
</span>
<span class="k">class</span> <span class="nc">Ring</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; Here we will see the actual logic behind various pieces of Python</span>
<span class="sd">    language e.g. instances, variables, method and @property etc.</span>
<span class="sd">    Also, we will see the combine usage of these pieces to complete a</span>
<span class="sd">    design with Agile methodology.</span>
<span class="sd">    &quot;&quot;&quot;</span>

<span class="hll">    <span class="c1"># class variables</span>
</span><span class="hll">    <span class="n">date</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;%Y-%m-</span><span class="si">%d</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">time</span><span class="o">.</span><span class="n">gmtime</span><span class="p">())</span> <span class="c1"># today&#39;s date &quot;YYYY-mm-dd&quot;</span>
</span><span class="hll">    <span class="n">center</span> <span class="o">=</span> <span class="mf">0.0</span> <span class="c1"># center of the ring</span>
</span>
<span class="hll">    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">date</span><span class="o">=</span><span class="n">date</span><span class="p">,</span> <span class="n">metal</span><span class="o">=</span><span class="s2">&quot;Copper&quot;</span><span class="p">,</span> <span class="n">radius</span><span class="o">=</span><span class="mf">5.0</span><span class="p">,</span>
</span><span class="hll">                <span class="n">price</span><span class="o">=</span><span class="mf">5.0</span><span class="p">,</span> <span class="n">quantity</span><span class="o">=</span><span class="mi">5</span><span class="p">):</span>
</span>        <span class="sd">&quot;&quot;&quot; init is not the constructor, but the initializer which</span>
<span class="sd">        initialize the instance variable</span>

<span class="sd">        self : is the instance</span>

<span class="sd">        __init__ takes the instance &#39;self&#39; and populates it with the radius,</span>
<span class="sd">        metal, date etc. and store in a dictionary.</span>

<span class="sd">        self.radius, self.metal etc. are the instance variable which</span>
<span class="sd">        must be unique.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">date</span> <span class="o">=</span> <span class="n">date</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">metal</span> <span class="o">=</span> <span class="n">metal</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">radius</span> <span class="o">=</span> <span class="n">radius</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">price</span> <span class="o">=</span> <span class="n">price</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">quantity</span> <span class="o">=</span> <span class="n">quantity</span>

    <span class="k">def</span> <span class="nf">cost</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">price</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">quantity</span>

    <span class="k">def</span> <span class="nf">area</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">math</span><span class="o">.</span><span class="n">pi</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">radius</span><span class="o">**</span><span class="mi">2</span>
</pre></div>
</div>
<p>Lets check the functionality of the above code,</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>$ python -i pythonic.py
</pre></div>
</div>
<p>Note that we used ‘-i’ option, therefore there is no need to import the class ‘Ring’ as shown in below code,</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">r</span> <span class="o">=</span> <span class="n">Ring</span><span class="p">()</span> <span class="c1"># no paratmer pass therefore default values will be used</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">r</span><span class="o">.</span><span class="n">date</span> <span class="c1"># instance variable</span>
<span class="go">&#39;2017-10-27&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">r</span><span class="o">.</span><span class="n">radius</span> <span class="c1"># instance variable</span>
<span class="go">5.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">r</span><span class="o">.</span><span class="n">center</span> <span class="c1"># class variable</span>
<span class="go">0.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">r</span><span class="o">.</span><span class="n">cost</span><span class="p">()</span> <span class="c1"># class method</span>
<span class="go">25.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">r</span><span class="o">.</span><span class="n">area</span><span class="p">()</span> <span class="c1"># class method</span>
<span class="go">78.53981633974483</span>
</pre></div>
</div>
<p>Also, we can modify the instance and class variables values as shown below,</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">r</span><span class="o">.</span><span class="n">price</span> <span class="c1"># current value</span>
<span class="go">5.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">r</span><span class="o">.</span><span class="n">quantity</span>
<span class="go">5</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">r</span><span class="o">.</span><span class="n">cost</span><span class="p">()</span>
<span class="go">25.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">r</span><span class="o">.</span><span class="n">quantity</span><span class="o">=</span><span class="mi">10</span> <span class="c1"># modify instance variable</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">r</span><span class="o">.</span><span class="n">cost</span><span class="p">()</span> <span class="c1"># price is changed to 50</span>
<span class="go">50.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">r</span><span class="o">.</span><span class="n">center</span> <span class="o">=</span> <span class="mi">10</span> <span class="c1"># modify class variable</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">r</span><span class="o">.</span><span class="n">center</span>
<span class="go">10</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>The value of the variables are stored in the dictionary, whose contents can be seen using ‘__dict__’, i.e.,</p>
<div class="last highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">r</span><span class="o">.</span><span class="vm">__dict__</span>
<span class="go">{&#39;date&#39;: &#39;2017-10-27&#39;, &#39;metal&#39;: &#39;Copper&#39;, &#39;radius&#39;: 5.0,</span>
<span class="go">&#39;price&#39;: 5.0, &#39;quantity&#39;: 10, &#39;center&#39;: 10}</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="shipping-product-and-agile-methodology">
<h3>Shipping product and Agile methodology<a class="headerlink" href="#shipping-product-and-agile-methodology" title="Permalink to this headline">¶</a></h3>
<p>In previous section, we create the object of the class in the Python shell. Now, we will create object of the class in the file itself, as show below,</p>
<div class="admonition important">
<p class="first admonition-title">Important</p>
<p>Note that, at this moment, we did not add to many features to class in <a class="reference internal" href="#py-shipping-product"><span class="std std-numref">Listing 10.1</span></a>. We added only two methods here i.e. ‘area’ and ‘cost’. Now, we are ready to ship this product to our customers.</p>
<p class="last">We will add more features according to feedback provided by the costumers as shown in subsequent sections. This is called the ‘Agile’ methodology. This will give us a chance to understand the psychology behind the several elements of the Python language.</p>
</div>
<div class="literal-block-wrapper docutils container" id="py-shipping-product">
<div class="code-block-caption"><span class="caption-text">Shipping product is ready</span><a class="headerlink" href="#py-shipping-product" title="Permalink to this code">¶</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># pythonic.py</span>

<span class="kn">import</span> <span class="nn">math</span>
<span class="kn">import</span> <span class="nn">time</span>

<span class="k">class</span> <span class="nc">Ring</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; Here we will see the actual logic behind various pieces of Python</span>
<span class="sd">    language e.g. instances, variables, method and @property etc.</span>
<span class="sd">    Also, we will see the combine usage of these pieces to complete a</span>
<span class="sd">    design with Agile methodology.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c1"># class variables</span>
    <span class="n">date</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;%Y-%m-</span><span class="si">%d</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">time</span><span class="o">.</span><span class="n">gmtime</span><span class="p">())</span> <span class="c1"># today&#39;s date &quot;YYYY-mm-dd&quot;</span>
    <span class="n">center</span> <span class="o">=</span> <span class="mf">0.0</span> <span class="c1"># center of the ring</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">date</span><span class="o">=</span><span class="n">date</span><span class="p">,</span> <span class="n">metal</span><span class="o">=</span><span class="s2">&quot;Copper&quot;</span><span class="p">,</span> <span class="n">radius</span><span class="o">=</span><span class="mf">5.0</span><span class="p">,</span>
                <span class="n">price</span><span class="o">=</span><span class="mf">5.0</span><span class="p">,</span> <span class="n">quantity</span><span class="o">=</span><span class="mi">5</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; init is not the constructor, but the initializer which</span>
<span class="sd">        initialize the instance variable</span>

<span class="sd">        self : is the instance</span>

<span class="sd">        __init__ takes the instance &#39;self&#39; and populates it with the radius,</span>
<span class="sd">        metal, date etc. and store in a dictionary.</span>

<span class="sd">        self.radius, self.metal etc. are the instance variable which</span>
<span class="sd">        must be unique.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">date</span> <span class="o">=</span> <span class="n">date</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">metal</span> <span class="o">=</span> <span class="n">metal</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">radius</span> <span class="o">=</span> <span class="n">radius</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">price</span> <span class="o">=</span> <span class="n">price</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">quantity</span> <span class="o">=</span> <span class="n">quantity</span>

    <span class="k">def</span> <span class="nf">cost</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">price</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">quantity</span>

    <span class="k">def</span> <span class="nf">area</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">math</span><span class="o">.</span><span class="n">pi</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">radius</span><span class="o">**</span><span class="mi">2</span>

<span class="hll"><span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
</span><span class="hll">    <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Center of the Ring is at:&quot;</span><span class="p">,</span> <span class="n">Ring</span><span class="o">.</span><span class="n">center</span><span class="p">)</span> <span class="c1"># modify class variable</span>
</span><span class="hll">    <span class="n">r</span> <span class="o">=</span> <span class="n">Ring</span><span class="p">(</span><span class="n">price</span><span class="o">=</span><span class="mi">8</span><span class="p">)</span> <span class="c1"># modify only price</span>
</span><span class="hll">    <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Radius:{0}, Cost:{1}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">radius</span><span class="p">,</span> <span class="n">r</span><span class="o">.</span><span class="n">cost</span><span class="p">()))</span>
</span>
<span class="hll"><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
</span><span class="hll">    <span class="n">main</span><span class="p">()</span>
</span></pre></div>
</div>
</div>
<p>Following are the results for above code,</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>$ python pythonic.py
Center of the Ring is at: <span class="m">0</span>.0
Radius:5.0, Cost:40
</pre></div>
</div>
</div>
<div class="section" id="attribute-access">
<h3>Attribute access<a class="headerlink" href="#attribute-access" title="Permalink to this headline">¶</a></h3>
<p>Before moving further, let us understand the attribute access (i.e. variable in the class).</p>
<div class="section" id="get-set-and-del">
<h4>get, set and del<a class="headerlink" href="#get-set-and-del" title="Permalink to this headline">¶</a></h4>
<p>In python, everything is an object. And there are only three operations which can be applied to the objects i.e.,</p>
<ul class="simple">
<li>get</li>
<li>set</li>
<li>delete</li>
</ul>
<p>These operations are used as below,</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pythonic</span> <span class="kn">import</span> <span class="n">Ring</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">r</span> <span class="o">=</span> <span class="n">Ring</span><span class="p">()</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">r</span><span class="o">.</span><span class="n">metal</span> <span class="c1"># get operation</span>
<span class="go">&#39;Copper&#39;</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">r</span><span class="o">.</span><span class="n">metal</span> <span class="o">=</span> <span class="s2">&quot;Gold&quot;</span> <span class="c1"># set operation</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">r</span><span class="o">.</span><span class="n">metal</span>
<span class="go">&#39;Gold&#39;</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">del</span> <span class="n">r</span><span class="o">.</span><span class="n">metal</span><span class="p">,</span> <span class="n">r</span><span class="o">.</span><span class="n">date</span><span class="p">,</span> <span class="n">r</span><span class="o">.</span><span class="n">price</span>  <span class="c1"># delete operation</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">r</span><span class="o">.</span><span class="n">metal</span>
<span class="gt">Traceback (most recent call last):</span>
  File <span class="nb">&quot;&lt;stdin&gt;&quot;</span>, line <span class="m">1</span>, in <span class="n">&lt;module&gt;</span>
<span class="gr">AttributeError</span>: <span class="n">&#39;Ring&#39; object has no attribute &#39;metal&#39;</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">r</span><span class="o">.</span><span class="vm">__dict__</span>  <span class="c1"># only radius and quantity left</span>
<span class="go">{&#39;radius&#39;: 5.0, &#39;quantity&#39;: 5}</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p>If attribute does not exist in the dictionary, then it will be created, e.g. in the below code, we used h.metals (plural metals) for the metal name instead of h.metal, therefore a new attribute will be created. Hence, be careful while setting the attributes of the class.</p>
<div class="last highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">r</span><span class="o">.</span><span class="n">metals</span> <span class="o">=</span> <span class="s2">&quot;Iron&quot;</span> <span class="c1"># add item to dict</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">r</span><span class="o">.</span><span class="vm">__dict__</span>
<span class="go">{&#39;radius&#39;: 5.0, &#39;quantity&#39;: 5, &#39;metals&#39;: &#39;Iron&#39;}</span>
</pre></div>
</div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>The class method has two layers of the get-set-del operations as shown below,</p>
<div class="last highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">r</span><span class="o">.</span><span class="n">area</span><span class="p">()</span>
<span class="go">78.53981633974483</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">area</span><span class="p">)()</span> <span class="c1"># (layer1)(layer2)</span>
<span class="go">78.53981633974483</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">r</span><span class="o">.</span><span class="n">area</span> <span class="c1"># layer 1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span>
<span class="go">&lt;bound method Ring.area of &lt;pythonic.Ring object at 0xb7132f2c&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="p">()</span> <span class="c1"># layer 2</span>
<span class="go">78.53981633974483</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="getattr-setattr-and-delattr">
<h4>getattr, setattr and delattr<a class="headerlink" href="#getattr-setattr-and-delattr" title="Permalink to this headline">¶</a></h4>
<p>getattr, setattr and delattr are invoked when we use the get, set and delete operations respectively. The knowledge of these methods can be very useful in writing the general purpose codes as shown in <a class="reference internal" href="#sec-gen-purpose-code"><span class="std std-numref">Section 10.5.2</span></a>.</p>
<p>Below an example of getattr and setattr, where the columns are printed using ‘getattr’. Note that the code is generalized here, as we can print all the columns using one statement only i.e. Lines 10-11.</p>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pythonic</span> <span class="kn">import</span> <span class="n">Ring</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">r</span> <span class="o">=</span> <span class="n">Ring</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">getattr</span><span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="s1">&#39;metal&#39;</span><span class="p">)</span>  <span class="c1"># get</span>
<span class="go">&#39;Copper&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">setattr</span><span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="s1">&#39;metal&#39;</span><span class="p">,</span> <span class="s1">&#39;Gold&#39;</span><span class="p">)</span>  <span class="c1"># set</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">r</span><span class="o">.</span><span class="n">metal</span>
<span class="go">&#39;Gold&#39;</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">out_col</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;metal&#39;</span><span class="p">,</span> <span class="s1">&#39;radius&#39;</span><span class="p">,</span> <span class="s1">&#39;quantity&#39;</span><span class="p">]</span>
<span class="hll"><span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">out_col</span><span class="p">:</span> <span class="c1"># print columns and value using getattr</span>
</span><span class="hll"><span class="gp">... </span>    <span class="k">print</span><span class="p">(</span><span class="s2">&quot;{0} : {1}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">col</span><span class="p">,</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="n">col</span><span class="p">)))</span>
</span><span class="gp">...</span>
<span class="go">metal : Gold</span>
<span class="go">radius : 5.0</span>
<span class="go">quantity : 5</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">delattr</span><span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="s1">&#39;metal&#39;</span><span class="p">)</span> <span class="c1"># delete &#39;metal&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">r</span><span class="o">.</span><span class="vm">__dict__</span> <span class="c1"># &#39;metal&#39; is removed from dictionary</span>
<span class="go">{&#39;date&#39;: &#39;2017-10-27&#39;, &#39;radius&#39;: 5.0, &#39;price&#39;: 5.0, &#39;quantity&#39;: 5}</span>
</pre></div>
</td></tr></table></div>
</div>
</div>
<div class="section" id="users">
<h3>Users<a class="headerlink" href="#users" title="Permalink to this headline">¶</a></h3>
<p>Lets assume that we have two types of users for our product. One of them is ‘mathematician’ who is using our product for the mathematical analysis of the data; whereas the other is a ‘contributer’, who is implementing additional features to the product. Both of them will provide some feedbacks according to their need and we will modify our class to meet their requirement.</p>
<div class="section" id="average-area">
<h4>Average area<a class="headerlink" href="#average-area" title="Permalink to this headline">¶</a></h4>
<p>The first user, i.e. mathematician, uses our design to calculate the average area of the ring, as shown below,</p>
<div class="literal-block-wrapper docutils container" id="py-math-avg-area">
<div class="code-block-caption"><span class="caption-text">Average area</span><a class="headerlink" href="#py-math-avg-area" title="Permalink to this code">¶</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># mathematician.py</span>
<span class="c1"># user-1: using Ring.py for mathematical analysis</span>

<span class="kn">from</span> <span class="nn">random</span> <span class="kn">import</span> <span class="n">random</span><span class="p">,</span> <span class="n">seed</span>
<span class="kn">from</span> <span class="nn">pythonic</span> <span class="kn">import</span> <span class="n">Ring</span>

<span class="k">def</span> <span class="nf">calc_avg_area</span><span class="p">(</span><span class="n">n</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">seed_value</span><span class="o">=</span><span class="mi">3</span><span class="p">):</span>
    <span class="c1"># seed for random number generator</span>
    <span class="n">seed</span><span class="p">(</span><span class="n">seed_value</span><span class="p">)</span>

    <span class="c1"># random radius</span>
    <span class="n">rings</span> <span class="o">=</span> <span class="p">[</span><span class="n">Ring</span><span class="p">(</span><span class="n">radius</span><span class="o">=</span><span class="n">random</span><span class="p">())</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">)]</span>

    <span class="n">total</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">rings</span><span class="p">:</span>
        <span class="n">total</span> <span class="o">+=</span> <span class="n">r</span><span class="o">.</span><span class="n">area</span><span class="p">()</span>
        <span class="c1"># # print values for each iteration</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%0.2f</span><span class="s2">, </span><span class="si">%0.2f</span><span class="s2">, </span><span class="si">%0.2f</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">radius</span><span class="p">,</span> <span class="n">r</span><span class="o">.</span><span class="n">area</span><span class="p">(),</span> <span class="n">total</span><span class="p">))</span>
    <span class="n">avg_area</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">([</span><span class="n">r</span><span class="o">.</span><span class="n">area</span><span class="p">()</span> <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">rings</span><span class="p">])</span><span class="o">/</span><span class="n">n</span>

    <span class="k">return</span> <span class="n">avg_area</span>

<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="c1"># generate &#39;n&#39; rings</span>
    <span class="n">n</span> <span class="o">=</span> <span class="mi">10</span>
    <span class="n">avg_area</span> <span class="o">=</span> <span class="n">calc_avg_area</span><span class="p">(</span><span class="n">n</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Average area for n={0} is n/{0} = {1:.2f}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="n">avg_area</span><span class="p">))</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
</pre></div>
</div>
</div>
<p>Following is the result of above code,</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>$ python mathematician.py

0.24, 0.18, 0.18
0.54, 0.93, 1.11
0.37, 0.43, 1.54
0.60, 1.15, 2.68
0.63, 1.23, 3.91
0.07, 0.01, 3.93
0.01, 0.00, 3.93
0.84, 2.20, 6.13
0.26, 0.21, 6.34
0.23, 0.17, 6.52

Average area for n=10 is n/10 = 0.65
</pre></div>
</div>
</div>
<div class="section" id="table-formatting">
<span id="sec-gen-purpose-code"></span><h4>Table formatting<a class="headerlink" href="#table-formatting" title="Permalink to this headline">¶</a></h4>
<p>The second user, i.e. contributor, has added the table-formatting functionality for class ‘Ring’.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>The code is generalized format as compared to <a class="reference internal" href="index.html#py-find-arrange-ring"><span class="std std-numref">Listing 9.1</span></a>. Following are the changes made here,</p>
<ul class="last simple">
<li>At line 31, the conversion is generalized using ‘list comprehension’.</li>
<li>The function ‘print_table (Lines 67-76)’ is generalized using ‘getattr’ method. Here, we can print desired columns of the table by passing a list of ‘column names’.</li>
</ul>
</div>
<div class="literal-block-wrapper docutils container" id="py-table-format-def">
<div class="code-block-caption"><span class="caption-text">Table formatter</span><a class="headerlink" href="#py-table-format-def" title="Permalink to this code">¶</a></div>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1"># contributor.py</span>
<span class="c1"># user-2: additional features will be added to pythonic.py by the contributor</span>

<span class="hll"><span class="kn">import</span> <span class="nn">csv</span>
</span>
<span class="hll"><span class="kn">from</span> <span class="nn">pythonic</span> <span class="kn">import</span> <span class="n">Ring</span>
</span>
<span class="hll"><span class="c1"># this code is copied from datamine.py file and modified slightly</span>
</span><span class="hll"><span class="c1"># to include the type of the data</span>
</span><span class="hll"><span class="k">def</span> <span class="nf">read_file</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">types</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;warn&#39;</span><span class="p">):</span>
</span>    <span class="sd">&#39;&#39;&#39; read csv file and save data in the list &#39;&#39;&#39;</span>

    <span class="c1"># check for correct mode</span>
    <span class="k">if</span> <span class="n">mode</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;warn&#39;</span><span class="p">,</span> <span class="s1">&#39;silent&#39;</span><span class="p">,</span> <span class="s1">&#39;stop&#39;</span><span class="p">]:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;possible modes are &#39;warn&#39;, &#39;silent&#39;, &#39;stop&#39;&quot;</span><span class="p">)</span>

    <span class="n">ring_data</span> <span class="o">=</span> <span class="p">[]</span> <span class="c1"># create empty list to save data</span>

    <span class="k">with</span> <span class="nb">open</span> <span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
        <span class="n">rows</span> <span class="o">=</span>  <span class="n">csv</span><span class="o">.</span><span class="n">reader</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
        <span class="n">header</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="n">rows</span><span class="p">)</span> <span class="c1"># skip the header</span>

        <span class="c1"># change the types of the columns</span>
        <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">rows</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
<span class="hll">                <span class="c1"># row[2] = float(row[2]) # radius</span>
</span><span class="hll">                <span class="c1"># row[3] = float(row[3]) # price</span>
</span><span class="hll">                <span class="c1"># row[4] = int(row[4]) # quantity</span>
</span>
<span class="hll">                <span class="c1"># generalized conversion</span>
</span><span class="hll">                <span class="n">row</span> <span class="o">=</span> <span class="p">[</span><span class="n">d_type</span><span class="p">(</span><span class="n">val</span><span class="p">)</span> <span class="k">for</span> <span class="n">d_type</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">types</span><span class="p">,</span> <span class="n">row</span><span class="p">)]</span>
</span>            <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">err</span><span class="p">:</span> <span class="c1"># process value error only</span>
                <span class="k">if</span> <span class="n">mode</span> <span class="o">==</span> <span class="s1">&#39;warn&#39;</span><span class="p">:</span>
                    <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Invalid data, row is skipped&quot;</span><span class="p">)</span>
                    <span class="k">print</span><span class="p">(</span><span class="s1">&#39;Row: {}, Reason : {}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">row_num</span><span class="p">,</span> <span class="n">err</span><span class="p">))</span>
                <span class="k">elif</span> <span class="n">mode</span> <span class="o">==</span> <span class="s1">&#39;silent&#39;</span><span class="p">:</span>
                    <span class="k">pass</span> <span class="c1"># do nothing</span>
                <span class="k">elif</span> <span class="n">mode</span> <span class="o">==</span> <span class="s1">&#39;stop&#39;</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="c1"># raise the exception</span>
                <span class="k">continue</span>

<span class="hll">            <span class="c1"># ring_data.append(tuple(row))</span>
</span>
<span class="hll">            <span class="c1"># append data in list in the form of tuple</span>
</span><span class="hll">            <span class="c1"># row_dict = {</span>
</span><span class="hll">                    <span class="c1"># &#39;date&#39; : row[0],</span>
</span><span class="hll">                    <span class="c1"># &#39;metal&#39; : row[1],</span>
</span><span class="hll">                    <span class="c1"># &#39;radius&#39; : row[2],</span>
</span><span class="hll">                    <span class="c1"># &#39;price&#39; : row[3],</span>
</span><span class="hll">                    <span class="c1"># &#39;quantity&#39; : row[4]</span>
</span><span class="hll">                <span class="c1"># }</span>
</span>
<span class="hll">            <span class="c1"># row_dict = Ring(row[0], row[1], row[2], row[3], row[4])</span>
</span><span class="hll">            <span class="c1"># # use below or above line</span>
</span><span class="hll">            <span class="n">row_dict</span> <span class="o">=</span> <span class="n">Ring</span><span class="p">(</span>
</span><span class="hll">                    <span class="n">date</span> <span class="o">=</span> <span class="n">row</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
</span><span class="hll">                    <span class="n">metal</span> <span class="o">=</span> <span class="n">row</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
</span><span class="hll">                    <span class="n">radius</span> <span class="o">=</span> <span class="n">row</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span>
</span><span class="hll">                    <span class="n">price</span> <span class="o">=</span> <span class="n">row</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span>
</span><span class="hll">                    <span class="n">quantity</span> <span class="o">=</span> <span class="n">row</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span>
</span><span class="hll">                <span class="p">)</span>
</span>
            <span class="n">ring_data</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">row_dict</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">ring_data</span>

<span class="hll"><span class="c1"># table formatter</span>
</span><span class="hll"><span class="k">def</span> <span class="nf">print_table</span><span class="p">(</span><span class="n">list_name</span><span class="p">,</span> <span class="n">col_name</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;metal&#39;</span><span class="p">,</span> <span class="s1">&#39;radius&#39;</span><span class="p">]):</span>
</span><span class="hll">    <span class="sd">&quot;&quot;&quot; print the formatted output &quot;&quot;&quot;</span>
</span><span class="hll">
</span><span class="hll">    <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">col_name</span><span class="p">:</span> <span class="c1"># print header</span>
</span><span class="hll">        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;{:&gt;7s}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">c</span><span class="p">),</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
</span><span class="hll">    <span class="k">print</span><span class="p">()</span> <span class="c1"># print empty line</span>
</span><span class="hll">    <span class="k">for</span> <span class="n">l</span> <span class="ow">in</span> <span class="n">list_name</span><span class="p">:</span> <span class="c1"># print values</span>
</span><span class="hll">        <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">col_name</span><span class="p">:</span>
</span><span class="hll">            <span class="k">print</span><span class="p">(</span><span class="s2">&quot;{:&gt;7s}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="nb">getattr</span><span class="p">(</span><span class="n">l</span><span class="p">,</span> <span class="n">c</span><span class="p">))),</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
</span><span class="hll">        <span class="k">print</span><span class="p">()</span>
</span>
<span class="hll"><span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
</span><span class="hll">    <span class="c1"># list correct types of columns in csv file</span>
</span><span class="hll">    <span class="n">types</span> <span class="o">=</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="nb">int</span><span class="p">]</span>
</span><span class="hll">
</span><span class="hll">    <span class="c1"># read file and save data in list</span>
</span><span class="hll">    <span class="n">list_data</span> <span class="o">=</span> <span class="n">read_file</span><span class="p">(</span><span class="s1">&#39;price.csv&#39;</span><span class="p">,</span> <span class="n">types</span><span class="p">)</span>
</span><span class="hll">
</span><span class="hll">    <span class="c1"># formatted output</span>
</span><span class="hll">    <span class="n">print_table</span><span class="p">(</span><span class="n">list_data</span><span class="p">)</span>
</span><span class="hll">    <span class="k">print</span><span class="p">()</span>
</span><span class="hll">    <span class="n">print_table</span><span class="p">(</span><span class="n">list_data</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;metal&#39;</span><span class="p">,</span> <span class="s1">&#39;radius&#39;</span><span class="p">,</span> <span class="s1">&#39;price&#39;</span><span class="p">])</span>
</span>
<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
</pre></div>
</td></tr></table></div>
</div>
<p>Following are the output for the above code,</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>$ python contributor.py

metal  radius
  Gold     5.5
Silver    40.3
  Iron     9.2
  Gold     8.0
Copper     4.1
  Iron    3.25

 metal  radius   price
  Gold     5.5   80.99
Silver    40.3     5.5
  Iron     9.2   14.29
  Gold     8.0   120.3
Copper     4.1   70.25
  Iron    3.25   10.99
</pre></div>
</div>
</div>
</div>
<div class="section" id="requirement-perimeter-method">
<h3>Requirement : perimeter method<a class="headerlink" href="#requirement-perimeter-method" title="Permalink to this headline">¶</a></h3>
<p>In <a class="reference internal" href="#py-math-avg-area"><span class="std std-numref">Listing 10.2</span></a>, the mathematician calculated the average area.  Suppose, mathematician want to do some analysis on the perimeter of the ring as well, therefore he asked us to add a method to calculate the perimeter as well.</p>
<p>This is quite easy task, and can be implemented as below,</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># pythonic.py</span>

<span class="kn">import</span> <span class="nn">math</span>
<span class="kn">import</span> <span class="nn">time</span>

<span class="k">class</span> <span class="nc">Ring</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; Here we will see the actual logic behind various pieces of Python</span>
<span class="sd">    language e.g. instances, variables, method and @property etc.</span>
<span class="sd">    Also, we will see the combine usage of these pieces to complete a</span>
<span class="sd">    design with Agile methodology.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c1"># class variables</span>
    <span class="n">date</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;%Y-%m-</span><span class="si">%d</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">time</span><span class="o">.</span><span class="n">gmtime</span><span class="p">())</span> <span class="c1"># today&#39;s date &quot;YYYY-mm-dd&quot;</span>
    <span class="n">center</span> <span class="o">=</span> <span class="mf">0.0</span> <span class="c1"># center of the ring</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">date</span><span class="o">=</span><span class="n">date</span><span class="p">,</span> <span class="n">metal</span><span class="o">=</span><span class="s2">&quot;Copper&quot;</span><span class="p">,</span> <span class="n">radius</span><span class="o">=</span><span class="mf">5.0</span><span class="p">,</span>
                <span class="n">price</span><span class="o">=</span><span class="mf">5.0</span><span class="p">,</span> <span class="n">quantity</span><span class="o">=</span><span class="mi">5</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; init is not the constructor, but the initializer which</span>
<span class="sd">        initialize the instance variable</span>

<span class="sd">        self : is the instance</span>

<span class="sd">        __init__ takes the instance &#39;self&#39; and populates it with the radius,</span>
<span class="sd">        metal, date etc. and store in a dictionary.</span>

<span class="sd">        self.radius, self.metal etc. are the instance variable which</span>
<span class="sd">        must be unique.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">date</span> <span class="o">=</span> <span class="n">date</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">metal</span> <span class="o">=</span> <span class="n">metal</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">radius</span> <span class="o">=</span> <span class="n">radius</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">price</span> <span class="o">=</span> <span class="n">price</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">quantity</span> <span class="o">=</span> <span class="n">quantity</span>

    <span class="k">def</span> <span class="nf">cost</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">price</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">quantity</span>

    <span class="k">def</span> <span class="nf">area</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">math</span><span class="o">.</span><span class="n">pi</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">radius</span><span class="o">**</span><span class="mi">2</span>

<span class="hll">    <span class="k">def</span> <span class="nf">perimeter</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span class="hll">        <span class="k">return</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">pi</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">radius</span>
</span>
<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Center of the Ring is at:&quot;</span><span class="p">,</span> <span class="n">Ring</span><span class="o">.</span><span class="n">center</span><span class="p">)</span> <span class="c1"># modify class variable</span>
    <span class="n">r</span> <span class="o">=</span> <span class="n">Ring</span><span class="p">(</span><span class="n">price</span><span class="o">=</span><span class="mi">8</span><span class="p">)</span> <span class="c1"># modify only price</span>
    <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Radius:{0}, Cost:{1}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">radius</span><span class="p">,</span> <span class="n">r</span><span class="o">.</span><span class="n">cost</span><span class="p">()))</span>
<span class="hll">    <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Radius:{0}, Perimeter:{1:0.2f}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">radius</span><span class="p">,</span> <span class="n">r</span><span class="o">.</span><span class="n">perimeter</span><span class="p">()))</span>
</span>
<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="section" id="no-data-hiding-in-python">
<span id="sec-no-data-hide"></span><h3>No data hiding in Python<a class="headerlink" href="#no-data-hiding-in-python" title="Permalink to this headline">¶</a></h3>
<p>In previous section, we added the method ‘perimeter’ in the design. Note that, in Python all the attributes can be directly accessed by the clients, and there is no concept of data hiding in the Python. Let’s understand this by an example.</p>
<div class="admonition important">
<p class="first admonition-title">Important</p>
<p>In the below code, the mathematician uses the attribute ‘radius’ directly by changing it to ‘r.radius = expansion(r.radius)’ at Line 39. Then the new radius is used to calculate the perimeter at Line 40. In the other word, value of radius is changed in the dictionary itself, and then the method perimeter() is used for calculation.</p>
<p>Such access to attributes is available in Python only; whereas other languages e.g. Java and C++ etc. uses the concept of data hiding (using private and protected variable) and the attributes can not be directly accessed. These languages provide some get and set method to access and modify the attributes, i.e. we can make a local copy of the variable for further calculation; whereas in Python, the value is changed in the dictionary itself.</p>
<p class="last">Data hiding is required in C++ and Java etc. as direct access can be a serious problem there and can not be resolved. In Python, data is not hidden from user and we have various methods to handle all kind of situations as shown in this chapter.</p>
</div>
<div class="literal-block-wrapper docutils container" id="py-access-radius-math">
<div class="code-block-caption"><span class="caption-text">Accessing the class attribute directly</span><a class="headerlink" href="#py-access-radius-math" title="Permalink to this code">¶</a></div>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1"># mathematician.py</span>
<span class="c1"># user-1: using Ring.py for mathematical analysis</span>

<span class="kn">from</span> <span class="nn">random</span> <span class="kn">import</span> <span class="n">random</span><span class="p">,</span> <span class="n">seed</span>
<span class="kn">from</span> <span class="nn">pythonic</span> <span class="kn">import</span> <span class="n">Ring</span>

<span class="k">def</span> <span class="nf">calc_avg_area</span><span class="p">(</span><span class="n">n</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">seed_value</span><span class="o">=</span><span class="mi">3</span><span class="p">):</span>
    <span class="c1"># seed for random number generator</span>
    <span class="n">seed</span><span class="p">(</span><span class="n">seed_value</span><span class="p">)</span>

    <span class="c1"># random radius</span>
    <span class="n">rings</span> <span class="o">=</span> <span class="p">[</span><span class="n">Ring</span><span class="p">(</span><span class="n">radius</span><span class="o">=</span><span class="n">random</span><span class="p">())</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">)]</span>

    <span class="n">total</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">rings</span><span class="p">:</span>
        <span class="n">total</span> <span class="o">+=</span> <span class="n">r</span><span class="o">.</span><span class="n">area</span><span class="p">()</span>
        <span class="c1"># # print values for each iteration</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%0.2f</span><span class="s2">, </span><span class="si">%0.2f</span><span class="s2">, </span><span class="si">%0.2f</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">radius</span><span class="p">,</span> <span class="n">r</span><span class="o">.</span><span class="n">area</span><span class="p">(),</span> <span class="n">total</span><span class="p">))</span>
    <span class="n">avg_area</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">([</span><span class="n">r</span><span class="o">.</span><span class="n">area</span><span class="p">()</span> <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">rings</span><span class="p">])</span><span class="o">/</span><span class="n">n</span>

    <span class="k">return</span> <span class="n">avg_area</span>

<span class="hll"><span class="k">def</span> <span class="nf">expansion</span><span class="p">(</span><span class="n">radius</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">expansion</span><span class="o">=</span><span class="mf">2.0</span><span class="p">):</span>
</span><span class="hll">        <span class="n">radius</span> <span class="o">*=</span> <span class="n">expansion</span>  <span class="c1"># 2.0 times radius expansion due to heat</span>
</span><span class="hll">        <span class="k">return</span> <span class="n">radius</span>
</span>
<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
<span class="hll">    <span class="c1"># # generate &#39;n&#39; rings</span>
</span><span class="hll">    <span class="c1"># n = 10</span>
</span><span class="hll">    <span class="c1"># avg_area = calc_avg_area(n=10)</span>
</span><span class="hll">    <span class="c1"># print(&quot;\nAverage area for n={0} is n/{0} = {1:.2f}&quot;.format(n, avg_area))</span>
</span>
<span class="hll">    <span class="n">radii</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">]</span> <span class="c1"># list of radius</span>
</span><span class="hll">    <span class="n">rings</span> <span class="o">=</span> <span class="p">[</span><span class="n">Ring</span><span class="p">(</span><span class="n">radius</span><span class="o">=</span><span class="n">r</span><span class="p">)</span> <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">radii</span><span class="p">]</span> <span class="c1"># create object of different radius</span>
</span><span class="hll">    <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">rings</span><span class="p">:</span>
</span><span class="hll">        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Radius:&quot;</span><span class="p">,</span> <span class="n">r</span><span class="o">.</span><span class="n">radius</span><span class="p">)</span>
</span><span class="hll">        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Perimeter at room temperature: </span><span class="si">%0.2f</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">r</span><span class="o">.</span><span class="n">perimeter</span><span class="p">())</span>
</span><span class="hll">        <span class="c1"># radius after expansion</span>
</span><span class="hll">        <span class="n">r</span><span class="o">.</span><span class="n">radius</span> <span class="o">=</span> <span class="n">expansion</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">radius</span><span class="p">)</span> <span class="c1"># modifying the attribute of the class</span>
</span><span class="hll">        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Perimeter after heating:, </span><span class="si">%0.2f</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">r</span><span class="o">.</span><span class="n">perimeter</span><span class="p">())</span>
</span>
<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
</pre></div>
</td></tr></table></div>
</div>
<p>Following is the output of above code,</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>$ python mathematician.py

Radius: 1
Perimeter at room temperature: 6.28
Perimeter after heating:, 12.57

Radius: 3
Perimeter at room temperature: 18.85
Perimeter after heating:, 37.70

Radius: 5
Perimeter at room temperature: 31.42
Perimeter after heating:, 62.83
</pre></div>
</div>
</div>
<div class="section" id="inheritance-overview">
<h3>Inheritance overview<a class="headerlink" href="#inheritance-overview" title="Permalink to this headline">¶</a></h3>
<p>Lets review the inheritance in Python quickly. Then we will see some good usage of inheritance in this chapter.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">No prior knowledge of the ‘super()’ and ‘multiple inheritance’ is required. In this chapter, we will see various examples to understand these topics.</p>
</div>
<ul class="simple">
<li>First create a parent class “Animal” as below,</li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">class</span> <span class="nc">Animal</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
<span class="gp">... </span>            <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
<span class="gp">...</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="nf">sound</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="gp">... </span>            <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Loud or soft sound&quot;</span><span class="p">)</span>
<span class="gp">...</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="nf">wild</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="gp">... </span>            <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Wild or pet animail&quot;</span><span class="p">)</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">Animal</span><span class="p">(</span><span class="s2">&quot;Tiger&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="o">.</span><span class="n">sound</span><span class="p">()</span>
<span class="go">Loud or soft sound</span>
</pre></div>
</div>
<ul class="simple">
<li>Now, create child class “PetAnimal” which inherit the class “Animal”,</li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">class</span> <span class="nc">PetAnimal</span><span class="p">(</span><span class="n">Animal</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="nf">pet_size</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="gp">... </span>            <span class="k">print</span><span class="p">(</span><span class="s2">&quot;small or big&quot;</span><span class="p">)</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">p</span>  <span class="o">=</span> <span class="n">PetAnimal</span><span class="p">(</span><span class="s2">&quot;cat&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">p</span><span class="o">.</span><span class="n">pet_size</span><span class="p">()</span>
<span class="go">small or big</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">p</span><span class="o">.</span><span class="n">sound</span><span class="p">()</span>  <span class="c1"># inherit from Animal</span>
<span class="go">Loud or soft sound</span>
</pre></div>
</div>
<ul class="simple">
<li>Next, overide the method of class “Animal” in the child class “Dog”,</li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">class</span> <span class="nc">Dog</span><span class="p">(</span><span class="n">Animal</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="nf">sound</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="gp">... </span>            <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Dog barks&quot;</span><span class="p">)</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span> <span class="o">=</span> <span class="n">Dog</span><span class="p">(</span><span class="s2">&quot;Tommy&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span><span class="o">.</span><span class="n">sound</span><span class="p">()</span> <span class="c1"># override the &#39;sound&#39; of class Animal</span>
<span class="go">Dog barks</span>
</pre></div>
</div>
<ul class="simple">
<li>We can use both parent and child class method with same name. This can be done using ‘super()’ as below,</li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">class</span> <span class="nc">Tiger</span><span class="p">(</span><span class="n">Animal</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="nf">sound</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="gp">... </span>            <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Tiger roars&quot;</span><span class="p">)</span>
<span class="gp">... </span>            <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">sound</span><span class="p">()</span>  <span class="c1"># call the parent class &#39;sound&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">t</span> <span class="o">=</span> <span class="n">Tiger</span><span class="p">(</span><span class="s2">&quot;Tigger&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">t</span><span class="o">.</span><span class="n">sound</span><span class="p">()</span> <span class="c1"># invoke &#39;sound&#39; of both child and parent</span>
<span class="go">Tiger roars</span>
<span class="go">Loud or soft sound</span>
</pre></div>
</div>
<ul class="simple">
<li>Multiple inheritance is possible in Python, which can be used to handle complex situations. Below is an example of multiple inheritance,</li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">class</span> <span class="nc">Cat</span><span class="p">(</span><span class="n">Tiger</span><span class="p">,</span> <span class="n">Animal</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">pass</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c</span> <span class="o">=</span> <span class="n">Cat</span><span class="p">(</span><span class="s2">&quot;Kitty&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c</span><span class="o">.</span><span class="n">sound</span><span class="p">()</span>
<span class="go">Tiger roars</span>
<span class="go">Loud or soft sound</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c</span><span class="o">.</span><span class="n">wild</span><span class="p">()</span>
<span class="go">Wild or pet animail</span>
</pre></div>
</div>
<ul class="simple">
<li>Note that, Python creates a MRO (method resolution order) for multiple inheritance, and if it can not be created then error will be reported. The MRO for class ‘Cat’ is shown below,</li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">help</span><span class="p">(</span><span class="n">cat</span><span class="p">)</span>
<span class="go">    class Cat(Tiger, Animal)</span>
<span class="go">     |  Method resolution order:</span>
<span class="go">     |      Cat</span>
<span class="go">     |      Tiger</span>
<span class="go">     |      Animal</span>
</pre></div>
</div>
<ul class="simple">
<li>If we inherit Animal first and next Tiger, then below error will occur; because Python uses ‘child first’ approach and this inheritance will call the Parent first i.e. MRO will be “Cat-&gt;Animal-&gt;Tiger”. And it will report error as it has ‘parent first’ i.e. Animal comes before Tiger.</li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">class</span> <span class="nc">Rat</span><span class="p">(</span><span class="n">Animal</span><span class="p">,</span> <span class="n">Tiger</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">pass</span>
<span class="gp">...</span>
<span class="gt">Traceback (most recent call last):</span>
  File <span class="nb">&quot;&lt;stdin&gt;&quot;</span>, line <span class="m">1</span>, in <span class="n">&lt;module&gt;</span>
<span class="gr">TypeError</span>: <span class="n">Cannot create a consistent method resolution</span>
<span class="go">order (MRO) for bases Animal, Tiger</span>
</pre></div>
</div>
</div>
<div class="section" id="new-user-making-boxes">
<h3>New user : making boxes<a class="headerlink" href="#new-user-making-boxes" title="Permalink to this headline">¶</a></h3>
<p>Suppose, we get another user for our class Ring (i.e. file pythonic.py), who is creating boxes for the ring. For he needs slightly greater perimeter of the box than the ring.</p>
<p>Note that this user is inheriting the class ‘Ring’, and overriding the method ‘perimeter()’ at Line 11 as shown below,</p>
<div class="literal-block-wrapper docutils container" id="py-box-modify-perimeter">
<div class="code-block-caption"><span class="caption-text">Box company modifying the class method ‘perimeter()’</span><a class="headerlink" href="#py-box-modify-perimeter" title="Permalink to this code">¶</a></div>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1"># box.py</span>
<span class="c1"># user-3 : creating boxes for the ring</span>

<span class="kn">from</span> <span class="nn">pythonic</span> <span class="kn">import</span> <span class="n">Ring</span>

<span class="k">class</span> <span class="nc">Box</span><span class="p">(</span><span class="n">Ring</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; Modified perimeter for creating the box &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">perimeter</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span> <span class="c1"># override the method &#39;perimeter&#39;</span>
        <span class="c1"># perimeter is increased 2.0 times</span>
<span class="hll">        <span class="k">return</span> <span class="n">Ring</span><span class="o">.</span><span class="n">perimeter</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">*</span> <span class="mf">2.0</span>
</span>
<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="n">b</span> <span class="o">=</span> <span class="n">Box</span><span class="p">(</span><span class="n">radius</span><span class="o">=</span><span class="mi">8</span><span class="p">)</span> <span class="c1"># pass radius = 8</span>
    <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Radius:&quot;</span><span class="p">,</span> <span class="n">b</span><span class="o">.</span><span class="n">radius</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Modified perimeter: </span><span class="si">%0.2f</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">b</span><span class="o">.</span><span class="n">perimeter</span><span class="p">())</span> <span class="c1"># (2*pi*radius) * 2</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
</pre></div>
</td></tr></table></div>
</div>
<p>Following is the output of above code,</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>$ python box.py
Radius: 8
Modified perimeter: 100.53
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Now, we have two users who are modifying the class attributes. First is the mathematician (mathematician.py), who is modifying the ‘radius’ in <a class="reference internal" href="#py-access-radius-math"><span class="std std-numref">Listing 10.4</span></a>. And other is the box company, who is modifying the method ‘perimeter’ in <a class="reference internal" href="#py-box-modify-perimeter"><span class="std std-numref">Listing 10.5</span></a>. Lastly, we have a contributor who is creating a ‘table formatter’ in <a class="reference internal" href="#py-table-format-def"><span class="std std-numref">Listing 10.3</span></a> for displaying the output nicely.</p>
</div>
</div>
<div class="section" id="rewrite-table-formatter-using-inheritance">
<h3>Rewrite table formatter using Inheritance<a class="headerlink" href="#rewrite-table-formatter-using-inheritance" title="Permalink to this headline">¶</a></h3>
<div class="section" id="abstract-class">
<h4>Abstract class<a class="headerlink" href="#abstract-class" title="Permalink to this headline">¶</a></h4>
<p>The contributor decided to add more print-formats for the table. For this, he decided to use inheritance to rewrite the code <a class="reference internal" href="#py-table-format-def"><span class="std std-numref">Listing 10.3</span></a> using inheritance.</p>
<p>Also, the contributor used the abstract class at Line 11 with two abstract methods. The abstract methods are compulsory to be implemented in the child class.</p>
<div class="admonition important">
<p class="first admonition-title">Important</p>
<ul class="last simple">
<li>The abstract methods are compulsory to be implemented in the child class. In the other words, the abstract class is the way to force the child class to implement certain method, which are decorated with ‘abstractmethod’</li>
<li>Here the aim is to rewrite the code in <a class="reference internal" href="#py-table-format-def"><span class="std std-numref">Listing 10.3</span></a> such that we need not to change anything in the function ‘main()’. In the other words, if the main() function works fine as it is, then it ensures that the code will not break for the users, who are using <a class="reference internal" href="#py-table-format-def"><span class="std std-numref">Listing 10.3</span></a> for printing the table.</li>
</ul>
</div>
<p>Below is the modified <a class="reference internal" href="#py-table-format-def"><span class="std std-numref">Listing 10.3</span></a>,</p>
<div class="literal-block-wrapper docutils container" id="py-print-format-inherit">
<div class="code-block-caption"><span class="caption-text">Print-format using inheritance</span><a class="headerlink" href="#py-print-format-inherit" title="Permalink to this code">¶</a></div>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>  1
  2
  3
  4
  5
  6
  7
  8
  9
 10
 11
 12
 13
 14
 15
 16
 17
 18
 19
 20
 21
 22
 23
 24
 25
 26
 27
 28
 29
 30
 31
 32
 33
 34
 35
 36
 37
 38
 39
 40
 41
 42
 43
 44
 45
 46
 47
 48
 49
 50
 51
 52
 53
 54
 55
 56
 57
 58
 59
 60
 61
 62
 63
 64
 65
 66
 67
 68
 69
 70
 71
 72
 73
 74
 75
 76
 77
 78
 79
 80
 81
 82
 83
 84
 85
 86
 87
 88
 89
 90
 91
 92
 93
 94
 95
 96
 97
 98
 99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132</pre></div></td><td class="code"><div class="highlight"><pre><span></span> <span class="c1"># contributor.py</span>
 <span class="c1"># user-2: additional features will be added to pythonic.py by the contributor</span>

<span class="hll"> <span class="kn">from</span> <span class="nn">abc</span> <span class="kn">import</span> <span class="n">ABC</span><span class="p">,</span> <span class="n">abstractmethod</span>
</span> <span class="kn">import</span> <span class="nn">csv</span>

 <span class="kn">from</span> <span class="nn">pythonic</span> <span class="kn">import</span> <span class="n">Ring</span>


<span class="hll"> <span class="c1"># Abstract class for table-format</span>
</span><span class="hll"> <span class="k">class</span> <span class="nc">TableFormat</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
</span><span class="hll">     <span class="sd">&quot;&quot;&quot; Abastract class &quot;&quot;&quot;</span>
</span><span class="hll">
</span><span class="hll">     <span class="nd">@abstractmethod</span>
</span><span class="hll">     <span class="k">def</span> <span class="nf">heading</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">header</span><span class="p">):</span> <span class="c1"># must be implemented in child class</span>
</span><span class="hll">         <span class="k">pass</span>
</span><span class="hll">
</span><span class="hll">     <span class="nd">@abstractmethod</span>
</span><span class="hll">     <span class="k">def</span> <span class="nf">row</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">row_data</span><span class="p">):</span> <span class="c1"># must be implemented in child class</span>
</span><span class="hll">         <span class="k">pass</span>
</span>

<span class="hll"> <span class="c1"># text format for table</span>
</span><span class="hll"> <span class="k">class</span> <span class="nc">TextFormat</span><span class="p">(</span><span class="n">TableFormat</span><span class="p">):</span>
</span><span class="hll">     <span class="sd">&quot;&quot;&quot; Text format for table &quot;&quot;&quot;</span>
</span><span class="hll">
</span><span class="hll">     <span class="k">def</span> <span class="nf">heading</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">header</span><span class="p">):</span> <span class="c1"># print headers</span>
</span><span class="hll">         <span class="k">for</span> <span class="n">h</span> <span class="ow">in</span> <span class="n">header</span><span class="p">:</span>
</span><span class="hll">             <span class="k">print</span><span class="p">(</span><span class="s2">&quot;{:&gt;7s}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">h</span><span class="p">),</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
</span><span class="hll">         <span class="k">print</span><span class="p">()</span>
</span><span class="hll">
</span><span class="hll">     <span class="k">def</span> <span class="nf">row</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">row_data</span><span class="p">):</span> <span class="c1"># print rows</span>
</span><span class="hll">         <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">row_data</span><span class="p">:</span>
</span><span class="hll">             <span class="k">print</span><span class="p">(</span><span class="s2">&quot;{:&gt;7s}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">r</span><span class="p">),</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
</span><span class="hll">         <span class="k">print</span><span class="p">()</span>
</span>

 <span class="c1"># this code is copied from datamine.py file and modified slightly</span>
 <span class="c1"># to include the type of the data</span>
 <span class="k">def</span> <span class="nf">read_file</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">types</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;warn&#39;</span><span class="p">):</span>
     <span class="sd">&#39;&#39;&#39; read csv file and save data in the list &#39;&#39;&#39;</span>

     <span class="c1"># check for correct mode</span>
     <span class="k">if</span> <span class="n">mode</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;warn&#39;</span><span class="p">,</span> <span class="s1">&#39;silent&#39;</span><span class="p">,</span> <span class="s1">&#39;stop&#39;</span><span class="p">]:</span>
         <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;possible modes are &#39;warn&#39;, &#39;silent&#39;, &#39;stop&#39;&quot;</span><span class="p">)</span>

     <span class="n">ring_data</span> <span class="o">=</span> <span class="p">[]</span> <span class="c1"># create empty list to save data</span>

     <span class="k">with</span> <span class="nb">open</span> <span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
         <span class="n">rows</span> <span class="o">=</span>  <span class="n">csv</span><span class="o">.</span><span class="n">reader</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
         <span class="n">header</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="n">rows</span><span class="p">)</span> <span class="c1"># skip the header</span>

         <span class="c1"># change the types of the columns</span>
         <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">rows</span><span class="p">:</span>
             <span class="k">try</span><span class="p">:</span>
                 <span class="c1"># row[2] = float(row[2]) # radius</span>
                 <span class="c1"># row[3] = float(row[3]) # price</span>
                 <span class="c1"># row[4] = int(row[4]) # quantity</span>

                 <span class="c1"># generalized conversion</span>
                 <span class="n">row</span> <span class="o">=</span> <span class="p">[</span><span class="n">d_type</span><span class="p">(</span><span class="n">val</span><span class="p">)</span> <span class="k">for</span> <span class="n">d_type</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">types</span><span class="p">,</span> <span class="n">row</span><span class="p">)]</span>
             <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">err</span><span class="p">:</span> <span class="c1"># process value error only</span>
                 <span class="k">if</span> <span class="n">mode</span> <span class="o">==</span> <span class="s1">&#39;warn&#39;</span><span class="p">:</span>
                     <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Invalid data, row is skipped&quot;</span><span class="p">)</span>
                     <span class="k">print</span><span class="p">(</span><span class="s1">&#39;Row: {}, Reason : {}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">row_num</span><span class="p">,</span> <span class="n">err</span><span class="p">))</span>
                 <span class="k">elif</span> <span class="n">mode</span> <span class="o">==</span> <span class="s1">&#39;silent&#39;</span><span class="p">:</span>
                     <span class="k">pass</span> <span class="c1"># do nothing</span>
                 <span class="k">elif</span> <span class="n">mode</span> <span class="o">==</span> <span class="s1">&#39;stop&#39;</span><span class="p">:</span>
                     <span class="k">raise</span> <span class="c1"># raise the exception</span>
                 <span class="k">continue</span>

             <span class="c1"># ring_data.append(tuple(row))</span>

             <span class="c1"># append data in list in the form of tuple</span>
             <span class="c1"># row_dict = {</span>
                     <span class="c1"># &#39;date&#39; : row[0],</span>
                     <span class="c1"># &#39;metal&#39; : row[1],</span>
                     <span class="c1"># &#39;radius&#39; : row[2],</span>
                     <span class="c1"># &#39;price&#39; : row[3],</span>
                     <span class="c1"># &#39;quantity&#39; : row[4]</span>
                 <span class="c1"># }</span>

             <span class="c1"># row_dict = Ring(row[0], row[1], row[2], row[3], row[4])</span>
             <span class="c1"># # use below or above line</span>
             <span class="n">row_dict</span> <span class="o">=</span> <span class="n">Ring</span><span class="p">(</span>
                     <span class="n">date</span> <span class="o">=</span> <span class="n">row</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
                     <span class="n">metal</span> <span class="o">=</span> <span class="n">row</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
                     <span class="n">radius</span> <span class="o">=</span> <span class="n">row</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span>
                     <span class="n">price</span> <span class="o">=</span> <span class="n">row</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span>
                     <span class="n">quantity</span> <span class="o">=</span> <span class="n">row</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span>
                 <span class="p">)</span>

             <span class="n">ring_data</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">row_dict</span><span class="p">)</span>

     <span class="k">return</span> <span class="n">ring_data</span>


 <span class="c1"># table formatter</span>
<span class="hll"> <span class="k">def</span> <span class="nf">print_table</span><span class="p">(</span><span class="n">list_name</span><span class="p">,</span> <span class="n">col_name</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;metal&#39;</span><span class="p">,</span> <span class="s1">&#39;radius&#39;</span><span class="p">],</span>
</span><span class="hll">         <span class="n">out_format</span><span class="o">=</span><span class="n">TextFormat</span><span class="p">()):</span> <span class="c1"># note that class is passed here</span>
</span>     <span class="sd">&quot;&quot;&quot; print the formatted output &quot;&quot;&quot;</span>

<span class="hll">     <span class="c1"># for c in col_name: # print header</span>
</span><span class="hll">         <span class="c1"># print(&quot;{:&gt;7s}&quot;.format(c), end=&#39; &#39;)</span>
</span><span class="hll">     <span class="c1"># print() # print empty line</span>
</span><span class="hll">     <span class="c1"># for l in list_name: # print values</span>
</span><span class="hll">         <span class="c1"># for c in col_name:</span>
</span><span class="hll">             <span class="c1"># print(&quot;{:&gt;7s}&quot;.format(str(getattr(l, c))), end=&#39; &#39;)</span>
</span><span class="hll">         <span class="c1"># print()</span>
</span>
<span class="hll">     <span class="c1"># invoke class-method for printing heading</span>
</span><span class="hll">     <span class="n">out_format</span><span class="o">.</span><span class="n">heading</span><span class="p">(</span><span class="n">col_name</span><span class="p">)</span> <span class="c1"># class is passed to out_format</span>
</span><span class="hll">     <span class="k">for</span> <span class="n">l</span> <span class="ow">in</span> <span class="n">list_name</span><span class="p">:</span>
</span><span class="hll">         <span class="c1"># store row in a list</span>
</span><span class="hll">         <span class="n">row_data</span> <span class="o">=</span> <span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="nb">getattr</span><span class="p">(</span><span class="n">l</span><span class="p">,</span> <span class="n">c</span><span class="p">))</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">col_name</span><span class="p">]</span>
</span><span class="hll">         <span class="n">out_format</span><span class="o">.</span><span class="n">row</span><span class="p">(</span><span class="n">row_data</span><span class="p">)</span> <span class="c1"># pass rows to class-method row()</span>
</span>

 <span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
     <span class="c1"># list correct types of columns in csv file</span>
     <span class="n">types</span> <span class="o">=</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="nb">int</span><span class="p">]</span>

     <span class="c1"># read file and save data in list</span>
     <span class="n">list_data</span> <span class="o">=</span> <span class="n">read_file</span><span class="p">(</span><span class="s1">&#39;price.csv&#39;</span><span class="p">,</span> <span class="n">types</span><span class="p">)</span>

     <span class="c1"># formatted output</span>
     <span class="n">print_table</span><span class="p">(</span><span class="n">list_data</span><span class="p">)</span>
     <span class="k">print</span><span class="p">()</span>
     <span class="n">print_table</span><span class="p">(</span><span class="n">list_data</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;metal&#39;</span><span class="p">,</span> <span class="s1">&#39;radius&#39;</span><span class="p">,</span> <span class="s1">&#39;price&#39;</span><span class="p">])</span>

 <span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
     <span class="n">main</span><span class="p">()</span>
</pre></div>
</td></tr></table></div>
</div>
<p>Now run the code to see whether it is working as previously or not. The below output is same as for <a class="reference internal" href="#py-table-format-def"><span class="std std-numref">Listing 10.3</span></a>,</p>
<blockquote>
<div><div class="highlight-text notranslate"><div class="highlight"><pre><span></span>$ python contributor.py

  metal  radius
   Gold     5.5
 Silver    40.3
   Iron     9.2
   Gold     8.0
 Copper     4.1
   Iron    3.25

  metal  radius   price
   Gold     5.5   80.99
 Silver    40.3     5.5
   Iron     9.2   14.29
   Gold     8.0   120.3
 Copper     4.1   70.25
   Iron    3.25   10.99
</pre></div>
</div>
</div></blockquote>
</div>
<div class="section" id="csv-format">
<h4>csv format<a class="headerlink" href="#csv-format" title="Permalink to this headline">¶</a></h4>
<p>Since the above code is working fine, therefore the contributor can add as many format as possible, just by adding a new class. In the below code, he added a ‘csv format’ for the printing,</p>
<div class="literal-block-wrapper docutils container" id="py-csv-format-cont">
<div class="code-block-caption"><span class="caption-text">csv format is added</span><a class="headerlink" href="#py-csv-format-cont" title="Permalink to this code">¶</a></div>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>  1
  2
  3
  4
  5
  6
  7
  8
  9
 10
 11
 12
 13
 14
 15
 16
 17
 18
 19
 20
 21
 22
 23
 24
 25
 26
 27
 28
 29
 30
 31
 32
 33
 34
 35
 36
 37
 38
 39
 40
 41
 42
 43
 44
 45
 46
 47
 48
 49
 50
 51
 52
 53
 54
 55
 56
 57
 58
 59
 60
 61
 62
 63
 64
 65
 66
 67
 68
 69
 70
 71
 72
 73
 74
 75
 76
 77
 78
 79
 80
 81
 82
 83
 84
 85
 86
 87
 88
 89
 90
 91
 92
 93
 94
 95
 96
 97
 98
 99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1"># contributor.py</span>
<span class="c1"># user-2: additional features will be added to pythonic.py by the contributor</span>

<span class="kn">from</span> <span class="nn">abc</span> <span class="kn">import</span> <span class="n">ABC</span><span class="p">,</span> <span class="n">abstractmethod</span>
<span class="kn">import</span> <span class="nn">csv</span>

<span class="kn">from</span> <span class="nn">pythonic</span> <span class="kn">import</span> <span class="n">Ring</span>


<span class="c1"># Abstract class for table-format</span>
<span class="k">class</span> <span class="nc">TableFormat</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; Abastract class &quot;&quot;&quot;</span>

    <span class="nd">@abstractmethod</span>
    <span class="k">def</span> <span class="nf">heading</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">header</span><span class="p">):</span> <span class="c1"># must be implemented in child class</span>
        <span class="k">pass</span>

    <span class="nd">@abstractmethod</span>
    <span class="k">def</span> <span class="nf">row</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">row_data</span><span class="p">):</span> <span class="c1"># must be implemented in child class</span>
        <span class="k">pass</span>


<span class="c1"># text format for table</span>
<span class="k">class</span> <span class="nc">TextFormat</span><span class="p">(</span><span class="n">TableFormat</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; Text format for table &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">heading</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">header</span><span class="p">):</span> <span class="c1"># print headers</span>
        <span class="k">for</span> <span class="n">h</span> <span class="ow">in</span> <span class="n">header</span><span class="p">:</span>
            <span class="k">print</span><span class="p">(</span><span class="s2">&quot;{:&gt;7s}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">h</span><span class="p">),</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
        <span class="k">print</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">row</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">row_data</span><span class="p">):</span> <span class="c1"># print rows</span>
        <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">row_data</span><span class="p">:</span>
            <span class="k">print</span><span class="p">(</span><span class="s2">&quot;{:&gt;7s}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">r</span><span class="p">),</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
        <span class="k">print</span><span class="p">()</span>


<span class="hll"><span class="c1"># csv format for table</span>
</span><span class="hll"><span class="k">class</span> <span class="nc">CSVFormat</span><span class="p">(</span><span class="n">TableFormat</span><span class="p">):</span>
</span><span class="hll">    <span class="sd">&quot;&quot;&quot; Text format for table &quot;&quot;&quot;</span>
</span><span class="hll">
</span><span class="hll">    <span class="k">def</span> <span class="nf">heading</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">header</span><span class="p">):</span> <span class="c1"># print headers</span>
</span><span class="hll">        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">header</span><span class="p">))</span>
</span><span class="hll">
</span><span class="hll">    <span class="k">def</span> <span class="nf">row</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">row_data</span><span class="p">):</span> <span class="c1"># print rows</span>
</span><span class="hll">        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;,&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">row_data</span><span class="p">))</span>
</span>
<span class="c1"># this code is copied from datamine.py file and modified slightly</span>
<span class="c1"># to include the type of the data</span>
<span class="k">def</span> <span class="nf">read_file</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">types</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;warn&#39;</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39; read csv file and save data in the list &#39;&#39;&#39;</span>

    <span class="c1"># check for correct mode</span>
    <span class="k">if</span> <span class="n">mode</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;warn&#39;</span><span class="p">,</span> <span class="s1">&#39;silent&#39;</span><span class="p">,</span> <span class="s1">&#39;stop&#39;</span><span class="p">]:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;possible modes are &#39;warn&#39;, &#39;silent&#39;, &#39;stop&#39;&quot;</span><span class="p">)</span>

    <span class="n">ring_data</span> <span class="o">=</span> <span class="p">[]</span> <span class="c1"># create empty list to save data</span>

    <span class="k">with</span> <span class="nb">open</span> <span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
        <span class="n">rows</span> <span class="o">=</span>  <span class="n">csv</span><span class="o">.</span><span class="n">reader</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
        <span class="n">header</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="n">rows</span><span class="p">)</span> <span class="c1"># skip the header</span>

        <span class="c1"># change the types of the columns</span>
        <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">rows</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="c1"># row[2] = float(row[2]) # radius</span>
                <span class="c1"># row[3] = float(row[3]) # price</span>
                <span class="c1"># row[4] = int(row[4]) # quantity</span>

                <span class="c1"># generalized conversion</span>
                <span class="n">row</span> <span class="o">=</span> <span class="p">[</span><span class="n">d_type</span><span class="p">(</span><span class="n">val</span><span class="p">)</span> <span class="k">for</span> <span class="n">d_type</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">types</span><span class="p">,</span> <span class="n">row</span><span class="p">)]</span>
            <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">err</span><span class="p">:</span> <span class="c1"># process value error only</span>
                <span class="k">if</span> <span class="n">mode</span> <span class="o">==</span> <span class="s1">&#39;warn&#39;</span><span class="p">:</span>
                    <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Invalid data, row is skipped&quot;</span><span class="p">)</span>
                    <span class="k">print</span><span class="p">(</span><span class="s1">&#39;Row: {}, Reason : {}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">row_num</span><span class="p">,</span> <span class="n">err</span><span class="p">))</span>
                <span class="k">elif</span> <span class="n">mode</span> <span class="o">==</span> <span class="s1">&#39;silent&#39;</span><span class="p">:</span>
                    <span class="k">pass</span> <span class="c1"># do nothing</span>
                <span class="k">elif</span> <span class="n">mode</span> <span class="o">==</span> <span class="s1">&#39;stop&#39;</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="c1"># raise the exception</span>
                <span class="k">continue</span>

            <span class="c1"># ring_data.append(tuple(row))</span>

            <span class="c1"># append data in list in the form of tuple</span>
            <span class="c1"># row_dict = {</span>
                    <span class="c1"># &#39;date&#39; : row[0],</span>
                    <span class="c1"># &#39;metal&#39; : row[1],</span>
                    <span class="c1"># &#39;radius&#39; : row[2],</span>
                    <span class="c1"># &#39;price&#39; : row[3],</span>
                    <span class="c1"># &#39;quantity&#39; : row[4]</span>
                <span class="c1"># }</span>

            <span class="c1"># row_dict = Ring(row[0], row[1], row[2], row[3], row[4])</span>
            <span class="c1"># # use below or above line</span>
            <span class="n">row_dict</span> <span class="o">=</span> <span class="n">Ring</span><span class="p">(</span>
                    <span class="n">date</span> <span class="o">=</span> <span class="n">row</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
                    <span class="n">metal</span> <span class="o">=</span> <span class="n">row</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
                    <span class="n">radius</span> <span class="o">=</span> <span class="n">row</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span>
                    <span class="n">price</span> <span class="o">=</span> <span class="n">row</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span>
                    <span class="n">quantity</span> <span class="o">=</span> <span class="n">row</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span>
                <span class="p">)</span>

            <span class="n">ring_data</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">row_dict</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">ring_data</span>


<span class="c1"># table formatter</span>
<span class="k">def</span> <span class="nf">print_table</span><span class="p">(</span><span class="n">list_name</span><span class="p">,</span> <span class="n">col_name</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;metal&#39;</span><span class="p">,</span> <span class="s1">&#39;radius&#39;</span><span class="p">],</span>
        <span class="n">out_format</span><span class="o">=</span><span class="n">TextFormat</span><span class="p">()):</span> <span class="c1"># note that class is passed here</span>
    <span class="sd">&quot;&quot;&quot; print the formatted output &quot;&quot;&quot;</span>

    <span class="c1"># for c in col_name: # print header</span>
        <span class="c1"># print(&quot;{:&gt;7s}&quot;.format(c), end=&#39; &#39;)</span>
    <span class="c1"># print() # print empty line</span>
    <span class="c1"># for l in list_name: # print values</span>
        <span class="c1"># for c in col_name:</span>
            <span class="c1"># print(&quot;{:&gt;7s}&quot;.format(str(getattr(l, c))), end=&#39; &#39;)</span>
        <span class="c1"># print()</span>

    <span class="c1"># invoke class-method for printing heading</span>
    <span class="n">out_format</span><span class="o">.</span><span class="n">heading</span><span class="p">(</span><span class="n">col_name</span><span class="p">)</span> <span class="c1"># class is passed to out_format</span>
    <span class="k">for</span> <span class="n">l</span> <span class="ow">in</span> <span class="n">list_name</span><span class="p">:</span>
        <span class="c1"># store row in a list</span>
        <span class="n">row_data</span> <span class="o">=</span> <span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="nb">getattr</span><span class="p">(</span><span class="n">l</span><span class="p">,</span> <span class="n">c</span><span class="p">))</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">col_name</span><span class="p">]</span>
        <span class="n">out_format</span><span class="o">.</span><span class="n">row</span><span class="p">(</span><span class="n">row_data</span><span class="p">)</span> <span class="c1"># pass rows to class-method row()</span>


<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="c1"># list correct types of columns in csv file</span>
    <span class="n">types</span> <span class="o">=</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="nb">int</span><span class="p">]</span>

    <span class="c1"># read file and save data in list</span>
    <span class="n">list_data</span> <span class="o">=</span> <span class="n">read_file</span><span class="p">(</span><span class="s1">&#39;price.csv&#39;</span><span class="p">,</span> <span class="n">types</span><span class="p">)</span>

<span class="hll">    <span class="c1"># # formatted output</span>
</span><span class="hll">    <span class="c1"># print_table(list_data)</span>
</span><span class="hll">    <span class="c1"># print()</span>
</span><span class="hll">    <span class="n">print_table</span><span class="p">(</span><span class="n">list_data</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;metal&#39;</span><span class="p">,</span> <span class="s1">&#39;radius&#39;</span><span class="p">,</span> <span class="s1">&#39;price&#39;</span><span class="p">],</span> <span class="n">out_format</span><span class="o">=</span><span class="n">TextFormat</span><span class="p">())</span>
</span>
<span class="hll">    <span class="k">print</span><span class="p">()</span>
</span><span class="hll">    <span class="n">print_table</span><span class="p">(</span><span class="n">list_data</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;metal&#39;</span><span class="p">,</span> <span class="s1">&#39;radius&#39;</span><span class="p">,</span> <span class="s1">&#39;price&#39;</span><span class="p">],</span> <span class="n">out_format</span><span class="o">=</span><span class="n">CSVFormat</span><span class="p">())</span>
</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
</pre></div>
</td></tr></table></div>
</div>
<p>Following is the output of above listing,</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>$ python contributor.py
  metal  radius   price
   Gold     5.5   80.99
 Silver    40.3     5.5
   Iron     9.2   14.29
   Gold     8.0   120.3
 Copper     4.1   70.25
   Iron    3.25   10.99

metal,radius,price
Gold,5.5,80.99
Silver,40.3,5.5
Iron,9.2,14.29
Gold,8.0,120.3
Copper,4.1,70.25
Iron,3.25,10.99
</pre></div>
</div>
</div>
</div>
<div class="section" id="advance-inheritance">
<h3>Advance inheritance<a class="headerlink" href="#advance-inheritance" title="Permalink to this headline">¶</a></h3>
<p>In this section, __init__ function of parent class is inherited by the child class. Also, a good usage of ‘multiple inheritance’ and ‘class with one method’ is shown.</p>
<div class="section" id="printing-outputs-to-files">
<h4>Printing outputs to files<a class="headerlink" href="#printing-outputs-to-files" title="Permalink to this headline">¶</a></h4>
<p>In <a class="reference internal" href="#py-csv-format-cont"><span class="std std-numref">Listing 10.7</span></a>, the output can be printed on the screen only. There we requested the contributor, that it will be better if we can save the output in the files as well.</p>
<p>To add this feature, the contributor decided to add an __init__ function to add the print functionality. It is a good approach otherwise we need to add the ‘output-file’ logic in each format-class.</p>
<p>Below is the code for saving the data in file. Following are the functionality added to this design,</p>
<ul class="simple">
<li>Outputs can be saved in the files.</li>
<li>CSVFormat gets this ability through inheriting the parent class __init__.</li>
<li>TextFormat override the parent class __init__ to increase/decrease the width. Also, it uses ‘super()’ to inherit the parent class __init__ so that the output can be saved in the file.</li>
</ul>
<div class="literal-block-wrapper docutils container" id="py-print-file-contrib">
<div class="code-block-caption"><span class="caption-text">Print data in file and screen</span><a class="headerlink" href="#py-print-file-contrib" title="Permalink to this code">¶</a></div>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>  1
  2
  3
  4
  5
  6
  7
  8
  9
 10
 11
 12
 13
 14
 15
 16
 17
 18
 19
 20
 21
 22
 23
 24
 25
 26
 27
 28
 29
 30
 31
 32
 33
 34
 35
 36
 37
 38
 39
 40
 41
 42
 43
 44
 45
 46
 47
 48
 49
 50
 51
 52
 53
 54
 55
 56
 57
 58
 59
 60
 61
 62
 63
 64
 65
 66
 67
 68
 69
 70
 71
 72
 73
 74
 75
 76
 77
 78
 79
 80
 81
 82
 83
 84
 85
 86
 87
 88
 89
 90
 91
 92
 93
 94
 95
 96
 97
 98
 99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1"># contributor.py</span>
<span class="c1"># user-2: additional features will be added to pythonic.py by the contributor</span>

<span class="hll"><span class="kn">import</span> <span class="nn">sys</span>
</span><span class="kn">import</span> <span class="nn">csv</span>
<span class="kn">from</span> <span class="nn">abc</span> <span class="kn">import</span> <span class="n">ABC</span><span class="p">,</span> <span class="n">abstractmethod</span>

<span class="kn">from</span> <span class="nn">pythonic</span> <span class="kn">import</span> <span class="n">Ring</span>


<span class="c1"># Abstract class for table-format</span>
<span class="k">class</span> <span class="nc">TableFormat</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; Abastract class &quot;&quot;&quot;</span>

<span class="hll">    <span class="c1"># print data to file or screen</span>
</span><span class="hll">    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">out_file</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
</span><span class="hll">        <span class="k">if</span> <span class="n">out_file</span> <span class="o">==</span> <span class="bp">None</span><span class="p">:</span>
</span><span class="hll">            <span class="c1"># stdout is the location where python prints the output</span>
</span><span class="hll">            <span class="n">out_file</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">stdout</span>
</span><span class="hll">        <span class="bp">self</span><span class="o">.</span><span class="n">out_file</span> <span class="o">=</span> <span class="n">out_file</span>
</span>
    <span class="nd">@abstractmethod</span>
    <span class="k">def</span> <span class="nf">heading</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">header</span><span class="p">):</span> <span class="c1"># must be implemented in child class</span>
        <span class="k">pass</span>

    <span class="nd">@abstractmethod</span>
    <span class="k">def</span> <span class="nf">row</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">row_data</span><span class="p">):</span> <span class="c1"># must be implemented in child class</span>
        <span class="k">pass</span>


<span class="c1"># text format for table</span>
<span class="k">class</span> <span class="nc">TextFormat</span><span class="p">(</span><span class="n">TableFormat</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; Text format for table &quot;&quot;&quot;</span>

<span class="hll">    <span class="c1"># option for modifying width</span>
</span><span class="hll">    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">7</span><span class="p">,</span> <span class="n">out_file</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span> <span class="c1"># override init</span>
</span><span class="hll">        <span class="c1"># inherit parent init as well to save data in file</span>
</span><span class="hll">        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">out_file</span><span class="p">)</span>
</span><span class="hll">        <span class="bp">self</span><span class="o">.</span><span class="n">width</span> <span class="o">=</span> <span class="n">width</span>
</span>
    <span class="k">def</span> <span class="nf">heading</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">header</span><span class="p">):</span> <span class="c1"># print headers</span>
        <span class="k">for</span> <span class="n">h</span> <span class="ow">in</span> <span class="n">header</span><span class="p">:</span>
<span class="hll">            <span class="k">print</span><span class="p">(</span><span class="s2">&quot;{0:&gt;{1}s}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">h</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">width</span><span class="p">),</span>
</span><span class="hll">                    <span class="n">end</span><span class="o">=</span><span class="s1">&#39; &#39;</span><span class="p">,</span> <span class="nb">file</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">out_file</span><span class="p">)</span>
</span><span class="hll">        <span class="k">print</span><span class="p">(</span><span class="nb">file</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">out_file</span><span class="p">)</span>
</span>
    <span class="k">def</span> <span class="nf">row</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">row_data</span><span class="p">):</span> <span class="c1"># print rows</span>
        <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">row_data</span><span class="p">:</span>
<span class="hll">            <span class="k">print</span><span class="p">(</span><span class="s2">&quot;{0:&gt;{1}s}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">width</span><span class="p">),</span>
</span><span class="hll">                    <span class="n">end</span><span class="o">=</span><span class="s1">&#39; &#39;</span><span class="p">,</span> <span class="nb">file</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">out_file</span><span class="p">)</span>
</span><span class="hll">        <span class="k">print</span><span class="p">(</span><span class="nb">file</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">out_file</span><span class="p">)</span>
</span>

<span class="c1"># csv format for table</span>
<span class="k">class</span> <span class="nc">CSVFormat</span><span class="p">(</span><span class="n">TableFormat</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; Text format for table &quot;&quot;&quot;</span>

<span class="hll">    <span class="c1"># init will be inherited from parent to save data in file</span>
</span>
    <span class="k">def</span> <span class="nf">heading</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">header</span><span class="p">):</span> <span class="c1"># print headers</span>
<span class="hll">        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">header</span><span class="p">),</span> <span class="nb">file</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">out_file</span><span class="p">)</span>
</span>
    <span class="k">def</span> <span class="nf">row</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">row_data</span><span class="p">):</span> <span class="c1"># print rows</span>
<span class="hll">        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;,&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">row_data</span><span class="p">),</span> <span class="nb">file</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">out_file</span><span class="p">)</span>
</span>
<span class="c1"># this code is copied from datamine.py file and modified slightly</span>
<span class="c1"># to include the type of the data</span>
<span class="k">def</span> <span class="nf">read_file</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">types</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;warn&#39;</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39; read csv file and save data in the list &#39;&#39;&#39;</span>

    <span class="c1"># check for correct mode</span>
    <span class="k">if</span> <span class="n">mode</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;warn&#39;</span><span class="p">,</span> <span class="s1">&#39;silent&#39;</span><span class="p">,</span> <span class="s1">&#39;stop&#39;</span><span class="p">]:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;possible modes are &#39;warn&#39;, &#39;silent&#39;, &#39;stop&#39;&quot;</span><span class="p">)</span>

    <span class="n">ring_data</span> <span class="o">=</span> <span class="p">[]</span> <span class="c1"># create empty list to save data</span>

    <span class="k">with</span> <span class="nb">open</span> <span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
        <span class="n">rows</span> <span class="o">=</span>  <span class="n">csv</span><span class="o">.</span><span class="n">reader</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
        <span class="n">header</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="n">rows</span><span class="p">)</span> <span class="c1"># skip the header</span>

        <span class="c1"># change the types of the columns</span>
        <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">rows</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="c1"># row[2] = float(row[2]) # radius</span>
                <span class="c1"># row[3] = float(row[3]) # price</span>
                <span class="c1"># row[4] = int(row[4]) # quantity</span>

                <span class="c1"># generalized conversion</span>
                <span class="n">row</span> <span class="o">=</span> <span class="p">[</span><span class="n">d_type</span><span class="p">(</span><span class="n">val</span><span class="p">)</span> <span class="k">for</span> <span class="n">d_type</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">types</span><span class="p">,</span> <span class="n">row</span><span class="p">)]</span>
            <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">err</span><span class="p">:</span> <span class="c1"># process value error only</span>
                <span class="k">if</span> <span class="n">mode</span> <span class="o">==</span> <span class="s1">&#39;warn&#39;</span><span class="p">:</span>
                    <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Invalid data, row is skipped&quot;</span><span class="p">)</span>
                    <span class="k">print</span><span class="p">(</span><span class="s1">&#39;Row: {}, Reason : {}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">row_num</span><span class="p">,</span> <span class="n">err</span><span class="p">))</span>
                <span class="k">elif</span> <span class="n">mode</span> <span class="o">==</span> <span class="s1">&#39;silent&#39;</span><span class="p">:</span>
                    <span class="k">pass</span> <span class="c1"># do nothing</span>
                <span class="k">elif</span> <span class="n">mode</span> <span class="o">==</span> <span class="s1">&#39;stop&#39;</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="c1"># raise the exception</span>
                <span class="k">continue</span>

            <span class="c1"># ring_data.append(tuple(row))</span>

            <span class="c1"># append data in list in the form of tuple</span>
            <span class="c1"># row_dict = {</span>
                    <span class="c1"># &#39;date&#39; : row[0],</span>
                    <span class="c1"># &#39;metal&#39; : row[1],</span>
                    <span class="c1"># &#39;radius&#39; : row[2],</span>
                    <span class="c1"># &#39;price&#39; : row[3],</span>
                    <span class="c1"># &#39;quantity&#39; : row[4]</span>
                <span class="c1"># }</span>

            <span class="c1"># row_dict = Ring(row[0], row[1], row[2], row[3], row[4])</span>
            <span class="c1"># # use below or above line</span>
            <span class="n">row_dict</span> <span class="o">=</span> <span class="n">Ring</span><span class="p">(</span>
                    <span class="n">date</span> <span class="o">=</span> <span class="n">row</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
                    <span class="n">metal</span> <span class="o">=</span> <span class="n">row</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
                    <span class="n">radius</span> <span class="o">=</span> <span class="n">row</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span>
                    <span class="n">price</span> <span class="o">=</span> <span class="n">row</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span>
                    <span class="n">quantity</span> <span class="o">=</span> <span class="n">row</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span>
                <span class="p">)</span>

            <span class="n">ring_data</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">row_dict</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">ring_data</span>


<span class="c1"># table formatter</span>
<span class="hll"><span class="k">def</span> <span class="nf">print_table</span><span class="p">(</span><span class="n">list_name</span><span class="p">,</span> <span class="n">col_name</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;metal&#39;</span><span class="p">,</span> <span class="s1">&#39;radius&#39;</span><span class="p">],</span>
</span><span class="hll">        <span class="n">out_format</span><span class="o">=</span><span class="n">TextFormat</span><span class="p">(</span><span class="n">out_file</span><span class="o">=</span><span class="bp">None</span><span class="p">)):</span> <span class="c1"># note that class is passed here</span>
</span>    <span class="sd">&quot;&quot;&quot; print the formatted output &quot;&quot;&quot;</span>

    <span class="c1"># for c in col_name: # print header</span>
        <span class="c1"># print(&quot;{:&gt;7s}&quot;.format(c), end=&#39; &#39;)</span>
    <span class="c1"># print() # print empty line</span>
    <span class="c1"># for l in list_name: # print values</span>
        <span class="c1"># for c in col_name:</span>
            <span class="c1"># print(&quot;{:&gt;7s}&quot;.format(str(getattr(l, c))), end=&#39; &#39;)</span>
        <span class="c1"># print()</span>

    <span class="c1"># invoke class-method for printing heading</span>
    <span class="n">out_format</span><span class="o">.</span><span class="n">heading</span><span class="p">(</span><span class="n">col_name</span><span class="p">)</span> <span class="c1"># class is passed to out_format</span>
    <span class="k">for</span> <span class="n">l</span> <span class="ow">in</span> <span class="n">list_name</span><span class="p">:</span>
        <span class="c1"># store row in a list</span>
        <span class="n">row_data</span> <span class="o">=</span> <span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="nb">getattr</span><span class="p">(</span><span class="n">l</span><span class="p">,</span> <span class="n">c</span><span class="p">))</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">col_name</span><span class="p">]</span>
        <span class="n">out_format</span><span class="o">.</span><span class="n">row</span><span class="p">(</span><span class="n">row_data</span><span class="p">)</span> <span class="c1"># pass rows to class-method row()</span>


<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="c1"># list correct types of columns in csv file</span>
    <span class="n">types</span> <span class="o">=</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="nb">int</span><span class="p">]</span>

    <span class="c1"># read file and save data in list</span>
    <span class="n">list_data</span> <span class="o">=</span> <span class="n">read_file</span><span class="p">(</span><span class="s1">&#39;price.csv&#39;</span><span class="p">,</span> <span class="n">types</span><span class="p">)</span>

    <span class="c1"># # formatted output</span>
    <span class="c1"># print_table(list_data)</span>
    <span class="c1"># print()</span>
<span class="hll">    <span class="n">print_table</span><span class="p">(</span><span class="n">list_data</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;metal&#39;</span><span class="p">,</span> <span class="s1">&#39;radius&#39;</span><span class="p">,</span> <span class="s1">&#39;price&#39;</span><span class="p">],</span>
</span><span class="hll">            <span class="n">out_format</span><span class="o">=</span><span class="n">TextFormat</span><span class="p">())</span>
</span>
<span class="hll">    <span class="c1"># print in file</span>
</span><span class="hll">    <span class="n">out_file</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;text_format.txt&quot;</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="c1"># open file in write mode</span>
</span><span class="hll">    <span class="n">print_table</span><span class="p">(</span><span class="n">list_data</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;metal&#39;</span><span class="p">,</span> <span class="s1">&#39;radius&#39;</span><span class="p">,</span> <span class="s1">&#39;price&#39;</span><span class="p">],</span>
</span><span class="hll">            <span class="n">out_format</span><span class="o">=</span><span class="n">TextFormat</span><span class="p">(</span><span class="n">out_file</span><span class="o">=</span><span class="n">out_file</span><span class="p">))</span>
</span><span class="hll">    <span class="n">out_file</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</span>
<span class="hll">    <span class="c1"># print in file with width = 15</span>
</span><span class="hll">    <span class="n">out_file</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;wide_text_format.txt&quot;</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="c1"># open file in write mode</span>
</span><span class="hll">    <span class="n">print_table</span><span class="p">(</span><span class="n">list_data</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;metal&#39;</span><span class="p">,</span> <span class="s1">&#39;radius&#39;</span><span class="p">,</span> <span class="s1">&#39;price&#39;</span><span class="p">],</span>
</span><span class="hll">            <span class="n">out_format</span><span class="o">=</span><span class="n">TextFormat</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="mi">15</span><span class="p">,</span> <span class="n">out_file</span><span class="o">=</span><span class="n">out_file</span><span class="p">))</span>
</span><span class="hll">    <span class="n">out_file</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</span>
<span class="hll">    <span class="k">print</span><span class="p">()</span>
</span><span class="hll">    <span class="n">print_table</span><span class="p">(</span><span class="n">list_data</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;metal&#39;</span><span class="p">,</span> <span class="s1">&#39;radius&#39;</span><span class="p">,</span> <span class="s1">&#39;price&#39;</span><span class="p">],</span>
</span><span class="hll">            <span class="n">out_format</span><span class="o">=</span><span class="n">CSVFormat</span><span class="p">())</span>
</span><span class="hll">    <span class="c1"># print in file</span>
</span><span class="hll">    <span class="n">out_file</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;csv_format.csv&quot;</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="c1"># open file in write mode</span>
</span><span class="hll">    <span class="n">print_table</span><span class="p">(</span><span class="n">list_data</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;metal&#39;</span><span class="p">,</span> <span class="s1">&#39;radius&#39;</span><span class="p">,</span> <span class="s1">&#39;price&#39;</span><span class="p">],</span>
</span><span class="hll">            <span class="n">out_format</span><span class="o">=</span><span class="n">CSVFormat</span><span class="p">(</span><span class="n">out_file</span><span class="o">=</span><span class="n">out_file</span><span class="p">))</span>
</span><span class="hll">    <span class="n">out_file</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</span><span class="hll">
</span>
<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
</pre></div>
</td></tr></table></div>
</div>
<p>Following are the outputs of the above listing.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The previous main function is also working fine. This check is very important to confirm that the codes of the exitsting user will not bread due to updating of the design.</p>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>$ python contributor.py

  metal  radius   price
   Gold     5.5   80.99
 Silver    40.3     5.5
   Iron     9.2   14.29
   Gold     8.0   120.3
 Copper     4.1   70.25
   Iron    3.25   10.99

metal,radius,price
Gold,5.5,80.99
Silver,40.3,5.5
Iron,9.2,14.29
Gold,8.0,120.3
Copper,4.1,70.25
Iron,3.25,10.99
</pre></div>
</div>
<p>Below are the contents of the file generated by above listing,</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>$ cat text_format.txt

 metal  radius   price
  Gold     5.5   80.99
Silver    40.3     5.5
  Iron     9.2   14.29
  Gold     8.0   120.3
Copper     4.1   70.25
  Iron    3.25   10.99
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>$ cat wide_text_format.txt

 metal          radius           price
  Gold             5.5           80.99
Silver            40.3             5.5
  Iron             9.2           14.29
  Gold             8.0           120.3
Copper             4.1           70.25
  Iron            3.25           10.99
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>$ cat csv_format.csv
metal,radius,price
Gold,5.5,80.99
Silver,40.3,5.5
Iron,9.2,14.29
Gold,8.0,120.3
Copper,4.1,70.25
Iron,3.25,10.99
</pre></div>
</div>
</div>
<div class="section" id="mixin-multiple-inheritance">
<h4>Mixin : multiple inheritance<a class="headerlink" href="#mixin-multiple-inheritance" title="Permalink to this headline">¶</a></h4>
</div>
<div class="section" id="put-quotes-around-data">
<h4>Put quotes around data<a class="headerlink" href="#put-quotes-around-data" title="Permalink to this headline">¶</a></h4>
<p>Suppose, we want to put quotes around all the data in printed output. This can be accomplished as below,</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">contributor</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">class</span> <span class="nc">QuoteData</span><span class="p">(</span><span class="n">TextFormat</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="nf">row</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">row_data</span><span class="p">):</span>
<span class="gp">... </span>            <span class="c1"># put quotes around data</span>
<span class="gp">... </span>            <span class="n">quoted_data</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;&quot;{0}&quot;&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">r</span><span class="p">)</span> <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">row_data</span><span class="p">]</span>
<span class="gp">... </span>            <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">row</span><span class="p">(</span><span class="n">quoted_data</span><span class="p">)</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">types</span> <span class="o">=</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="nb">int</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">list_data</span> <span class="o">=</span> <span class="n">read_file</span><span class="p">(</span><span class="s1">&#39;price.csv&#39;</span><span class="p">,</span> <span class="n">types</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">print_table</span><span class="p">(</span><span class="n">list_data</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;metal&#39;</span><span class="p">,</span> <span class="s1">&#39;radius&#39;</span><span class="p">,</span> <span class="s1">&#39;price&#39;</span><span class="p">],</span> <span class="n">out_format</span><span class="o">=</span><span class="n">QuoteData</span><span class="p">())</span>
<span class="go">  metal  radius   price</span>
<span class="go"> &quot;Gold&quot;   &quot;5.5&quot; &quot;80.99&quot;</span>
<span class="go">&quot;Silver&quot;  &quot;40.3&quot;   &quot;5.5&quot;</span>
<span class="go"> &quot;Iron&quot;   &quot;9.2&quot; &quot;14.29&quot;</span>
<span class="go"> &quot;Gold&quot;   &quot;8.0&quot; &quot;120.3&quot;</span>
<span class="go">&quot;Copper&quot;   &quot;4.1&quot; &quot;70.25&quot;</span>
<span class="go"> &quot;Iron&quot;  &quot;3.25&quot; &quot;10.99&quot;</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The problem with above method is that it is applicable to class ‘TextFormat’ only (not to CSVFormat). This can be generalized using Mixin as shown below,</p>
</div>
</div>
<div class="section" id="put-quotes-using-mixin">
<h4>Put quotes using Mixin<a class="headerlink" href="#put-quotes-using-mixin" title="Permalink to this headline">¶</a></h4>
<p>We can use mix two class as shown below,</p>
<div class="admonition important">
<p class="first admonition-title">Important</p>
<p>Please note following points in the below code,</p>
<ul>
<li><p class="first">In Python, inheritance follows two rule</p>
<blockquote>
<div><ul class="simple">
<li>Child is checked before Parent.</li>
<li>Parents are checked in order.</li>
</ul>
</div></blockquote>
</li>
<li><p class="first">The ‘super()’ is used in he class “QuoteData”, which will call the __init__ function. But this class does not inherit from any other class (or inherits from Python-object class).</p>
</li>
<li><p class="first">The __init__ function function for the class “QuoteData” will be decided by the child class, i.e. the class MixinQuoteCSV is inheriting “QuoteData” and “CSVFormat”.</p>
</li>
<li><p class="first">Since, the parents are checked in order, therefore “QuoteData” will be check first.</p>
</li>
<li><p class="first">Also, “Child is checked before Parent” i.e. child will decide the super() function for the parent. For example, super() function of “QuoteData” will call the __init__ function of “parent of child class (not it’s own parent)”, hence __init__ of CSVFormat will be invoked by the “super()” of QuoteData.</p>
</li>
<li><p class="first">The correct order of inheritance can be checked using ‘help’ as below. If we have super() in all classes. Then super() of MixinQuoteText will call the “QuoteData”; then super() of QuoteData will call the TextFormat and so on.</p>
</li>
</ul>
<div class="last highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">contributor</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">help</span><span class="p">(</span><span class="n">MixinQuoteText</span><span class="p">)</span>
<span class="go">class MixinQuoteText(QuoteData, TextFormat)</span>
<span class="go"> |  Text format for table</span>
<span class="go"> |</span>
<span class="go"> |  Method resolution order:</span>
<span class="go"> |      MixinQuoteText</span>
<span class="go"> |      QuoteData</span>
<span class="go"> |      TextFormat</span>
<span class="go"> |      TableFormat</span>
<span class="go"> |      builtins.object</span>
</pre></div>
</div>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">It is not a good idea to define a class with one method. But this feature can be quite powerful in the case of inheritance, as shown in below example.</p>
</div>
<div class="literal-block-wrapper docutils container" id="py-mixin-quotes-tbl">
<div class="code-block-caption"><span class="caption-text">Adding quotes around printed data using Mixin</span><a class="headerlink" href="#py-mixin-quotes-tbl" title="Permalink to this code">¶</a></div>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>  1
  2
  3
  4
  5
  6
  7
  8
  9
 10
 11
 12
 13
 14
 15
 16
 17
 18
 19
 20
 21
 22
 23
 24
 25
 26
 27
 28
 29
 30
 31
 32
 33
 34
 35
 36
 37
 38
 39
 40
 41
 42
 43
 44
 45
 46
 47
 48
 49
 50
 51
 52
 53
 54
 55
 56
 57
 58
 59
 60
 61
 62
 63
 64
 65
 66
 67
 68
 69
 70
 71
 72
 73
 74
 75
 76
 77
 78
 79
 80
 81
 82
 83
 84
 85
 86
 87
 88
 89
 90
 91
 92
 93
 94
 95
 96
 97
 98
 99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1"># contributor.py</span>
<span class="c1"># user-2: additional features will be added to pythonic.py by the contributor</span>

<span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">import</span> <span class="nn">csv</span>
<span class="kn">from</span> <span class="nn">abc</span> <span class="kn">import</span> <span class="n">ABC</span><span class="p">,</span> <span class="n">abstractmethod</span>

<span class="kn">from</span> <span class="nn">pythonic</span> <span class="kn">import</span> <span class="n">Ring</span>


<span class="c1"># Abstract class for table-format</span>
<span class="k">class</span> <span class="nc">TableFormat</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; Abastract class &quot;&quot;&quot;</span>

    <span class="c1"># print data to file or screen</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">out_file</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">out_file</span> <span class="o">==</span> <span class="bp">None</span><span class="p">:</span>
            <span class="c1"># stdout is the location where python prints the output</span>
            <span class="n">out_file</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">stdout</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">out_file</span> <span class="o">=</span> <span class="n">out_file</span>

    <span class="nd">@abstractmethod</span>
    <span class="k">def</span> <span class="nf">heading</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">header</span><span class="p">):</span> <span class="c1"># must be implemented in child class</span>
        <span class="k">pass</span>

    <span class="nd">@abstractmethod</span>
    <span class="k">def</span> <span class="nf">row</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">row_data</span><span class="p">):</span> <span class="c1"># must be implemented in child class</span>
        <span class="k">pass</span>


<span class="c1"># text format for table</span>
<span class="k">class</span> <span class="nc">TextFormat</span><span class="p">(</span><span class="n">TableFormat</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; Text format for table &quot;&quot;&quot;</span>

    <span class="c1"># option for modifying width</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">7</span><span class="p">,</span> <span class="n">out_file</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span> <span class="c1"># override init</span>
        <span class="c1"># inherit parent init as well to save data in file</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">out_file</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">width</span> <span class="o">=</span> <span class="n">width</span>

    <span class="k">def</span> <span class="nf">heading</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">header</span><span class="p">):</span> <span class="c1"># print headers</span>
        <span class="k">for</span> <span class="n">h</span> <span class="ow">in</span> <span class="n">header</span><span class="p">:</span>
            <span class="k">print</span><span class="p">(</span><span class="s2">&quot;{0:&gt;{1}s}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">h</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">width</span><span class="p">),</span>
                    <span class="n">end</span><span class="o">=</span><span class="s1">&#39; &#39;</span><span class="p">,</span> <span class="nb">file</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">out_file</span><span class="p">)</span>
        <span class="k">print</span><span class="p">(</span><span class="nb">file</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">out_file</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">row</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">row_data</span><span class="p">):</span> <span class="c1"># print rows</span>
        <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">row_data</span><span class="p">:</span>
            <span class="k">print</span><span class="p">(</span><span class="s2">&quot;{0:&gt;{1}s}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">width</span><span class="p">),</span>
                    <span class="n">end</span><span class="o">=</span><span class="s1">&#39; &#39;</span><span class="p">,</span> <span class="nb">file</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">out_file</span><span class="p">)</span>
        <span class="k">print</span><span class="p">(</span><span class="nb">file</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">out_file</span><span class="p">)</span>


<span class="c1"># csv format for table</span>
<span class="k">class</span> <span class="nc">CSVFormat</span><span class="p">(</span><span class="n">TableFormat</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; Text format for table &quot;&quot;&quot;</span>

    <span class="c1"># init will be inherited from parent to save data in file</span>

    <span class="k">def</span> <span class="nf">heading</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">header</span><span class="p">):</span> <span class="c1"># print headers</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">header</span><span class="p">),</span> <span class="nb">file</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">out_file</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">row</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">row_data</span><span class="p">):</span> <span class="c1"># print rows</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;,&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">row_data</span><span class="p">),</span> <span class="nb">file</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">out_file</span><span class="p">)</span>


<span class="hll"><span class="c1"># Put quotes around data : This class will be used with other class in Mixin</span>
</span><span class="hll"><span class="k">class</span> <span class="nc">QuoteData</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
</span><span class="hll">    <span class="k">def</span> <span class="nf">row</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">row_data</span><span class="p">):</span>
</span><span class="hll">        <span class="n">quoted_data</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;&quot;{0}&quot;&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">r</span><span class="p">)</span> <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">row_data</span><span class="p">]</span>
</span><span class="hll">        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">row</span><span class="p">(</span><span class="n">quoted_data</span><span class="p">)</span> <span class="c1"># nature of super() is decided by child class</span>
</span>
<span class="hll"><span class="c1"># Mixin : QuoteData and CSVFormat</span>
</span><span class="hll"><span class="c1"># this will decide the nature of super() in QuoteData</span>
</span><span class="hll"><span class="k">class</span> <span class="nc">MixinQuoteCSV</span><span class="p">(</span><span class="n">QuoteData</span><span class="p">,</span> <span class="n">CSVFormat</span><span class="p">):</span>
</span><span class="hll">    <span class="k">pass</span>
</span>
<span class="hll"><span class="c1"># Mixin : QuoteData and TextFormat</span>
</span><span class="hll"><span class="k">class</span> <span class="nc">MixinQuoteText</span><span class="p">(</span><span class="n">QuoteData</span><span class="p">,</span> <span class="n">TextFormat</span><span class="p">):</span>
</span><span class="hll">    <span class="k">pass</span>
</span>

<span class="c1"># this code is copied from datamine.py file and modified slightly</span>
<span class="c1"># to include the type of the data</span>
<span class="k">def</span> <span class="nf">read_file</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">types</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;warn&#39;</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39; read csv file and save data in the list &#39;&#39;&#39;</span>

    <span class="c1"># check for correct mode</span>
    <span class="k">if</span> <span class="n">mode</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;warn&#39;</span><span class="p">,</span> <span class="s1">&#39;silent&#39;</span><span class="p">,</span> <span class="s1">&#39;stop&#39;</span><span class="p">]:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;possible modes are &#39;warn&#39;, &#39;silent&#39;, &#39;stop&#39;&quot;</span><span class="p">)</span>

    <span class="n">ring_data</span> <span class="o">=</span> <span class="p">[]</span> <span class="c1"># create empty list to save data</span>

    <span class="k">with</span> <span class="nb">open</span> <span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
        <span class="n">rows</span> <span class="o">=</span>  <span class="n">csv</span><span class="o">.</span><span class="n">reader</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
        <span class="n">header</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="n">rows</span><span class="p">)</span> <span class="c1"># skip the header</span>

        <span class="c1"># change the types of the columns</span>
        <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">rows</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="c1"># row[2] = float(row[2]) # radius</span>
                <span class="c1"># row[3] = float(row[3]) # price</span>
                <span class="c1"># row[4] = int(row[4]) # quantity</span>

                <span class="c1"># generalized conversion</span>
                <span class="n">row</span> <span class="o">=</span> <span class="p">[</span><span class="n">d_type</span><span class="p">(</span><span class="n">val</span><span class="p">)</span> <span class="k">for</span> <span class="n">d_type</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">types</span><span class="p">,</span> <span class="n">row</span><span class="p">)]</span>
            <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">err</span><span class="p">:</span> <span class="c1"># process value error only</span>
                <span class="k">if</span> <span class="n">mode</span> <span class="o">==</span> <span class="s1">&#39;warn&#39;</span><span class="p">:</span>
                    <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Invalid data, row is skipped&quot;</span><span class="p">)</span>
                    <span class="k">print</span><span class="p">(</span><span class="s1">&#39;Row: {}, Reason : {}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">row_num</span><span class="p">,</span> <span class="n">err</span><span class="p">))</span>
                <span class="k">elif</span> <span class="n">mode</span> <span class="o">==</span> <span class="s1">&#39;silent&#39;</span><span class="p">:</span>
                    <span class="k">pass</span> <span class="c1"># do nothing</span>
                <span class="k">elif</span> <span class="n">mode</span> <span class="o">==</span> <span class="s1">&#39;stop&#39;</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="c1"># raise the exception</span>
                <span class="k">continue</span>

            <span class="c1"># ring_data.append(tuple(row))</span>

            <span class="c1"># append data in list in the form of tuple</span>
            <span class="c1"># row_dict = {</span>
                    <span class="c1"># &#39;date&#39; : row[0],</span>
                    <span class="c1"># &#39;metal&#39; : row[1],</span>
                    <span class="c1"># &#39;radius&#39; : row[2],</span>
                    <span class="c1"># &#39;price&#39; : row[3],</span>
                    <span class="c1"># &#39;quantity&#39; : row[4]</span>
                <span class="c1"># }</span>

            <span class="c1"># row_dict = Ring(row[0], row[1], row[2], row[3], row[4])</span>
            <span class="c1"># # use below or above line</span>
            <span class="n">row_dict</span> <span class="o">=</span> <span class="n">Ring</span><span class="p">(</span>
                    <span class="n">date</span> <span class="o">=</span> <span class="n">row</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
                    <span class="n">metal</span> <span class="o">=</span> <span class="n">row</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
                    <span class="n">radius</span> <span class="o">=</span> <span class="n">row</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span>
                    <span class="n">price</span> <span class="o">=</span> <span class="n">row</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span>
                    <span class="n">quantity</span> <span class="o">=</span> <span class="n">row</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span>
                <span class="p">)</span>

            <span class="n">ring_data</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">row_dict</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">ring_data</span>


<span class="c1"># table formatter</span>
<span class="k">def</span> <span class="nf">print_table</span><span class="p">(</span><span class="n">list_name</span><span class="p">,</span> <span class="n">col_name</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;metal&#39;</span><span class="p">,</span> <span class="s1">&#39;radius&#39;</span><span class="p">],</span>
        <span class="n">out_format</span><span class="o">=</span><span class="n">TextFormat</span><span class="p">(</span><span class="n">out_file</span><span class="o">=</span><span class="bp">None</span><span class="p">)):</span> <span class="c1"># note that class is passed here</span>
    <span class="sd">&quot;&quot;&quot; print the formatted output &quot;&quot;&quot;</span>

    <span class="c1"># for c in col_name: # print header</span>
        <span class="c1"># print(&quot;{:&gt;7s}&quot;.format(c), end=&#39; &#39;)</span>
    <span class="c1"># print() # print empty line</span>
    <span class="c1"># for l in list_name: # print values</span>
        <span class="c1"># for c in col_name:</span>
            <span class="c1"># print(&quot;{:&gt;7s}&quot;.format(str(getattr(l, c))), end=&#39; &#39;)</span>
        <span class="c1"># print()</span>

    <span class="c1"># invoke class-method for printing heading</span>
    <span class="n">out_format</span><span class="o">.</span><span class="n">heading</span><span class="p">(</span><span class="n">col_name</span><span class="p">)</span> <span class="c1"># class is passed to out_format</span>
    <span class="k">for</span> <span class="n">l</span> <span class="ow">in</span> <span class="n">list_name</span><span class="p">:</span>
        <span class="c1"># store row in a list</span>
        <span class="n">row_data</span> <span class="o">=</span> <span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="nb">getattr</span><span class="p">(</span><span class="n">l</span><span class="p">,</span> <span class="n">c</span><span class="p">))</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">col_name</span><span class="p">]</span>
        <span class="n">out_format</span><span class="o">.</span><span class="n">row</span><span class="p">(</span><span class="n">row_data</span><span class="p">)</span> <span class="c1"># pass rows to class-method row()</span>


<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="c1"># list correct types of columns in csv file</span>
    <span class="n">types</span> <span class="o">=</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="nb">int</span><span class="p">]</span>

    <span class="c1"># read file and save data in list</span>
    <span class="n">list_data</span> <span class="o">=</span> <span class="n">read_file</span><span class="p">(</span><span class="s1">&#39;price.csv&#39;</span><span class="p">,</span> <span class="n">types</span><span class="p">)</span>

<span class="hll">    <span class="c1"># # formatted output</span>
</span><span class="hll">    <span class="c1"># print_table(list_data)</span>
</span><span class="hll">    <span class="c1"># print()</span>
</span><span class="hll">    <span class="c1"># print_table(list_data, [&#39;metal&#39;, &#39;radius&#39;, &#39;price&#39;],</span>
</span><span class="hll">            <span class="c1"># out_format=TextFormat())</span>
</span><span class="hll">
</span><span class="hll">    <span class="c1"># print in file</span>
</span><span class="hll">    <span class="c1"># out_file = open(&quot;text_format.txt&quot;, &quot;w&quot;) # open file in write mode</span>
</span><span class="hll">    <span class="c1"># print_table(list_data, [&#39;metal&#39;, &#39;radius&#39;, &#39;price&#39;],</span>
</span><span class="hll">            <span class="c1"># out_format=TextFormat(out_file=out_file))</span>
</span><span class="hll">    <span class="c1"># out_file.close()</span>
</span><span class="hll">
</span><span class="hll">    <span class="c1"># print in file with width = 15</span>
</span><span class="hll">    <span class="c1"># out_file = open(&quot;wide_text_format.txt&quot;, &quot;w&quot;) # open file in write mode</span>
</span><span class="hll">    <span class="c1"># print_table(list_data, [&#39;metal&#39;, &#39;radius&#39;, &#39;price&#39;],</span>
</span><span class="hll">            <span class="c1"># out_format=TextFormat(width=15, out_file=out_file))</span>
</span><span class="hll">    <span class="c1"># out_file.close()</span>
</span><span class="hll">
</span><span class="hll">    <span class="c1"># print()</span>
</span><span class="hll">    <span class="c1"># print_table(list_data, [&#39;metal&#39;, &#39;radius&#39;, &#39;price&#39;],</span>
</span><span class="hll">            <span class="c1"># out_format=CSVFormat())</span>
</span><span class="hll">    <span class="c1"># # print in file</span>
</span><span class="hll">    <span class="c1"># out_file = open(&quot;csv_format.csv&quot;, &quot;w&quot;) # open file in write mode</span>
</span><span class="hll">    <span class="c1"># print_table(list_data, [&#39;metal&#39;, &#39;radius&#39;, &#39;price&#39;],</span>
</span><span class="hll">            <span class="c1"># out_format=CSVFormat(out_file=out_file))</span>
</span><span class="hll">    <span class="c1"># out_file.close()</span>
</span>

<span class="hll">    <span class="n">print_table</span><span class="p">(</span><span class="n">list_data</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;metal&#39;</span><span class="p">,</span> <span class="s1">&#39;radius&#39;</span><span class="p">,</span> <span class="s1">&#39;price&#39;</span><span class="p">],</span>
</span><span class="hll">            <span class="n">out_format</span><span class="o">=</span><span class="n">MixinQuoteText</span><span class="p">())</span>
</span><span class="hll">
</span><span class="hll">    <span class="k">print</span><span class="p">()</span>
</span><span class="hll">    <span class="n">print_table</span><span class="p">(</span><span class="n">list_data</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;metal&#39;</span><span class="p">,</span> <span class="s1">&#39;radius&#39;</span><span class="p">,</span> <span class="s1">&#39;price&#39;</span><span class="p">],</span>
</span><span class="hll">            <span class="n">out_format</span><span class="o">=</span><span class="n">MixinQuoteCSV</span><span class="p">())</span>
</span>
<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
</pre></div>
</td></tr></table></div>
</div>
</div>
</div>
<div class="section" id="conclusion">
<h3>Conclusion<a class="headerlink" href="#conclusion" title="Permalink to this headline">¶</a></h3>
<p>In this chapter, we saw some of the OOPs feature of Python especially Inheritance. More examples of Inheritance are included in <a class="reference internal" href="index.html#moreex"><span class="std std-numref">Chapter 13</span></a>. We discussed some of the differences between Python and other programming language. In next chapter, we will discuss ‘&#64;property’ and ‘descriptor’ etc. Also, in the next chapter, we will discuss some more differences between Python and other programming language.</p>
</div>
</div>
<span id="document-python/property"></span><div class="section" id="methods-and-property">
<h2>Methods and &#64;property<a class="headerlink" href="#methods-and-property" title="Permalink to this headline">¶</a></h2>
<div class="section" id="introduction">
<h3>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h3>
<p>In this chapter, we will understand the usage of ‘methods’, ‘&#64;property’ and ‘descriptor’.</p>
</div>
<div class="section" id="methods-staticmethod-and-classmethod">
<h3>Methods, staticmethod and classmethod<a class="headerlink" href="#methods-staticmethod-and-classmethod" title="Permalink to this headline">¶</a></h3>
<p>In previous chapters, we saw the examples of methods, e.g. ‘area’ and ‘cost’ in <a class="reference internal" href="index.html#py-shipping-product"><span class="std std-numref">Listing 10.1</span></a>,  inside the class without any decorator with them. The ‘decorators’ adds the additional functionality to the methods, and will be discussed in details in <a class="reference internal" href="index.html#decorator"><span class="std std-numref">Chapter 12</span></a>.</p>
<p>In this section, we will quickly review the different types of methods with an example. Then these methods will be used with our previous examples.</p>
<p>In the below code, two decorators are used with the methods inside the class i.e. ‘staticmethod’ and ‘classmethod’. Please see the comments and notice: how do the different methods use different values of x for adding two numbers,</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>We can observe the following differences in these three methods from the below code,</p>
<ul class="last simple">
<li><strong>method</strong> : it uses the instance variable (self.x) for addition, which is set by __init__ function.</li>
<li><strong>classmethod</strong> : it uses class variable for addition.</li>
<li><strong>staticmethod</strong> : it uses the value of x which is defined in main program (i.e. outside the class ). If x = 20 is not defined, then NameError will be generated.</li>
</ul>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># mehodsEx.py</span>

<span class="c1"># below x will be used by static method</span>
<span class="c1"># if we do not define it, the staticmethod will generate error.</span>
<span class="n">x</span> <span class="o">=</span> <span class="mi">20</span>

<span class="k">class</span> <span class="nc">Add</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="n">x</span> <span class="o">=</span> <span class="mi">9</span>  <span class="c1"># class variable</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">x</span>  <span class="c1"># instance variable</span>

    <span class="k">def</span> <span class="nf">addMethod</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;method:&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">+</span> <span class="n">y</span><span class="p">)</span>

    <span class="nd">@classmethod</span>
    <span class="c1"># as convention, cls must be used for classmethod, instead of self</span>
    <span class="k">def</span> <span class="nf">addClass</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;classmethod:&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">+</span> <span class="n">y</span><span class="p">)</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">addStatic</span><span class="p">(</span><span class="n">y</span><span class="p">):</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;staticmethod:&quot;</span><span class="p">,</span> <span class="n">x</span> <span class="o">+</span> <span class="n">y</span><span class="p">)</span>



<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="c1"># method</span>
    <span class="n">m</span>  <span class="o">=</span> <span class="n">Add</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span> <span class="c1"># or m = Add(4)</span>
    <span class="c1"># for method, above x = 4, will be used for addition</span>
    <span class="n">m</span><span class="o">.</span><span class="n">addMethod</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>  <span class="c1"># method :  14</span>

    <span class="c1"># classmethod</span>
    <span class="n">c</span> <span class="o">=</span> <span class="n">Add</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
    <span class="c1"># for class method, class variable x = 9, will be used for addition</span>
    <span class="n">c</span><span class="o">.</span><span class="n">addClass</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>  <span class="c1"># clasmethod : 19</span>

    <span class="c1"># for static method, x=20 (at the top of file), will be used for addition</span>
    <span class="n">s</span> <span class="o">=</span> <span class="n">Add</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
    <span class="n">s</span><span class="o">.</span><span class="n">addStatic</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>  <span class="c1"># staticmethod : 30</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
</pre></div>
</div>
<p>Below is the output for above code,</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>$ python methodEx.py

method: 14
classmethod: 19
staticmethod: 30
</pre></div>
</div>
</div>
<div class="section" id="research-organization">
<h3>Research organization<a class="headerlink" href="#research-organization" title="Permalink to this headline">¶</a></h3>
<p>In previous chapter, we had two users who are modifying the class attributes. First was the mathematician (mathematician.py), who is modifying the ‘radius’ in <a class="reference internal" href="index.html#py-access-radius-math"><span class="std std-numref">Listing 10.4</span></a>. And other is the box company, who were modifying the method ‘perimeter’ in <a class="reference internal" href="index.html#py-box-modify-perimeter"><span class="std std-numref">Listing 10.5</span></a>. Lastly, we had a contributor who is creating a ‘table formatter’ in <a class="reference internal" href="index.html#py-mixin-quotes-tbl"><span class="std std-numref">Listing 10.9</span></a> for displaying the output nicely.</p>
<blockquote>
<div>Now, we have another research organization, who were doing their research analysis based on the diameters (not using radius), therefore they want to initialize the class-objects based on the diameter directly.</div></blockquote>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If we change the the ‘radius’ to ‘diameter’ in the __init__ function of class Ring, then we need to modify the ‘area’ and ‘cost’ methods as well. Also, the codes of other users (mathematician and box company) will break. But we can solve this problem using ‘classmethod’ as shown next.</p>
</div>
<div class="section" id="multiple-constructor-using-classmethod">
<h4>Multiple constructor using ‘classmethod’<a class="headerlink" href="#multiple-constructor-using-classmethod" title="Permalink to this headline">¶</a></h4>
<p>The ‘classmethod’ is a very useful tools to create the multiple constructor as shown in the below listing.</p>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1"># pythonic.py</span>

<span class="kn">import</span> <span class="nn">math</span>
<span class="kn">import</span> <span class="nn">time</span>

<span class="k">class</span> <span class="nc">Ring</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; Here we will see the actual logic behind various pieces of Python</span>
<span class="sd">    language e.g. instances, variables, method and @property etc.</span>
<span class="sd">    Also, we will see the combine usage of these pieces to complete a</span>
<span class="sd">    design with Agile methodology.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c1"># class variables</span>
    <span class="n">date</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;%Y-%m-</span><span class="si">%d</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">time</span><span class="o">.</span><span class="n">gmtime</span><span class="p">())</span> <span class="c1"># today&#39;s date &quot;YYYY-mm-dd&quot;</span>
    <span class="n">center</span> <span class="o">=</span> <span class="mf">0.0</span> <span class="c1"># center of the ring</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">date</span><span class="o">=</span><span class="n">date</span><span class="p">,</span> <span class="n">metal</span><span class="o">=</span><span class="s2">&quot;Copper&quot;</span><span class="p">,</span> <span class="n">radius</span><span class="o">=</span><span class="mf">5.0</span><span class="p">,</span>
                <span class="n">price</span><span class="o">=</span><span class="mf">5.0</span><span class="p">,</span> <span class="n">quantity</span><span class="o">=</span><span class="mi">5</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; init is not the constructor, but the initializer which</span>
<span class="sd">        initialize the instance variable</span>

<span class="sd">        self : is the instance</span>

<span class="sd">        __init__ takes the instance &#39;self&#39; and populates it with the radius,</span>
<span class="sd">        metal, date etc. and store in a dictionary.</span>

<span class="sd">        self.radius, self.metal etc. are the instance variable which</span>
<span class="sd">        must be unique.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">date</span> <span class="o">=</span> <span class="n">date</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">metal</span> <span class="o">=</span> <span class="n">metal</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">radius</span> <span class="o">=</span> <span class="n">radius</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">price</span> <span class="o">=</span> <span class="n">price</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">quantity</span> <span class="o">=</span> <span class="n">quantity</span>


<span class="hll">    <span class="c1"># Multiple constructor</span>
</span><span class="hll">    <span class="c1"># below constructor is added for the &#39;research organization&#39; who are</span>
</span><span class="hll">    <span class="c1"># doing their work based on diameters,</span>
</span><span class="hll">    <span class="nd">@classmethod</span>
</span><span class="hll">    <span class="k">def</span> <span class="nf">diameter_init</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">diameter</span><span class="p">):</span>
</span><span class="hll">        <span class="n">radius</span> <span class="o">=</span> <span class="n">diameter</span><span class="o">/</span><span class="mi">2</span><span class="p">;</span>  <span class="c1"># change diameter to radius</span>
</span><span class="hll">        <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="n">radius</span><span class="p">)</span> <span class="c1"># return radius</span>
</span>
    <span class="k">def</span> <span class="nf">cost</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">price</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">quantity</span>

    <span class="k">def</span> <span class="nf">area</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">math</span><span class="o">.</span><span class="n">pi</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">radius</span><span class="o">**</span><span class="mi">2</span>

    <span class="k">def</span> <span class="nf">perimeter</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">pi</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">radius</span>

<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Center of the Ring is at:&quot;</span><span class="p">,</span> <span class="n">Ring</span><span class="o">.</span><span class="n">center</span><span class="p">)</span> <span class="c1"># modify class variable</span>
    <span class="n">r</span> <span class="o">=</span> <span class="n">Ring</span><span class="p">(</span><span class="n">price</span><span class="o">=</span><span class="mi">8</span><span class="p">)</span> <span class="c1"># modify only price</span>
    <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Radius:{0}, Cost:{1}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">radius</span><span class="p">,</span> <span class="n">r</span><span class="o">.</span><span class="n">cost</span><span class="p">()))</span>
    <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Radius:{0}, Perimeter:{1:0.2f}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">radius</span><span class="p">,</span> <span class="n">r</span><span class="o">.</span><span class="n">perimeter</span><span class="p">()))</span>

<span class="hll">    <span class="k">print</span><span class="p">()</span> <span class="c1"># check the new constructor &#39;diameter_init&#39;</span>
</span><span class="hll">    <span class="n">d</span> <span class="o">=</span> <span class="n">Ring</span><span class="o">.</span><span class="n">diameter_init</span><span class="p">(</span><span class="n">diameter</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
</span><span class="hll">    <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Radius:{0}, Perimeter:{1:0.2f}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">d</span><span class="o">.</span><span class="n">radius</span><span class="p">,</span> <span class="n">d</span><span class="o">.</span><span class="n">perimeter</span><span class="p">()))</span>
</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
</pre></div>
</td></tr></table></div>
<p>Following are the outputs for above code,</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>$ python pythonic.py

Center of the Ring is at: 0.0
Radius:5.0, Cost:40
Radius:5.0, Perimeter:31.42

<span class="hll">Radius:5.0, Perimeter:31.42
</span></pre></div>
</div>
</div>
<div class="section" id="additional-methods-using-staticmethod">
<h4>Additional methods using ‘staticmethod’<a class="headerlink" href="#additional-methods-using-staticmethod" title="Permalink to this headline">¶</a></h4>
<p>Now, the research organization wants one more features in the class, i.e. Meter to Centimeter conversion. Note that this feature has no relation with the other methods in the class. In the other words, the output of Meter to Centimeter conversion will not be used anywhere in the class, but it’s handy for the organization to have this feature in the package. In such cases, we can use static methods.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">There is no point to create a ‘meter_cm’ method as ‘meter_cm(self, meter)’ and store it in the dictionary, as we are not going to use it anywhere in the class. We added this to meet the client’s requirement only, hence it should be added as simple definition (not as methods), which can be done using &#64;staticmethod. In the other words, static methods are used to attached functions to classes.</p>
</div>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1"># pythonic.py</span>

<span class="kn">import</span> <span class="nn">math</span>
<span class="kn">import</span> <span class="nn">time</span>

<span class="k">class</span> <span class="nc">Ring</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; Here we will see the actual logic behind various pieces of Python</span>
<span class="sd">    language e.g. instances, variables, method and @property etc.</span>
<span class="sd">    Also, we will see the combine usage of these pieces to complete a</span>
<span class="sd">    design with Agile methodology.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c1"># class variables</span>
    <span class="n">date</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;%Y-%m-</span><span class="si">%d</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">time</span><span class="o">.</span><span class="n">gmtime</span><span class="p">())</span> <span class="c1"># today&#39;s date &quot;YYYY-mm-dd&quot;</span>
    <span class="n">center</span> <span class="o">=</span> <span class="mf">0.0</span> <span class="c1"># center of the ring</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">date</span><span class="o">=</span><span class="n">date</span><span class="p">,</span> <span class="n">metal</span><span class="o">=</span><span class="s2">&quot;Copper&quot;</span><span class="p">,</span> <span class="n">radius</span><span class="o">=</span><span class="mf">5.0</span><span class="p">,</span>
                <span class="n">price</span><span class="o">=</span><span class="mf">5.0</span><span class="p">,</span> <span class="n">quantity</span><span class="o">=</span><span class="mi">5</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; init is not the constructor, but the initializer which</span>
<span class="sd">        initialize the instance variable</span>

<span class="sd">        self : is the instance</span>

<span class="sd">        __init__ takes the instance &#39;self&#39; and populates it with the radius,</span>
<span class="sd">        metal, date etc. and store in a dictionary.</span>

<span class="sd">        self.radius, self.metal etc. are the instance variable which</span>
<span class="sd">        must be unique.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">date</span> <span class="o">=</span> <span class="n">date</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">metal</span> <span class="o">=</span> <span class="n">metal</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">radius</span> <span class="o">=</span> <span class="n">radius</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">price</span> <span class="o">=</span> <span class="n">price</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">quantity</span> <span class="o">=</span> <span class="n">quantity</span>


    <span class="c1"># Multiple constructor</span>
    <span class="c1"># below constructor is added for the &#39;research organization&#39; who are</span>
    <span class="c1"># doing their work based on diameters,</span>
    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">diameter_init</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">diameter</span><span class="p">):</span>
        <span class="n">radius</span> <span class="o">=</span> <span class="n">diameter</span><span class="o">/</span><span class="mi">2</span><span class="p">;</span>  <span class="c1"># change diameter to radius</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="n">radius</span><span class="p">)</span> <span class="c1"># return radius</span>

<span class="hll">    <span class="nd">@staticmethod</span>  <span class="c1"># meter to centimeter conversion</span>
</span><span class="hll">    <span class="k">def</span> <span class="nf">meter_cm</span><span class="p">(</span><span class="n">meter</span><span class="p">):</span>
</span><span class="hll">        <span class="k">return</span><span class="p">(</span><span class="mi">100</span><span class="o">*</span><span class="n">meter</span><span class="p">)</span>
</span>

    <span class="k">def</span> <span class="nf">cost</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">price</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">quantity</span>

    <span class="k">def</span> <span class="nf">area</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">math</span><span class="o">.</span><span class="n">pi</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">radius</span><span class="o">**</span><span class="mi">2</span>

    <span class="k">def</span> <span class="nf">perimeter</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">pi</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">radius</span>

<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Center of the Ring is at:&quot;</span><span class="p">,</span> <span class="n">Ring</span><span class="o">.</span><span class="n">center</span><span class="p">)</span> <span class="c1"># modify class variable</span>
    <span class="n">r</span> <span class="o">=</span> <span class="n">Ring</span><span class="p">(</span><span class="n">price</span><span class="o">=</span><span class="mi">8</span><span class="p">)</span> <span class="c1"># modify only price</span>
    <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Radius:{0}, Cost:{1}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">radius</span><span class="p">,</span> <span class="n">r</span><span class="o">.</span><span class="n">cost</span><span class="p">()))</span>
    <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Radius:{0}, Perimeter:{1:0.2f}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">radius</span><span class="p">,</span> <span class="n">r</span><span class="o">.</span><span class="n">perimeter</span><span class="p">()))</span>

    <span class="k">print</span><span class="p">()</span> <span class="c1"># check the new constructor &#39;diameter_init&#39;</span>
    <span class="n">d</span> <span class="o">=</span> <span class="n">Ring</span><span class="o">.</span><span class="n">diameter_init</span><span class="p">(</span><span class="n">diameter</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Radius:{0}, Perimeter:{1:0.2f}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">d</span><span class="o">.</span><span class="n">radius</span><span class="p">,</span> <span class="n">d</span><span class="o">.</span><span class="n">perimeter</span><span class="p">()))</span>
<span class="hll">    <span class="n">m</span> <span class="o">=</span> <span class="mi">10</span> <span class="c1"># 10 meter</span>
</span><span class="hll">    <span class="k">print</span><span class="p">(</span><span class="s2">&quot;{0} meter = {1} centimeter&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="n">d</span><span class="o">.</span><span class="n">meter_cm</span><span class="p">(</span><span class="n">m</span><span class="p">)))</span>
</span>
<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
</pre></div>
</td></tr></table></div>
<p>Following is the output of above code,</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>$ python pythonic.py
Center of the Ring is at: 0.0
Radius:5.0, Cost:40
Radius:5.0, Perimeter:31.42

Radius:5.0, Perimeter:31.42
<span class="hll">10 meter = 1000 centimeter
</span></pre></div>
</div>
</div>
</div>
<div class="section" id="micro-managing">
<h3>Micro-managing<a class="headerlink" href="#micro-managing" title="Permalink to this headline">¶</a></h3>
<p>Micro-managing is the method, where client tells us the ways in which the logic should be implemented. Lets understand it by an example.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Now the research organization wants that the ‘area’ should be calculated based on the ‘perimeter’. More specifically, they will provide the ‘diameter’, then we need to calculate the ‘perimeter’; then based on the ‘perimeter’, calculate the ‘radius’. And finally calculate the ‘area’ based on this new radius. This may look silly, but if we look closely, the radius will change slightly during this conversion process; as there will be some difference between (diameter/2) and (math.pi*diameter)/( 2*math.pi). The reason for difference is: on computer we do not cancel the math.pi at numerator with math.pi at denominator, but solve the numerator first and then divide by the denominator, and hence get some rounding errors.</p>
</div>
<div class="section" id="wrong-solution">
<h4>Wrong Solution<a class="headerlink" href="#wrong-solution" title="Permalink to this headline">¶</a></h4>
<p>The solution to this problem may look pretty simple, i.e. modify the ‘area’ method in the following way,</p>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1"># pythonic.py</span>

<span class="kn">import</span> <span class="nn">math</span>
<span class="kn">import</span> <span class="nn">time</span>

<span class="k">class</span> <span class="nc">Ring</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; Here we will see the actual logic behind various pieces of Python</span>
<span class="sd">    language e.g. instances, variables, method and @property etc.</span>
<span class="sd">    Also, we will see the combine usage of these pieces to complete a</span>
<span class="sd">    design with Agile methodology.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c1"># class variables</span>
    <span class="n">date</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;%Y-%m-</span><span class="si">%d</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">time</span><span class="o">.</span><span class="n">gmtime</span><span class="p">())</span> <span class="c1"># today&#39;s date &quot;YYYY-mm-dd&quot;</span>
    <span class="n">center</span> <span class="o">=</span> <span class="mf">0.0</span> <span class="c1"># center of the ring</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">date</span><span class="o">=</span><span class="n">date</span><span class="p">,</span> <span class="n">metal</span><span class="o">=</span><span class="s2">&quot;Copper&quot;</span><span class="p">,</span> <span class="n">radius</span><span class="o">=</span><span class="mf">5.0</span><span class="p">,</span>
                <span class="n">price</span><span class="o">=</span><span class="mf">5.0</span><span class="p">,</span> <span class="n">quantity</span><span class="o">=</span><span class="mi">5</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; init is not the constructor, but the initializer which</span>
<span class="sd">        initialize the instance variable</span>

<span class="sd">        self : is the instance</span>

<span class="sd">        __init__ takes the instance &#39;self&#39; and populates it with the radius,</span>
<span class="sd">        metal, date etc. and store in a dictionary.</span>

<span class="sd">        self.radius, self.metal etc. are the instance variable which</span>
<span class="sd">        must be unique.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">date</span> <span class="o">=</span> <span class="n">date</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">metal</span> <span class="o">=</span> <span class="n">metal</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">radius</span> <span class="o">=</span> <span class="n">radius</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">price</span> <span class="o">=</span> <span class="n">price</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">quantity</span> <span class="o">=</span> <span class="n">quantity</span>


    <span class="c1"># Multiple constructor</span>
    <span class="c1"># below constructor is added for the &#39;research organization&#39; who are</span>
    <span class="c1"># doing their work based on diameters,</span>
    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">diameter_init</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">diameter</span><span class="p">):</span>
        <span class="n">radius</span> <span class="o">=</span> <span class="n">diameter</span><span class="o">/</span><span class="mi">2</span><span class="p">;</span>  <span class="c1"># change diameter to radius</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="n">radius</span><span class="p">)</span> <span class="c1"># return radius</span>

    <span class="nd">@staticmethod</span>  <span class="c1"># meter to centimeter conversion</span>
    <span class="k">def</span> <span class="nf">meter_cm</span><span class="p">(</span><span class="n">meter</span><span class="p">):</span>
        <span class="k">return</span><span class="p">(</span><span class="mi">100</span><span class="o">*</span><span class="n">meter</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">cost</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">price</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">quantity</span>

    <span class="k">def</span> <span class="nf">area</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="hll">        <span class="c1"># return math.pi * self.radius**2</span>
</span><span class="hll">        <span class="n">p</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">perimeter</span><span class="p">()</span> <span class="c1"># calculate perimeter</span>
</span><span class="hll">        <span class="n">r</span> <span class="o">=</span> <span class="n">p</span> <span class="o">/</span> <span class="p">(</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">pi</span><span class="p">)</span>
</span><span class="hll">        <span class="k">return</span> <span class="n">math</span><span class="o">.</span><span class="n">pi</span> <span class="o">*</span> <span class="n">r</span><span class="o">**</span><span class="mi">2</span>
</span>
    <span class="k">def</span> <span class="nf">perimeter</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">pi</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">radius</span>

<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
<span class="hll">    <span class="c1"># print(&quot;Center of the Ring is at:&quot;, Ring.center) # modify class variable</span>
</span><span class="hll">    <span class="c1"># r = Ring(price=8) # modify only price</span>
</span><span class="hll">    <span class="c1"># print(&quot;Radius:{0}, Cost:{1}&quot;.format(r.radius, r.cost()))</span>
</span><span class="hll">    <span class="c1"># print(&quot;Radius:{0}, Perimeter:{1:0.2f}&quot;.format(r.radius, r.perimeter()))</span>
</span>
<span class="hll">    <span class="k">print</span><span class="p">()</span> <span class="c1"># check the new constructor &#39;diameter_init&#39;</span>
</span><span class="hll">    <span class="n">d</span> <span class="o">=</span> <span class="n">Ring</span><span class="o">.</span><span class="n">diameter_init</span><span class="p">(</span><span class="n">diameter</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
</span><span class="hll">    <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Radius:{0}, Perimeter:{1:0.2f}, Area:{2:0.2f}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span class="hll">        <span class="n">d</span><span class="o">.</span><span class="n">radius</span><span class="p">,</span> <span class="n">d</span><span class="o">.</span><span class="n">perimeter</span><span class="p">(),</span> <span class="n">d</span><span class="o">.</span><span class="n">area</span><span class="p">()))</span>
</span><span class="hll">    <span class="c1"># print(&quot;Radius:{0}, Perimeter:{1:0.2f}&quot;.format(d.radius, d.perimeter()))</span>
</span><span class="hll">    <span class="c1"># m = 10 # 10 meter</span>
</span><span class="hll">    <span class="c1"># print(&quot;{0} meter = {1} centimeter&quot;.format(m, d.meter_cm(m)))</span>
</span>
<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
</pre></div>
</td></tr></table></div>
<ul class="simple">
<li>If we run the above code, we will have the following results, which is exactly right.</li>
</ul>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>$ python pythonic.py

Radius:5.0, Perimeter:31.42, Area:78.54
</pre></div>
</div>
<div class="admonition error">
<p class="first admonition-title">Error</p>
<p>Above solution looks pretty simple, but it will break the code in ‘box.py in <a class="reference internal" href="index.html#py-box-modify-perimeter"><span class="std std-numref">Listing 10.5</span></a>’, as it is modifying the perimeter by a factor of 2.0 by overriding the perimeter method. Therefore, for calculating the area in box.py file, python interpretor will use the child class method ‘perimeter’ for getting the value of perimeter. Hence, the area will be calculated based on the ‘modified parameter’, not based on actual parameter.</p>
<ul class="simple">
<li>In box.py, the area will be wrongly calculated, because it is modifying the perimeter for their usage. Now, radius will be calculated by new perimeter (as they override the perimeter method) and finally area will be modified due to change in radius values, as shown below,</li>
</ul>
<div class="last highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">box</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span> <span class="o">=</span> <span class="n">Box</span><span class="o">.</span><span class="n">diameter_init</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span><span class="o">.</span><span class="n">radius</span>
<span class="go">5.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span><span class="o">.</span><span class="n">perimeter</span><span class="p">()</span>  <span class="c1"># doubled value of perimeter (desired)</span>
<span class="go">62.83185307179586</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span><span class="o">.</span><span class="n">area</span><span class="p">()</span>  <span class="c1"># wrong value of area, see next for correct result</span>
<span class="go">314.1592653589793</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">math</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">math</span><span class="o">.</span><span class="n">pi</span> <span class="o">*</span> <span class="n">b</span><span class="o">.</span><span class="n">radius</span><span class="o">**</span><span class="mi">2</span>  <span class="c1"># desired radius</span>
<span class="go">78.53981633974483</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">math</span><span class="o">.</span><span class="n">pi</span> <span class="o">*</span> <span class="p">(</span><span class="n">b</span><span class="o">.</span><span class="n">perimeter</span><span class="p">()</span><span class="o">/</span><span class="p">(</span><span class="mi">2</span><span class="o">*</span><span class="n">math</span><span class="o">.</span><span class="n">pi</span><span class="p">))</span><span class="o">**</span><span class="mi">2</span>  <span class="c1"># calculated radius</span>
<span class="go">314.1592653589793</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="correct-solution">
<h4>Correct solution<a class="headerlink" href="#correct-solution" title="Permalink to this headline">¶</a></h4>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The above problem can be resolved by creating a local copy of perimeter in the class. In this way, the child class method can not override the local-copy of parent class method. For this, we need to modify the code as below,</p>
</div>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1"># pythonic.py</span>

<span class="kn">import</span> <span class="nn">math</span>
<span class="kn">import</span> <span class="nn">time</span>

<span class="k">class</span> <span class="nc">Ring</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; Here we will see the actual logic behind various pieces of Python</span>
<span class="sd">    language e.g. instances, variables, method and @property etc.</span>
<span class="sd">    Also, we will see the combine usage of these pieces to complete a</span>
<span class="sd">    design with Agile methodology.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c1"># class variables</span>
    <span class="n">date</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;%Y-%m-</span><span class="si">%d</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">time</span><span class="o">.</span><span class="n">gmtime</span><span class="p">())</span> <span class="c1"># today&#39;s date &quot;YYYY-mm-dd&quot;</span>
    <span class="n">center</span> <span class="o">=</span> <span class="mf">0.0</span> <span class="c1"># center of the ring</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">date</span><span class="o">=</span><span class="n">date</span><span class="p">,</span> <span class="n">metal</span><span class="o">=</span><span class="s2">&quot;Copper&quot;</span><span class="p">,</span> <span class="n">radius</span><span class="o">=</span><span class="mf">5.0</span><span class="p">,</span>
                <span class="n">price</span><span class="o">=</span><span class="mf">5.0</span><span class="p">,</span> <span class="n">quantity</span><span class="o">=</span><span class="mi">5</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; init is not the constructor, but the initializer which</span>
<span class="sd">        initialize the instance variable</span>

<span class="sd">        self : is the instance</span>

<span class="sd">        __init__ takes the instance &#39;self&#39; and populates it with the radius,</span>
<span class="sd">        metal, date etc. and store in a dictionary.</span>

<span class="sd">        self.radius, self.metal etc. are the instance variable which</span>
<span class="sd">        must be unique.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">date</span> <span class="o">=</span> <span class="n">date</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">metal</span> <span class="o">=</span> <span class="n">metal</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">radius</span> <span class="o">=</span> <span class="n">radius</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">price</span> <span class="o">=</span> <span class="n">price</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">quantity</span> <span class="o">=</span> <span class="n">quantity</span>


    <span class="c1"># Multiple constructor</span>
    <span class="c1"># below constructor is added for the &#39;research organization&#39; who are</span>
    <span class="c1"># doing their work based on diameters,</span>
    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">diameter_init</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">diameter</span><span class="p">):</span>
        <span class="n">radius</span> <span class="o">=</span> <span class="n">diameter</span><span class="o">/</span><span class="mi">2</span><span class="p">;</span>  <span class="c1"># change diameter to radius</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="n">radius</span><span class="p">)</span> <span class="c1"># return radius</span>

    <span class="nd">@staticmethod</span>  <span class="c1"># meter to centimeter conversion</span>
    <span class="k">def</span> <span class="nf">meter_cm</span><span class="p">(</span><span class="n">meter</span><span class="p">):</span>
        <span class="k">return</span><span class="p">(</span><span class="mi">100</span><span class="o">*</span><span class="n">meter</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">cost</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">price</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">quantity</span>

    <span class="k">def</span> <span class="nf">area</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># return math.pi * self.radius**2</span>
<span class="hll">        <span class="c1"># p = self.perimeter() # wrong way to calculate perimeter</span>
</span><span class="hll">        <span class="n">p</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_perimeter</span><span class="p">()</span>  <span class="c1"># use local copy of perimeter()</span>
</span>        <span class="n">r</span> <span class="o">=</span> <span class="n">p</span> <span class="o">/</span> <span class="p">(</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">pi</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">math</span><span class="o">.</span><span class="n">pi</span> <span class="o">*</span> <span class="n">r</span><span class="o">**</span><span class="mi">2</span>

    <span class="k">def</span> <span class="nf">perimeter</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">pi</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">radius</span>

<span class="hll">    <span class="c1"># local copy can be created in the lines after the actual method</span>
</span><span class="hll">    <span class="n">_perimeter</span> <span class="o">=</span> <span class="n">perimeter</span> <span class="c1"># make a local copy of perimeter</span>
</span>
<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="c1"># print(&quot;Center of the Ring is at:&quot;, Ring.center) # modify class variable</span>
    <span class="c1"># r = Ring(price=8) # modify only price</span>
    <span class="c1"># print(&quot;Radius:{0}, Cost:{1}&quot;.format(r.radius, r.cost()))</span>
    <span class="c1"># print(&quot;Radius:{0}, Perimeter:{1:0.2f}&quot;.format(r.radius, r.perimeter()))</span>

    <span class="k">print</span><span class="p">()</span> <span class="c1"># check the new constructor &#39;diameter_init&#39;</span>
    <span class="n">d</span> <span class="o">=</span> <span class="n">Ring</span><span class="o">.</span><span class="n">diameter_init</span><span class="p">(</span><span class="n">diameter</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Radius:{0}, Perimeter:{1:0.2f}, Area:{2:0.2f}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
        <span class="n">d</span><span class="o">.</span><span class="n">radius</span><span class="p">,</span> <span class="n">d</span><span class="o">.</span><span class="n">perimeter</span><span class="p">(),</span> <span class="n">d</span><span class="o">.</span><span class="n">area</span><span class="p">()))</span>
    <span class="c1"># print(&quot;Radius:{0}, Perimeter:{1:0.2f}&quot;.format(d.radius, d.perimeter()))</span>
    <span class="c1"># m = 10 # 10 meter</span>
    <span class="c1"># print(&quot;{0} meter = {1} centimeter&quot;.format(m, d.meter_cm(m)))</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
</pre></div>
</td></tr></table></div>
<p>Below is the result for above listing,</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>$ python pythonic.py

Radius:5.0, Perimeter:31.42, Area:78.54
</pre></div>
</div>
<p>Now, we will get the correct results for the ‘box.py’ as well, as shown below,</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">box</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span> <span class="o">=</span> <span class="n">Box</span><span class="o">.</span><span class="n">diameter_init</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span><span class="o">.</span><span class="n">radius</span>
<span class="go">5.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span><span class="o">.</span><span class="n">perimeter</span><span class="p">()</span>  <span class="c1"># doubled value of perimeter (desired)</span>
<span class="go">62.83185307179586</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span><span class="o">.</span><span class="n">area</span><span class="p">()</span>  <span class="c1"># desired area</span>
<span class="go">78.53981633974483</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="private-attributes-are-not-for-privatizing-the-attributes">
<h3>Private attributes are not for privatizing the attributes<a class="headerlink" href="#private-attributes-are-not-for-privatizing-the-attributes" title="Permalink to this headline">¶</a></h3>
<p>In <a class="reference internal" href="index.html#sec-no-data-hide"><span class="std std-numref">Section 10.7</span></a>, we saw that there is no concept of data-hiding in Python; and the attributes can be directly accessed by the the clients.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">There is a misconception that the double underscore (‘__’) are used for data hiding in Python. In this section, we will see the correct usage of ‘__’ in Python.</p>
</div>
<div class="section" id="same-local-copy-in-child-and-parent-class">
<h4>Same local copy in child and parent class<a class="headerlink" href="#same-local-copy-in-child-and-parent-class" title="Permalink to this headline">¶</a></h4>
<p>In previous section, we made a local copy of method ‘perimeter’ as ‘_perimeter’. In this way, we resolve the problem of overriding the parent class method.</p>
<p>But, if the child class (i.e. box.py) makes a local copy the perimeter as well with the same name i.e. _perimeter, then we will again have the same problem, as shown below,</p>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1"># box.py</span>
<span class="c1"># user-3 : creating boxes for the ring</span>

<span class="kn">from</span> <span class="nn">pythonic</span> <span class="kn">import</span> <span class="n">Ring</span>

<span class="k">class</span> <span class="nc">Box</span><span class="p">(</span><span class="n">Ring</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; Modified perimeter for creating the box &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">perimeter</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span> <span class="c1"># override the method &#39;perimeter&#39;</span>
        <span class="c1"># perimeter is increased 2.0 times</span>
        <span class="k">return</span> <span class="n">Ring</span><span class="o">.</span><span class="n">perimeter</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">*</span> <span class="mf">2.0</span>

<span class="hll">    <span class="n">_perimeter</span> <span class="o">=</span> <span class="n">perimeter</span>
</span>
<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="n">b</span> <span class="o">=</span> <span class="n">Box</span><span class="p">(</span><span class="n">radius</span><span class="o">=</span><span class="mi">8</span><span class="p">)</span> <span class="c1"># pass radius = 8</span>
    <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Radius:&quot;</span><span class="p">,</span> <span class="n">b</span><span class="o">.</span><span class="n">radius</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Modified perimeter: </span><span class="si">%0.2f</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">b</span><span class="o">.</span><span class="n">perimeter</span><span class="p">())</span> <span class="c1"># (2*pi*radius) * 2</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
</pre></div>
</td></tr></table></div>
<p>Now, we will have same problem as before,</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">box</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span> <span class="o">=</span> <span class="n">Box</span><span class="o">.</span><span class="n">diameter_init</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span><span class="o">.</span><span class="n">area</span><span class="p">()</span>  <span class="c1"># wrong value of area again,</span>
<span class="go">314.1592653589793</span>
</pre></div>
</div>
</div>
<div class="section" id="use-perimeter-instead-of-perimeter-to-solve-the-problem">
<h4>Use ‘__perimeter’ instead of ‘_perimeter’ to solve the problem<a class="headerlink" href="#use-perimeter-instead-of-perimeter-to-solve-the-problem" title="Permalink to this headline">¶</a></h4>
<p>The above problem can be solved using double underscore before the perimeter instead of one underscore, as shown below,</p>
<ul class="simple">
<li>First replace the _perimeter with __ perimeter in the ‘pythonic.py’ as below,</li>
</ul>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1"># pythonic.py</span>

<span class="kn">import</span> <span class="nn">math</span>
<span class="kn">import</span> <span class="nn">time</span>

<span class="k">class</span> <span class="nc">Ring</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; Here we will see the actual logic behind various pieces of Python</span>
<span class="sd">    language e.g. instances, variables, method and @property etc.</span>
<span class="sd">    Also, we will see the combine usage of these pieces to complete a</span>
<span class="sd">    design with Agile methodology.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c1"># class variables</span>
    <span class="n">date</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;%Y-%m-</span><span class="si">%d</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">time</span><span class="o">.</span><span class="n">gmtime</span><span class="p">())</span> <span class="c1"># today&#39;s date &quot;YYYY-mm-dd&quot;</span>
    <span class="n">center</span> <span class="o">=</span> <span class="mf">0.0</span> <span class="c1"># center of the ring</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">date</span><span class="o">=</span><span class="n">date</span><span class="p">,</span> <span class="n">metal</span><span class="o">=</span><span class="s2">&quot;Copper&quot;</span><span class="p">,</span> <span class="n">radius</span><span class="o">=</span><span class="mf">5.0</span><span class="p">,</span>
                <span class="n">price</span><span class="o">=</span><span class="mf">5.0</span><span class="p">,</span> <span class="n">quantity</span><span class="o">=</span><span class="mi">5</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; init is not the constructor, but the initializer which</span>
<span class="sd">        initialize the instance variable</span>

<span class="sd">        self : is the instance</span>

<span class="sd">        __init__ takes the instance &#39;self&#39; and populates it with the radius,</span>
<span class="sd">        metal, date etc. and store in a dictionary.</span>

<span class="sd">        self.radius, self.metal etc. are the instance variable which</span>
<span class="sd">        must be unique.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">date</span> <span class="o">=</span> <span class="n">date</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">metal</span> <span class="o">=</span> <span class="n">metal</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">radius</span> <span class="o">=</span> <span class="n">radius</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">price</span> <span class="o">=</span> <span class="n">price</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">quantity</span> <span class="o">=</span> <span class="n">quantity</span>


    <span class="c1"># Multiple constructor</span>
    <span class="c1"># below constructor is added for the &#39;research organization&#39; who are</span>
    <span class="c1"># doing their work based on diameters,</span>
    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">diameter_init</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">diameter</span><span class="p">):</span>
        <span class="n">radius</span> <span class="o">=</span> <span class="n">diameter</span><span class="o">/</span><span class="mi">2</span><span class="p">;</span>  <span class="c1"># change diameter to radius</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="n">radius</span><span class="p">)</span> <span class="c1"># return radius</span>

    <span class="nd">@staticmethod</span>  <span class="c1"># meter to centimeter conversion</span>
    <span class="k">def</span> <span class="nf">meter_cm</span><span class="p">(</span><span class="n">meter</span><span class="p">):</span>
        <span class="k">return</span><span class="p">(</span><span class="mi">100</span><span class="o">*</span><span class="n">meter</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">cost</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">price</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">quantity</span>

    <span class="k">def</span> <span class="nf">area</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># return math.pi * self.radius**2</span>
        <span class="c1"># p = self.perimeter() # wrong way to calculate perimeter</span>
<span class="hll">        <span class="n">p</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__perimeter</span><span class="p">()</span>  <span class="c1"># use local copy of perimeter()</span>
</span>        <span class="n">r</span> <span class="o">=</span> <span class="n">p</span> <span class="o">/</span> <span class="p">(</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">pi</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">math</span><span class="o">.</span><span class="n">pi</span> <span class="o">*</span> <span class="n">r</span><span class="o">**</span><span class="mi">2</span>

    <span class="k">def</span> <span class="nf">perimeter</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">pi</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">radius</span>

    <span class="c1"># local copy can be created in the lines after the actual method</span>
<span class="hll">    <span class="n">__perimeter</span> <span class="o">=</span> <span class="n">perimeter</span> <span class="c1"># make a local copy of perimeter</span>
</span>
<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="c1"># print(&quot;Center of the Ring is at:&quot;, Ring.center) # modify class variable</span>
    <span class="c1"># r = Ring(price=8) # modify only price</span>
    <span class="c1"># print(&quot;Radius:{0}, Cost:{1}&quot;.format(r.radius, r.cost()))</span>
    <span class="c1"># print(&quot;Radius:{0}, Perimeter:{1:0.2f}&quot;.format(r.radius, r.perimeter()))</span>

    <span class="k">print</span><span class="p">()</span> <span class="c1"># check the new constructor &#39;diameter_init&#39;</span>
    <span class="n">d</span> <span class="o">=</span> <span class="n">Ring</span><span class="o">.</span><span class="n">diameter_init</span><span class="p">(</span><span class="n">diameter</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Radius:{0}, Perimeter:{1:0.2f}, Area:{2:0.2f}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
        <span class="n">d</span><span class="o">.</span><span class="n">radius</span><span class="p">,</span> <span class="n">d</span><span class="o">.</span><span class="n">perimeter</span><span class="p">(),</span> <span class="n">d</span><span class="o">.</span><span class="n">area</span><span class="p">()))</span>
    <span class="c1"># print(&quot;Radius:{0}, Perimeter:{1:0.2f}&quot;.format(d.radius, d.perimeter()))</span>
    <span class="c1"># m = 10 # 10 meter</span>
    <span class="c1"># print(&quot;{0} meter = {1} centimeter&quot;.format(m, d.meter_cm(m)))</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
</pre></div>
</td></tr></table></div>
<ul class="simple">
<li>Next replace the _perimeter with __ perimeter in the ‘box.py’ as below,</li>
</ul>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1"># box.py</span>
<span class="c1"># user-3 : creating boxes for the ring</span>

<span class="kn">from</span> <span class="nn">pythonic</span> <span class="kn">import</span> <span class="n">Ring</span>

<span class="k">class</span> <span class="nc">Box</span><span class="p">(</span><span class="n">Ring</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; Modified perimeter for creating the box &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">perimeter</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span> <span class="c1"># override the method &#39;perimeter&#39;</span>
        <span class="c1"># perimeter is increased 2.0 times</span>
        <span class="k">return</span> <span class="n">Ring</span><span class="o">.</span><span class="n">perimeter</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">*</span> <span class="mf">2.0</span>

<span class="hll">    <span class="n">__perimeter</span> <span class="o">=</span> <span class="n">perimeter</span>
</span>
<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="n">b</span> <span class="o">=</span> <span class="n">Box</span><span class="p">(</span><span class="n">radius</span><span class="o">=</span><span class="mi">8</span><span class="p">)</span> <span class="c1"># pass radius = 8</span>
    <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Radius:&quot;</span><span class="p">,</span> <span class="n">b</span><span class="o">.</span><span class="n">radius</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Modified perimeter: </span><span class="si">%0.2f</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">b</span><span class="o">.</span><span class="n">perimeter</span><span class="p">())</span> <span class="c1"># (2*pi*radius) * 2</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
</pre></div>
</td></tr></table></div>
<div class="admonition important">
<p class="first admonition-title">Important</p>
<p>_ _ is not designed for making the attribute private, but for renaming the attribute with class name to avoid conflicts due to same name as we see in above example, where using same name i.e. _perimeter in both parent and child class resulted in the wrong answer.</p>
<p class="last">If we use _ _perimeter instead of _perimeter, then _ _perimeter will be renamed as _ClassName__perimeter. Therefore, even parent and child class uses the same name with two underscore, the actual name will be differed because python interpretor will add the ClassName before those names, which will make it different from each other.</p>
</div>
<ul class="simple">
<li>Now, we have same name in both the files i.e. __perimeter, but problem will no longer occur as the ‘class-names’ will be added by the Python before __perimeter. Below is the result for both the python files,</li>
</ul>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>$ python pythonic.py

Radius:5.0, Perimeter:31.42, Area:78.54
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">box</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span> <span class="o">=</span> <span class="n">Box</span><span class="o">.</span><span class="n">diameter_init</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span><span class="o">.</span><span class="n">area</span><span class="p">()</span>
<span class="go">78.53981633974483</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">There is no notion of private attributes in Python. All the objects are exposed to users.
* But, single underscore before the method or variable indicates that the attribute should not be access directly.
* _ _ is designed for freedom not for privacy as we saw in this section.</p>
</div>
</div>
</div>
<div class="section" id="property">
<h3>&#64;property<a class="headerlink" href="#property" title="Permalink to this headline">¶</a></h3>
<p>Now, we will see the usage of &#64;property in Python.</p>
<div class="section" id="managing-attributes">
<h4>Managing attributes<a class="headerlink" href="#managing-attributes" title="Permalink to this headline">¶</a></h4>
<p>Currently, we are not checking the correct types of inputs in our design. Let’s see our ‘pythonic.py’ file again.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pythonic</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">r</span> <span class="o">=</span> <span class="n">Ring</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">r</span><span class="o">.</span><span class="n">radius</span>
<span class="go">5.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">r</span><span class="o">.</span><span class="n">radius</span> <span class="o">=</span> <span class="s2">&quot;Meher&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="mi">2</span> <span class="o">*</span> <span class="n">r</span><span class="o">.</span><span class="n">radius</span>
<span class="go">&#39;MeherMeher&#39;</span>
</pre></div>
</div>
<p>Note that in the above code, the string is saved in the radius; and the multiplication is performed on the string. We do not want this behavior, therefore we need to perform some checks before saving data in the dictionary, which can be done using &#64;property, as shown below,</p>
<div class="admonition important">
<p class="first admonition-title">Important</p>
<ul class="last simple">
<li>&#64;property decorator allows . operator to call the function. Here, self.radius will call the method radius, which returns the self._radius. Hence, _radius is stored in the dictionary instead of dict.</li>
<li>If we use ‘return self.radius’ instead of ‘return self._radius’, then the &#64;property will result in infinite loop as self.property will call the property method, which will return self.property, which results in calling the &#64;property again.</li>
<li>Further, we can use &#64;property for type checking, validation or performing various operations by writing codes in the setter method e.g. change the date to todays date etc.</li>
</ul>
</div>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1"># pythonic.py</span>

<span class="kn">import</span> <span class="nn">math</span>
<span class="kn">import</span> <span class="nn">time</span>

<span class="k">class</span> <span class="nc">Ring</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; Here we will see the actual logic behind various pieces of Python</span>
<span class="sd">    language e.g. instances, variables, method and @property etc.</span>
<span class="sd">    Also, we will see the combine usage of these pieces to complete a</span>
<span class="sd">    design with Agile methodology.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c1"># class variables</span>
    <span class="n">date</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;%Y-%m-</span><span class="si">%d</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">time</span><span class="o">.</span><span class="n">gmtime</span><span class="p">())</span> <span class="c1"># today&#39;s date &quot;YYYY-mm-dd&quot;</span>
    <span class="n">center</span> <span class="o">=</span> <span class="mf">0.0</span> <span class="c1"># center of the ring</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">date</span><span class="o">=</span><span class="n">date</span><span class="p">,</span> <span class="n">metal</span><span class="o">=</span><span class="s2">&quot;Copper&quot;</span><span class="p">,</span> <span class="n">radius</span><span class="o">=</span><span class="mf">5.0</span><span class="p">,</span>
                <span class="n">price</span><span class="o">=</span><span class="mf">5.0</span><span class="p">,</span> <span class="n">quantity</span><span class="o">=</span><span class="mi">5</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; init is not the constructor, but the initializer which</span>
<span class="sd">        initialize the instance variable</span>

<span class="sd">        self : is the instance</span>

<span class="sd">        __init__ takes the instance &#39;self&#39; and populates it with the radius,</span>
<span class="sd">        metal, date etc. and store in a dictionary.</span>

<span class="sd">        self.radius, self.metal etc. are the instance variable which</span>
<span class="sd">        must be unique.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">date</span> <span class="o">=</span> <span class="n">date</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">metal</span> <span class="o">=</span> <span class="n">metal</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">radius</span> <span class="o">=</span> <span class="n">radius</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">price</span> <span class="o">=</span> <span class="n">price</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">quantity</span> <span class="o">=</span> <span class="n">quantity</span>

<span class="hll">    <span class="nd">@property</span>
</span><span class="hll">    <span class="c1"># method-name should be same as attribute i.e. &#39;radius&#39; here</span>
</span><span class="hll">    <span class="k">def</span> <span class="nf">radius</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span class="hll">        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_radius</span> <span class="c1"># _radius can be changed with other name</span>
</span>
<span class="hll">    <span class="nd">@radius.setter</span>
</span><span class="hll">    <span class="k">def</span> <span class="nf">radius</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">val</span><span class="p">):</span>
</span><span class="hll">        <span class="c1"># &#39;val&#39; should be float or int</span>
</span><span class="hll">        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">val</span><span class="p">,</span> <span class="p">(</span><span class="nb">float</span><span class="p">,</span> <span class="nb">int</span><span class="p">)):</span>
</span><span class="hll">            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;Expected: float or int&quot;</span><span class="p">)</span>
</span><span class="hll">        <span class="bp">self</span><span class="o">.</span><span class="n">_radius</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">val</span><span class="p">)</span>
</span>
    <span class="c1"># Multiple constructor</span>
    <span class="c1"># below constructor is added for the &#39;research organization&#39; who are</span>
    <span class="c1"># doing their work based on diameters,</span>
    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">diameter_init</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">diameter</span><span class="p">):</span>
        <span class="n">radius</span> <span class="o">=</span> <span class="n">diameter</span><span class="o">/</span><span class="mi">2</span><span class="p">;</span>  <span class="c1"># change diameter to radius</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="n">radius</span><span class="p">)</span> <span class="c1"># return radius</span>

    <span class="nd">@staticmethod</span>  <span class="c1"># meter to centimeter conversion</span>
    <span class="k">def</span> <span class="nf">meter_cm</span><span class="p">(</span><span class="n">meter</span><span class="p">):</span>
        <span class="k">return</span><span class="p">(</span><span class="mi">100</span><span class="o">*</span><span class="n">meter</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">cost</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">price</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">quantity</span>

    <span class="k">def</span> <span class="nf">area</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># return math.pi * self.radius**2</span>
        <span class="c1"># p = self.perimeter() # wrong way to calculate perimeter</span>
        <span class="n">p</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__perimeter</span><span class="p">()</span>  <span class="c1"># use local copy of perimeter()</span>
        <span class="n">r</span> <span class="o">=</span> <span class="n">p</span> <span class="o">/</span> <span class="p">(</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">pi</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">math</span><span class="o">.</span><span class="n">pi</span> <span class="o">*</span> <span class="n">r</span><span class="o">**</span><span class="mi">2</span>

    <span class="k">def</span> <span class="nf">perimeter</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">pi</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">radius</span>

    <span class="c1"># local copy can be created in the lines after the actual method</span>
    <span class="n">__perimeter</span> <span class="o">=</span> <span class="n">perimeter</span> <span class="c1"># make a local copy of perimeter</span>

<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="c1"># print(&quot;Center of the Ring is at:&quot;, Ring.center) # modify class variable</span>
    <span class="c1"># r = Ring(price=8) # modify only price</span>
    <span class="c1"># print(&quot;Radius:{0}, Cost:{1}&quot;.format(r.radius, r.cost()))</span>
    <span class="c1"># print(&quot;Radius:{0}, Perimeter:{1:0.2f}&quot;.format(r.radius, r.perimeter()))</span>

    <span class="k">print</span><span class="p">()</span> <span class="c1"># check the new constructor &#39;diameter_init&#39;</span>
    <span class="n">d</span> <span class="o">=</span> <span class="n">Ring</span><span class="o">.</span><span class="n">diameter_init</span><span class="p">(</span><span class="n">diameter</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Radius:{0}, Perimeter:{1:0.2f}, Area:{2:0.2f}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
        <span class="n">d</span><span class="o">.</span><span class="n">radius</span><span class="p">,</span> <span class="n">d</span><span class="o">.</span><span class="n">perimeter</span><span class="p">(),</span> <span class="n">d</span><span class="o">.</span><span class="n">area</span><span class="p">()))</span>
    <span class="c1"># print(&quot;Radius:{0}, Perimeter:{1:0.2f}&quot;.format(d.radius, d.perimeter()))</span>
    <span class="c1"># m = 10 # 10 meter</span>
    <span class="c1"># print(&quot;{0} meter = {1} centimeter&quot;.format(m, d.meter_cm(m)))</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
</pre></div>
</td></tr></table></div>
<ul class="simple">
<li>Below is the results for above code,</li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pythonic</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">r</span> <span class="o">=</span> <span class="n">Ring</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">r</span><span class="o">.</span><span class="n">radius</span>
<span class="go">5.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">r</span><span class="o">.</span><span class="n">radius</span> <span class="o">=</span> <span class="mi">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">r</span><span class="o">.</span><span class="n">radius</span>
<span class="go">1.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">r</span><span class="o">.</span><span class="n">radius</span> <span class="o">=</span> <span class="mf">3.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">r</span><span class="o">.</span><span class="n">radius</span>
<span class="go">3.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">r</span><span class="o">.</span><span class="n">radius</span> <span class="o">=</span> <span class="s2">&quot;Meher&quot;</span>
<span class="gt">Traceback (most recent call last): [...]</span>
<span class="gr">TypeError</span>: <span class="n">Expected: float or int</span>
</pre></div>
</div>
<ul class="simple">
<li>Below is the dictionary of the object ‘r’ of code. Note that, the ‘radius’ does not exist there anymore, but this will not break the codes of other users, due to following reason.</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>&#64;property is used to convert the attribute access to method access.</p>
<p class="last">In the other words, the radius will be removed from instance variable list after defining the ‘property’ as in above code. Now, it can not be used anymore. But, &#64;property decorator will convert the attribute access to method access, i.e. the dot operator will check for methods with &#64;property as well. In this way, the code of other user will not break.</p>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">r</span><span class="o">.</span><span class="vm">__dict__</span>
<span class="go">{&#39;date&#39;: &#39;2017-11-01&#39;, &#39;metal&#39;: &#39;Copper&#39;, &#39;_radius&#39;: 3.0, &#39;price&#39;: 5.0, &#39;quantity&#39;: 5}</span>
</pre></div>
</div>
</div>
<div class="section" id="calling-method-as-attribute">
<h4>Calling method as attribute<a class="headerlink" href="#calling-method-as-attribute" title="Permalink to this headline">¶</a></h4>
<p>If a method is decorated with &#64;property then it can be called as ‘attribute’ using operator, but then it can not be called as attribute, as shown in below example,</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">class</span> <span class="nc">PropertEx</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="nf">mes_1</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="gp">... </span>            <span class="k">print</span><span class="p">(</span><span class="s2">&quot;hello msg_1&quot;</span><span class="p">)</span>
<span class="gp">...</span>
<span class="gp">... </span>    <span class="nd">@property</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="nf">mes_2</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>  <span class="c1"># can be called as attribute only</span>
<span class="gp">... </span>            <span class="k">print</span><span class="p">(</span><span class="s2">&quot;hello msg_2&quot;</span><span class="p">)</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">p</span> <span class="o">=</span> <span class="n">PropertEx</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">p</span><span class="o">.</span><span class="n">mes_1</span><span class="p">()</span>
<span class="go">hello msg_1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">p</span><span class="o">.</span><span class="n">mes_2</span>
<span class="go">hello msg_2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">p</span><span class="o">.</span><span class="n">mes_2</span><span class="p">()</span>  <span class="c1"># can not be called as method</span>
<span class="go">hello msg_2</span>
<span class="gt">Traceback (most recent call last):</span>
  File <span class="nb">&quot;&lt;stdin&gt;&quot;</span>, line <span class="m">1</span>, in <span class="n">&lt;module&gt;</span>
<span class="gr">TypeError</span>: <span class="n">&#39;NoneType&#39; object is not callable</span>
</pre></div>
</div>
</div>
<div class="section" id="requirement-from-research-organization">
<h4>Requirement from research organization<a class="headerlink" href="#requirement-from-research-organization" title="Permalink to this headline">¶</a></h4>
<p>Now, we get another rule from the research organization as below,</p>
<ul class="simple">
<li>we do not want to store radius as instance variable,</li>
<li>instead convert radius into diameter and save it as instance variable in the dictionary.</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>This condition will raise following two problems,</p>
<ul class="simple">
<li>Main problem here is that, other users already started using this class and have access to attribute ‘radius’. Now, if we replace the key ‘radius’ with ‘diameter’, then their code will break immediately.</li>
<li>Also, we need to update all our code as everything is calculated based on radius; and we are going to remove these attribute from diameter.</li>
</ul>
<p>This is the main reason for hiding attributes in java and c++, as these languages have no easy solution for this. Hence, these languages use getter and setter method.</p>
<p>But in python this problem can be solved using &#64;property. &#64;property is used to convert the attribute access to method access.</p>
<p class="last">In the other words, as radius will be removed from instance variable list after meeting the need of the organization, therefore it can not be used anymore. But, &#64;property decorator will convert the attribute access to method access, i.e. the dot operator will check for methods with &#64;property as well. In this way, the codes of other users will not break, as shown next.</p>
</div>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1"># pythonic.py</span>

<span class="kn">import</span> <span class="nn">math</span>
<span class="kn">import</span> <span class="nn">time</span>

<span class="k">class</span> <span class="nc">Ring</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; Here we will see the actual logic behind various pieces of Python</span>
<span class="sd">    language e.g. instances, variables, method and @property etc.</span>
<span class="sd">    Also, we will see the combine usage of these pieces to complete a</span>
<span class="sd">    design with Agile methodology.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c1"># class variables</span>
    <span class="n">date</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;%Y-%m-</span><span class="si">%d</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">time</span><span class="o">.</span><span class="n">gmtime</span><span class="p">())</span> <span class="c1"># today&#39;s date &quot;YYYY-mm-dd&quot;</span>
    <span class="n">center</span> <span class="o">=</span> <span class="mf">0.0</span> <span class="c1"># center of the ring</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">date</span><span class="o">=</span><span class="n">date</span><span class="p">,</span> <span class="n">metal</span><span class="o">=</span><span class="s2">&quot;Copper&quot;</span><span class="p">,</span> <span class="n">radius</span><span class="o">=</span><span class="mf">5.0</span><span class="p">,</span>
                <span class="n">price</span><span class="o">=</span><span class="mf">5.0</span><span class="p">,</span> <span class="n">quantity</span><span class="o">=</span><span class="mi">5</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; init is not the constructor, but the initializer which</span>
<span class="sd">        initialize the instance variable</span>

<span class="sd">        self : is the instance</span>

<span class="sd">        __init__ takes the instance &#39;self&#39; and populates it with the radius,</span>
<span class="sd">        metal, date etc. and store in a dictionary.</span>

<span class="sd">        self.radius, self.metal etc. are the instance variable which</span>
<span class="sd">        must be unique.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">date</span> <span class="o">=</span> <span class="n">date</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">metal</span> <span class="o">=</span> <span class="n">metal</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">radius</span> <span class="o">=</span> <span class="n">radius</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">price</span> <span class="o">=</span> <span class="n">price</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">quantity</span> <span class="o">=</span> <span class="n">quantity</span>

    <span class="nd">@property</span>
    <span class="c1"># method-name should be same as attribute i.e. &#39;radius&#39; here</span>
    <span class="k">def</span> <span class="nf">radius</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="hll">        <span class="c1"># return self._radius # _radius can be changed with other name</span>
</span><span class="hll">        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">diameter</span><span class="o">/</span><span class="mi">2</span> <span class="c1"># _radius can be changed with other name</span>
</span>
    <span class="nd">@radius.setter</span>
    <span class="k">def</span> <span class="nf">radius</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">val</span><span class="p">):</span>
        <span class="c1"># &#39;val&#39; should be float or int</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">val</span><span class="p">,</span> <span class="p">(</span><span class="nb">float</span><span class="p">,</span> <span class="nb">int</span><span class="p">)):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;Expected: float or int&quot;</span><span class="p">)</span>
<span class="hll">        <span class="c1"># self._radius = float(val)</span>
</span><span class="hll">        <span class="bp">self</span><span class="o">.</span><span class="n">diameter</span> <span class="o">=</span> <span class="mi">2</span> <span class="o">*</span> <span class="nb">float</span><span class="p">(</span><span class="n">val</span><span class="p">)</span>
</span>
    <span class="c1"># Multiple constructor</span>
    <span class="c1"># below constructor is added for the &#39;research organization&#39; who are</span>
    <span class="c1"># doing their work based on diameters,</span>
    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">diameter_init</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">diameter</span><span class="p">):</span>
        <span class="n">radius</span> <span class="o">=</span> <span class="n">diameter</span><span class="o">/</span><span class="mi">2</span><span class="p">;</span>  <span class="c1"># change diameter to radius</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="n">radius</span><span class="p">)</span> <span class="c1"># return radius</span>

    <span class="nd">@staticmethod</span>  <span class="c1"># meter to centimeter conversion</span>
    <span class="k">def</span> <span class="nf">meter_cm</span><span class="p">(</span><span class="n">meter</span><span class="p">):</span>
        <span class="k">return</span><span class="p">(</span><span class="mi">100</span><span class="o">*</span><span class="n">meter</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">cost</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">price</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">quantity</span>

    <span class="k">def</span> <span class="nf">area</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># return math.pi * self.radius**2</span>
        <span class="c1"># p = self.perimeter() # wrong way to calculate perimeter</span>
        <span class="n">p</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__perimeter</span><span class="p">()</span>  <span class="c1"># use local copy of perimeter()</span>
        <span class="n">r</span> <span class="o">=</span> <span class="n">p</span> <span class="o">/</span> <span class="p">(</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">pi</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">math</span><span class="o">.</span><span class="n">pi</span> <span class="o">*</span> <span class="n">r</span><span class="o">**</span><span class="mi">2</span>

    <span class="k">def</span> <span class="nf">perimeter</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">pi</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">radius</span>

    <span class="c1"># local copy can be created in the lines after the actual method</span>
    <span class="n">__perimeter</span> <span class="o">=</span> <span class="n">perimeter</span> <span class="c1"># make a local copy of perimeter</span>

<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="c1"># print(&quot;Center of the Ring is at:&quot;, Ring.center) # modify class variable</span>
    <span class="c1"># r = Ring(price=8) # modify only price</span>
    <span class="c1"># print(&quot;Radius:{0}, Cost:{1}&quot;.format(r.radius, r.cost()))</span>
    <span class="c1"># print(&quot;Radius:{0}, Perimeter:{1:0.2f}&quot;.format(r.radius, r.perimeter()))</span>

    <span class="k">print</span><span class="p">()</span> <span class="c1"># check the new constructor &#39;diameter_init&#39;</span>
    <span class="n">d</span> <span class="o">=</span> <span class="n">Ring</span><span class="o">.</span><span class="n">diameter_init</span><span class="p">(</span><span class="n">diameter</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Radius:{0}, Perimeter:{1:0.2f}, Area:{2:0.2f}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
        <span class="n">d</span><span class="o">.</span><span class="n">radius</span><span class="p">,</span> <span class="n">d</span><span class="o">.</span><span class="n">perimeter</span><span class="p">(),</span> <span class="n">d</span><span class="o">.</span><span class="n">area</span><span class="p">()))</span>
    <span class="c1"># print(&quot;Radius:{0}, Perimeter:{1:0.2f}&quot;.format(d.radius, d.perimeter()))</span>
    <span class="c1"># m = 10 # 10 meter</span>
    <span class="c1"># print(&quot;{0} meter = {1} centimeter&quot;.format(m, d.meter_cm(m)))</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
</pre></div>
</td></tr></table></div>
<ul class="simple">
<li>Lets check the output of this file first, which is working fine as below.  Note that the dictionary, now contains the ‘diameter’ instead of ‘radius’</li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pythonic</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">r</span> <span class="o">=</span> <span class="n">Ring</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">r</span><span class="o">.</span><span class="vm">__dict__</span>  <span class="c1"># dictionary contains &#39;diameter&#39; not &#39;radius&#39;</span>
<span class="go">{&#39;date&#39;: &#39;2017-11-01&#39;, &#39;metal&#39;: &#39;Copper&#39;,</span>
<span class="go">&#39;diameter&#39;: 10.0, &#39;price&#39;: 5.0, &#39;quantity&#39;: 5}</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">r</span><span class="o">.</span><span class="n">radius</span>  <span class="c1"># radius is still accessbile</span>
<span class="go">5.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">r</span><span class="o">.</span><span class="n">area</span><span class="p">()</span>  <span class="c1"># area is working fine</span>
<span class="go">78.53981633974483</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">r</span><span class="o">.</span><span class="n">diameter</span> <span class="c1"># diameter is accessbile</span>
<span class="go">10.0</span>
</pre></div>
</div>
<ul class="simple">
<li>Next verify the output for the ‘box.py’ file again.</li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">box</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span> <span class="o">=</span> <span class="n">Box</span><span class="o">.</span><span class="n">diameter_init</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span><span class="o">.</span><span class="n">area</span><span class="p">()</span>  <span class="c1"># area is working fine</span>
<span class="go">78.53981633974483</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span><span class="o">.</span><span class="vm">__dict__</span>
<span class="go">{&#39;date&#39;: 5.0, &#39;metal&#39;: &#39;Copper&#39;, &#39;diameter&#39;: 10.0, &#39;price&#39;: 5.0, &#39;quantity&#39;: 5}</span>
<span class="go">&gt;&gt;&gt;</span>
</pre></div>
</div>
</div>
</div>
</div>
<span id="document-python/decorator"></span><div class="section" id="decorator-and-descriptors">
<span id="decorator"></span><h2>Decorator and Descriptors<a class="headerlink" href="#decorator-and-descriptors" title="Permalink to this headline">¶</a></h2>
<div class="section" id="decorators">
<span id="sec-decorator1"></span><h3>Decorators<a class="headerlink" href="#decorators" title="Permalink to this headline">¶</a></h3>
<p>Decorator is a function that creates  a wrapper around another function. This wrapper adds some additional functionality to existing code. In this tutorial, various types of decorators are discussed.</p>
<div class="section" id="function-inside-the-function-and-decorator">
<h4>Function inside the function and Decorator<a class="headerlink" href="#function-inside-the-function-and-decorator" title="Permalink to this headline">¶</a></h4>
<p>Following is the example of function inside the function.</p>
<div class="highlight-Python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1"># funcEx.py</span>

<span class="k">def</span> <span class="nf">addOne</span><span class="p">(</span><span class="n">myFunc</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">addOneInside</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;adding One&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">myFunc</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span>
    <span class="k">return</span> <span class="n">addOneInside</span>

<span class="k">def</span> <span class="nf">subThree</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">x</span> <span class="o">-</span> <span class="mi">3</span>

<span class="n">result</span> <span class="o">=</span> <span class="n">addOne</span><span class="p">(</span><span class="n">subThree</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="n">subThree</span><span class="p">(</span><span class="mi">5</span><span class="p">))</span>
<span class="k">print</span><span class="p">(</span><span class="n">result</span><span class="p">(</span><span class="mi">5</span><span class="p">))</span>

<span class="c1"># outputs</span>
<span class="c1"># 2</span>
<span class="c1"># adding One</span>
<span class="c1"># 3</span>
</pre></div>
</td></tr></table></div>
<p>Above code works as follows,</p>
<ul class="simple">
<li>Function ‘subThree’ is defined at lines 9-10, which subtract the given number with 3.</li>
<li>Function ‘addOne’ (Line 3) has one argument i.e. myFunc, which indicates that ‘addOne’ takes the function as input. Since, subThree function has only one input argument, therefore one argument is set in the function ‘addOneInside’ (Line 4); which is used in return statement (Line 6). Also, “adding One” is printed before returning the value (Line 5).</li>
<li>In line 12, return value of addOne (i.e. function ‘addOneInside’) is stored in ‘result’. Hence, ‘result’ is a function which takes one input.</li>
<li>Lastly, values are printed at line 13 and 14. Note that “adding One” is printed by the result(5) and value is incremented by one i.e. 2 to 3.</li>
</ul>
<p>Another nice way of writing above code is shown below. Here (*args and **kwargs) are used, which takes all the arguments and keyword arguments of the function.</p>
<div class="highlight-Python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1"># funcEx.py</span>

<span class="k">def</span> <span class="nf">addOne</span><span class="p">(</span><span class="n">myFunc</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">addOneInside</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;adding One&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">myFunc</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span>
    <span class="k">return</span> <span class="n">addOneInside</span>

<span class="k">def</span> <span class="nf">subThree</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">x</span> <span class="o">-</span> <span class="mi">3</span>

<span class="n">result</span> <span class="o">=</span> <span class="n">addOne</span><span class="p">(</span><span class="n">subThree</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="n">subThree</span><span class="p">(</span><span class="mi">5</span><span class="p">))</span>
<span class="k">print</span><span class="p">(</span><span class="n">result</span><span class="p">(</span><span class="mi">5</span><span class="p">))</span>

<span class="c1"># outputs</span>
<span class="c1"># 2</span>
<span class="c1"># adding One</span>
<span class="c1"># 3</span>
</pre></div>
</td></tr></table></div>
<p>Now, in the below code, the return value of addOne is stored in the ‘subThree’ function itself (Line 12),</p>
<div class="highlight-Python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1"># funcEx.py</span>

<span class="k">def</span> <span class="nf">addOne</span><span class="p">(</span><span class="n">myFunc</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">addOneInside</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;adding One&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">myFunc</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span>
    <span class="k">return</span> <span class="n">addOneInside</span>

<span class="k">def</span> <span class="nf">subThree</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">x</span> <span class="o">-</span> <span class="mi">3</span>

<span class="n">subThree</span> <span class="o">=</span> <span class="n">addOne</span><span class="p">(</span><span class="n">subThree</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="n">subThree</span><span class="p">(</span><span class="mi">5</span><span class="p">))</span>
<span class="c1"># outputs</span>
<span class="c1"># adding One</span>
<span class="c1"># 3</span>
</pre></div>
</td></tr></table></div>
<p>Lastly, in Python, the line 12 in above code, can be replaced by using decorator, as shown in Line 9 of below code,</p>
<div class="highlight-Python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1"># funcEx.py</span>

<span class="k">def</span> <span class="nf">addOne</span><span class="p">(</span><span class="n">myFunc</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">addOneInside</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;adding One&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">myFunc</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span>
    <span class="k">return</span> <span class="n">addOneInside</span>

<span class="nd">@addOne</span>
<span class="k">def</span> <span class="nf">subThree</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">x</span> <span class="o">-</span> <span class="mi">3</span>

<span class="k">print</span><span class="p">(</span><span class="n">subThree</span><span class="p">(</span><span class="mi">5</span><span class="p">))</span>
<span class="c1"># outputs</span>
<span class="c1"># adding One</span>
<span class="c1"># 3</span>
</pre></div>
</td></tr></table></div>
<p>In this section, we saw the basics of the decorator, which we will be used in this tutorial.</p>
</div>
<div class="section" id="decorator-without-arguments">
<h4>Decorator without arguments<a class="headerlink" href="#decorator-without-arguments" title="Permalink to this headline">¶</a></h4>
<p>In following code, Decorator takes a function as the input and print the name of the function and return the function.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># debugEx.py</span>

<span class="k">def</span> <span class="nf">printName</span><span class="p">(</span><span class="n">func</span><span class="p">):</span>
    <span class="c1"># func is the function to be wrapped</span>
    <span class="k">def</span> <span class="nf">pn</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="k">print</span><span class="p">(</span><span class="n">func</span><span class="o">.</span><span class="vm">__name__</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">func</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">pn</span>
</pre></div>
</div>
<p>Next, put the printName function as decorator in the mathEx.py file as below,</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># mathEx.py</span>

<span class="kn">from</span> <span class="nn">debugEx</span> <span class="kn">import</span> <span class="n">printName</span>

<span class="nd">@printName</span>
<span class="k">def</span> <span class="nf">add2Num</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
    <span class="c1"># add two numbers</span>
    <span class="c1"># print(&quot;add&quot;)</span>
    <span class="k">return</span><span class="p">(</span><span class="n">x</span><span class="o">+</span><span class="n">y</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="n">add2Num</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>
<span class="n">help</span><span class="p">(</span><span class="n">add2Num</span><span class="p">)</span>
</pre></div>
</div>
<p>Finally, execute the code and the name of each function will be printed before calculation as shown below,</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>$ python mathEx.py
add
<span class="m">6</span>

Help on <span class="k">function</span> pn in module debugEx:

pn<span class="o">(</span>*args, **kwargs<span class="o">)</span>
    <span class="c1"># func is the function to be wrapped</span>
</pre></div>
</div>
<div class="admonition important">
<p class="first admonition-title">Important</p>
<p class="last">Decorator brings all the debugging code at one places. Now we can add more debugging features to ‘debugEx.py’ file and all the changes will be applied immediately to all the functions.</p>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Decorators remove the help features of the function along with name etc. Therefore, we need to fix it using functools as shown next.</p>
</div>
<p>Rewrite the decorator using wraps function in functools as below,</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># debugEx.py</span>

<span class="kn">from</span> <span class="nn">functools</span> <span class="kn">import</span> <span class="n">wraps</span>

<span class="k">def</span> <span class="nf">printName</span><span class="p">(</span><span class="n">func</span><span class="p">):</span>
    <span class="c1"># func is the function to be wrapped</span>

    <span class="c1"># wrap is used to exchange metadata between functions</span>
    <span class="nd">@wraps</span><span class="p">(</span><span class="n">func</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">pn</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="k">print</span><span class="p">(</span><span class="n">func</span><span class="o">.</span><span class="vm">__name__</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">func</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">pn</span>
</pre></div>
</div>
<p>If we execute the mathEx.py again, it will show the help features again.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">&#64;wraps exchanges the metadata between the functions as shown in above example.</p>
</div>
</div>
<div class="section" id="decorators-with-arguments">
<h4>Decorators with arguments<a class="headerlink" href="#decorators-with-arguments" title="Permalink to this headline">¶</a></h4>
<p>Suppose, we want to pass some argument to the decorator as shown below,</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># mathEx.py</span>

<span class="kn">from</span> <span class="nn">debugEx</span> <span class="kn">import</span> <span class="n">printName</span>

<span class="nd">@printName</span><span class="p">(</span><span class="s1">&#39;**&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">add2Num</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;add two numbers&#39;&#39;&#39;</span>
    <span class="k">return</span><span class="p">(</span><span class="n">x</span><span class="o">+</span><span class="n">y</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="n">add2Num</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>
<span class="c1"># help(add2Num)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">To pass the argument to the decorator, all we need to write a outer function which takes the input arguments and then write the normal decorator inside that function as shown below,</p>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># debugEx.py</span>

<span class="kn">from</span> <span class="nn">functools</span> <span class="kn">import</span> <span class="n">wraps</span>

<span class="k">def</span> <span class="nf">printName</span><span class="p">(</span><span class="n">prefix</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">addPrefix</span><span class="p">(</span><span class="n">func</span><span class="p">):</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="n">prefix</span> <span class="o">+</span> <span class="n">func</span><span class="o">.</span><span class="vm">__name__</span>
        <span class="c1"># func is the function to be wrapped</span>

        <span class="c1"># wrap is used to exchange metadata between functions</span>
        <span class="nd">@wraps</span><span class="p">(</span><span class="n">func</span><span class="p">)</span>
        <span class="k">def</span> <span class="nf">pn</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
            <span class="k">print</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">func</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">pn</span>
    <span class="k">return</span> <span class="n">addPrefix</span>
</pre></div>
</div>
<p>Now, run the above code,</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>$ python mathEx.py
**add2Num
<span class="m">6</span>
</pre></div>
</div>
<p class="rubric">Error</p>
<ul class="simple">
<li>But, above code will generate error if we do not pass the argument to the decorator as shown below,</li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># mathEx.py</span>

<span class="kn">from</span> <span class="nn">debugEx</span> <span class="kn">import</span> <span class="n">printName</span>

<span class="nd">@printName</span>
<span class="k">def</span> <span class="nf">add2Num</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;add two numbers&#39;&#39;&#39;</span>
    <span class="k">return</span><span class="p">(</span><span class="n">x</span><span class="o">+</span><span class="n">y</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="n">add2Num</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>
<span class="c1"># help(add2Num)</span>
</pre></div>
</div>
<p>Following error will be generate after running the code,</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>$ python mathEx.py
Traceback <span class="o">(</span>most recent call last<span class="o">)</span>:
  File <span class="s2">&quot;mathEx.py&quot;</span>, line <span class="m">10</span>, in &lt;module&gt;
    print<span class="o">(</span>add2Num<span class="o">(</span><span class="m">2</span>, <span class="m">4</span><span class="o">))</span>
TypeError: addPrefix<span class="o">()</span> takes <span class="m">1</span> positional argument but <span class="m">2</span> were given
</pre></div>
</div>
<ul class="simple">
<li>One solution is to write the two different codes e.g. ‘printName’ and ‘printNameArg’; then use these decorators as required. <strong>But this will make code repetitive</strong> as shown below,</li>
</ul>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># debugEx.py</span>

<span class="kn">from</span> <span class="nn">functools</span> <span class="kn">import</span> <span class="n">wraps</span>

<span class="k">def</span> <span class="nf">printName</span><span class="p">(</span><span class="n">func</span><span class="p">):</span>
    <span class="c1"># func is the function to be wrapped</span>

    <span class="c1"># wrap is used to exchange metadata between functions</span>
    <span class="nd">@wraps</span><span class="p">(</span><span class="n">func</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">pn</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="k">print</span><span class="p">(</span><span class="n">func</span><span class="o">.</span><span class="vm">__name__</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">func</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">pn</span>


<span class="k">def</span> <span class="nf">printNameArg</span><span class="p">(</span><span class="n">prefix</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">printName</span><span class="p">(</span><span class="n">func</span><span class="p">):</span>
        <span class="c1"># func is the function to be wrapped</span>

        <span class="c1"># wrap is used to exchange metadata between functions</span>
        <span class="nd">@wraps</span><span class="p">(</span><span class="n">func</span><span class="p">)</span>
        <span class="k">def</span> <span class="nf">pn</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
            <span class="k">print</span><span class="p">(</span><span class="n">prefix</span> <span class="o">+</span> <span class="n">func</span><span class="o">.</span><span class="vm">__name__</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">func</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">pn</span>
    <span class="k">return</span> <span class="n">printName</span>
</pre></div>
</div>
</div></blockquote>
<p>Now, modify the math.py as below,</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># mathEx.py</span>

<span class="kn">from</span> <span class="nn">debugEx</span> <span class="kn">import</span> <span class="n">printName</span><span class="p">,</span> <span class="n">printNameArg</span>

<span class="nd">@printNameArg</span><span class="p">(</span><span class="s1">&#39;**&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">add2Num</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;add two numbers&#39;&#39;&#39;</span>
    <span class="k">return</span><span class="p">(</span><span class="n">x</span><span class="o">+</span><span class="n">y</span><span class="p">)</span>

<span class="nd">@printName</span>
<span class="k">def</span> <span class="nf">diff2Num</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;subtract two integers only&#39;&#39;&#39;</span>
    <span class="k">return</span><span class="p">(</span><span class="n">x</span><span class="o">-</span><span class="n">y</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="n">add2Num</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>
<span class="k">print</span><span class="p">(</span><span class="n">diff2Num</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>
<span class="c1"># help(add2Num)</span>
</pre></div>
</div>
<p>Next execute the code,</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>$ python mathEx.py
**add2Num
<span class="m">6</span>
diff2Num
-2
</pre></div>
</div>
</div>
<div class="section" id="dry-decorator-with-arguments">
<h4>DRY decorator with arguments<a class="headerlink" href="#dry-decorator-with-arguments" title="Permalink to this headline">¶</a></h4>
<p>In previous code, we repeated the same code two time for creating the decorator with and without arguments. But, there is a better way to combine both the functionality in one decorator using partial function as shown below,</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># debugEx.py</span>

<span class="kn">from</span> <span class="nn">functools</span> <span class="kn">import</span> <span class="n">wraps</span><span class="p">,</span> <span class="n">partial</span>

<span class="k">def</span> <span class="nf">printName</span><span class="p">(</span><span class="n">func</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">prefix</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">func</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">partial</span><span class="p">(</span><span class="n">printName</span><span class="p">,</span> <span class="n">prefix</span><span class="o">=</span><span class="n">prefix</span><span class="p">)</span>
    <span class="c1"># wrap is used to exchange metadata between functions</span>
    <span class="nd">@wraps</span><span class="p">(</span><span class="n">func</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">pn</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="k">print</span><span class="p">(</span><span class="n">prefix</span> <span class="o">+</span> <span class="n">func</span><span class="o">.</span><span class="vm">__name__</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">func</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">pn</span>
</pre></div>
</div>
<p>Now, modify the mathEx.py i.e. remove printNameArg decorator from the code, as below,</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># mathEx.py</span>

<span class="kn">from</span> <span class="nn">debugEx</span> <span class="kn">import</span> <span class="n">printName</span>

<span class="nd">@printName</span><span class="p">(</span><span class="n">prefix</span><span class="o">=</span><span class="s1">&#39;**&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">add2Num</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;add two numbers&#39;&#39;&#39;</span>
    <span class="k">return</span><span class="p">(</span><span class="n">x</span><span class="o">+</span><span class="n">y</span><span class="p">)</span>

<span class="nd">@printName</span>
<span class="k">def</span> <span class="nf">diff2Num</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;subtract two integers only&#39;&#39;&#39;</span>
    <span class="k">return</span><span class="p">(</span><span class="n">x</span><span class="o">-</span><span class="n">y</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="n">add2Num</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>
<span class="k">print</span><span class="p">(</span><span class="n">diff2Num</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>
<span class="c1"># help(add2Num)</span>
</pre></div>
</div>
<p>Next, run the code and it will display following results,</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>$ python mathEx.py
**add2Num
<span class="m">6</span>
diff2Num
-2
</pre></div>
</div>
<p>Partial function is required because, when we pass argument to the decorator i.e. &#64;printName(prifix=’**’), then decorator will not find any function argument at first place, hence return func(*arg, **kwargs) will generate error as there is no ‘func’.</p>
<p>To solve this problem, partial is used which returns the an new function, with modified parameters i.e. newFunc(func = printName, prefix = prefix).</p>
</div>
<div class="section" id="decorators-inside-the-class">
<h4>Decorators inside the class<a class="headerlink" href="#decorators-inside-the-class" title="Permalink to this headline">¶</a></h4>
<p>In previous sections, decorators are defined as functions. In this section, decorators will be defined as class methods.</p>
<p class="rubric">class method and instance method decorator</p>
<p>In the following code, two types of decorators are defined inside the class i.e. using class method and instance method,</p>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1"># clsDecorator.py</span>

<span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span>

<span class="k">class</span> <span class="nc">DateDecorator</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="c1"># instance method decorator</span>
    <span class="k">def</span> <span class="nf">instantMethodDecorator</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">func</span><span class="p">):</span>
        <span class="k">def</span> <span class="nf">printDate</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
            <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Instance method decorator at time : </span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">datetime</span><span class="o">.</span><span class="n">today</span><span class="p">())</span>
            <span class="k">return</span> <span class="n">func</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">printDate</span>

    <span class="c1"># class method decorator</span>
    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">classMethodDecorator</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">func</span><span class="p">):</span>
        <span class="k">def</span> <span class="nf">printDate</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
            <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Class method decorator at time : </span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">datetime</span><span class="o">.</span><span class="n">today</span><span class="p">())</span>
            <span class="k">return</span> <span class="n">func</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">printDate</span>


<span class="c1"># decorator: instance method</span>
<span class="n">a</span> <span class="o">=</span> <span class="n">DateDecorator</span><span class="p">()</span>
<span class="nd">@a.instantMethodDecorator</span>
<span class="k">def</span> <span class="nf">add</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">a</span><span class="o">+</span><span class="n">b</span>

<span class="c1"># decorator: class method</span>
<span class="nd">@DateDecorator.classMethodDecorator</span>
<span class="k">def</span> <span class="nf">sub</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">a</span><span class="o">-</span><span class="n">b</span>

<span class="nb">sum</span> <span class="o">=</span> <span class="n">add</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="c1"># Instance method decorator at time :</span>
<span class="c1">#  2017-02-04 13:31:27.742283</span>

<span class="n">diff</span> <span class="o">=</span> <span class="n">sub</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="c1"># Class method decorator at time :</span>
<span class="c1">#  2017-02-04 13:31:27.742435</span>
</pre></div>
</td></tr></table></div>
<p>Note that, we need to instantiate the instance mehtod decorator before using it as shown at line 23; whereas class decorator can be used as ClassName.DecoratorName.</p>
</div>
<div class="section" id="conclusion">
<h4>Conclusion<a class="headerlink" href="#conclusion" title="Permalink to this headline">¶</a></h4>
<p>In this section, we saw the relation between ‘function inside the function’ and decorator. Then, decorator with and without arguments are discussed. Lastly, class decorators are shown with examples.</p>
</div>
</div>
<div class="section" id="descriptors">
<h3>Descriptors<a class="headerlink" href="#descriptors" title="Permalink to this headline">¶</a></h3>
<p>Descriptor gives us the fine control over the attribute access. It allows us to write reusable code that can be shared between the classes as shown in this tutorial.</p>
<div class="section" id="problems-with-property">
<h4>Problems with &#64;property<a class="headerlink" href="#problems-with-property" title="Permalink to this headline">¶</a></h4>
<p>Before beginning the descriptors, let’s look at the &#64;property decorator and it’s usage along with the problem. Then we will see the descriptors in next section.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># square.py</span>

<span class="k">class</span> <span class="nc">Square</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">side</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">side</span> <span class="o">=</span> <span class="n">side</span>

    <span class="k">def</span> <span class="nf">aget</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">side</span> <span class="o">**</span> <span class="mi">2</span>

    <span class="k">def</span> <span class="nf">aset</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;can not set area&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">adel</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Can not delete area&quot;</span><span class="p">)</span>

    <span class="n">area</span> <span class="o">=</span> <span class="nb">property</span><span class="p">(</span><span class="n">aget</span><span class="p">,</span> <span class="n">aset</span><span class="p">,</span> <span class="n">adel</span><span class="p">,</span> <span class="n">doc</span><span class="o">=</span><span class="s2">&quot;Area of sqare&quot;</span><span class="p">)</span>


<span class="n">s</span> <span class="o">=</span> <span class="n">Square</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">s</span><span class="o">.</span><span class="n">area</span><span class="p">)</span>  <span class="c1"># 100</span>

<span class="n">s</span><span class="o">.</span><span class="n">area</span> <span class="o">=</span> <span class="mi">10</span>  <span class="c1"># can not set area</span>

<span class="k">del</span> <span class="n">s</span><span class="o">.</span><span class="n">area</span>  <span class="c1"># can not delete area</span>
</pre></div>
</div>
<p>Note that in above code, no bracket is used for calculating the area i.e. ‘s.area’ is used, instead of s.area(); because area is defined as property, not as a method.</p>
<p>Above code can be rewritten using &#64;property decorator as below,</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># square.py</span>

<span class="k">class</span> <span class="nc">Square</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; A square using property with decorator&quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">side</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">side</span> <span class="o">=</span> <span class="n">side</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">area</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Calculate the area of the square&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">side</span> <span class="o">**</span> <span class="mi">2</span>

    <span class="c1"># name for setter and deleter (i.e. @area) must be same</span>
    <span class="c1"># as the method for which @property is used i.e. area here</span>
    <span class="nd">@area.setter</span>
    <span class="k">def</span> <span class="nf">area</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Do not allow set area directly&quot;&quot;&quot;</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Can not set area&quot;</span><span class="p">)</span>

    <span class="nd">@area.deleter</span>
    <span class="k">def</span> <span class="nf">area</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Do not allow deleting&quot;&quot;&quot;</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Can not delete area&quot;</span><span class="p">)</span>


<span class="n">s</span> <span class="o">=</span> <span class="n">Square</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">s</span><span class="o">.</span><span class="n">area</span><span class="p">)</span>  <span class="c1"># 100</span>

<span class="n">s</span><span class="o">.</span><span class="n">area</span> <span class="o">=</span> <span class="mi">10</span>  <span class="c1"># can not set area</span>

<span class="k">del</span> <span class="n">s</span><span class="o">.</span><span class="n">area</span>  <span class="c1"># can not delete area</span>
</pre></div>
</div>
<p>Note that, &#64;area.setter and &#64;area.deleter are optional here. We can stop writing the code after defining the &#64;property. In that, case setter and deleter option will generate standard exception i.e. attribute error here. If we want to perform some operations, then setter and deleter options are required.</p>
<p>Further, code is repetitive because &#64;property, setter and deleter are the part of same method here i.e. area.</p>
<p>We can merge all three methods inside one method as shown next. But before looking at that example, let’s understand two python features first i.e.  **kwargs and locals().</p>
<p class="rubric">**kwargs</p>
<p>**kwargs converts the keyword arguments into dictionary as shown below,</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">func</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="k">print</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span>

<span class="n">func</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>  <span class="c1"># {&#39;a&#39;: 1, &#39;b&#39;: 2}</span>
</pre></div>
</div>
<p class="rubric">locals()</p>
<p>Locals return the dictionary of local variables, as shown below,</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">mathEx</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
    <span class="n">add</span> <span class="o">=</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span>
    <span class="n">diff</span> <span class="o">=</span> <span class="n">a</span> <span class="o">-</span> <span class="n">b</span>
    <span class="k">print</span><span class="p">(</span><span class="nb">locals</span><span class="p">())</span>

<span class="n">mathEx</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>  <span class="c1"># {&#39;a&#39;: 3, &#39;add&#39;: 5, &#39;b&#39;: 2, &#39;diff&#39;: 1}</span>
</pre></div>
</div>
<p>Now, we can implement all the get, set and del method inside one method as shown below,</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># square.py</span>

<span class="k">def</span> <span class="nf">nested_property</span><span class="p">(</span><span class="n">func</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; Nest getter, setter and deleter&quot;&quot;&quot;</span>
    <span class="n">names</span> <span class="o">=</span> <span class="n">func</span><span class="p">()</span>

    <span class="n">names</span><span class="p">[</span><span class="s1">&#39;doc&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">func</span><span class="o">.</span><span class="vm">__doc__</span>
    <span class="k">return</span> <span class="nb">property</span><span class="p">(</span><span class="o">**</span><span class="n">names</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">Square</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; A square using property with decorator&quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">side</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">side</span> <span class="o">=</span> <span class="n">side</span>

    <span class="nd">@nested_property</span>
    <span class="k">def</span> <span class="nf">area</span><span class="p">():</span>
        <span class="sd">&quot;&quot;&quot;Calculate the area of the square&quot;&quot;&quot;</span>

        <span class="k">def</span> <span class="nf">fget</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
            <span class="sd">&quot;&quot;&quot; Calculate area &quot;&quot;&quot;</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">side</span> <span class="o">**</span> <span class="mi">2</span>

        <span class="k">def</span> <span class="nf">fset</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
            <span class="sd">&quot;&quot;&quot; Do not allow set area directly&quot;&quot;&quot;</span>
            <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Can not set area&quot;</span><span class="p">)</span>

        <span class="k">def</span> <span class="nf">fdel</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
            <span class="sd">&quot;&quot;&quot;Do not allow deleting&quot;&quot;&quot;</span>
            <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Can not delete area&quot;</span><span class="p">)</span>

        <span class="k">return</span> <span class="nb">locals</span><span class="p">()</span>

<span class="n">s</span> <span class="o">=</span> <span class="n">Square</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">s</span><span class="o">.</span><span class="n">area</span><span class="p">)</span>  <span class="c1"># 100</span>

<span class="n">s</span><span class="o">.</span><span class="n">area</span> <span class="o">=</span> <span class="mi">10</span>  <span class="c1"># can not set area</span>

<span class="k">del</span> <span class="n">s</span><span class="o">.</span><span class="n">area</span>  <span class="c1"># can not delete area</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">&#64;propery is good for performing certain operations before get, set and delete operation. But, we need to implement it for all the functions separately and code becomes repetitive for larger number of methods. In such cases, descriptors can be useful.</p>
</div>
</div>
<div class="section" id="data-descriptors">
<h4>Data Descriptors<a class="headerlink" href="#data-descriptors" title="Permalink to this headline">¶</a></h4>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># data_descriptor.py</span>

<span class="k">class</span> <span class="nc">DataDescriptor</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; descriptor example &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="mi">0</span>

    <span class="k">def</span> <span class="fm">__get__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">instance</span><span class="p">,</span> <span class="bp">cls</span><span class="p">):</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;data descriptor __get__&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span>

    <span class="k">def</span> <span class="fm">__set__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">instance</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;data descriptor __set__&quot;</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span>
        <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">value</span>

    <span class="k">def</span> <span class="fm">__delete__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">instance</span><span class="p">):</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Can not delete&quot;</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">A</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="n">attr</span> <span class="o">=</span>  <span class="n">DataDescriptor</span><span class="p">()</span>



<span class="n">d</span> <span class="o">=</span> <span class="n">DataDescriptor</span><span class="p">()</span>
<span class="k">print</span><span class="p">(</span><span class="n">d</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>  <span class="c1"># 0</span>

<span class="n">a</span> <span class="o">=</span> <span class="n">A</span><span class="p">()</span>
<span class="k">print</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">attr</span><span class="p">)</span>
<span class="c1"># data descriptor __get__</span>
<span class="c1"># 0</span>

<span class="c1"># a.attr is equivalent to below code</span>
<span class="k">print</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">a</span><span class="p">)</span><span class="o">.</span><span class="vm">__dict__</span><span class="p">[</span><span class="s1">&#39;attr&#39;</span><span class="p">]</span><span class="o">.</span><span class="fm">__get__</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="nb">type</span><span class="p">(</span><span class="n">a</span><span class="p">)))</span>
<span class="c1"># data descriptor __get__</span>
<span class="c1"># 0</span>

<span class="c1"># set will upper case the string</span>
<span class="n">a</span><span class="o">.</span><span class="n">attr</span> <span class="o">=</span> <span class="mi">2</span>  <span class="c1"># 2</span>
<span class="c1"># lazy loading: above o/p will not display if</span>
<span class="c1"># below line is uncommented</span>
<span class="n">a</span><span class="o">.</span><span class="n">attr</span> <span class="o">=</span> <span class="s1">&#39;tiger&#39;</span> <span class="c1"># TIGER</span>
<span class="k">print</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="vm">__dict__</span><span class="p">)</span> <span class="c1"># {}</span>

<span class="c1"># Following are the outputs of above three commands</span>
<span class="c1"># data descriptor __set__</span>
<span class="c1"># data descriptor __set__</span>
<span class="c1"># {}</span>
<span class="c1"># data descriptor __get__</span>
<span class="c1"># data descriptor __get__</span>
<span class="c1"># TIGER</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<ul class="last simple">
<li>Note that object ‘d’ does not print the ‘data descriptor __get__’ but object of other class i.e. A prints the message. In the other words, descriptor can not use there methods by its’ own. <strong>Other’s class-attributes</strong> can use descriptor’s methods as shown in above example.</li>
</ul>
</div>
<p>Also, see the outputs of last three commands. We will notice that,</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<ul class="last simple">
<li>The set values are not store in the instance dictionary i.e. print(a.__dict__) results in empty dictionary.</li>
<li>Further, a.attr = 2 and a.attr ‘tiger’ performs the set operation immediately (see the __set__ message at outputs), but __get__ operations are performed at the end of the code, i.e. first print(a.__dict__) outputs are shown and then get operations is performed.</li>
<li>Lastly, set operation stores only last executed value, i.e. only TIGER is printed at the end, but not 2.</li>
</ul>
</div>
</div>
<div class="section" id="non-data-descriptor">
<h4>non-data descriptor<a class="headerlink" href="#non-data-descriptor" title="Permalink to this headline">¶</a></h4>
<p>non-data descriptor stores the assigned values in the dictionary as shown below,</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># non_data_descriptor.py</span>

<span class="k">class</span> <span class="nc">NonDataDescriptor</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; descriptor example &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="mi">0</span>

    <span class="k">def</span> <span class="fm">__get__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">instance</span><span class="p">,</span> <span class="bp">cls</span><span class="p">):</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;non-data descriptor __get__&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="o">+</span> <span class="mi">10</span>

<span class="k">class</span> <span class="nc">A</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="n">attr</span> <span class="o">=</span>  <span class="n">NonDataDescriptor</span><span class="p">()</span>

<span class="n">a</span> <span class="o">=</span> <span class="n">A</span><span class="p">()</span>
<span class="k">print</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">attr</span><span class="p">)</span>
<span class="c1"># non-data descriptor __get__</span>
<span class="c1"># 10</span>

<span class="n">a</span><span class="o">.</span><span class="n">attr</span> <span class="o">=</span> <span class="mi">3</span>
<span class="n">a</span><span class="o">.</span><span class="n">attr</span> <span class="o">=</span> <span class="mi">3</span>
<span class="k">print</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="vm">__dict__</span><span class="p">)</span> <span class="c1"># {&#39;attr&#39;: 4}</span>
</pre></div>
</div>
<div class="admonition important">
<p class="first admonition-title">Important</p>
<ul class="last simple">
<li>In Non-data descriptor, the assigned values are stored in instance dictionary (and only last assigned value is stored in dictionary); whereas data descriptor assigned values are stored in descriptor dictionary because the set method of descriptor is invoked.</li>
</ul>
</div>
</div>
<div class="section" id="getattribute-breaks-the-descriptor-usage">
<h4>__getattribute__ breaks the descriptor usage<a class="headerlink" href="#getattribute-breaks-the-descriptor-usage" title="Permalink to this headline">¶</a></h4>
<p>In below code, __getattribute__ method is overridden in class Overriden. Then, instance of class Overriden is created and finally the descriptor is called at Line 18. In this case, __getattribute__ method is invoked first and does not give access to descriptor.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># non_data_descriptor.py</span>

<span class="k">class</span> <span class="nc">NonDataDescriptor</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; descriptor example &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="mi">0</span>

    <span class="k">def</span> <span class="fm">__get__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">instance</span><span class="p">,</span> <span class="bp">cls</span><span class="p">):</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;non-data descriptor __get__&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="o">+</span> <span class="mi">10</span>

<span class="k">class</span> <span class="nc">Overriden</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="n">attr</span> <span class="o">=</span>  <span class="n">NonDataDescriptor</span><span class="p">()</span>
    <span class="k">def</span> <span class="fm">__getattribute__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Sorry, No way to reach to descriptor!&quot;</span><span class="p">)</span>

<span class="n">o</span> <span class="o">=</span> <span class="n">Overriden</span><span class="p">()</span>
<span class="n">o</span><span class="o">.</span><span class="n">attr</span>  <span class="c1"># Sorry, No way to reach to descriptor!</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Descriptors can not be invoked if __getattribute__ method is used in the class as shown in above example. We need to find some other ways in such cases.</p>
</div>
</div>
<div class="section" id="use-more-than-one-instance-for-testing">
<h4>Use more than one instance for testing<a class="headerlink" href="#use-more-than-one-instance-for-testing" title="Permalink to this headline">¶</a></h4>
<p>Following is the good example, which shows that test must be performed on more than one object of a classes. As following code, will work fine for one object, but error can be caught with two or more objects only.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Examples.py</span>

<span class="k">class</span> <span class="nc">DescriptorClassStorage</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; descriptor example &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">default</span> <span class="o">=</span> <span class="bp">None</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">default</span>

    <span class="k">def</span> <span class="fm">__get__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">instance</span><span class="p">,</span> <span class="bp">cls</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span>
    <span class="k">def</span> <span class="fm">__set__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">instance</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">value</span>

<span class="k">class</span> <span class="nc">StoreClass</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="n">attr</span> <span class="o">=</span>  <span class="n">DescriptorClassStorage</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>


<span class="n">store1</span> <span class="o">=</span>  <span class="n">StoreClass</span><span class="p">()</span>
<span class="n">store2</span> <span class="o">=</span>  <span class="n">StoreClass</span><span class="p">()</span>

<span class="k">print</span><span class="p">(</span><span class="n">store1</span><span class="o">.</span><span class="n">attr</span><span class="p">,</span> <span class="n">store2</span><span class="o">.</span><span class="n">attr</span><span class="p">)</span>  <span class="c1"># 10, 10</span>

<span class="n">store1</span><span class="o">.</span><span class="n">attr</span> <span class="o">=</span> <span class="mi">30</span>

<span class="k">print</span><span class="p">(</span><span class="n">store1</span><span class="o">.</span><span class="n">attr</span><span class="p">,</span> <span class="n">store2</span><span class="o">.</span><span class="n">attr</span><span class="p">)</span> <span class="c1"># 30, 30</span>
</pre></div>
</div>
<p>In above code, only store1.attr is set to 30, but value of store2.attr is also changes. This is happening because, in data-descriptors values are stored in descriptors only (not in instance dictionary as mentioned in previous section).</p>
</div>
<div class="section" id="examples">
<h4>Examples<a class="headerlink" href="#examples" title="Permalink to this headline">¶</a></h4>
<div class="section" id="write-a-descriptor-which-allows-only-positive-values">
<h5>Write a descriptor which allows only positive values<a class="headerlink" href="#write-a-descriptor-which-allows-only-positive-values" title="Permalink to this headline">¶</a></h5>
<p>Following is the code to test the positive number using descriptor,</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># positiveValueDescriptor.py</span>

<span class="k">class</span> <span class="nc">PositiveValueOnly</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; Allows only positive values &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="mi">0</span>

    <span class="k">def</span> <span class="fm">__get__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">instance</span><span class="p">,</span> <span class="bp">cls</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span>

    <span class="k">def</span> <span class="fm">__set__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">instance</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">value</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span> <span class="p">(</span><span class="s1">&#39;Only positive values can be used&#39;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">value</span>

<span class="k">class</span> <span class="nc">Number</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; sample class that uses PositiveValueOnly descriptor&quot;&quot;&quot;</span>

    <span class="n">value</span> <span class="o">=</span> <span class="n">PositiveValueOnly</span><span class="p">()</span>


<span class="n">test1</span> <span class="o">=</span> <span class="n">Number</span><span class="p">()</span>
<span class="k">print</span><span class="p">(</span><span class="n">test1</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>  <span class="c1">#  0</span>

<span class="n">test1</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="mi">10</span>
<span class="k">print</span><span class="p">(</span><span class="n">test1</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>  <span class="c1">#  0</span>

<span class="n">test1</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
<span class="c1"># [...]</span>
<span class="c1"># ValueError: Only positive values can be used</span>
</pre></div>
</div>
</div>
<div class="section" id="passing-arguments-to-decorator">
<h5>Passing arguments to decorator<a class="headerlink" href="#passing-arguments-to-decorator" title="Permalink to this headline">¶</a></h5>
<p>IN previous codes, no arguments were passed in the decorator. In this example, taxrate is passed in the decorator and total price is calculated based on tax rate.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># taxrate.py</span>

<span class="k">class</span> <span class="nc">Total</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; Calculate total values &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">taxrate</span> <span class="o">=</span> <span class="mf">1.20</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rate</span> <span class="o">=</span> <span class="n">taxrate</span>

    <span class="k">def</span> <span class="fm">__get__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">instance</span><span class="p">,</span> <span class="bp">cls</span><span class="p">):</span>
        <span class="c1"># net_price * rate</span>
        <span class="k">return</span> <span class="n">instance</span><span class="o">.</span><span class="n">net</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">rate</span>

    <span class="c1"># override __set__, so that there will be no way to set the value</span>
    <span class="k">def</span> <span class="fm">__set__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">instance</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">raise</span> <span class="n">NoImplementationError</span><span class="p">(</span><span class="s2">&quot;Can not change value&quot;</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">PriceNZ</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="n">total</span> <span class="o">=</span> <span class="n">Total</span><span class="p">(</span><span class="mf">1.5</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">net</span><span class="p">,</span> <span class="n">comment</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">net</span> <span class="o">=</span> <span class="n">net</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">comment</span> <span class="o">=</span> <span class="n">comment</span>

<span class="k">class</span> <span class="nc">PriceAustralia</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="n">total</span> <span class="o">=</span> <span class="n">Total</span><span class="p">(</span><span class="mf">1.3</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">net</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">net</span> <span class="o">=</span> <span class="n">net</span>


<span class="n">priceNZ</span> <span class="o">=</span> <span class="n">PriceNZ</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="s2">&quot;NZD&quot;</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">priceNZ</span><span class="o">.</span><span class="n">total</span><span class="p">)</span>  <span class="c1"># 150.0</span>

<span class="n">priceAustralia</span> <span class="o">=</span> <span class="n">PriceAustralia</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">priceAustralia</span><span class="o">.</span><span class="n">total</span><span class="p">)</span>  <span class="c1"># 130.0</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">In above example, look for the PriceNZ class, where init function takes two arguments and one of which is used by descriptor using ‘instance.net’ command. Further, init function in class Total need one argument i.e. taxrate, which is passed by individual class which creating the object of the descriptor.</p>
</div>
</div>
</div>
<div class="section" id="id1">
<h4>Conclusion<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h4>
<p>In this section, we discussed data-descriptors and non-data-descriptors. Also, we saw the way values are stored in these two types of descriptors. Further, we saw that __getattribute__ method breaks the descriptor calls.</p>
</div>
</div>
</div>
<span id="document-python/moreex"></span><div class="section" id="more-examples">
<span id="moreex"></span><h2>More examples<a class="headerlink" href="#more-examples" title="Permalink to this headline">¶</a></h2>
<p>This chapter contains several examples of different topics which we learned in previous chapters,</p>
<div class="section" id="generalized-attribute-validation">
<h3>Generalized attribute validation<a class="headerlink" href="#generalized-attribute-validation" title="Permalink to this headline">¶</a></h3>
<p>In this chapter ‘Functions’, <a class="reference external" href="mailto:'&#37;&#52;&#48;property">‘<span>&#64;</span>property</a>’, ‘Decorators’ and ‘Descriptors’ are described. Also, these techniques are used together in final example for attribute validation. Attribute validation is defined in Section <a class="reference internal" href="#sec-helpfeature"><span class="std std-numref">Section 13.1.1.1</span></a>.</p>
<div class="section" id="function">
<h4>Function<a class="headerlink" href="#function" title="Permalink to this headline">¶</a></h4>
<p>Various features are provided in Python3 for better usage of the function. In this section, ‘help feature’ and ‘argument feature’ are added to functions.</p>
<div class="section" id="help-feature">
<span id="sec-helpfeature"></span><h5>Help feature<a class="headerlink" href="#help-feature" title="Permalink to this headline">¶</a></h5>
<p>In <a class="reference internal" href="#py-attval-addintex"><span class="std std-numref">Listing 13.1</span></a>, anything which is written between 3 quotation marks after the function declaration (i.e. line 6-9), will be displayed as the output of ‘help’ command as shown in line 13.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Our aim is to write the function which adds the integers only, but currently it is generating the output for the ‘strings’ as well as shown in line 21. Therefore, we need ‘attribute validation’ so that inputs will be verified before performing the operations on them.</p>
</div>
<div class="literal-block-wrapper docutils container" id="py-attval-addintex">
<div class="code-block-caption"><span class="caption-text">Help feature</span><a class="headerlink" href="#py-attval-addintex" title="Permalink to this code">¶</a></div>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1"># addIntEx.py</span>

<span class="c1"># line 6-9 will be displayed,</span>
<span class="c1"># when help command is used for addIntEx as shown in line 13.</span>
<span class="k">def</span> <span class="nf">addIntEx</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;add two variables (x, y):</span>
<span class="sd">        x: integer</span>
<span class="sd">        y: integer</span>
<span class="sd">        returnType: integer</span>
<span class="sd">    &#39;&#39;&#39;</span>
    <span class="k">return</span> <span class="p">(</span><span class="n">x</span><span class="o">+</span><span class="n">y</span><span class="p">)</span>

<span class="n">help</span><span class="p">(</span><span class="n">addIntEx</span><span class="p">)</span>  <span class="c1"># line 6-9 will be displayed as output</span>

<span class="c1">#adding numbers: desired result</span>
<span class="n">intAdd</span> <span class="o">=</span> <span class="n">addIntEx</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s2">&quot;intAdd =&quot;</span><span class="p">,</span> <span class="n">intAdd</span><span class="p">)</span> <span class="c1"># 5</span>

<span class="c1"># adding strings: undesired result</span>
<span class="c1"># attribute validation is used for avoiding such errors</span>
<span class="n">strAdd</span> <span class="o">=</span> <span class="n">addIntEx</span><span class="p">(</span><span class="s2">&quot;Meher &quot;</span><span class="p">,</span> <span class="s2">&quot;Krishna&quot;</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s2">&quot;strAdd =&quot;</span><span class="p">,</span> <span class="n">strAdd</span><span class="p">)</span> <span class="c1"># Meher Krishna</span>
</pre></div>
</td></tr></table></div>
</div>
</div>
<div class="section" id="keyword-argument">
<h5>Keyword argument<a class="headerlink" href="#keyword-argument" title="Permalink to this headline">¶</a></h5>
<p>In <a class="reference internal" href="#py-attval-addkeywordarg"><span class="std std-numref">Listing 13.2</span></a>, ‘addKeywordArg(x, *, y)’ is a Python feature; in which all the arguments after ‘*’ are considered as positional argument. Hence, ‘x’ and ‘y’ are the ‘positional’ and ‘keyword’ argument respectively. Keyword arguments must be defined using the variable name e.g ‘y=3’ as shown in Lines 9 and 12. If name of the variable is not explicitly used, then Python will generate error as shown in Line 16. Further, keyword argument must be defined after all the positional arguments, otherwise error will be generated as shown in Line 19.</p>
<p>Lastly, in Line 2, the definition ‘addKeywordArg(x: <strong>int</strong>, *, y: <strong>int</strong>) -&gt;  <strong>int</strong>’ is presenting that inputs (x and y) and return values are of integer types. These help features can be viewed using metaclass command, i.e. ‘.__annotations__’,  as shown in Lines 23 and 24. Note that, this listing is not validating input types. In next section, input validation is applied for the functions.</p>
<div class="literal-block-wrapper docutils container" id="py-attval-addkeywordarg">
<div class="code-block-caption"><span class="caption-text">Keyword argument</span><a class="headerlink" href="#py-attval-addkeywordarg" title="Permalink to this code">¶</a></div>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1"># addKeywordArg.py</span>
<span class="k">def</span> <span class="nf">addKeywordArg</span><span class="p">(</span><span class="n">x</span><span class="p">:</span><span class="nb">int</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span>  <span class="n">y</span><span class="p">:</span><span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
    <span class="sd">&#39;&#39;&#39;add two numbers:</span>
<span class="sd">         x: integer, postional argument</span>
<span class="sd">         y: integer, keyword argument</span>
<span class="sd">         returnType: integer    &#39;&#39;&#39;</span>
    <span class="k">return</span> <span class="p">(</span><span class="n">x</span><span class="o">+</span><span class="n">y</span><span class="p">)</span>

<span class="n">Add1</span> <span class="o">=</span> <span class="n">addKeywordArg</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span> <span class="c1"># x: positional arg and y: keyword arg</span>
<span class="k">print</span><span class="p">(</span><span class="n">Add1</span><span class="p">)</span> <span class="c1"># 5</span>

<span class="n">Add2</span> <span class="o">=</span> <span class="n">addKeywordArg</span><span class="p">(</span><span class="n">y</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span> <span class="c1"># x and y as keyword argument</span>
<span class="k">print</span><span class="p">(</span><span class="n">Add2</span><span class="p">)</span> <span class="c1"># 5</span>

<span class="c1">## it&#39;s wrong, because y is not defined as keyword argument</span>
<span class="c1">#Add3 = addPositionalArg(2, 3) # y should be keyword argument i.e. y=3</span>

<span class="c1">## keyword arg should come after positional arg</span>
<span class="c1">#Add4 = addPositionalArg(y=3, 2) # correct (2, y=3)</span>

<span class="n">help</span><span class="p">(</span><span class="n">addKeywordArg</span><span class="p">)</span> <span class="c1"># Lines 3-6 will be displayed as output</span>

<span class="k">print</span><span class="p">(</span><span class="n">addKeywordArg</span><span class="o">.</span><span class="n">__annotations__</span><span class="p">)</span>
<span class="c1">## {&#39;return&#39;: &lt;class &#39;int&#39;&gt;, &#39;x&#39;: &lt;class &#39;int&#39;&gt;, &#39;y&#39;: &lt;class &#39;int&#39;&gt;}</span>

<span class="c1">## line 2 is only help (not validation), i.e. string addition will still unchecked</span>
<span class="n">strAdd</span> <span class="o">=</span> <span class="n">addKeywordArg</span><span class="p">(</span><span class="s2">&quot;Meher &quot;</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="s2">&quot;Krishna&quot;</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s2">&quot;strAdd =&quot;</span><span class="p">,</span> <span class="n">strAdd</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
</div>
</div>
<div class="section" id="input-validation">
<span id="sec-functioninputvalidation"></span><h5>Input validation<a class="headerlink" href="#input-validation" title="Permalink to this headline">¶</a></h5>
<p>In previous section, help features are added to functions, so that the information about the functions can be viewed by the users. In this section, validation is applied to input arguments, so that any invalid input will not be process by the function and corresponding error be displayed to the user.</p>
<p>In <a class="reference internal" href="#py-attval-addintvalidation"><span class="std std-numref">Listing 13.3</span></a>, Lines 8-9 are used to verify the type of input variable ‘x’. Line 8 checks whether the input is integer or not; if it is not integer that error will be raised by line 9, as shown in lines 19-22. Similarly, Lines 11-12 are used to verify the type of variable ‘y’.</p>
<div class="literal-block-wrapper docutils container" id="py-attval-addintvalidation">
<div class="code-block-caption"><span class="caption-text">Input Validation</span><a class="headerlink" href="#py-attval-addintvalidation" title="Permalink to this code">¶</a></div>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1"># addIntValidation.py</span>
<span class="k">def</span> <span class="nf">addIntValidation</span><span class="p">(</span><span class="n">x</span><span class="p">:</span><span class="nb">int</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span>  <span class="n">y</span><span class="p">:</span><span class="nb">int</span><span class="p">)</span><span class="o">-&gt;</span><span class="nb">int</span><span class="p">:</span>
    <span class="sd">&#39;&#39;&#39;add two variables (x, y):</span>
<span class="sd">        x: integer, postional argument</span>
<span class="sd">        y: integer, keyword argument</span>
<span class="sd">        returnType: integer</span>
<span class="sd">        &#39;&#39;&#39;</span>
    <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="nb">int</span><span class="p">:</span> <span class="c1"># validate input &#39;x&#39; as integer type</span>
        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;Please enter integer value for x&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">y</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="nb">int</span><span class="p">:</span> <span class="c1"># validate input &#39;y&#39; as integer type</span>
        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;Please enter integer value for y&quot;</span><span class="p">)</span>

    <span class="k">return</span> <span class="p">(</span><span class="n">x</span><span class="o">+</span><span class="n">y</span><span class="p">)</span>

<span class="n">intAdd</span><span class="o">=</span><span class="n">addIntValidation</span><span class="p">(</span><span class="n">y</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s2">&quot;intAdd =&quot;</span><span class="p">,</span> <span class="n">intAdd</span><span class="p">)</span>

<span class="c1">#strAdd=addIntValidation(&quot;Meher &quot;, y = &quot;Krishna&quot;)</span>
<span class="c1">## Following error will be generated for above command,</span>
<span class="c1">## raise TypeError(&quot;Please enter integer value for x&quot;)</span>
<span class="c1">## TypeError: Please enter integer value for x</span>

<span class="n">help</span><span class="p">(</span><span class="n">addIntValidation</span><span class="p">)</span> <span class="c1"># Lines 3-6 will be displayed as output</span>
<span class="k">print</span><span class="p">(</span><span class="n">addIntValidation</span><span class="o">.</span><span class="n">__annotations__</span><span class="p">)</span>
<span class="c1">## {&#39;return&#39;: &lt;class &#39;int&#39;&gt;, &#39;x&#39;: &lt;class &#39;int&#39;&gt;, &#39;y&#39;: &lt;class &#39;int&#39;&gt;}</span>
</pre></div>
</td></tr></table></div>
</div>
</div>
</div>
<div class="section" id="decorators">
<span id="sec-decorator"></span><h4>Decorators<a class="headerlink" href="#decorators" title="Permalink to this headline">¶</a></h4>
<p>Decorators are used to add additional functionalities to functions. In Section <a class="reference internal" href="#sec-functioninputvalidation"><span class="std std-numref">Section 13.1.1.3</span></a>, ‘x’ and ‘y’ are validated individually; hecce, if there are large number of inputs, then the method will not be efficient. Decorator will be used in Section <a class="reference internal" href="#sec-generalizedvalidation"><span class="std std-numref">Section 13.1.5</span></a> to write the generalized validation which can validate any kind of input.</p>
<div class="section" id="add-decorators-and-problems">
<h5>Add decorators and problems<a class="headerlink" href="#add-decorators-and-problems" title="Permalink to this headline">¶</a></h5>
<p><a class="reference internal" href="#py-attval-funcnamedecorator"><span class="std std-numref">Listing 13.4</span></a> is the decorator, which prints the name of the function i.e. whenever the function is called, the decorator will be executed first and print the name of the function and then actual function will be executed. The decorator defined above the function declaration as shown in line 4 of <a class="reference internal" href="#py-attval-addintdecorator"><span class="std std-numref">Listing 13.5</span></a>.</p>
<div class="literal-block-wrapper docutils container" id="py-attval-funcnamedecorator">
<div class="code-block-caption"><span class="caption-text">Decorator which prints the name of function</span><a class="headerlink" href="#py-attval-funcnamedecorator" title="Permalink to this code">¶</a></div>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1"># funcNameDecorator.py</span>
<span class="k">def</span> <span class="nf">funcNameDecorator</span><span class="p">(</span><span class="n">func</span><span class="p">):</span> <span class="c1"># function as input</span>
    <span class="k">def</span> <span class="nf">printFuncName</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span> <span class="c1">#take all arguments of function as input</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Function Name:&quot;</span><span class="p">,</span> <span class="n">func</span><span class="o">.</span><span class="vm">__name__</span><span class="p">)</span> <span class="c1"># print function name</span>
        <span class="k">return</span> <span class="n">func</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="c1"># return function with all arguments</span>
    <span class="k">return</span> <span class="n">printFuncName</span>
</pre></div>
</td></tr></table></div>
</div>
<p>In <a class="reference internal" href="#py-attval-addintdecorator"><span class="std std-numref">Listing 13.5</span></a>, first decorator ‘funcNameDecorator’ is imported to the listing in Line 2. Then, decorator is applied to function ‘addIntDecorator’ in Line 4. When Line 15 calls the function ‘addIntDecorator’, the decorator is executed first and name of function is printed, after that print command at Line 16 is executed.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">In the Listing, we can see that Help function is not working properly now as shown in Listing 19. Also, Decorator removes the metaclass features i.e. ‘annotation’  will not work, as shown in Line 24.</p>
</div>
<div class="literal-block-wrapper docutils container" id="py-attval-addintdecorator">
<div class="code-block-caption"><span class="caption-text">Decorator applied to function</span><a class="headerlink" href="#py-attval-addintdecorator" title="Permalink to this code">¶</a></div>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">#addIntDecorator.py</span>
<span class="kn">from</span> <span class="nn">funcNameDecorator</span> <span class="kn">import</span> <span class="n">funcNameDecorator</span>

<span class="nd">@funcNameDecorator</span>
<span class="k">def</span> <span class="nf">addIntDecorator</span><span class="p">(</span><span class="n">x</span><span class="p">:</span><span class="nb">int</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span>  <span class="n">y</span><span class="p">:</span><span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
    <span class="sd">&#39;&#39;&#39;add two variables (x, y):</span>
<span class="sd">        x: integer, postional argument</span>
<span class="sd">        y: integer, keyword argument</span>
<span class="sd">        returnType: integer</span>
<span class="sd">    &#39;&#39;&#39;</span>
    <span class="k">return</span> <span class="p">(</span><span class="n">x</span><span class="o">+</span><span class="n">y</span><span class="p">)</span>

<span class="c1">## decorator will be executed when function is called,</span>
<span class="c1">## and function name will be displayed as output as shown below,</span>
<span class="n">intAdd</span><span class="o">=</span><span class="n">addIntDecorator</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span> <span class="c1"># Function Name: addIntDecorator</span>
<span class="k">print</span><span class="p">(</span><span class="s2">&quot;intAdd =&quot;</span><span class="p">,</span> <span class="n">intAdd</span><span class="p">)</span> <span class="c1"># 5</span>

<span class="c1">##problem with decorator: help features are not displayed as shown below</span>
<span class="n">help</span><span class="p">(</span><span class="n">addIntDecorator</span><span class="p">)</span> <span class="c1"># following are the outputs of help command</span>
<span class="c1">## Help on function wrapper in module funcNameDecorator:</span>
<span class="c1">## wrapper(*args, **kwargs)</span>

<span class="c1">## problem with decorator: no output is displayed</span>
<span class="k">print</span><span class="p">(</span><span class="n">addIntDecorator</span><span class="o">.</span><span class="n">__annotations__</span><span class="p">)</span> <span class="c1"># {}</span>
</pre></div>
</td></tr></table></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">It is recommonded to define the decorators in the separate files e.g. ‘funcNameDecorator.py’ file is used here. It’s not good practice to define decorator in the same file, it may give some undesired results.</p>
</div>
</div>
<div class="section" id="remove-problems-using-functools">
<h5>Remove problems using functools<a class="headerlink" href="#remove-problems-using-functools" title="Permalink to this headline">¶</a></h5>
<p>The above problem can be removed by using two additional lines in <a class="reference internal" href="#py-attval-funcnamedecorator"><span class="std std-numref">Listing 13.4</span></a>. The listing is saved as <a class="reference internal" href="#py-attval-funcnamedecoratorfunctool"><span class="std std-numref">Listing 13.6</span></a> and Lines 2 and 6 are added, which solves the problems completely. In Line 2, ‘wraps’ is imported from ‘functools’ library and then it is applied inside the decorator at line 6. <a class="reference internal" href="#py-attval-addintdecoratorfunctool"><span class="std std-numref">Listing 13.7</span></a> is same as <a class="reference internal" href="#py-attval-addintdecorator"><span class="std std-numref">Listing 13.5</span></a> except new decorator which is defined in <a class="reference internal" href="#py-attval-funcnamedecoratorfunctool"><span class="std std-numref">Listing 13.6</span></a> is called at line 4.</p>
<div class="literal-block-wrapper docutils container" id="py-attval-funcnamedecoratorfunctool">
<div class="code-block-caption"><span class="caption-text">Decorator with ‘wrap’ decorator</span><a class="headerlink" href="#py-attval-funcnamedecoratorfunctool" title="Permalink to this code">¶</a></div>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1"># funcNameDecoratorFunctool.py</span>
<span class="kn">from</span> <span class="nn">functools</span> <span class="kn">import</span> <span class="n">wraps</span>

<span class="k">def</span> <span class="nf">funcNameDecoratorFunctool</span><span class="p">(</span><span class="n">func</span><span class="p">):</span> <span class="c1"># function as input</span>
    <span class="c1">#func is the function to be wrapped</span>
    <span class="nd">@wraps</span><span class="p">(</span><span class="n">func</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">printFuncName</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span> <span class="c1">#take all arguments of function as input</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Function Name:&quot;</span><span class="p">,</span> <span class="n">func</span><span class="o">.</span><span class="vm">__name__</span><span class="p">)</span> <span class="c1"># print function name</span>
        <span class="k">return</span> <span class="n">func</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="c1"># return function with all arguments</span>
    <span class="k">return</span> <span class="n">printFuncName</span>
</pre></div>
</td></tr></table></div>
</div>
<div class="literal-block-wrapper docutils container" id="py-attval-addintdecoratorfunctool">
<div class="code-block-caption"><span class="caption-text">Help features are visible again</span><a class="headerlink" href="#py-attval-addintdecoratorfunctool" title="Permalink to this code">¶</a></div>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1"># addIntDecoratorFunctool.py</span>
<span class="kn">from</span> <span class="nn">funcNameDecoratorFunctool</span> <span class="kn">import</span> <span class="n">funcNameDecoratorFunctool</span>

<span class="nd">@funcNameDecoratorFunctool</span>
<span class="k">def</span> <span class="nf">addIntDecorator</span><span class="p">(</span><span class="n">x</span><span class="p">:</span><span class="nb">int</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span>  <span class="n">y</span><span class="p">:</span><span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
    <span class="sd">&#39;&#39;&#39;add two variables (x, y):</span>
<span class="sd">        x: integer, postional argument</span>
<span class="sd">        y: integer, keyword argument</span>
<span class="sd">        returnType: integer</span>
<span class="sd">    &#39;&#39;&#39;</span>
    <span class="k">return</span> <span class="p">(</span><span class="n">x</span><span class="o">+</span><span class="n">y</span><span class="p">)</span>

<span class="n">intAdd</span><span class="o">=</span><span class="n">addIntDecorator</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span> <span class="c1"># Function Name: addIntDecorator</span>
<span class="k">print</span><span class="p">(</span><span class="s2">&quot;intAdd =&quot;</span><span class="p">,</span> <span class="n">intAdd</span><span class="p">)</span> <span class="c1"># 5</span>

<span class="n">help</span><span class="p">(</span><span class="n">addIntDecorator</span><span class="p">)</span> <span class="c1"># lines 6-9 will be displaed</span>

<span class="k">print</span><span class="p">(</span><span class="n">addIntDecorator</span><span class="o">.</span><span class="n">__annotations__</span><span class="p">)</span>
<span class="c1">##{&#39;return&#39;: &lt;class &#39;int&#39;&gt;, &#39;y&#39;: &lt;class &#39;int&#39;&gt;, &#39;x&#39;: &lt;class &#39;int&#39;&gt;}</span>
</pre></div>
</td></tr></table></div>
</div>
</div>
</div>
<div class="section" id="property">
<h4>&#64;property<a class="headerlink" href="#property" title="Permalink to this headline">¶</a></h4>
<p>In this section, area and perimeter of the rectangle is calculated and ‘&#64;property’ is used to validate the inputs before calculation. Further, this example is extended in the next sections for adding more functionality for ‘attribute validation’.</p>
<p><strong>Explanation</strong> <a class="reference internal" href="#py-attval-rectproperty"><span class="std std-numref">Listing 13.8</span></a></p>
<blockquote>
<div><p>In line 28 of the listing, &#64;property is used for ‘length’ attribute of the class Rectangle. Since, &#64;property is used, therefore ‘getter’ and ‘setter’ can be used to validate the type of length. Note that, in setter part, i.e. Lines 34-40, self._length (see ‘_’ before length) is used for setting the valid value in ‘length’ attribute. In the setter part validation is performed at Line 38 using ‘isinstance’. n Line 54, the value of length is passed as float, therefore error will be raised as shown in Line 56.</p>
<p>Now, whenever ‘length’ is accessed by the code, it’s value will be return by getter method as shown in Lines 28-32. In the other words, this block will be executed every time we use ‘length’ value. To demonstrate this, print statement is used in Line 31. For example, Line 44 print the length value, therefore line 31 printed first and then length is printed as shown in Lines 45-46.</p>
<p>Also, &#64;property is used for the method ‘area’ as well. Therefore, output of this method can be directly obtained as shown in Lines 48-52. Further, for calculating area, the ‘length’ variable is required therefore line 51 will be printed as output, which is explained in previous paragraph.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">In this listing, the type-check applied to ‘length’ using &#64;property. But, the problem with this method is that we need to write it for each attribute e.g. length and width in this case which is not the efficient way to do the validation. We will remove this problem using Descriptor in next section.</p>
</div>
<div class="literal-block-wrapper docutils container" id="py-attval-rectproperty">
<div class="code-block-caption"><span class="caption-text">Attribute validation using &#64;property</span><a class="headerlink" href="#py-attval-rectproperty" title="Permalink to this code">¶</a></div>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1"># rectProperty.py</span>
<span class="k">class</span> <span class="nc">Rectangle</span><span class="p">:</span>
    <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">    -Calculate Area and Perimeter of Rectangle</span>
<span class="sd">    -getter and setter are used to displaying and setting the length value.</span>
<span class="sd">    -width is set by init function</span>
<span class="sd">    &#39;&#39;&#39;</span>

    <span class="c1"># self.length is used in below lines,</span>
    <span class="c1"># but length is not initialized by __init__,</span>
    <span class="c1"># initialization is done by .setter at lines 34 due to @property at line 27,</span>
    <span class="c1"># also value is displayed by getter (@propety) at line 28-32</span>
    <span class="c1"># whereas `width&#39; is get and set as simple python code and without validation</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">length</span><span class="p">,</span> <span class="n">width</span><span class="p">):</span>
        <span class="c1">#if self._length is used, then it will not validate through setter.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">length</span> <span class="o">=</span> <span class="n">length</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">width</span> <span class="o">=</span> <span class="n">width</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">area</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Calculates Area: length*width&#39;&#39;&#39;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">length</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">width</span>

    <span class="k">def</span> <span class="nf">perimeter</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Calculates Perimeter: 2*(length+width)&#39;&#39;&#39;</span>
        <span class="k">return</span> <span class="mi">2</span> <span class="o">*</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">length</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">width</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">length</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;displaying length&#39;&#39;&#39;</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;getting length value through getter&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_length</span>

    <span class="nd">@length.setter</span>
    <span class="k">def</span> <span class="nf">length</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;setting length&#39;&#39;&#39;</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;saving value through setter&quot;</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span> <span class="c1"># validating length as integer</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;Only integers are allowed&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_length</span> <span class="o">=</span> <span class="n">value</span>

<span class="n">r</span> <span class="o">=</span> <span class="n">Rectangle</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span> <span class="c1"># following output will be displayed</span>
<span class="c1">## saving value through setter 3</span>
<span class="k">print</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">length</span><span class="p">)</span> <span class="c1"># following output will be displayed</span>
<span class="c1">## getting length value through getter</span>
<span class="c1">## 3</span>

<span class="c1">## @property is used for area,</span>
<span class="c1">## therefore it can be accessed directly to display the area</span>
<span class="k">print</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">area</span><span class="p">)</span> <span class="c1"># following output will be displayed</span>
<span class="c1">## getting length value through getter</span>
<span class="c1">## 6</span>

<span class="c1">#r=Rectangle(4.3, 4) # following error will be generated</span>
<span class="c1">## [...]</span>
<span class="c1">## TypeError: Only integers are allowed</span>

<span class="c1"># print perimeter of rectangle</span>
<span class="k">print</span><span class="p">(</span><span class="n">Rectangle</span><span class="o">.</span><span class="n">perimeter</span><span class="p">(</span><span class="n">r</span><span class="p">))</span>
<span class="c1">## getting length value through getter</span>
<span class="c1">## 10</span>
</pre></div>
</td></tr></table></div>
</div>
</div></blockquote>
</div>
<div class="section" id="descriptors">
<h4>Descriptors<a class="headerlink" href="#descriptors" title="Permalink to this headline">¶</a></h4>
<p>Descriptor are the classes which implement three core attributes access operation i.e. get, set and del using ‘__get__’, ‘__set__’ and ‘__del__’ as shown in <a class="reference internal" href="#py-attval-rectdescriptor"><span class="std std-numref">Listing 13.9</span></a>. In this section, validation is applied using Descriptor to remove the problem with &#64;property.</p>
<p><strong>Explanation</strong> <a class="reference internal" href="#py-attval-rectdescriptor"><span class="std std-numref">Listing 13.9</span></a></p>
<blockquote>
<div><p>Here, class integer is used to verify the type of the attributes using ‘__get__’ and ‘__set__’ at Lines 6 and 12 respectively. The class ‘Rect’ is calling the class ‘Integer’ at Lines 19 and 20. The name of the attribute is passed in these lines, whose values are set by the Integer class in the form of dictionaries at Line 16. Also, value is get from the dictionary from Line 10. Note that, in this case, only one line is added for each attribute, which removes the problem of ‘&#64;property’ method.</p>
<div class="literal-block-wrapper docutils container" id="py-attval-rectdescriptor">
<div class="code-block-caption"><span class="caption-text">Attribute validation using Descriptor</span><a class="headerlink" href="#py-attval-rectdescriptor" title="Permalink to this code">¶</a></div>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1"># rectDescriptor.py</span>
<span class="k">class</span> <span class="nc">Integer</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parameter</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parameter</span> <span class="o">=</span> <span class="n">parameter</span>

    <span class="k">def</span> <span class="fm">__get__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">instance</span><span class="p">,</span> <span class="bp">cls</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">instance</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span> <span class="c1"># required if descriptor is</span>
            <span class="k">return</span> <span class="bp">self</span> <span class="c1"># used as class variable</span>
        <span class="k">else</span><span class="p">:</span> <span class="c1"># in this code, only following line is required</span>
            <span class="k">return</span> <span class="n">instance</span><span class="o">.</span><span class="vm">__dict__</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">parameter</span><span class="p">]</span>

    <span class="k">def</span> <span class="fm">__set__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">instance</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;setting </span><span class="si">%s</span><span class="s2"> to </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">parameter</span><span class="p">,</span> <span class="n">value</span><span class="p">))</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;Interger value is expected&quot;</span><span class="p">)</span>
        <span class="n">instance</span><span class="o">.</span><span class="vm">__dict__</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">parameter</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>

<span class="k">class</span> <span class="nc">Rect</span><span class="p">:</span>
    <span class="n">length</span> <span class="o">=</span> <span class="n">Integer</span><span class="p">(</span><span class="s1">&#39;length&#39;</span><span class="p">)</span>
    <span class="n">width</span> <span class="o">=</span> <span class="n">Integer</span><span class="p">(</span><span class="s1">&#39;width&#39;</span><span class="p">)</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">length</span><span class="p">,</span> <span class="n">width</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">length</span> <span class="o">=</span> <span class="n">length</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">width</span> <span class="o">=</span> <span class="n">width</span>

    <span class="k">def</span> <span class="nf">area</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Calculates Area: length*width&#39;&#39;&#39;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">length</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">width</span>

<span class="n">r</span> <span class="o">=</span> <span class="n">Rect</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>
<span class="c1">## setting length to 3</span>
<span class="c1">## setting width to 3</span>

<span class="k">print</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">length</span><span class="p">)</span> <span class="c1"># 3</span>

<span class="k">print</span><span class="p">(</span><span class="s2">&quot;Area:&quot;</span><span class="p">,</span> <span class="n">Rect</span><span class="o">.</span><span class="n">area</span><span class="p">(</span><span class="n">r</span><span class="p">))</span> <span class="c1"># Area:  6</span>

<span class="c1">#r = Rect(3, 1.5)</span>
<span class="c1">## TypeError: Interger value is expected</span>
</pre></div>
</td></tr></table></div>
</div>
</div></blockquote>
</div>
<div class="section" id="generalized-validation">
<span id="sec-generalizedvalidation"></span><h4>Generalized validation<a class="headerlink" href="#generalized-validation" title="Permalink to this headline">¶</a></h4>
<p>In this section, decorators and descriptors are combined to create a validation, where attribute-types are defined by the individual class authors.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Note that, various types i.e. ‘&#64;typeAssert(author=str, length=int, width=float)’ will be defined by class Author for validation.</p>
</div>
<p><strong>Explanation</strong> <a class="reference internal" href="#py-attval-rectgeneralized"><span class="std std-numref">Listing 13.10</span></a></p>
<blockquote>
<div><p>In this code, first a decorator ‘typeAssert’ is applied to class ‘Rect’ at line 27. The typeAssert contains the name of the attribute along with it’s valid type. Then the decorator (Lines 19-24), extracts the ‘key-value’ pairs i.e. ‘parameter-expected]_type’ (see Line 21) and pass these to descriptor ‘TypeCheck’ through Line 22. If type is not valid, descriptor will raise error, otherwise it will set the values to the variables. Finally, these set values will be used by the class ‘Rect’  for further operations.</p>
<div class="literal-block-wrapper docutils container" id="py-attval-rectgeneralized">
<div class="code-block-caption"><span class="caption-text">Generalized attribute validation</span><a class="headerlink" href="#py-attval-rectgeneralized" title="Permalink to this code">¶</a></div>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">#rectGeneralized.py</span>
<span class="k">class</span> <span class="nc">TypeCheck</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parameter</span><span class="p">,</span> <span class="n">expected_type</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parameter</span> <span class="o">=</span> <span class="n">parameter</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">expected_type</span> <span class="o">=</span> <span class="n">expected_type</span>

    <span class="k">def</span> <span class="fm">__get__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">instance</span><span class="p">,</span> <span class="bp">cls</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">instance</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span> <span class="c1"># required if descriptor is</span>
            <span class="k">return</span> <span class="bp">self</span> <span class="c1"># used as class variable</span>
        <span class="k">else</span><span class="p">:</span> <span class="c1"># in this code, only following line is required</span>
            <span class="k">return</span> <span class="n">instance</span><span class="o">.</span><span class="vm">__dict__</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">parameter</span><span class="p">]</span>

    <span class="k">def</span> <span class="fm">__set__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">instance</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;setting </span><span class="si">%s</span><span class="s2"> to </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">parameter</span><span class="p">,</span> <span class="n">value</span><span class="p">))</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">expected_type</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2"> value is expected&quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">expected_type</span><span class="p">)</span>
        <span class="n">instance</span><span class="o">.</span><span class="vm">__dict__</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">parameter</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>

<span class="k">def</span> <span class="nf">typeAssert</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">decorate</span><span class="p">(</span><span class="bp">cls</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">parameter</span><span class="p">,</span> <span class="n">expected_type</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="nb">setattr</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">parameter</span><span class="p">,</span> <span class="n">TypeCheck</span><span class="p">(</span><span class="n">parameter</span><span class="p">,</span> <span class="n">expected_type</span><span class="p">))</span>
        <span class="k">return</span> <span class="bp">cls</span>
    <span class="k">return</span> <span class="n">decorate</span>

 <span class="c1"># define attribute types here in the decorator</span>
<span class="nd">@typeAssert</span><span class="p">(</span><span class="n">author</span><span class="o">=</span><span class="nb">str</span><span class="p">,</span> <span class="n">length</span> <span class="o">=</span> <span class="nb">int</span><span class="p">,</span> <span class="n">width</span> <span class="o">=</span> <span class="nb">float</span><span class="p">)</span>
<span class="k">class</span> <span class="nc">Rect</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span>  <span class="n">length</span><span class="p">,</span> <span class="n">width</span><span class="p">,</span> <span class="n">author</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">):</span> <span class="c1">#require kwargs</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">length</span> <span class="o">=</span> <span class="n">length</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">width</span> <span class="o">=</span> <span class="n">width</span> <span class="o">*</span> <span class="mf">1.0</span> <span class="c1"># to accept integer as well</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">author</span> <span class="o">=</span> <span class="n">author</span>

<span class="n">r</span> <span class="o">=</span> <span class="n">Rect</span> <span class="p">(</span><span class="n">length</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mf">3.1</span><span class="p">,</span> <span class="n">author</span> <span class="o">=</span> <span class="s2">&quot;Meher&quot;</span><span class="p">)</span>
<span class="c1">## setting length to 3</span>
<span class="c1">## setting width to 3.1</span>
<span class="c1">## setting author to Meher</span>

<span class="c1">#r = Rect (length=&quot;len&quot;, width=3.1, author = &quot;Meher&quot;) # error shown below</span>
<span class="c1">## File &quot;rectProperty.py&quot;, line 42,</span>
<span class="c1">## [ ... ]</span>
<span class="c1">## TypeError: &lt;class &#39;int&#39;&gt; value is expected</span>
</pre></div>
</td></tr></table></div>
</div>
</div></blockquote>
</div>
<div class="section" id="summary">
<h4>Summary<a class="headerlink" href="#summary" title="Permalink to this headline">¶</a></h4>
<p>In this chapter, we learn about functions, &#64;property, decorators and descriptors. We see that &#64;property is useful for customizing the single attribute whereas descriptor is suitable for multiple attributes. Further, we saw that how decorator and descriptor can be used to enhance the functionality of the code with DRY (don’t repeat yourself) technique.</p>
</div>
</div>
<div class="section" id="inheritance-with-super">
<h3>Inheritance with Super<a class="headerlink" href="#inheritance-with-super" title="Permalink to this headline">¶</a></h3>
<p>In this section, inheritance is discussed using super command. In most languages, the super method calls the parent class, whereas in python it is slightly different i.e. it consider the child before parent, as shown in this section.</p>
<div class="section" id="super-child-before-parent">
<span id="superchildebeforeparent"></span><h4>Super : child before parent<a class="headerlink" href="#super-child-before-parent" title="Permalink to this headline">¶</a></h4>
<p>Lets understand super with the help of an example. First, create a class Pizza, which inherits the DoughFactory for getting the dough as below,</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># pizza.py</span>

<span class="k">class</span> <span class="nc">DoughFactory</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">get_dough</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s1">&#39;white floor dough&#39;</span>


<span class="k">class</span> <span class="nc">Pizza</span><span class="p">(</span><span class="n">DoughFactory</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">order_pizza</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">toppings</span><span class="p">):</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;getting dough&quot;</span><span class="p">)</span>

        <span class="c1"># dough = DoughFactory.get_dough()</span>
        <span class="c1">## above line is commented to work with DRY principle</span>
        <span class="c1">## use super as below,</span>
        <span class="n">dough</span> <span class="o">=</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">get_dough</span><span class="p">()</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Making pie using &#39;</span><span class="si">%s</span><span class="s2">&#39;&quot;</span> <span class="o">%</span> <span class="n">dough</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">topping</span> <span class="ow">in</span> <span class="n">toppings</span><span class="p">:</span>
            <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Adding </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">topping</span><span class="p">)</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">Pizza</span><span class="p">()</span><span class="o">.</span><span class="n">order_pizza</span><span class="p">(</span><span class="s2">&quot;Pepperoni&quot;</span><span class="p">,</span> <span class="s2">&quot;Bell Pepper&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Run the above code and we will get below output,</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>$ python -i pizza.py

getting dough
Making pie using <span class="s1">&#39;white floor dough&#39;</span>
Adding Pepperoni
Adding Bell Pepper
&gt;&gt;&gt; help<span class="o">(</span>Pizza<span class="o">)</span>
    Help on class Pizza in module __main__:

    class Pizza<span class="o">(</span>DoughFactory<span class="o">)</span>
     <span class="p">|</span>  Method resolution order:
     <span class="p">|</span>      Pizza
     <span class="p">|</span>      DoughFactory
     <span class="p">|</span>      builtins.object
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The resolution order shows that the way in which python interpretor tries to find the methods i.e. it tries to find get_dough in Pizza class first; if not found there, it will go to DoughFactory.</p>
</div>
<p>Now, create the another class in separate python file as below,</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># wheatDough.py</span>

<span class="kn">from</span> <span class="nn">pizza</span> <span class="kn">import</span> <span class="n">Pizza</span><span class="p">,</span> <span class="n">DoughFactory</span>


<span class="k">class</span> <span class="nc">WheatDoughFactory</span><span class="p">(</span><span class="n">DoughFactory</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">get_dough</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span><span class="p">(</span><span class="s2">&quot;wheat floor dough&quot;</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">WheatPizza</span><span class="p">(</span><span class="n">Pizza</span><span class="p">,</span> <span class="n">WheatDoughFactory</span><span class="p">):</span>
    <span class="k">pass</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">WheatPizza</span><span class="p">()</span><span class="o">.</span><span class="n">order_pizza</span><span class="p">(</span><span class="s1">&#39;Sausage&#39;</span><span class="p">,</span> <span class="s1">&#39;Mushroom&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>In python, Inheritance chain is not determine by the Parent class, but by the child class.</p>
<p class="last">If we run the wheatDough.py, it will call the super command in class Pizza in pizza.py will not call his parent class i.e. DoughFactory, but the parent class of the child class i.e. WheatDoughFactory. This is called Dependency injection.</p>
</div>
<div class="admonition important">
<p class="first admonition-title">Important</p>
<ul class="simple">
<li>super consider the children before parents i.e. it looks methods in child class first, then it goes for parent class.</li>
<li>Next, it calls the parents in the order of inheritance.</li>
<li>use keyword arguments for cooperative inheritance.</li>
</ul>
<p class="last">For above reasons, super is super command, as it allows to change the order of Inheritance just by modifying the child class, as shown in above example.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">For better understanding of the super command, some more short examples are added here,</p>
</div>
</div>
<div class="section" id="inherit-init">
<h4>Inherit __init__<a class="headerlink" href="#inherit-init" title="Permalink to this headline">¶</a></h4>
<p>In the following code, class RectArea is inheriting the __init__ function of class RectLen. In the other word, length is set by class RectLen and width is set by class RectArea and finally area is calculated by class RectArea.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># rectangle.py</span>

<span class="k">class</span> <span class="nc">RectLen</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">length</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">length</span> <span class="o">=</span> <span class="n">length</span>


<span class="k">class</span> <span class="nc">RectArea</span><span class="p">(</span><span class="n">RectLen</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">length</span><span class="p">,</span> <span class="n">width</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">width</span> <span class="o">=</span> <span class="n">width</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">length</span><span class="p">)</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Area : &quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">length</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">width</span><span class="p">)</span>


<span class="n">RectArea</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>  <span class="c1"># Area :  12</span>
</pre></div>
</div>
<p>In the same way, the other functions of parent class can be called. In following code, printClass method of parent class is used by child class.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># printClass.py</span>

<span class="k">class</span> <span class="nc">A</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">printClassName</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">print</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">B</span><span class="p">(</span><span class="n">A</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">printName</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">printClassName</span><span class="p">()</span>

<span class="n">a</span> <span class="o">=</span> <span class="n">A</span><span class="p">()</span>
<span class="n">a</span><span class="o">.</span><span class="n">printClassName</span><span class="p">()</span>  <span class="c1"># A</span>

<span class="n">b</span> <span class="o">=</span> <span class="n">B</span><span class="p">()</span>
<span class="n">b</span><span class="o">.</span><span class="n">printClassName</span><span class="p">()</span>  <span class="c1"># B</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">In above code, print(self.__class__.__name__) is used for printing the class name, instead of print(“A”). Hence, when child class will inherit this function, then __class__ will use the name of the child class to print the name of the class, therefore Line 15 prints “B” instead of A.</p>
</div>
</div>
<div class="section" id="inherit-init-of-multiple-classes">
<h4>Inherit __init__ of multiple classes<a class="headerlink" href="#inherit-init-of-multiple-classes" title="Permalink to this headline">¶</a></h4>
<p>In this section, various problems are discussed along with the solutions, which usually occurs during multiple inheritance.</p>
<div class="section" id="problem-super-calls-init-of-one-class-only">
<h5>Problem : super() calls __init__ of one class only<a class="headerlink" href="#problem-super-calls-init-of-one-class-only" title="Permalink to this headline">¶</a></h5>
<p>In following example, class C is inheriting the class A and B. But, the super function in class C will inherit only one class init function i.e. init function of the class which occurs first in the inheritance order.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1">#multipleInheritance.py</span>

<span class="k">class</span> <span class="nc">A</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;A&quot;</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">B</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;B&quot;</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">C</span><span class="p">(</span><span class="n">A</span><span class="p">,</span> <span class="n">B</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>

<span class="c1"># init of class B is not inherited</span>
<span class="n">c</span> <span class="o">=</span> <span class="n">C</span><span class="p">()</span> <span class="c1"># A</span>
</pre></div>
</div>
</div>
<div class="section" id="solution-1">
<h5>Solution 1<a class="headerlink" href="#solution-1" title="Permalink to this headline">¶</a></h5>
<p>Following is the first solution, where __init__ function of classes are invoked explicitly.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1">#multipleInheritance.py</span>

<span class="k">class</span> <span class="nc">A</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;A&quot;</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">B</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;B&quot;</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">C</span><span class="p">(</span><span class="n">A</span><span class="p">,</span> <span class="n">B</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">A</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>  <span class="c1"># self is required</span>
        <span class="n">B</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

<span class="n">c</span> <span class="o">=</span> <span class="n">C</span><span class="p">()</span>
<span class="c1"># A</span>
<span class="c1"># B</span>
</pre></div>
</div>
</div>
<div class="section" id="correct-solution">
<h5>Correct solution<a class="headerlink" href="#correct-solution" title="Permalink to this headline">¶</a></h5>
<p>Following is the another solution of the problem; where super() function is added in both the classes. Note that, the super() is added in class B as well, so that class(B, A) will also work fine.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1">#multipleInheritance.py</span>

<span class="k">class</span> <span class="nc">A</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;reached A&quot;</span><span class="p">)</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;A&quot;</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">B</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;reached B&quot;</span><span class="p">)</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;B&quot;</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">C</span><span class="p">(</span><span class="n">A</span><span class="p">,</span> <span class="n">B</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>

<span class="n">c</span> <span class="o">=</span> <span class="n">C</span><span class="p">()</span>
<span class="c1"># reached A</span>
<span class="c1"># reached B</span>
<span class="c1"># B</span>
<span class="c1"># A</span>
</pre></div>
</div>
<p>The solution works fine here because in Python super consider the child before parent, which is discussed in Section <a class="reference internal" href="#superchildebeforeparent"><span class="std std-ref">Super : child before parent</span></a>. Please see the order of output as well.</p>
</div>
</div>
<div class="section" id="math-problem">
<span id="mathproblem"></span><h4>Math Problem<a class="headerlink" href="#math-problem" title="Permalink to this headline">¶</a></h4>
<p>This section summarizes the above section using math problem. Here, we want to calculate (x * 2 + 5), where x = 3.</p>
<div class="section" id="id1">
<h5>Solution 1<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h5>
<p>This is the first solution, __init__ function of two classes are invoked explicitly. The only problem here is that the solution does not depend on the order of inheritance, but on the order of invocation, i.e. if we exchange the lines 15 and 16, the solution will change.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># mathProblem.py</span>

<span class="k">class</span> <span class="nc">Plus5</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">value</span> <span class="o">+</span> <span class="mi">5</span>

<span class="k">class</span> <span class="nc">Multiply2</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">value</span> <span class="o">*</span> <span class="mi">2</span>

<span class="k">class</span> <span class="nc">Solution</span><span class="p">(</span><span class="n">Multiply2</span><span class="p">,</span> <span class="n">Plus5</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">value</span>

        <span class="n">Multiply2</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
        <span class="n">Plus5</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>


<span class="n">s</span> <span class="o">=</span> <span class="n">Solution</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">s</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>  <span class="c1"># 11</span>
</pre></div>
</div>
</div>
<div class="section" id="problem-with-super">
<h5>problem with super<a class="headerlink" href="#problem-with-super" title="Permalink to this headline">¶</a></h5>
<p>One of the problem with super is that, the top level super() function does not work if it has some input arguments. If we look the output of following code carefully, then we will find that error is generated after reaching to class Plus5. When class Plus5 uses the super(), then it calls the metaclass’s (i.e. object) __init__ function, which does not take any argument.  Hence it generates the error ‘object.__init__() takes no parameters’.</p>
<p>To solve this problem, we need to create another class as shown in next section.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># mathProblem.py</span>

<span class="k">class</span> <span class="nc">Plus5</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>

        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Plus 5 reached&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">value</span> <span class="o">+</span> <span class="mi">5</span>

        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Bye from Plus 5&quot;</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">Multiply2</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>

        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Multiply2 reached&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">value</span> <span class="o">*</span> <span class="mi">2</span>

        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Bye from Multiply2&quot;</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">Solution</span><span class="p">(</span><span class="n">Multiply2</span><span class="p">,</span> <span class="n">Plus5</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">value</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>


<span class="n">s</span> <span class="o">=</span> <span class="n">Solution</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">s</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>

<span class="c1"># Multiply2 reached</span>
<span class="c1"># Plus 5 reached</span>
<span class="c1"># [...]</span>
<span class="c1"># TypeError: object.__init__() takes no parameters</span>
</pre></div>
</div>
</div>
<div class="section" id="solution-2">
<h5>Solution 2<a class="headerlink" href="#solution-2" title="Permalink to this headline">¶</a></h5>
<p>To solve the above, we need to create another class, and inherit it in classes Plus5 and Multiply2 as below,</p>
<p>In below code, MathClass is created, whose init function takes one argument. Since, MathClass does not use super function, therefore above error will not generate here.</p>
<p>Next, we need to inherit this class in Plus5 and Multiply2 for proper working of the code, as shown below. Further, below code depends on order of inheritance now.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># mathProblem.py</span>

<span class="k">class</span> <span class="nc">MathClass</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;MathClass reached&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">value</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Bye from MathClass&quot;</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">Plus5</span><span class="p">(</span><span class="n">MathClass</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Plus 5 reached&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">value</span> <span class="o">+</span> <span class="mi">5</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Bye from Plus 5&quot;</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">Multiply2</span><span class="p">(</span><span class="n">MathClass</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Multiply2 reached&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">value</span> <span class="o">*</span> <span class="mi">2</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Bye from Multiply2&quot;</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">Solution</span><span class="p">(</span><span class="n">Multiply2</span><span class="p">,</span> <span class="n">Plus5</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">value</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>


<span class="n">s</span> <span class="o">=</span> <span class="n">Solution</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">s</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>  <span class="c1"># 11</span>

<span class="c1"># Multiply2 reached</span>
<span class="c1"># Plus 5 reached</span>
<span class="c1"># MathClass reached</span>
<span class="c1"># Bye from MathClass</span>
<span class="c1"># Bye from Plus 5</span>
<span class="c1"># Bye from Multiply2</span>
<span class="c1"># 11</span>

<span class="c1">## uncomment below to see the Method resolution order</span>
<span class="k">print</span><span class="p">(</span><span class="n">help</span><span class="p">(</span><span class="n">Solution</span><span class="p">))</span>
<span class="c1"># class Solution(Multiply2, Plus5)</span>
<span class="c1">#  |  Method resolution order:</span>
<span class="c1">#  |      Solution</span>
<span class="c1">#  |      Multiply2</span>
<span class="c1">#  |      Plus5</span>
<span class="c1">#  |      MathClass</span>
<span class="c1">#  |      builtins.object</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="conclusion">
<h4>Conclusion<a class="headerlink" href="#conclusion" title="Permalink to this headline">¶</a></h4>
<p>In this section, we saw the functionality of the super() function. It is shown that super() consider the child class first and then parent classes in the order of inheritance. Also, help command is used for observing the ‘method resolution order’ i.e. hierarchy of the inheritance.</p>
</div>
</div>
<div class="section" id="generators">
<h3>Generators<a class="headerlink" href="#generators" title="Permalink to this headline">¶</a></h3>
<p>Any function that uses the ‘yield’ statement is the generator. Each yield temporarily suspends processing, remembering the location execution state (including local variables and pending try-statements). When the generator iterator resumes, it picks-up where it left-off (in contrast to functions which start fresh on every invocation).</p>
<div class="section" id="feed-iterations">
<h4>Feed iterations<a class="headerlink" href="#feed-iterations" title="Permalink to this headline">¶</a></h4>
<p>Typically, it is used to feed iterations as below,</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>   <span class="c1"># generatorEx.py</span>

   <span class="k">def</span> <span class="nf">countdown</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
       <span class="k">while</span> <span class="p">(</span><span class="n">n</span><span class="o">&gt;</span><span class="mi">0</span><span class="p">):</span>
           <span class="k">yield</span> <span class="n">n</span>
           <span class="n">n</span> <span class="o">-=</span> <span class="mi">1</span>

   <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">countdown</span><span class="p">(</span><span class="mi">5</span><span class="p">):</span>
       <span class="k">print</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>  <span class="c1"># 5 4 3 2 1</span>

   <span class="k">print</span><span class="p">()</span>
   <span class="n">c</span> <span class="o">=</span> <span class="n">countdown</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
   <span class="k">print</span><span class="p">(</span><span class="nb">next</span><span class="p">(</span><span class="n">c</span><span class="p">))</span>  <span class="c1"># 3</span>
   <span class="k">print</span><span class="p">(</span><span class="nb">next</span><span class="p">(</span><span class="n">c</span><span class="p">))</span>  <span class="c1"># 2</span>
   <span class="k">print</span><span class="p">(</span><span class="nb">next</span><span class="p">(</span><span class="n">c</span><span class="p">))</span>  <span class="c1"># 1</span>
   <span class="k">print</span><span class="p">(</span><span class="nb">next</span><span class="p">(</span><span class="n">c</span><span class="p">))</span>
   <span class="c1"># Traceback (most recent call last):</span>
   <span class="c1">#   File &quot;rectangle.py&quot;, line 16, in &lt;module&gt;</span>
   <span class="c1">#     print(next(c))</span>
   <span class="c1"># StopIteration</span>

<span class="n">If</span> <span class="n">the</span> <span class="n">generator</span> <span class="n">exits</span> <span class="n">without</span> <span class="n">yielding</span> <span class="n">another</span> <span class="n">value</span><span class="p">,</span> <span class="n">a</span> <span class="ne">StopIteration</span> <span class="n">exception</span> <span class="ow">is</span> <span class="n">raised</span><span class="o">.</span>
</pre></div>
</div>
</div>
<div class="section" id="receive-values">
<h4>Receive values<a class="headerlink" href="#receive-values" title="Permalink to this headline">¶</a></h4>
<p>‘yield’ can receive value too. Calling the function creates the generator instance, which needs to be advance to next yield using ‘next’ command. Then generator is ready to get the inputs, as shown below,</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># generatorEx.py</span>

<span class="k">def</span> <span class="nf">rxMsg</span><span class="p">():</span>
    <span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
        <span class="n">item</span> <span class="o">=</span> <span class="k">yield</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Message : &quot;</span><span class="p">,</span> <span class="n">item</span><span class="p">)</span>

<span class="n">msg</span> <span class="o">=</span> <span class="n">rxMsg</span><span class="p">()</span>
<span class="k">print</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>  <span class="c1"># &lt;generator object rxMsg at 0xb7049f8c&gt;</span>

<span class="nb">next</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
<span class="c1"># send : Resumes the execution and “sends” a value into the generator function</span>
<span class="n">msg</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="s2">&quot;Hello&quot;</span><span class="p">)</span>
<span class="n">msg</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="s2">&quot;World&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="send-and-receive-values">
<h4>Send and receive values<a class="headerlink" href="#send-and-receive-values" title="Permalink to this headline">¶</a></h4>
<p>Both send and receive message can be combined together in generator. Also, generator can be closed, and next() operation will generate error if it is used after closing the generator,  as shown below,</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># generatorEx.py</span>

<span class="k">def</span> <span class="nf">rxMsg</span><span class="p">():</span>
    <span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
        <span class="n">item</span> <span class="o">=</span> <span class="k">yield</span>
        <span class="k">yield</span><span class="p">(</span><span class="s2">&quot;Message Ack: &quot;</span> <span class="o">+</span> <span class="n">item</span><span class="p">)</span>


<span class="n">msg</span> <span class="o">=</span> <span class="n">rxMsg</span><span class="p">()</span>

<span class="nb">next</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
<span class="n">m1</span> <span class="o">=</span> <span class="n">msg</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="s2">&quot;Hello&quot;</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">m1</span><span class="p">)</span>  <span class="c1"># Message Ack: Hello</span>

<span class="nb">next</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
<span class="n">m2</span> <span class="o">=</span> <span class="n">msg</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="s2">&quot;World&quot;</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">m2</span><span class="p">)</span>  <span class="c1"># Message Ack: World</span>

<span class="n">msg</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>  <span class="c1"># close the generator</span>

<span class="nb">next</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
<span class="c1"># Traceback (most recent call last):</span>
<span class="c1">#   File &quot;rectangle.py&quot;, line 21, in &lt;module&gt;</span>
<span class="c1">#     next(msg)</span>
<span class="c1"># StopIteration</span>
</pre></div>
</div>
</div>
<div class="section" id="return-values-in-generator">
<h4>Return values in generator<a class="headerlink" href="#return-values-in-generator" title="Permalink to this headline">¶</a></h4>
<p>Generator can return values which is displayed with exception,</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># generatorEx.py</span>

<span class="k">def</span> <span class="nf">rxMsg</span><span class="p">():</span>
    <span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
        <span class="n">item</span> <span class="o">=</span> <span class="k">yield</span>
        <span class="k">yield</span><span class="p">(</span><span class="s2">&quot;Message Ack: &quot;</span> <span class="o">+</span> <span class="n">item</span><span class="p">)</span>
        <span class="k">return</span> <span class="s2">&quot;Thanks&quot;</span>


<span class="n">msg</span> <span class="o">=</span> <span class="n">rxMsg</span><span class="p">()</span>

<span class="nb">next</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
<span class="n">m1</span> <span class="o">=</span> <span class="n">msg</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="s2">&quot;Hello&quot;</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">m1</span><span class="p">)</span>  <span class="c1"># Message Ack: Hello</span>

<span class="nb">next</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
<span class="c1"># Traceback (most recent call last):</span>
<span class="c1">#   File &quot;rectangle.py&quot;, line 16, in &lt;module&gt;</span>
<span class="c1">#     next(msg)</span>
<span class="c1"># StopIteration: Thanks</span>

<span class="n">m2</span> <span class="o">=</span> <span class="n">msg</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="s2">&quot;World&quot;</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">m2</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="yield-from-command">
<h4>‘yield from’ command<a class="headerlink" href="#yield-from-command" title="Permalink to this headline">¶</a></h4>
<p>When yield from &lt;expr&gt; is used, it treats the supplied expression as a subiterator. All values produced by that subiterator are passed directly to the caller of the current generator’s methods,</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># generatorEx.py</span>

<span class="k">def</span> <span class="nf">chain</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
    <span class="k">yield from</span> <span class="n">x</span>
    <span class="k">yield from</span> <span class="n">y</span>

<span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
<span class="n">b</span> <span class="o">=</span> <span class="p">[</span><span class="mi">20</span><span class="p">,</span> <span class="mi">30</span><span class="p">]</span>

<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">chain</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
    <span class="k">print</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39; &#39;</span><span class="p">)</span>  <span class="c1"># 1, 2, 3, 20, 30</span>

<span class="k">print</span><span class="p">()</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">chain</span><span class="p">(</span><span class="n">chain</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">a</span><span class="p">),</span> <span class="n">chain</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)):</span>
    <span class="k">print</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39; &#39;</span><span class="p">)</span>  <span class="c1"># 1 2 3 1 2 3 20 30 1 2 3</span>
</pre></div>
</div>
</div>
</div>
</div>
<span id="document-python/unix"></span><div class="section" id="unix-commands">
<h2>Unix commands<a class="headerlink" href="#unix-commands" title="Permalink to this headline">¶</a></h2>
<div class="section" id="introduction">
<h3>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h3>
<p>In this chapter, we will implement some of the Unix commands using ‘Python’.</p>
</div>
<div class="section" id="argparse">
<h3>‘argparse’<a class="headerlink" href="#argparse" title="Permalink to this headline">¶</a></h3>
<p>The ‘argparse’ module is a command line interface. We will use ‘argparse’ module to read the values from the terminal. For more details, please see the online documentation of the module.</p>
<div class="literal-block-wrapper docutils container" id="id1">
<div class="code-block-caption"><span class="caption-text">‘argpase’ module</span><a class="headerlink" href="#id1" title="Permalink to this code">¶</a></div>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1"># argparse_ex.py</span>

<span class="kn">import</span> <span class="nn">argparse</span>

<span class="k">def</span> <span class="nf">mulNum</span><span class="p">(</span><span class="n">a</span><span class="p">):</span>
    <span class="n">p</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">a</span><span class="p">:</span>
        <span class="n">p</span> <span class="o">*=</span> <span class="n">item</span>
    <span class="k">return</span> <span class="n">p</span>

<span class="n">parser</span> <span class="o">=</span> <span class="n">argparse</span><span class="o">.</span><span class="n">ArgumentParser</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s2">&quot;First argparse code&quot;</span><span class="p">)</span>

<span class="c1"># read  list of integers</span>
<span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
        <span class="nb">type</span><span class="o">=</span><span class="nb">int</span><span class="p">,</span> <span class="c1"># type int</span>
        <span class="n">nargs</span><span class="o">=</span><span class="s1">&#39;+&#39;</span><span class="p">,</span> <span class="c1"># read multiple values in a list</span>
        <span class="n">dest</span><span class="o">=</span><span class="s1">&#39;integers&#39;</span><span class="p">,</span> <span class="c1"># name of the attribute returned by argparse</span>
        <span class="n">help</span><span class="o">=</span><span class="s1">&#39;read list of integer: 1 2 3&#39;</span><span class="p">)</span>

<span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
        <span class="s1">&#39;-p&#39;</span><span class="p">,</span> <span class="s1">&#39;--product&#39;</span><span class="p">,</span> <span class="c1"># name -p or --product</span>
        <span class="n">dest</span><span class="o">=</span><span class="s1">&#39;multiply&#39;</span><span class="p">,</span> <span class="c1"># by default &#39;dest=product&#39;</span>
        <span class="n">action</span><span class="o">=</span><span class="s1">&#39;store_const&#39;</span><span class="p">,</span> <span class="c1"># store values</span>
        <span class="n">const</span><span class="o">=</span><span class="n">mulNum</span><span class="p">,</span> <span class="c1"># call function &#39;mulNum&#39;</span>
        <span class="n">help</span><span class="o">=</span><span class="s1">&#39;product of integers&#39;</span>
    <span class="p">)</span>

<span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
        <span class="s1">&#39;--sum&#39;</span><span class="p">,</span>
        <span class="n">dest</span><span class="o">=</span><span class="s1">&#39;accumulate&#39;</span><span class="p">,</span>
        <span class="n">action</span><span class="o">=</span><span class="s1">&#39;store_const&#39;</span><span class="p">,</span>
        <span class="n">const</span><span class="o">=</span><span class="nb">sum</span><span class="p">,</span> <span class="c1"># inbuilt method &#39;sum&#39; to add the values of list</span>
        <span class="n">help</span><span class="o">=</span><span class="s1">&#39;sum of integers&#39;</span>
    <span class="p">)</span>

<span class="n">args</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">()</span> <span class="c1"># save arguments in args</span>

<span class="c1"># if --sum is in command</span>
<span class="k">if</span> <span class="n">args</span><span class="o">.</span><span class="n">accumulate</span><span class="p">:</span>
    <span class="nb">sum</span> <span class="o">=</span> <span class="n">args</span><span class="o">.</span><span class="n">accumulate</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">integers</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="s2">&quot;sum =&quot;</span><span class="p">,</span> <span class="nb">sum</span><span class="p">)</span>

<span class="c1"># if &#39;-p or --product&#39; is in command</span>
<span class="k">if</span> <span class="n">args</span><span class="o">.</span><span class="n">multiply</span> <span class="o">!=</span> <span class="bp">None</span><span class="p">:</span>
<span class="c1"># if args.multiply is not None:</span>
    <span class="c1"># pass arg.integers to arg.multiply, which calls function &#39;mulNum&#39;</span>
    <span class="n">product</span> <span class="o">=</span> <span class="n">args</span><span class="o">.</span><span class="n">multiply</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">integers</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="s2">&quot;product = &quot;</span><span class="p">,</span> <span class="n">product</span><span class="p">)</span>


<span class="c1">####### Execution ####################</span>


<span class="c1">######## Help ############</span>
<span class="c1"># $ python argparse_ex.py -h  (or $ python argparse_ex.py --help)</span>
<span class="c1"># usage: argparse_ex.py [-h] [-p] [--sum] integers [integers ...]</span>

<span class="c1"># First argparse code</span>

<span class="c1"># positional arguments:</span>
  <span class="c1"># integers       read list of integer: 1 2 3</span>

<span class="c1"># optional arguments:</span>
  <span class="c1"># -h, --help     show this help message and exit</span>
  <span class="c1"># -p, --product  product of integers</span>
  <span class="c1"># --sum          sum of integers</span>

<span class="c1">############ Results #########</span>
<span class="c1"># $ python argparse_ex.py 2 5 1 --sum</span>
<span class="c1"># sum = 8</span>

<span class="c1"># $ python argparse_ex.py 2 5 1 -p</span>
<span class="c1"># product =  10</span>

<span class="c1"># $ python argparse_ex.py 2 5 1 --product</span>
<span class="c1"># product =  10</span>

<span class="c1"># $ python argparse_ex.py 2 5 1 -p --sum</span>
<span class="c1"># sum = 8</span>
<span class="c1"># product =  10</span>

<span class="c1"># $ python argparse_ex.py -p 2 5 1 --sum</span>
<span class="c1"># sum = 8</span>
<span class="c1"># product =  10</span>
</pre></div>
</td></tr></table></div>
</div>
</div>
<div class="section" id="find">
<h3>find<a class="headerlink" href="#find" title="Permalink to this headline">¶</a></h3>
<div class="section" id="command-details">
<h4>Command details<a class="headerlink" href="#command-details" title="Permalink to this headline">¶</a></h4>
<p>Create some files and folders inside a directory. Next go to the directory and run following commands. We have following files and folder in the current directory,</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>$ tree .
.
├── box.py
├── contributor.py
├── csv_format.csv
├── datamine.py
├── data.txt
├── expansion.py
├── expansion.txt
├── mathematician.py
├── methodEx.py
├── price2.csv
├── price.csv
├── price_missing.csv
├── price.py
├── pythonic.py
├── ring.py
├── text_format.txt
├── unix_commands
│   ├── argparse_ex.py
│   ├── cat.py
│   ├── file1.txt
│   └── file2.txt
└── wide_text_format.txt
</pre></div>
</div>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="o">(</span>show all items which ends with .py<span class="o">)</span>
$ find -name <span class="s2">&quot;*.py&quot;</span>
./box.py
./contributor.py
./datamine.py
./expansion.py
./mathematician.py
./methodEx.py
./price.py
./pythonic.py
./ring.py
./unix_commands/argparse_ex.py
./unix_commands/cat.py


<span class="o">(</span>show all items which contains <span class="s1">&#39;x&#39;</span> in it<span class="o">)</span>
$ find -name <span class="s2">&quot;*x*&quot;</span>
./box.py
./data.txt
./expansion.py
./expansion.txt
./methodEx.py
./text_format.txt
./unix_commands
./unix_commands/argparse_ex.py
./unix_commands/file1.txt
./unix_commands/file2.txt
./wide_text_format.txt


<span class="o">(</span>show all directories which contains <span class="s1">&#39;x&#39;</span> in it<span class="o">)</span>
$ find -name <span class="s2">&quot;*x*&quot;</span> -type d
./unix_commands


<span class="o">(</span>show all files which contains <span class="s1">&#39;x&#39;</span> in it<span class="o">)</span>
$ find -name <span class="s2">&quot;*x*&quot;</span> -type f
./box.py
./data.txt
./expansion.py
./expansion.txt
./methodEx.py
./text_format.txt
./unix_commands/argparse_ex.py
./unix_commands/file1.txt
./unix_commands/file2.txt
./wide_text_format.txt


<span class="o">(</span><span class="k">for</span> more options, see man page<span class="o">)</span>
$ man find
</pre></div>
</div>
</div>
<div class="section" id="python-implementation">
<h4>Python implementation<a class="headerlink" href="#python-implementation" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li>First, we need to write the code, which can traverse through the directories. Following is the current directory structure,</li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>$ tree .
.
├── argparse_ex.py
├── cat.py
├── f2
│   └── tiger.txt
├── file1.txt
├── file2.txt
├── find_ex.py
└── folder1
    └── dog.txt
</pre></div>
</div>
<ul class="simple">
<li>Python code to traverse through each directory is shown below,</li>
</ul>
<div class="literal-block-wrapper docutils container" id="id2">
<div class="code-block-caption"><span class="caption-text">traverse directories using ‘pathlib’</span><a class="headerlink" href="#id2" title="Permalink to this code">¶</a></div>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1"># find_ex.py</span>

<span class="kn">from</span> <span class="nn">pathlib</span> <span class="kn">import</span> <span class="n">Path</span>

<span class="c1"># location of directory</span>
<span class="n">p</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">)</span> <span class="c1"># current directory</span>

<span class="k">print</span><span class="p">(</span><span class="s2">&quot;All files and folders in current directory:&quot;</span><span class="p">)</span>
<span class="n">all_item</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">p</span><span class="o">.</span><span class="n">iterdir</span><span class="p">()]</span>
<span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">all_item</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>

<span class="c1"># files in current folder</span>
<span class="k">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s2">&quot;Files in current folder:&quot;</span><span class="p">)</span>
<span class="n">files</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">p</span><span class="o">.</span><span class="n">iterdir</span><span class="p">()</span> <span class="k">if</span> <span class="n">x</span><span class="o">.</span><span class="n">is_file</span><span class="p">()]</span>
<span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">files</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>

<span class="c1"># directories in current folder</span>
<span class="k">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="n">directory</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">p</span><span class="o">.</span><span class="n">iterdir</span><span class="p">()</span> <span class="k">if</span> <span class="n">x</span><span class="o">.</span><span class="n">is_dir</span><span class="p">()]</span>
<span class="k">print</span><span class="p">(</span><span class="s2">&quot;Directories in current folder:&quot;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">d</span> <span class="ow">in</span> <span class="n">directory</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
</div>
<p>Below is the output for above code,</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>$ python find_ex.py

All files and folders in current directory:
argparse_ex.py
cat.py
f2
file1.txt
file2.txt
find_ex.py
folder1


Files in current folder:
argparse_ex.py
cat.py
file1.txt
file2.txt
find_ex.py


Directories in current folder:
f2
folder1
</pre></div>
</div>
<ul class="simple">
<li>Below is code to implement the ‘find’ command,</li>
</ul>
<div class="literal-block-wrapper docutils container" id="id3">
<div class="code-block-caption"><span class="caption-text">‘find’ command using Python</span><a class="headerlink" href="#id3" title="Permalink to this code">¶</a></div>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1"># find_ex.py</span>

<span class="kn">import</span> <span class="nn">argparse</span>
<span class="kn">import</span> <span class="nn">sys</span>

<span class="kn">from</span> <span class="nn">pathlib</span> <span class="kn">import</span> <span class="n">Path</span>

<span class="n">parser</span> <span class="o">=</span> <span class="n">argparse</span><span class="o">.</span><span class="n">ArgumentParser</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s2">&quot;Find command&quot;</span><span class="p">)</span>

<span class="c1"># positional argument when defined without --</span>
<span class="c1"># nargs=&#39;*&#39; or &#39;?&#39; is required for default-positional-arg values</span>
<span class="c1"># * : read all command line arguments;  ?: read one command line arg</span>
<span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;location&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">str</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="s2">&quot;*&quot;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="s1">&#39;.&#39;</span><span class="p">)</span>

<span class="c1"># optional argument when defined with --</span>
<span class="c1"># no &#39;nargs&#39; i.e. it&#39;s str (not list of str)</span>
<span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;--name&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">str</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="s2">&quot;*&quot;</span><span class="p">)</span>

<span class="c1"># possible values are &quot;d&quot;, &quot;f&quot; and &quot;all&quot;</span>
<span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;--type&#39;</span><span class="p">,</span><span class="nb">type</span><span class="o">=</span><span class="nb">str</span><span class="p">,</span><span class="n">default</span><span class="o">=</span><span class="s2">&quot;all&quot;</span><span class="p">,</span><span class="n">choices</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;d&quot;</span><span class="p">,</span> <span class="s2">&quot;f&quot;</span><span class="p">,</span> <span class="s2">&quot;all&quot;</span><span class="p">])</span>

<span class="n">args</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">()</span> <span class="c1"># save arguments in args</span>
<span class="n">loc</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">location</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>

<span class="n">items</span><span class="o">=</span><span class="p">[]</span>
<span class="k">for</span> <span class="n">l</span> <span class="ow">in</span> <span class="n">loc</span><span class="o">.</span><span class="n">rglob</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">name</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">args</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="s2">&quot;d&quot;</span> <span class="ow">and</span> <span class="n">l</span><span class="o">.</span><span class="n">is_dir</span><span class="p">():</span>
        <span class="n">items</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">l</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">args</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="s2">&quot;f&quot;</span> <span class="ow">and</span> <span class="n">l</span><span class="o">.</span><span class="n">is_file</span><span class="p">():</span>
        <span class="n">items</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">l</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">args</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="s2">&quot;all&quot;</span><span class="p">:</span>
        <span class="n">items</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">l</span><span class="p">)</span>

<span class="c1"># print output</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">items</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
</div>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="o">(</span>show files which starts with <span class="s1">&#39;f&#39;</span><span class="o">)</span>
$ find -name <span class="s2">&quot;f*&quot;</span> -type <span class="s2">&quot;f&quot;</span>
./file1.txt
./file2.txt
./find_ex.py

$ python find_ex.py --name <span class="s2">&quot;f*&quot;</span>  --type <span class="s2">&quot;f&quot;</span>
file1.txt
file2.txt
find_ex.py



<span class="o">(</span>show directories which starts with <span class="s1">&#39;f&#39;</span><span class="o">)</span>
$ python find_ex.py --name <span class="s2">&quot;f*&quot;</span> --type <span class="s2">&quot;d&quot;</span>
f2
folder1

$ python find_ex.py --name <span class="s2">&quot;f*&quot;</span> --type <span class="s2">&quot;d&quot;</span>
f2
folder1


<span class="o">(</span>show everything which starts with <span class="s1">&#39;f&#39;</span><span class="o">)</span>
$ find -name <span class="s2">&quot;f*&quot;</span>
./f2
./file1.txt
./file2.txt
./find_ex.py
./folder1

$ python find_ex.py --name <span class="s2">&quot;f*&quot;</span>
f2
file1.txt
file2.txt
find_ex.py
folder1


<span class="o">(</span>show all directories<span class="o">)</span>
$ find -type <span class="s2">&quot;d&quot;</span>
.
./f2
./folder1

$ python find_ex.py --type <span class="s2">&quot;d&quot;</span>
f2
folder1

<span class="o">(</span><span class="nb">read</span> t* from different location<span class="o">)</span>
$ python find_ex.py ./folder1 --name <span class="s2">&quot;t*&quot;</span>
$ python find_ex.py ./f2 --name <span class="s2">&quot;t*&quot;</span>
f2/tiger.txt
$ python find_ex.py .. --name <span class="s2">&quot;t*&quot;</span>
../text_format.txt
../unix_commands/f2/tiger.txt
</pre></div>
</div>
</div>
</div>
<div class="section" id="grep">
<h3>grep<a class="headerlink" href="#grep" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>“grep” command is used to find the pattern in the file, e.g. in below code ‘Dog’ is search in the file ‘file2.txt’.</li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>$ grep <span class="s2">&quot;Dog&quot;</span> file2.txt
Dog nudged cat.
</pre></div>
</div>
<ul class="simple">
<li>Below is the implementation of ‘grep’ command using Python</li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># grep_ex.py</span>

<span class="kn">import</span> <span class="nn">argparse</span>
<span class="kn">import</span> <span class="nn">re</span>

<span class="kn">from</span> <span class="nn">pathlib</span> <span class="kn">import</span> <span class="n">Path</span>


<span class="n">parser</span> <span class="o">=</span> <span class="n">argparse</span><span class="o">.</span><span class="n">ArgumentParser</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s2">&quot;grep command&quot;</span><span class="p">)</span>

<span class="c1"># positional argument when defined without --</span>
<span class="c1"># nargs=&#39;?&#39; is required for default-positional-arg values</span>
<span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;pattern&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">str</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;location&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">str</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="s1">&#39;*&#39;</span><span class="p">)</span>


<span class="n">args</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">()</span> <span class="c1"># save arguments in args</span>
<span class="n">loc</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">location</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="c1"># save location</span>
<span class="n">ptrn</span> <span class="o">=</span> <span class="n">args</span><span class="o">.</span><span class="n">pattern</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="c1"># save pattern</span>

<span class="n">lines</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">loc</span><span class="p">)</span><span class="o">.</span><span class="n">readlines</span><span class="p">();</span>

<span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">lines</span><span class="p">:</span>
    <span class="k">if</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">ptrn</span><span class="p">)</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="n">line</span><span class="p">):</span>
        <span class="k">print</span><span class="p">(</span><span class="n">line</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
</pre></div>
</div>
<ul class="simple">
<li>The output of ‘grep’ command are shown below,</li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>$ grep <span class="s2">&quot;nud&quot;</span> file2.txt
Dog nudged cat.
$ python grep_ex.py <span class="s2">&quot;nud&quot;</span> file2.txt
Dog nudged cat.
</pre></div>
</div>
</div>
<div class="section" id="cat">
<h3>cat<a class="headerlink" href="#cat" title="Permalink to this headline">¶</a></h3>
<p>In this section, we will implement the command ‘cat’ of unix. We will write a code to read the name of the files from the command line.</p>
<ul class="simple">
<li>First create few files e.g. ‘file1.txt’ and ‘file2.txt’ etc. and add some contents to it.</li>
<li>Now read these files as shown below, which emulates the functionality of ‘unix’s cat command’,</li>
</ul>
<div class="literal-block-wrapper docutils container" id="py-read-files-cmd">
<div class="code-block-caption"><span class="caption-text">Read files from command line</span><a class="headerlink" href="#py-read-files-cmd" title="Permalink to this code">¶</a></div>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1"># cat.py</span>

<span class="kn">import</span> <span class="nn">argparse</span>

<span class="n">parser</span> <span class="o">=</span> <span class="n">argparse</span><span class="o">.</span><span class="n">ArgumentParser</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s2">&quot;First argparse code&quot;</span><span class="p">)</span>

<span class="c1"># read arguments</span>
<span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
        <span class="n">nargs</span><span class="o">=</span><span class="s1">&#39;+&#39;</span><span class="p">,</span> <span class="c1"># read multiple values in a list</span>
        <span class="n">dest</span><span class="o">=</span><span class="s1">&#39;files&#39;</span><span class="p">,</span> <span class="c1"># name of the attribute returned by argparse</span>
        <span class="n">help</span><span class="o">=</span><span class="s1">&#39;unix &quot;cat&quot; operation&#39;</span><span class="p">)</span>

<span class="c1"># line number</span>
<span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
        <span class="s1">&#39;-n&#39;</span><span class="p">,</span> <span class="s1">&#39;--numbers&#39;</span><span class="p">,</span> <span class="c1"># default &#39;dest=numbers&#39;</span>
        <span class="n">action</span><span class="o">=</span><span class="s1">&#39;store_true&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;print line numbers&#39;</span><span class="p">)</span>

<span class="n">args</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">()</span> <span class="c1"># save arguments in args</span>
<span class="c1"># print(f&quot;args: {args.files}&quot;) # print argument read by &#39;dest=files&#39;</span>
<span class="c1"># print(f&quot;first element: {args.files[0]}&quot;) # print first element of arg.files</span>


<span class="c1"># open and read each files</span>
<span class="n">line_no</span> <span class="o">=</span> <span class="mi">0</span>
<span class="k">for</span> <span class="n">file_name</span> <span class="ow">in</span> <span class="n">args</span><span class="o">.</span><span class="n">files</span><span class="p">:</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">file_name</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">w</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">args</span><span class="o">.</span><span class="n">numbers</span><span class="p">:</span>  <span class="c1"># print data with line numbers</span>
            <span class="k">for</span> <span class="n">data</span> <span class="ow">in</span> <span class="n">w</span><span class="o">.</span><span class="n">readlines</span><span class="p">():</span> <span class="c1"># start from 1</span>
                <span class="n">line_no</span> <span class="o">+=</span> <span class="mi">1</span>
                <span class="k">print</span><span class="p">(</span><span class="s2">&quot;{0:5d}</span><span class="se">\t</span><span class="s2"> {1}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">line_no</span><span class="p">,</span> <span class="n">data</span><span class="p">),</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span> <span class="c1"># print data without line numbers</span>
            <span class="n">data</span> <span class="o">=</span> <span class="n">w</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
            <span class="k">print</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
</div>
<p>Below are the outputs of above code,</p>
<ul>
<li><p class="first">actual ‘cat’ command output</p>
<blockquote>
<div><div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>$ cat file1.txt file2.txt -n
     <span class="m">1</span>  This is cat. Cat is pet.
     <span class="m">2</span>  This is cat. Cat is pet.
     <span class="o">[</span>...<span class="o">]</span>
    <span class="m">15</span>  This is cat. Cat is pet.
    <span class="m">16</span>  Dog nudged cat.
    <span class="m">17</span>  Duck is sleeping.
</pre></div>
</div>
</div></blockquote>
</li>
<li><p class="first">Python code output</p>
<blockquote>
<div><div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>$ python cat.py file1.txt file2.txt -n
     <span class="m">1</span>   This is cat. Cat is pet.
     <span class="m">2</span>   This is cat. Cat is pet.
     <span class="o">[</span>...<span class="o">]</span>
    <span class="m">15</span>   This is cat. Cat is pet.
    <span class="m">16</span>   Dog nudged cat.
    <span class="m">17</span>   Duck is sleeping.
</pre></div>
</div>
</div></blockquote>
</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<ul class="simple">
<li>Try both commands without ‘-n’ as well.</li>
<li>Run below command to see more functionalities of ‘cat’ command; and try to add some of those to ‘cat.py’</li>
</ul>
<div class="last highlight-shell notranslate"><div class="highlight"><pre><span></span>$ man cat
</pre></div>
</div>
</div>
</div>
</div>
<span id="document-python/caffeenv"></span><div class="section" id="caffe-installation-in-ubuntu-16-04">
<h2>Caffe installation in Ubuntu 16.04<a class="headerlink" href="#caffe-installation-in-ubuntu-16-04" title="Permalink to this headline">¶</a></h2>
<div class="section" id="prerequisite">
<h3>Prerequisite<a class="headerlink" href="#prerequisite" title="Permalink to this headline">¶</a></h3>
<p>For GPU support, we need to install CUDA as well.</p>
<ul class="simple">
<li>Ubuntu library installation</li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>sudo apt-get install -y --force-yes build-essential autoconf libtool libopenblas-dev libgflags-dev libgoogle-glog-dev libopencv-dev protobuf-compiler libleveldb-dev liblmdb-dev libhdf5-dev libsnappy-dev libboost-all-dev libssl-dev

sudo apt-get install lsb-core
sudo apt-get install libyaml-cpp-dev


Above should work fine. If something went wrong <span class="k">then</span> use below:
    sudo apt-get install libhdf5*
    sudo apt-get install libglog*
    sudo apt install libgoogle-glog-dev
    sudo apt install libboost*
    sudo apt-get install libleveldb*
    sudo apt-get install liblmdb*
    sudo apt-get install libopenblas*
</pre></div>
</div>
<ul class="simple">
<li>Cuda installation</li>
</ul>
<p>Download and install cuda (cuda-9.0 can be downloaded from <a class="reference external" href="https://developer.nvidia.com/cuda-90-download-archive?target_os=Linux&amp;target_arch=x86_64&amp;target_distro=Ubuntu&amp;target_version=1604&amp;target_type=deblocal">https://developer.nvidia.com/cuda-90-download-archive?target_os=Linux&amp;target_arch=x86_64&amp;target_distro=Ubuntu&amp;target_version=1604&amp;target_type=deblocal</a>)</p>
<p>Extract cuda-repo-ubuntu1604-9-0-local_9.0.176-1_amd64.deb and run the below commands</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>$ sudo dpkg -i cuda-repo-ubuntu1604-9-0-local_9.0.176-1_amd64.deb
<span class="o">(</span>press tab after cuda-repo and <span class="k">then</span> look <span class="k">for</span> .pub file<span class="o">)</span>
$ sudo apt-key add /var/cuda-repo-9-0-local/7fa2af80.pub
$ sudo apt-get update
$ sudo apt-get install cuda
</pre></div>
</div>
<ul class="simple">
<li>Install cuDNN-7.0.5 : Download cuDNN v7.0.5 (Dec 5, 2017), for CUDA 9.0, cuDNN v7.0.5 Library for Linux, which is available at below link,</li>
</ul>
<p><a class="reference external" href="https://developer.nvidia.com/rdp/cudnn-archive">https://developer.nvidia.com/rdp/cudnn-archive</a></p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>Extract cudnn-9.0-linux-x64-v7.tgz and run below commands
<span class="o">(</span><span class="k">do</span> not go inside the extracted folder <span class="s1">&#39;cuda&#39;</span><span class="o">)</span>
sudo cp cuda/include/cudnn.h /usr/local/cuda/include
sudo cp cuda/lib64/libcudnn* /usr/local/cuda/lib64
sudo chmod a+r /usr/local/cuda/include/cudnn.h /usr/local/cuda/lib64/libcudnn*
<span class="nb">cd</span> /usr/local/cuda/lib64/
sudo chmod +r libcudnn.so.7.0.5
sudo ln -sf libcudnn.so.7.0.5 libcudnn.so.7
sudo ln -sf libcudnn.so.7 libcudnn.so
sudo ldconfig
</pre></div>
</div>
<ul class="simple">
<li>Install Anaconda (try to install the default Ubuntu Python)</li>
</ul>
</div>
<div class="section" id="install-packages">
<h3>Install packages<a class="headerlink" href="#install-packages" title="Permalink to this headline">¶</a></h3>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>$ sudo apt-get update
$ sudo apt-get upgrade

$ sudo apt-get install build-essential cmake git unzip pkg-config libjpeg8-dev libtiff5-dev libjasper-dev libpng12-dev libgtk2.0-dev libgtk-3-dev libavcodec-dev libavformat-dev libswscale-dev libv4l-dev libatlas-base-dev gfortran

$ sudo apt-get install libprotobuf-dev libleveldb-dev libsnappy-dev libhdf5-serial-dev protobuf-compiler libboost-all-dev

$ sudo apt-get install libgflags-dev libgoogle-glog-dev liblmdb-dev

$ sudo apt-get install python3-dev python2.7-dev

<span class="o">(</span>below is required to remove the gcc related issues<span class="o">)</span>
$ sudo apt-get install libstdc++6
$ sudo add-apt-repository ppa:ubuntu-toolchain-r/test <span class="p">&amp;</span> sudo apt-get update <span class="p">&amp;</span> sudo apt-get upgrade <span class="o">&amp;&amp;</span> sudo apt-get dist-upgrade
</pre></div>
</div>
</div>
<div class="section" id="create-virtualenv">
<h3>Create virtualenv<a class="headerlink" href="#create-virtualenv" title="Permalink to this headline">¶</a></h3>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>We will need virtualenv-package for this procces of installation; i.e. ‘conda create’ will not work properly. Once caffe is installed successfully, then we can use the below commands as well to create environment.</p>
<p>Also, we need to install ‘libgcc’, if we are using the conda environment to run the caffe as shown below,</p>
<div class="last highlight-shell notranslate"><div class="highlight"><pre><span></span>$ conda create -n caffe <span class="nv">python</span><span class="o">=</span><span class="m">3</span>.6
$ pip install numpy
$ conda install libgcc
</pre></div>
</div>
</div>
<div class="section" id="install-virtualenv">
<h4>Install virtualenv<a class="headerlink" href="#install-virtualenv" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li>Install virtualenv and virtualenvwrapper</li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>$ pip install virtualenv virtualenvwrapper
</pre></div>
</div>
<ul class="simple">
<li>If pip is not available, then use the below command,</li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>$ wget https://bootstrap.pypa.io/get-pip.py
$ sudo python get-pip.py
$ pip install virtualenv virtualenvwrapper
$ sudo rm -rf get-pip.py ~/.cache/pip
</pre></div>
</div>
</div>
<div class="section" id="modify-bashrc">
<h4>Modify .bashrc<a class="headerlink" href="#modify-bashrc" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li>Add below line at the end of .bashrc file if virtual environment is installed in the Anaconda environment</li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="c1"># replace /home/meherp/anaconda2 with correct installation location</span>

<span class="c1"># virtualenv and virtualenvwrapper</span>
<span class="nb">export</span> <span class="nv">WORKON_HOME</span><span class="o">=</span><span class="nv">$HOME</span>/.virtualenvs
<span class="nb">export</span> <span class="nv">VIRTUALENVWRAPPER_PYTHON</span><span class="o">=</span>/home/meherp/anaconda2/bin/python
<span class="nb">source</span> /home/meherp/anaconda2/bin/virtualenvwrapper.sh
</pre></div>
</div>
<ul class="simple">
<li>Add below at the end of .bashrc file if virtualenv environment is created outside the Anaconda environment.</li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="c1"># replace python3 with correct version i.e. python3 or python2</span>

<span class="nb">export</span> <span class="nv">WORKON_HOME</span><span class="o">=</span><span class="nv">$HOME</span>/.virtualenvs
<span class="nb">source</span> /usr/local/bin/virtualenvwrapper.sh
<span class="nb">export</span> <span class="nv">VIRTUALENVWRAPPER_PYTHON</span><span class="o">=</span>/usr/bin/python3
</pre></div>
</div>
</div>
<div class="section" id="id1">
<h4>Create virtualenv<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h4>
<p>Test the installation by creating a virtualenv and installing numpy to it</p>
<p>$ source ~/.bashrc
$ mkvirtualenv caffev -p python3
$ pip install numpy</p>
</div>
</div>
<div class="section" id="install-opencv">
<h3>Install OpenCV<a class="headerlink" href="#install-opencv" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>activate the environment,</li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>$ workon caffev
</pre></div>
</div>
<ul class="simple">
<li>If virtualenv is created using conda, then we need to install below package in every virtualenv,</li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>$ conda install libgcc
</pre></div>
</div>
<ul class="simple">
<li>Install OpenCV-3 using pip command,</li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>pip install opencv-python<span class="o">==</span><span class="m">3</span>.4.5.20
</pre></div>
</div>
<ul class="simple">
<li>Use below if above does not work at the end, while installing the caffe</li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>$ wget -O opencv.zip https://github.com/opencv/opencv/archive/3.4.4.zip
$ wget -O opencv_contrib.zip https://github.com/opencv/opencv_contrib/archive/3.4.4.zip
$ unzip opencv.zip
$ unzip opencv_contrib.zip
$ mv opencv-3.4.4 opencv
$ mv opencv_contrib-3.4.4 opencv_contrib
$ <span class="nb">cd</span> opencv
$ mkdir build
$ <span class="nb">cd</span> build

<span class="o">(</span>give correct location <span class="k">for</span> opencv_contrib<span class="o">)</span>
$ cmake -D <span class="nv">CMAKE_BUILD_TYPE</span><span class="o">=</span>RELEASE <span class="se">\</span>
    -D <span class="nv">CMAKE_INSTALL_PREFIX</span><span class="o">=</span>/usr/local <span class="se">\</span>
    -D <span class="nv">WITH_CUDA</span><span class="o">=</span>OFF <span class="se">\</span>
    -D <span class="nv">INSTALL_PYTHON_EXAMPLES</span><span class="o">=</span>ON <span class="se">\</span>
    -D <span class="nv">OPENCV_EXTRA_MODULES_PATH</span><span class="o">=</span>../../opencv_contrib/modules <span class="se">\</span>
    -D <span class="nv">OPENCV_ENABLE_NONFREE</span><span class="o">=</span>ON <span class="se">\</span>
    -D <span class="nv">BUILD_EXAMPLES</span><span class="o">=</span>ON ..
$ make -j4
$ sudo make install

<span class="o">(</span><span class="k">if</span> sudo failed, use witout sudo and create directory as below<span class="o">)</span>
    make install
    <span class="o">(</span><span class="k">if</span> directory creatinon failed <span class="k">then</span><span class="o">)</span>
    sudo mkdir -p /usr/local/share/OpenCV/licenses
    make install
    <span class="o">(</span>it will fail again<span class="o">)</span>
    sudo make install

$ sudo ldconfig


<span class="o">(</span>add cv to virtualenvs<span class="o">)</span>
<span class="nb">cd</span> ~/.virtualenvs/caffev/lib/python3.5/site-packages/
ln -s /usr/local/python/cv2 cv2
</pre></div>
</div>
</div>
<div class="section" id="install-caffe">
<h3>Install Caffe<a class="headerlink" href="#install-caffe" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Activate the environment,</li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>$ workon caffev
</pre></div>
</div>
<ul class="simple">
<li>If virtualenv is created using conda, then we need to install below package in every virtualenv,</li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>$ conda install libgcc
</pre></div>
</div>
<ul class="simple">
<li>select a location to build the caffe, we will use this location to build the caffe model in future for different examples</li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>$ <span class="nb">cd</span> &lt;location to download and build caffe&gt;
$ git clone https://github.com/BVLC/caffe.git
$ <span class="nb">cd</span> caffe/python
</pre></div>
</div>
<ul class="simple">
<li>Modify requirements.txt as below i.e. remove the version number from the end of python-dateutil,</li>
</ul>
<div class="highlight-text notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17</pre></div></td><td class="code"><div class="highlight"><pre><span></span>Cython&gt;=0.19.2
numpy&gt;=1.7.1
scipy&gt;=0.13.2
scikit-image&gt;=0.9.3
matplotlib&gt;=1.3.1
ipython&gt;=3.0.0
h5py&gt;=2.2.0
leveldb&gt;=0.191
networkx&gt;=1.8.1
nose&gt;=1.3.0
pandas&gt;=0.12.0
<span class="hll">python-dateutil
</span>protobuf&gt;=2.5.0
python-gflags&gt;=2.0
pyyaml&gt;=3.10
Pillow&gt;=2.3.0
six&gt;=1.1.0
</pre></div>
</td></tr></table></div>
<ul class="simple">
<li>Now install packages</li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>$ <span class="k">for</span> req in <span class="k">$(</span>cat requirements.txt<span class="k">)</span><span class="p">;</span> <span class="k">do</span> pip install <span class="nv">$req</span><span class="p">;</span> <span class="k">done</span>
</pre></div>
</div>
<ul class="simple">
<li>Modify following three lines in the caffe/CMakeLists.txt file,</li>
</ul>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>(go to caffe folder)
cd ..

and modify below 3 lines

# (for GPU, put off)
caffe_option(CPU_ONLY  &quot;Build Caffe without CUDA support&quot; OFF) # TODO: rename to USE_CUDA

# (python 2 or 3: 3 in below )
set(python_version &quot;3&quot; CACHE STRING &quot;Specify which Python version to use&quot;)

# (turn on opencv as it is installed)
caffe_option(USE_OPENCV &quot;Build with OpenCV support&quot; ON)
</pre></div>
</div>
<ul class="simple">
<li>Build caffe</li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="c1"># create &#39;build&#39; folder inside caffe</span>

$ mkdir build
$ <span class="nb">cd</span> build
$ cmake ..
$ make all -j4
$ make runtest
</pre></div>
</div>
<ul class="simple">
<li>add below line in .bashrc i.e. location of caffe/python as below,</li>
</ul>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>export PYTHONPATH=/home/meherp/caffe/python:$PYTHONPATH
</pre></div>
</div>
<ul class="simple">
<li>Install necessary packages</li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>$ pip install imutils pillow progressbar2 sh json-minify scikit-learn scikit-image matplotlib
</pre></div>
</div>
<ul class="simple">
<li>Verify installation</li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>$ python

&gt;&gt;&gt; import caffe
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="section" id="index">
<h1>Index<a class="headerlink" href="#index" title="Permalink to this headline">¶</a></h1>
<ul class="simple">
<li><a class="reference internal" href="genindex.html"><span class="std std-ref">Index</span></a></li>
</ul>
</div>


           </div>
           
          </div>
          <footer>
  

  <hr/>
<!-- my settings begins -->
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
                <a href="http://pythondsp.readthedocs.io/en/latest/pythondsp/toc.html" class = "btn btn-info float-left"><span class="fa fa-list-alt">  List of tutorials </span></a> 
                <a href="http://pythondsp.readthedocs.io/en/latest/pythondsp/disclaimer.html" class = "btn btn-danger float-right"> Disclaimer <span class="fa fa-bullhorn"></span></a> 
    </div>

            <hr/>

            <div id="disqus_thread"></div>
            <script>

            /**
            *  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
            *  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables*/
            /*
            var disqus_config = function () {
            this.page.url = PAGE_URL;  // Replace PAGE_URL with your page's canonical URL variable
            this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
            };
            */
            (function() { // DON'T EDIT BELOW THIS LINE
            var d = document, s = d.createElement('script');
            s.src = '//pythondsp.disqus.com/embed.js';
            s.setAttribute('data-timestamp', +new Date());
            (d.head || d.body).appendChild(s);
            })();
            </script>
            <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>  
        
        <hr/>
<!-- my settings ends -->

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017, Meher Krishna Patel.
      
        <span class="commit">
          Revision <code>5e2408bc</code>.
        </span>
      

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      <span class="fa fa-book"> Read the Docs</span>
      v: latest
      <span class="fa fa-caret-down"></span>
    </span>
    <div class="rst-other-versions">
      <dl>
        <dt>Versions</dt>
        
          <dd><a href="/en/latest/">latest</a></dd>
        
      </dl>
      <dl>
        <dt>Downloads</dt>
        
          <dd><a href="//readthedocs.org/projects/pythonguide/downloads/pdf/latest/">pdf</a></dd>
        
          <dd><a href="//readthedocs.org/projects/pythonguide/downloads/htmlzip/latest/">html</a></dd>
        
          <dd><a href="//readthedocs.org/projects/pythonguide/downloads/epub/latest/">epub</a></dd>
        
      </dl>
      <dl>
        <dt>On Read the Docs</dt>
          <dd>
            <a href="//readthedocs.org/projects/pythonguide/?fromdocs=pythonguide">Project Home</a>
          </dd>
          <dd>
            <a href="//readthedocs.org/builds/pythonguide/?fromdocs=pythonguide">Builds</a>
          </dd>
      </dl>
      <hr/>
      Free document hosting provided by <a href="http://www.readthedocs.org">Read the Docs</a>.

    </div>
  </div>



  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
   

</body>
</html>